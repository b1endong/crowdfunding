const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-Di2IkAE_.js","assets/sha2-COL7fwlb.js","assets/embedded-wallet-BAQxn4Pv.js","assets/if-defined-CZsWIg_F.js","assets/index-BfAZmoYS.js","assets/index-BkSKb87B.js","assets/ref-VM7PWGVm.js","assets/index-1ukh8Xp5.js","assets/index-ek7vsds7.js","assets/index-jNVPx4U-.js","assets/index-D13P0xuK.js","assets/index-C5jwKiJe.js","assets/index-BKGQWzCJ.js","assets/index-ZJw0zqVh.js","assets/email-D8KTH912.js","assets/index-CEUMGocj.js","assets/socials-BdLkHmtm.js","assets/index-_DddjQlv.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-DNU2lWnz.js","assets/index-C1JBQxHX.js","assets/index-B8ERW8xG.js","assets/index-CvkZ-ACs.js","assets/swaps-CJhQweCn.js","assets/index-BlV2ELwZ.js","assets/index-BOtzOjpS.js","assets/index-BqVg1Uf7.js","assets/send-_jwy08Iy.js","assets/index-BZWh45Gp.js","assets/index-tfbJfLts.js","assets/receive-DfDShck3.js","assets/index-1N5ud-gQ.js","assets/onramp-UoaVSG0q.js","assets/index-JM0W_DnB.js","assets/index-BXZCl2Cq.js","assets/transactions-kxVKMecF.js","assets/index-CjW7pnqC.js","assets/index-Bvm-Nnmu.js","assets/index-BwZA5iGq.js","assets/index-Bz6gf2k6.js","assets/index-0JsiGDVG.js","assets/w3m-modal-DwhbL1eb.js","assets/SafeProvider-Du9Jwxrl.js","assets/index-CCQ-jUte.js","assets/sha3-DVSzrknm.js","assets/index-CMoJMWhZ.js","assets/index-DS2MfUqX.js"])))=>i.map(i=>d[i]);
var iL=Object.defineProperty;var Qx=n=>{throw TypeError(n)};var aL=(n,e,t)=>e in n?iL(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ne=(n,e,t)=>aL(n,typeof e!="symbol"?e+"":e,t),yA=(n,e,t)=>e.has(n)||Qx("Cannot "+t);var N=(n,e,t)=>(yA(n,e,"read from private field"),t?t.call(n):e.get(n)),ce=(n,e,t)=>e.has(n)?Qx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),H=(n,e,t,r)=>(yA(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),we=(n,e,t)=>(yA(n,e,"access private method"),t);var yg=(n,e,t,r)=>({set _(s){H(n,e,s,t)},get _(){return N(n,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var _a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function gU(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var wA={exports:{}},wg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zx;function oL(){if(Zx)return wg;Zx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,i){var o=null;if(i!==void 0&&(o=""+i),s.key!==void 0&&(o=""+s.key),"key"in s){i={};for(var l in s)l!=="key"&&(i[l]=s[l])}else i=s;return s=i.ref,{$$typeof:n,type:r,key:o,ref:s!==void 0?s:null,props:i}}return wg.Fragment=e,wg.jsx=t,wg.jsxs=t,wg}var Jx;function cL(){return Jx||(Jx=1,wA.exports=oL()),wA.exports}var Le=cL(),bA={exports:{}},st={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xx;function lL(){if(Xx)return st;Xx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=g&&I[g]||I["@@iterator"],typeof I=="function"?I:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,E={};function A(I,G,X){this.props=I,this.context=G,this.refs=E,this.updater=X||b}A.prototype.isReactComponent={},A.prototype.setState=function(I,G){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,G,"setState")},A.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function S(){}S.prototype=A.prototype;function O(I,G,X){this.props=I,this.context=G,this.refs=E,this.updater=X||b}var T=O.prototype=new S;T.constructor=O,v(T,A.prototype),T.isPureReactComponent=!0;var k=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function F(I,G,X,re,le,ge){return X=ge.ref,{$$typeof:n,type:I,key:G,ref:X!==void 0?X:null,props:ge}}function $(I,G){return F(I.type,G,void 0,void 0,void 0,I.props)}function B(I){return typeof I=="object"&&I!==null&&I.$$typeof===n}function q(I){var G={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(X){return G[X]})}var j=/\/+/g;function W(I,G){return typeof I=="object"&&I!==null&&I.key!=null?q(""+I.key):G.toString(36)}function ie(){}function ee(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(ie,ie):(I.status="pending",I.then(function(G){I.status==="pending"&&(I.status="fulfilled",I.value=G)},function(G){I.status==="pending"&&(I.status="rejected",I.reason=G)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function x(I,G,X,re,le){var ge=typeof I;(ge==="undefined"||ge==="boolean")&&(I=null);var me=!1;if(I===null)me=!0;else switch(ge){case"bigint":case"string":case"number":me=!0;break;case"object":switch(I.$$typeof){case n:case e:me=!0;break;case p:return me=I._init,x(me(I._payload),G,X,re,le)}}if(me)return le=le(I),me=re===""?"."+W(I,0):re,k(le)?(X="",me!=null&&(X=me.replace(j,"$&/")+"/"),x(le,G,X,"",function(qe){return qe})):le!=null&&(B(le)&&(le=$(le,X+(le.key==null||I&&I.key===le.key?"":(""+le.key).replace(j,"$&/")+"/")+me)),G.push(le)),1;me=0;var ze=re===""?".":re+":";if(k(I))for(var $e=0;$e<I.length;$e++)re=I[$e],ge=ze+W(re,$e),me+=x(re,G,X,ge,le);else if($e=y(I),typeof $e=="function")for(I=$e.call(I),$e=0;!(re=I.next()).done;)re=re.value,ge=ze+W(re,$e++),me+=x(re,G,X,ge,le);else if(ge==="object"){if(typeof I.then=="function")return x(ee(I),G,X,re,le);throw G=String(I),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return me}function _(I,G,X){if(I==null)return I;var re=[],le=0;return x(I,re,"","",function(ge){return G.call(X,ge,le++)}),re}function M(I){if(I._status===-1){var G=I._result;G=G(),G.then(function(X){(I._status===0||I._status===-1)&&(I._status=1,I._result=X)},function(X){(I._status===0||I._status===-1)&&(I._status=2,I._result=X)}),I._status===-1&&(I._status=0,I._result=G)}if(I._status===1)return I._result.default;throw I._result}var V=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function K(){}return st.Children={map:_,forEach:function(I,G,X){_(I,function(){G.apply(this,arguments)},X)},count:function(I){var G=0;return _(I,function(){G++}),G},toArray:function(I){return _(I,function(G){return G})||[]},only:function(I){if(!B(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},st.Component=A,st.Fragment=t,st.Profiler=s,st.PureComponent=O,st.StrictMode=r,st.Suspense=f,st.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,st.__COMPILER_RUNTIME={__proto__:null,c:function(I){return R.H.useMemoCache(I)}},st.cache=function(I){return function(){return I.apply(null,arguments)}},st.cloneElement=function(I,G,X){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var re=v({},I.props),le=I.key,ge=void 0;if(G!=null)for(me in G.ref!==void 0&&(ge=void 0),G.key!==void 0&&(le=""+G.key),G)!D.call(G,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&G.ref===void 0||(re[me]=G[me]);var me=arguments.length-2;if(me===1)re.children=X;else if(1<me){for(var ze=Array(me),$e=0;$e<me;$e++)ze[$e]=arguments[$e+2];re.children=ze}return F(I.type,le,void 0,void 0,ge,re)},st.createContext=function(I){return I={$$typeof:o,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:i,_context:I},I},st.createElement=function(I,G,X){var re,le={},ge=null;if(G!=null)for(re in G.key!==void 0&&(ge=""+G.key),G)D.call(G,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(le[re]=G[re]);var me=arguments.length-2;if(me===1)le.children=X;else if(1<me){for(var ze=Array(me),$e=0;$e<me;$e++)ze[$e]=arguments[$e+2];le.children=ze}if(I&&I.defaultProps)for(re in me=I.defaultProps,me)le[re]===void 0&&(le[re]=me[re]);return F(I,ge,void 0,void 0,null,le)},st.createRef=function(){return{current:null}},st.forwardRef=function(I){return{$$typeof:l,render:I}},st.isValidElement=B,st.lazy=function(I){return{$$typeof:p,_payload:{_status:-1,_result:I},_init:M}},st.memo=function(I,G){return{$$typeof:h,type:I,compare:G===void 0?null:G}},st.startTransition=function(I){var G=R.T,X={};R.T=X;try{var re=I(),le=R.S;le!==null&&le(X,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(K,V)}catch(ge){V(ge)}finally{R.T=G}},st.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},st.use=function(I){return R.H.use(I)},st.useActionState=function(I,G,X){return R.H.useActionState(I,G,X)},st.useCallback=function(I,G){return R.H.useCallback(I,G)},st.useContext=function(I){return R.H.useContext(I)},st.useDebugValue=function(){},st.useDeferredValue=function(I,G){return R.H.useDeferredValue(I,G)},st.useEffect=function(I,G,X){var re=R.H;if(typeof X=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(I,G)},st.useId=function(){return R.H.useId()},st.useImperativeHandle=function(I,G,X){return R.H.useImperativeHandle(I,G,X)},st.useInsertionEffect=function(I,G){return R.H.useInsertionEffect(I,G)},st.useLayoutEffect=function(I,G){return R.H.useLayoutEffect(I,G)},st.useMemo=function(I,G){return R.H.useMemo(I,G)},st.useOptimistic=function(I,G){return R.H.useOptimistic(I,G)},st.useReducer=function(I,G,X){return R.H.useReducer(I,G,X)},st.useRef=function(I){return R.H.useRef(I)},st.useState=function(I){return R.H.useState(I)},st.useSyncExternalStore=function(I,G,X){return R.H.useSyncExternalStore(I,G,X)},st.useTransition=function(){return R.H.useTransition()},st.version="19.1.0",st}var eI;function q2(){return eI||(eI=1,bA.exports=lL()),bA.exports}var Wn=q2(),EA={exports:{}},bg={},vA={exports:{}},AA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tI;function uL(){return tI||(tI=1,function(n){function e(_,M){var V=_.length;_.push(M);e:for(;0<V;){var K=V-1>>>1,I=_[K];if(0<s(I,M))_[K]=M,_[V]=I,V=K;else break e}}function t(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var M=_[0],V=_.pop();if(V!==M){_[0]=V;e:for(var K=0,I=_.length,G=I>>>1;K<G;){var X=2*(K+1)-1,re=_[X],le=X+1,ge=_[le];if(0>s(re,V))le<I&&0>s(ge,re)?(_[K]=ge,_[le]=V,K=le):(_[K]=re,_[X]=V,K=X);else if(le<I&&0>s(ge,V))_[K]=ge,_[le]=V,K=le;else break e}}return M}function s(_,M){var V=_.sortIndex-M.sortIndex;return V!==0?V:_.id-M.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var f=[],h=[],p=1,g=null,y=3,b=!1,v=!1,E=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function k(_){for(var M=t(h);M!==null;){if(M.callback===null)r(h);else if(M.startTime<=_)r(h),M.sortIndex=M.expirationTime,e(f,M);else break;M=t(h)}}function R(_){if(E=!1,k(_),!v)if(t(f)!==null)v=!0,D||(D=!0,W());else{var M=t(h);M!==null&&x(R,M.startTime-_)}}var D=!1,F=-1,$=5,B=-1;function q(){return A?!0:!(n.unstable_now()-B<$)}function j(){if(A=!1,D){var _=n.unstable_now();B=_;var M=!0;try{e:{v=!1,E&&(E=!1,O(F),F=-1),b=!0;var V=y;try{t:{for(k(_),g=t(f);g!==null&&!(g.expirationTime>_&&q());){var K=g.callback;if(typeof K=="function"){g.callback=null,y=g.priorityLevel;var I=K(g.expirationTime<=_);if(_=n.unstable_now(),typeof I=="function"){g.callback=I,k(_),M=!0;break t}g===t(f)&&r(f),k(_)}else r(f);g=t(f)}if(g!==null)M=!0;else{var G=t(h);G!==null&&x(R,G.startTime-_),M=!1}}break e}finally{g=null,y=V,b=!1}M=void 0}}finally{M?W():D=!1}}}var W;if(typeof T=="function")W=function(){T(j)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ee=ie.port2;ie.port1.onmessage=j,W=function(){ee.postMessage(null)}}else W=function(){S(j,0)};function x(_,M){F=S(function(){_(n.unstable_now())},M)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(_){_.callback=null},n.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<_?Math.floor(1e3/_):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(_){switch(y){case 1:case 2:case 3:var M=3;break;default:M=y}var V=y;y=M;try{return _()}finally{y=V}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(_,M){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var V=y;y=_;try{return M()}finally{y=V}},n.unstable_scheduleCallback=function(_,M,V){var K=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?K+V:K):V=K,_){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=V+I,_={id:p++,callback:M,priorityLevel:_,startTime:V,expirationTime:I,sortIndex:-1},V>K?(_.sortIndex=V,e(h,_),t(f)===null&&_===t(h)&&(E?(O(F),F=-1):E=!0,x(R,V-K))):(_.sortIndex=I,e(f,_),v||b||(v=!0,D||(D=!0,W()))),_},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(_){var M=y;return function(){var V=y;y=M;try{return _.apply(this,arguments)}finally{y=V}}}}(AA)),AA}var nI;function fL(){return nI||(nI=1,vA.exports=uL()),vA.exports}var CA={exports:{}},Er={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rI;function hL(){if(rI)return Er;rI=1;var n=q2();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Er.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Er.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(f,h,null,p)},Er.flushSync=function(f){var h=o.T,p=r.p;try{if(o.T=null,r.p=2,f)return f()}finally{o.T=h,r.p=p,r.d.f()}},Er.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},Er.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Er.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=l(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:b}):p==="script"&&r.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Er.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=l(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},Er.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=l(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Er.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=l(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},Er.requestFormReset=function(f){r.d.r(f)},Er.unstable_batchedUpdates=function(f,h){return f(h)},Er.useFormState=function(f,h,p){return o.H.useFormState(f,h,p)},Er.useFormStatus=function(){return o.H.useHostTransitionStatus()},Er.version="19.1.0",Er}var sI;function dL(){if(sI)return CA.exports;sI=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),CA.exports=hL(),CA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iI;function pL(){if(iI)return bg;iI=1;var n=fL(),e=q2(),t=dL();function r(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function i(a){var c=a,u=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(u=c.return),a=c.return;while(a)}return c.tag===3?u:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(i(a)!==a)throw Error(r(188))}function f(a){var c=a.alternate;if(!c){if(c=i(a),c===null)throw Error(r(188));return c!==a?null:a}for(var u=a,d=c;;){var m=u.return;if(m===null)break;var w=m.alternate;if(w===null){if(d=m.return,d!==null){u=d;continue}break}if(m.child===w.child){for(w=m.child;w;){if(w===u)return l(m),a;if(w===d)return l(m),c;w=w.sibling}throw Error(r(188))}if(u.return!==d.return)u=m,d=w;else{for(var C=!1,U=m.child;U;){if(U===u){C=!0,u=m,d=w;break}if(U===d){C=!0,d=m,u=w;break}U=U.sibling}if(!C){for(U=w.child;U;){if(U===u){C=!0,u=w,d=m;break}if(U===d){C=!0,d=w,u=m;break}U=U.sibling}if(!C)throw Error(r(189))}}if(u.alternate!==d)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?a:c}function h(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=h(a),c!==null)return c;a=a.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),T=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function W(a){return a===null||typeof a!="object"?null:(a=j&&a[j]||a["@@iterator"],typeof a=="function"?a:null)}var ie=Symbol.for("react.client.reference");function ee(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ie?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case v:return"Fragment";case A:return"Profiler";case E:return"StrictMode";case R:return"Suspense";case D:return"SuspenseList";case B:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case T:return(a.displayName||"Context")+".Provider";case O:return(a._context.displayName||"Context")+".Consumer";case k:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case F:return c=a.displayName||null,c!==null?c:ee(a.type)||"Memo";case $:c=a._payload,a=a._init;try{return ee(a(c))}catch{}}return null}var x=Array.isArray,_=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},K=[],I=-1;function G(a){return{current:a}}function X(a){0>I||(a.current=K[I],K[I]=null,I--)}function re(a,c){I++,K[I]=a.current,a.current=c}var le=G(null),ge=G(null),me=G(null),ze=G(null);function $e(a,c){switch(re(me,c),re(ge,a),re(le,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?_x(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=_x(c),a=Sx(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}X(le),re(le,a)}function qe(){X(le),X(ge),X(me)}function Ct(a){a.memoizedState!==null&&re(ze,a);var c=le.current,u=Sx(c,a.type);c!==u&&(re(ge,a),re(le,u))}function rn(a){ge.current===a&&(X(le),X(ge)),ze.current===a&&(X(ze),hg._currentValue=V)}var $n=Object.prototype.hasOwnProperty,_n=n.unstable_scheduleCallback,nr=n.unstable_cancelCallback,Go=n.unstable_shouldYield,bf=n.unstable_requestPaint,Vs=n.unstable_now,sv=n.unstable_getCurrentPriorityLevel,wp=n.unstable_ImmediatePriority,bp=n.unstable_UserBlockingPriority,Ko=n.unstable_NormalPriority,r0=n.unstable_LowPriority,Ep=n.unstable_IdlePriority,s0=n.log,i0=n.unstable_setDisableYieldValue,Wo=null,Pr=null;function Xi(a){if(typeof s0=="function"&&i0(a),Pr&&typeof Pr.setStrictMode=="function")try{Pr.setStrictMode(Wo,a)}catch{}}var Dr=Math.clz32?Math.clz32:V6,iv=Math.log,q6=Math.LN2;function V6(a){return a>>>=0,a===0?32:31-(iv(a)/q6|0)|0}var a0=256,o0=4194304;function Cl(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function c0(a,c,u){var d=a.pendingLanes;if(d===0)return 0;var m=0,w=a.suspendedLanes,C=a.pingedLanes;a=a.warmLanes;var U=d&134217727;return U!==0?(d=U&~w,d!==0?m=Cl(d):(C&=U,C!==0?m=Cl(C):u||(u=U&~a,u!==0&&(m=Cl(u))))):(U=d&~w,U!==0?m=Cl(U):C!==0?m=Cl(C):u||(u=d&~a,u!==0&&(m=Cl(u)))),m===0?0:c!==0&&c!==m&&(c&w)===0&&(w=m&-m,u=c&-c,w>=u||w===32&&(u&4194048)!==0)?c:m}function vp(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function G6(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oN(){var a=a0;return a0<<=1,(a0&4194048)===0&&(a0=256),a}function cN(){var a=o0;return o0<<=1,(o0&62914560)===0&&(o0=4194304),a}function av(a){for(var c=[],u=0;31>u;u++)c.push(a);return c}function Ap(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function K6(a,c,u,d,m,w){var C=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var U=a.entanglements,z=a.expirationTimes,te=a.hiddenUpdates;for(u=C&~u;0<u;){var ue=31-Dr(u),he=1<<ue;U[ue]=0,z[ue]=-1;var se=te[ue];if(se!==null)for(te[ue]=null,ue=0;ue<se.length;ue++){var ae=se[ue];ae!==null&&(ae.lane&=-536870913)}u&=~he}d!==0&&lN(a,d,0),w!==0&&m===0&&a.tag!==0&&(a.suspendedLanes|=w&~(C&~c))}function lN(a,c,u){a.pendingLanes|=c,a.suspendedLanes&=~c;var d=31-Dr(c);a.entangledLanes|=c,a.entanglements[d]=a.entanglements[d]|1073741824|u&4194090}function uN(a,c){var u=a.entangledLanes|=c;for(a=a.entanglements;u;){var d=31-Dr(u),m=1<<d;m&c|a[d]&c&&(a[d]|=c),u&=~m}}function ov(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function cv(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function fN(){var a=M.p;return a!==0?a:(a=window.event,a===void 0?32:qx(a.type))}function W6(a,c){var u=M.p;try{return M.p=a,c()}finally{M.p=u}}var Yo=Math.random().toString(36).slice(2),wr="__reactFiber$"+Yo,Wr="__reactProps$"+Yo,Ef="__reactContainer$"+Yo,lv="__reactEvents$"+Yo,Y6="__reactListeners$"+Yo,Q6="__reactHandles$"+Yo,hN="__reactResources$"+Yo,Cp="__reactMarker$"+Yo;function uv(a){delete a[wr],delete a[Wr],delete a[lv],delete a[Y6],delete a[Q6]}function vf(a){var c=a[wr];if(c)return c;for(var u=a.parentNode;u;){if(c=u[Ef]||u[wr]){if(u=c.alternate,c.child!==null||u!==null&&u.child!==null)for(a=xx(a);a!==null;){if(u=a[wr])return u;a=xx(a)}return c}a=u,u=a.parentNode}return null}function Af(a){if(a=a[wr]||a[Ef]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function _p(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(r(33))}function Cf(a){var c=a[hN];return c||(c=a[hN]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Fn(a){a[Cp]=!0}var dN=new Set,pN={};function _l(a,c){_f(a,c),_f(a+"Capture",c)}function _f(a,c){for(pN[a]=c,a=0;a<c.length;a++)dN.add(c[a])}var Z6=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gN={},mN={};function J6(a){return $n.call(mN,a)?!0:$n.call(gN,a)?!1:Z6.test(a)?mN[a]=!0:(gN[a]=!0,!1)}function l0(a,c,u){if(J6(c))if(u===null)a.removeAttribute(c);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var d=c.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+u)}}function u0(a,c,u){if(u===null)a.removeAttribute(c);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+u)}}function Ha(a,c,u,d){if(d===null)a.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(c,u,""+d)}}var fv,yN;function Sf(a){if(fv===void 0)try{throw Error()}catch(u){var c=u.stack.trim().match(/\n( *(at )?)/);fv=c&&c[1]||"",yN=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fv+a+yN}var hv=!1;function dv(a,c){if(!a||hv)return"";hv=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(c){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ae){var se=ae}Reflect.construct(a,[],he)}else{try{he.call()}catch(ae){se=ae}a.call(he.prototype)}}else{try{throw Error()}catch(ae){se=ae}(he=a())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ae){if(ae&&se&&typeof ae.stack=="string")return[ae.stack,se.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),C=w[0],U=w[1];if(C&&U){var z=C.split(`
`),te=U.split(`
`);for(m=d=0;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;for(;m<te.length&&!te[m].includes("DetermineComponentFrameRoot");)m++;if(d===z.length||m===te.length)for(d=z.length-1,m=te.length-1;1<=d&&0<=m&&z[d]!==te[m];)m--;for(;1<=d&&0<=m;d--,m--)if(z[d]!==te[m]){if(d!==1||m!==1)do if(d--,m--,0>m||z[d]!==te[m]){var ue=`
`+z[d].replace(" at new "," at ");return a.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",a.displayName)),ue}while(1<=d&&0<=m);break}}}finally{hv=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?Sf(u):""}function X6(a){switch(a.tag){case 26:case 27:case 5:return Sf(a.type);case 16:return Sf("Lazy");case 13:return Sf("Suspense");case 19:return Sf("SuspenseList");case 0:case 15:return dv(a.type,!1);case 11:return dv(a.type.render,!1);case 1:return dv(a.type,!0);case 31:return Sf("Activity");default:return""}}function wN(a){try{var c="";do c+=X6(a),a=a.return;while(a);return c}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Gs(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function bN(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function eB(a){var c=bN(a)?"checked":"value",u=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),d=""+a[c];if(!a.hasOwnProperty(c)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,w=u.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return m.call(this)},set:function(C){d=""+C,w.call(this,C)}}),Object.defineProperty(a,c,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function f0(a){a._valueTracker||(a._valueTracker=eB(a))}function EN(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var u=c.getValue(),d="";return a&&(d=bN(a)?a.checked?"true":"false":a.value),a=d,a!==u?(c.setValue(a),!0):!1}function h0(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var tB=/[\n"\\]/g;function Ks(a){return a.replace(tB,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function pv(a,c,u,d,m,w,C,U){a.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?a.type=C:a.removeAttribute("type"),c!=null?C==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+Gs(c)):a.value!==""+Gs(c)&&(a.value=""+Gs(c)):C!=="submit"&&C!=="reset"||a.removeAttribute("value"),c!=null?gv(a,C,Gs(c)):u!=null?gv(a,C,Gs(u)):d!=null&&a.removeAttribute("value"),m==null&&w!=null&&(a.defaultChecked=!!w),m!=null&&(a.checked=m&&typeof m!="function"&&typeof m!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?a.name=""+Gs(U):a.removeAttribute("name")}function vN(a,c,u,d,m,w,C,U){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.type=w),c!=null||u!=null){if(!(w!=="submit"&&w!=="reset"||c!=null))return;u=u!=null?""+Gs(u):"",c=c!=null?""+Gs(c):u,U||c===a.value||(a.value=c),a.defaultValue=c}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=U?a.checked:!!d,a.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.name=C)}function gv(a,c,u){c==="number"&&h0(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function Nf(a,c,u,d){if(a=a.options,c){c={};for(var m=0;m<u.length;m++)c["$"+u[m]]=!0;for(u=0;u<a.length;u++)m=c.hasOwnProperty("$"+a[u].value),a[u].selected!==m&&(a[u].selected=m),m&&d&&(a[u].defaultSelected=!0)}else{for(u=""+Gs(u),c=null,m=0;m<a.length;m++){if(a[m].value===u){a[m].selected=!0,d&&(a[m].defaultSelected=!0);return}c!==null||a[m].disabled||(c=a[m])}c!==null&&(c.selected=!0)}}function AN(a,c,u){if(c!=null&&(c=""+Gs(c),c!==a.value&&(a.value=c),u==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=u!=null?""+Gs(u):""}function CN(a,c,u,d){if(c==null){if(d!=null){if(u!=null)throw Error(r(92));if(x(d)){if(1<d.length)throw Error(r(93));d=d[0]}u=d}u==null&&(u=""),c=u}u=Gs(c),a.defaultValue=u,d=a.textContent,d===u&&d!==""&&d!==null&&(a.value=d)}function Tf(a,c){if(c){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=c;return}}a.textContent=c}var nB=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _N(a,c,u){var d=c.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":d?a.setProperty(c,u):typeof u!="number"||u===0||nB.has(c)?c==="float"?a.cssFloat=u:a[c]=(""+u).trim():a[c]=u+"px"}function SN(a,c,u){if(c!=null&&typeof c!="object")throw Error(r(62));if(a=a.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||c!=null&&c.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var m in c)d=c[m],c.hasOwnProperty(m)&&u[m]!==d&&_N(a,m,d)}else for(var w in c)c.hasOwnProperty(w)&&_N(a,w,c[w])}function mv(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rB=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sB=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function d0(a){return sB.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var yv=null;function wv(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Of=null,xf=null;function NN(a){var c=Af(a);if(c&&(a=c.stateNode)){var u=a[Wr]||null;e:switch(a=c.stateNode,c.type){case"input":if(pv(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),c=u.name,u.type==="radio"&&c!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Ks(""+c)+'"][type="radio"]'),c=0;c<u.length;c++){var d=u[c];if(d!==a&&d.form===a.form){var m=d[Wr]||null;if(!m)throw Error(r(90));pv(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(c=0;c<u.length;c++)d=u[c],d.form===a.form&&EN(d)}break e;case"textarea":AN(a,u.value,u.defaultValue);break e;case"select":c=u.value,c!=null&&Nf(a,!!u.multiple,c,!1)}}}var bv=!1;function TN(a,c,u){if(bv)return a(c,u);bv=!0;try{var d=a(c);return d}finally{if(bv=!1,(Of!==null||xf!==null)&&(J0(),Of&&(c=Of,a=xf,xf=Of=null,NN(c),a)))for(c=0;c<a.length;c++)NN(a[c])}}function Sp(a,c){var u=a.stateNode;if(u===null)return null;var d=u[Wr]||null;if(d===null)return null;u=d[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(r(231,c,typeof u));return u}var ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ev=!1;if(ja)try{var Np={};Object.defineProperty(Np,"passive",{get:function(){Ev=!0}}),window.addEventListener("test",Np,Np),window.removeEventListener("test",Np,Np)}catch{Ev=!1}var Qo=null,vv=null,p0=null;function ON(){if(p0)return p0;var a,c=vv,u=c.length,d,m="value"in Qo?Qo.value:Qo.textContent,w=m.length;for(a=0;a<u&&c[a]===m[a];a++);var C=u-a;for(d=1;d<=C&&c[u-d]===m[w-d];d++);return p0=m.slice(a,1<d?1-d:void 0)}function g0(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function m0(){return!0}function xN(){return!1}function Yr(a){function c(u,d,m,w,C){this._reactName=u,this._targetInst=m,this.type=d,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var U in a)a.hasOwnProperty(U)&&(u=a[U],this[U]=u?u(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?m0:xN,this.isPropagationStopped=xN,this}return p(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=m0)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=m0)},persist:function(){},isPersistent:m0}),c}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},y0=Yr(Sl),Tp=p({},Sl,{view:0,detail:0}),iB=Yr(Tp),Av,Cv,Op,w0=p({},Tp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sv,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Op&&(Op&&a.type==="mousemove"?(Av=a.screenX-Op.screenX,Cv=a.screenY-Op.screenY):Cv=Av=0,Op=a),Av)},movementY:function(a){return"movementY"in a?a.movementY:Cv}}),IN=Yr(w0),aB=p({},w0,{dataTransfer:0}),oB=Yr(aB),cB=p({},Tp,{relatedTarget:0}),_v=Yr(cB),lB=p({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),uB=Yr(lB),fB=p({},Sl,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),hB=Yr(fB),dB=p({},Sl,{data:0}),RN=Yr(dB),pB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yB(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=mB[a])?!!c[a]:!1}function Sv(){return yB}var wB=p({},Tp,{key:function(a){if(a.key){var c=pB[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=g0(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?gB[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sv,charCode:function(a){return a.type==="keypress"?g0(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?g0(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),bB=Yr(wB),EB=p({},w0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),PN=Yr(EB),vB=p({},Tp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sv}),AB=Yr(vB),CB=p({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),_B=Yr(CB),SB=p({},w0,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),NB=Yr(SB),TB=p({},Sl,{newState:0,oldState:0}),OB=Yr(TB),xB=[9,13,27,32],Nv=ja&&"CompositionEvent"in window,xp=null;ja&&"documentMode"in document&&(xp=document.documentMode);var IB=ja&&"TextEvent"in window&&!xp,DN=ja&&(!Nv||xp&&8<xp&&11>=xp),UN=" ",kN=!1;function BN(a,c){switch(a){case"keyup":return xB.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MN(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var If=!1;function RB(a,c){switch(a){case"compositionend":return MN(c);case"keypress":return c.which!==32?null:(kN=!0,UN);case"textInput":return a=c.data,a===UN&&kN?null:a;default:return null}}function PB(a,c){if(If)return a==="compositionend"||!Nv&&BN(a,c)?(a=ON(),p0=vv=Qo=null,If=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return DN&&c.locale!=="ko"?null:c.data;default:return null}}var DB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LN(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!DB[a.type]:c==="textarea"}function $N(a,c,u,d){Of?xf?xf.push(d):xf=[d]:Of=d,c=sw(c,"onChange"),0<c.length&&(u=new y0("onChange","change",null,u,d),a.push({event:u,listeners:c}))}var Ip=null,Rp=null;function UB(a){bx(a,0)}function b0(a){var c=_p(a);if(EN(c))return a}function FN(a,c){if(a==="change")return c}var HN=!1;if(ja){var Tv;if(ja){var Ov="oninput"in document;if(!Ov){var jN=document.createElement("div");jN.setAttribute("oninput","return;"),Ov=typeof jN.oninput=="function"}Tv=Ov}else Tv=!1;HN=Tv&&(!document.documentMode||9<document.documentMode)}function zN(){Ip&&(Ip.detachEvent("onpropertychange",qN),Rp=Ip=null)}function qN(a){if(a.propertyName==="value"&&b0(Rp)){var c=[];$N(c,Rp,a,wv(a)),TN(UB,c)}}function kB(a,c,u){a==="focusin"?(zN(),Ip=c,Rp=u,Ip.attachEvent("onpropertychange",qN)):a==="focusout"&&zN()}function BB(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return b0(Rp)}function MB(a,c){if(a==="click")return b0(c)}function LB(a,c){if(a==="input"||a==="change")return b0(c)}function $B(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var vs=typeof Object.is=="function"?Object.is:$B;function Pp(a,c){if(vs(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var u=Object.keys(a),d=Object.keys(c);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var m=u[d];if(!$n.call(c,m)||!vs(a[m],c[m]))return!1}return!0}function VN(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function GN(a,c){var u=VN(a);a=0;for(var d;u;){if(u.nodeType===3){if(d=a+u.textContent.length,a<=c&&d>=c)return{node:u,offset:c-a};a=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=VN(u)}}function KN(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?KN(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function WN(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=h0(a.document);c instanceof a.HTMLIFrameElement;){try{var u=typeof c.contentWindow.location.href=="string"}catch{u=!1}if(u)a=c.contentWindow;else break;c=h0(a.document)}return c}function xv(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var FB=ja&&"documentMode"in document&&11>=document.documentMode,Rf=null,Iv=null,Dp=null,Rv=!1;function YN(a,c,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Rv||Rf==null||Rf!==h0(d)||(d=Rf,"selectionStart"in d&&xv(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Dp&&Pp(Dp,d)||(Dp=d,d=sw(Iv,"onSelect"),0<d.length&&(c=new y0("onSelect","select",null,c,u),a.push({event:c,listeners:d}),c.target=Rf)))}function Nl(a,c){var u={};return u[a.toLowerCase()]=c.toLowerCase(),u["Webkit"+a]="webkit"+c,u["Moz"+a]="moz"+c,u}var Pf={animationend:Nl("Animation","AnimationEnd"),animationiteration:Nl("Animation","AnimationIteration"),animationstart:Nl("Animation","AnimationStart"),transitionrun:Nl("Transition","TransitionRun"),transitionstart:Nl("Transition","TransitionStart"),transitioncancel:Nl("Transition","TransitionCancel"),transitionend:Nl("Transition","TransitionEnd")},Pv={},QN={};ja&&(QN=document.createElement("div").style,"AnimationEvent"in window||(delete Pf.animationend.animation,delete Pf.animationiteration.animation,delete Pf.animationstart.animation),"TransitionEvent"in window||delete Pf.transitionend.transition);function Tl(a){if(Pv[a])return Pv[a];if(!Pf[a])return a;var c=Pf[a],u;for(u in c)if(c.hasOwnProperty(u)&&u in QN)return Pv[a]=c[u];return a}var ZN=Tl("animationend"),JN=Tl("animationiteration"),XN=Tl("animationstart"),HB=Tl("transitionrun"),jB=Tl("transitionstart"),zB=Tl("transitioncancel"),eT=Tl("transitionend"),tT=new Map,Dv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dv.push("scrollEnd");function Ai(a,c){tT.set(a,c),_l(c,[a])}var nT=new WeakMap;function Ws(a,c){if(typeof a=="object"&&a!==null){var u=nT.get(a);return u!==void 0?u:(c={value:a,source:c,stack:wN(c)},nT.set(a,c),c)}return{value:a,source:c,stack:wN(c)}}var Ys=[],Df=0,Uv=0;function E0(){for(var a=Df,c=Uv=Df=0;c<a;){var u=Ys[c];Ys[c++]=null;var d=Ys[c];Ys[c++]=null;var m=Ys[c];Ys[c++]=null;var w=Ys[c];if(Ys[c++]=null,d!==null&&m!==null){var C=d.pending;C===null?m.next=m:(m.next=C.next,C.next=m),d.pending=m}w!==0&&rT(u,m,w)}}function v0(a,c,u,d){Ys[Df++]=a,Ys[Df++]=c,Ys[Df++]=u,Ys[Df++]=d,Uv|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function kv(a,c,u,d){return v0(a,c,u,d),A0(a)}function Uf(a,c){return v0(a,null,null,c),A0(a)}function rT(a,c,u){a.lanes|=u;var d=a.alternate;d!==null&&(d.lanes|=u);for(var m=!1,w=a.return;w!==null;)w.childLanes|=u,d=w.alternate,d!==null&&(d.childLanes|=u),w.tag===22&&(a=w.stateNode,a===null||a._visibility&1||(m=!0)),a=w,w=w.return;return a.tag===3?(w=a.stateNode,m&&c!==null&&(m=31-Dr(u),a=w.hiddenUpdates,d=a[m],d===null?a[m]=[c]:d.push(c),c.lane=u|536870912),w):null}function A0(a){if(50<sg)throw sg=0,H1=null,Error(r(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var kf={};function qB(a,c,u,d){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function As(a,c,u,d){return new qB(a,c,u,d)}function Bv(a){return a=a.prototype,!(!a||!a.isReactComponent)}function za(a,c){var u=a.alternate;return u===null?(u=As(a.tag,c,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=c,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,c=a.dependencies,u.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function sT(a,c){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,c=u.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function C0(a,c,u,d,m,w){var C=0;if(d=a,typeof a=="function")Bv(a)&&(C=1);else if(typeof a=="string")C=GM(a,u,le.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case B:return a=As(31,u,c,m),a.elementType=B,a.lanes=w,a;case v:return Ol(u.children,m,w,c);case E:C=8,m|=24;break;case A:return a=As(12,u,c,m|2),a.elementType=A,a.lanes=w,a;case R:return a=As(13,u,c,m),a.elementType=R,a.lanes=w,a;case D:return a=As(19,u,c,m),a.elementType=D,a.lanes=w,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case S:case T:C=10;break e;case O:C=9;break e;case k:C=11;break e;case F:C=14;break e;case $:C=16,d=null;break e}C=29,u=Error(r(130,a===null?"null":typeof a,"")),d=null}return c=As(C,u,c,m),c.elementType=a,c.type=d,c.lanes=w,c}function Ol(a,c,u,d){return a=As(7,a,d,c),a.lanes=u,a}function Mv(a,c,u){return a=As(6,a,null,c),a.lanes=u,a}function Lv(a,c,u){return c=As(4,a.children!==null?a.children:[],a.key,c),c.lanes=u,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var Bf=[],Mf=0,_0=null,S0=0,Qs=[],Zs=0,xl=null,qa=1,Va="";function Il(a,c){Bf[Mf++]=S0,Bf[Mf++]=_0,_0=a,S0=c}function iT(a,c,u){Qs[Zs++]=qa,Qs[Zs++]=Va,Qs[Zs++]=xl,xl=a;var d=qa;a=Va;var m=32-Dr(d)-1;d&=~(1<<m),u+=1;var w=32-Dr(c)+m;if(30<w){var C=m-m%5;w=(d&(1<<C)-1).toString(32),d>>=C,m-=C,qa=1<<32-Dr(c)+m|u<<m|d,Va=w+a}else qa=1<<w|u<<m|d,Va=a}function $v(a){a.return!==null&&(Il(a,1),iT(a,1,0))}function Fv(a){for(;a===_0;)_0=Bf[--Mf],Bf[Mf]=null,S0=Bf[--Mf],Bf[Mf]=null;for(;a===xl;)xl=Qs[--Zs],Qs[Zs]=null,Va=Qs[--Zs],Qs[Zs]=null,qa=Qs[--Zs],Qs[Zs]=null}var Ur=null,pn=null,Dt=!1,Rl=null,ea=!1,Hv=Error(r(519));function Pl(a){var c=Error(r(418,""));throw Bp(Ws(c,a)),Hv}function aT(a){var c=a.stateNode,u=a.type,d=a.memoizedProps;switch(c[wr]=a,c[Wr]=d,u){case"dialog":pt("cancel",c),pt("close",c);break;case"iframe":case"object":case"embed":pt("load",c);break;case"video":case"audio":for(u=0;u<ag.length;u++)pt(ag[u],c);break;case"source":pt("error",c);break;case"img":case"image":case"link":pt("error",c),pt("load",c);break;case"details":pt("toggle",c);break;case"input":pt("invalid",c),vN(c,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),f0(c);break;case"select":pt("invalid",c);break;case"textarea":pt("invalid",c),CN(c,d.value,d.defaultValue,d.children),f0(c)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||c.textContent===""+u||d.suppressHydrationWarning===!0||Cx(c.textContent,u)?(d.popover!=null&&(pt("beforetoggle",c),pt("toggle",c)),d.onScroll!=null&&pt("scroll",c),d.onScrollEnd!=null&&pt("scrollend",c),d.onClick!=null&&(c.onclick=iw),c=!0):c=!1,c||Pl(a)}function oT(a){for(Ur=a.return;Ur;)switch(Ur.tag){case 5:case 13:ea=!1;return;case 27:case 3:ea=!0;return;default:Ur=Ur.return}}function Up(a){if(a!==Ur)return!1;if(!Dt)return oT(a),Dt=!0,!1;var c=a.tag,u;if((u=c!==3&&c!==27)&&((u=c===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||rA(a.type,a.memoizedProps)),u=!u),u&&pn&&Pl(a),oT(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(u=a.data,u==="/$"){if(c===0){pn=_i(a.nextSibling);break e}c--}else u!=="$"&&u!=="$!"&&u!=="$?"||c++;a=a.nextSibling}pn=null}}else c===27?(c=pn,hc(a.type)?(a=oA,oA=null,pn=a):pn=c):pn=Ur?_i(a.stateNode.nextSibling):null;return!0}function kp(){pn=Ur=null,Dt=!1}function cT(){var a=Rl;return a!==null&&(Jr===null?Jr=a:Jr.push.apply(Jr,a),Rl=null),a}function Bp(a){Rl===null?Rl=[a]:Rl.push(a)}var jv=G(null),Dl=null,Ga=null;function Zo(a,c,u){re(jv,c._currentValue),c._currentValue=u}function Ka(a){a._currentValue=jv.current,X(jv)}function zv(a,c,u){for(;a!==null;){var d=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,d!==null&&(d.childLanes|=c)):d!==null&&(d.childLanes&c)!==c&&(d.childLanes|=c),a===u)break;a=a.return}}function qv(a,c,u,d){var m=a.child;for(m!==null&&(m.return=a);m!==null;){var w=m.dependencies;if(w!==null){var C=m.child;w=w.firstContext;e:for(;w!==null;){var U=w;w=m;for(var z=0;z<c.length;z++)if(U.context===c[z]){w.lanes|=u,U=w.alternate,U!==null&&(U.lanes|=u),zv(w.return,u,a),d||(C=null);break e}w=U.next}}else if(m.tag===18){if(C=m.return,C===null)throw Error(r(341));C.lanes|=u,w=C.alternate,w!==null&&(w.lanes|=u),zv(C,u,a),C=null}else C=m.child;if(C!==null)C.return=m;else for(C=m;C!==null;){if(C===a){C=null;break}if(m=C.sibling,m!==null){m.return=C.return,C=m;break}C=C.return}m=C}}function Mp(a,c,u,d){a=null;for(var m=c,w=!1;m!==null;){if(!w){if((m.flags&524288)!==0)w=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var C=m.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var U=m.type;vs(m.pendingProps.value,C.value)||(a!==null?a.push(U):a=[U])}}else if(m===ze.current){if(C=m.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(a!==null?a.push(hg):a=[hg])}m=m.return}a!==null&&qv(c,a,u,d),c.flags|=262144}function N0(a){for(a=a.firstContext;a!==null;){if(!vs(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ul(a){Dl=a,Ga=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function br(a){return lT(Dl,a)}function T0(a,c){return Dl===null&&Ul(a),lT(a,c)}function lT(a,c){var u=c._currentValue;if(c={context:c,memoizedValue:u,next:null},Ga===null){if(a===null)throw Error(r(308));Ga=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else Ga=Ga.next=c;return u}var VB=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(u,d){a.push(d)}};this.abort=function(){c.aborted=!0,a.forEach(function(u){return u()})}},GB=n.unstable_scheduleCallback,KB=n.unstable_NormalPriority,In={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vv(){return{controller:new VB,data:new Map,refCount:0}}function Lp(a){a.refCount--,a.refCount===0&&GB(KB,function(){a.controller.abort()})}var $p=null,Gv=0,Lf=0,$f=null;function WB(a,c){if($p===null){var u=$p=[];Gv=0,Lf=W1(),$f={status:"pending",value:void 0,then:function(d){u.push(d)}}}return Gv++,c.then(uT,uT),c}function uT(){if(--Gv===0&&$p!==null){$f!==null&&($f.status="fulfilled");var a=$p;$p=null,Lf=0,$f=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function YB(a,c){var u=[],d={status:"pending",value:null,reason:null,then:function(m){u.push(m)}};return a.then(function(){d.status="fulfilled",d.value=c;for(var m=0;m<u.length;m++)(0,u[m])(c)},function(m){for(d.status="rejected",d.reason=m,m=0;m<u.length;m++)(0,u[m])(void 0)}),d}var fT=_.S;_.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&WB(a,c),fT!==null&&fT(a,c)};var kl=G(null);function Kv(){var a=kl.current;return a!==null?a:en.pooledCache}function O0(a,c){c===null?re(kl,kl.current):re(kl,c.pool)}function hT(){var a=Kv();return a===null?null:{parent:In._currentValue,pool:a}}var Fp=Error(r(460)),dT=Error(r(474)),x0=Error(r(542)),Wv={then:function(){}};function pT(a){return a=a.status,a==="fulfilled"||a==="rejected"}function I0(){}function gT(a,c,u){switch(u=a[u],u===void 0?a.push(c):u!==c&&(c.then(I0,I0),c=u),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,yT(a),a;default:if(typeof c.status=="string")c.then(I0,I0);else{if(a=en,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=c,a.status="pending",a.then(function(d){if(c.status==="pending"){var m=c;m.status="fulfilled",m.value=d}},function(d){if(c.status==="pending"){var m=c;m.status="rejected",m.reason=d}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,yT(a),a}throw Hp=c,Fp}}var Hp=null;function mT(){if(Hp===null)throw Error(r(459));var a=Hp;return Hp=null,a}function yT(a){if(a===Fp||a===x0)throw Error(r(483))}var Jo=!1;function Yv(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qv(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Xo(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function ec(a,c,u){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,($t&2)!==0){var m=d.pending;return m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c,c=A0(a),rT(a,null,u),c}return v0(a,d,c,u),A0(a)}function jp(a,c,u){if(c=c.updateQueue,c!==null&&(c=c.shared,(u&4194048)!==0)){var d=c.lanes;d&=a.pendingLanes,u|=d,c.lanes=u,uN(a,u)}}function Zv(a,c){var u=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var m=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};w===null?m=w=C:w=w.next=C,u=u.next}while(u!==null);w===null?m=w=c:w=w.next=c}else m=w=c;u={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=c}var Jv=!1;function zp(){if(Jv){var a=$f;if(a!==null)throw a}}function qp(a,c,u,d){Jv=!1;var m=a.updateQueue;Jo=!1;var w=m.firstBaseUpdate,C=m.lastBaseUpdate,U=m.shared.pending;if(U!==null){m.shared.pending=null;var z=U,te=z.next;z.next=null,C===null?w=te:C.next=te,C=z;var ue=a.alternate;ue!==null&&(ue=ue.updateQueue,U=ue.lastBaseUpdate,U!==C&&(U===null?ue.firstBaseUpdate=te:U.next=te,ue.lastBaseUpdate=z))}if(w!==null){var he=m.baseState;C=0,ue=te=z=null,U=w;do{var se=U.lane&-536870913,ae=se!==U.lane;if(ae?(bt&se)===se:(d&se)===se){se!==0&&se===Lf&&(Jv=!0),ue!==null&&(ue=ue.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Xe=a,Ke=U;se=c;var Gt=u;switch(Ke.tag){case 1:if(Xe=Ke.payload,typeof Xe=="function"){he=Xe.call(Gt,he,se);break e}he=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=Ke.payload,se=typeof Xe=="function"?Xe.call(Gt,he,se):Xe,se==null)break e;he=p({},he,se);break e;case 2:Jo=!0}}se=U.callback,se!==null&&(a.flags|=64,ae&&(a.flags|=8192),ae=m.callbacks,ae===null?m.callbacks=[se]:ae.push(se))}else ae={lane:se,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ue===null?(te=ue=ae,z=he):ue=ue.next=ae,C|=se;if(U=U.next,U===null){if(U=m.shared.pending,U===null)break;ae=U,U=ae.next,ae.next=null,m.lastBaseUpdate=ae,m.shared.pending=null}}while(!0);ue===null&&(z=he),m.baseState=z,m.firstBaseUpdate=te,m.lastBaseUpdate=ue,w===null&&(m.shared.lanes=0),cc|=C,a.lanes=C,a.memoizedState=he}}function wT(a,c){if(typeof a!="function")throw Error(r(191,a));a.call(c)}function bT(a,c){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)wT(u[a],c)}var Ff=G(null),R0=G(0);function ET(a,c){a=eo,re(R0,a),re(Ff,c),eo=a|c.baseLanes}function Xv(){re(R0,eo),re(Ff,Ff.current)}function e1(){eo=R0.current,X(Ff),X(R0)}var tc=0,lt=null,qt=null,Sn=null,P0=!1,Hf=!1,Bl=!1,D0=0,Vp=0,jf=null,QB=0;function bn(){throw Error(r(321))}function t1(a,c){if(c===null)return!1;for(var u=0;u<c.length&&u<a.length;u++)if(!vs(a[u],c[u]))return!1;return!0}function n1(a,c,u,d,m,w){return tc=w,lt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,_.H=a===null||a.memoizedState===null?rO:sO,Bl=!1,w=u(d,m),Bl=!1,Hf&&(w=AT(c,u,d,m)),vT(a),w}function vT(a){_.H=$0;var c=qt!==null&&qt.next!==null;if(tc=0,Sn=qt=lt=null,P0=!1,Vp=0,jf=null,c)throw Error(r(300));a===null||Hn||(a=a.dependencies,a!==null&&N0(a)&&(Hn=!0))}function AT(a,c,u,d){lt=a;var m=0;do{if(Hf&&(jf=null),Vp=0,Hf=!1,25<=m)throw Error(r(301));if(m+=1,Sn=qt=null,a.updateQueue!=null){var w=a.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}_.H=rM,w=c(u,d)}while(Hf);return w}function ZB(){var a=_.H,c=a.useState()[0];return c=typeof c.then=="function"?Gp(c):c,a=a.useState()[0],(qt!==null?qt.memoizedState:null)!==a&&(lt.flags|=1024),c}function r1(){var a=D0!==0;return D0=0,a}function s1(a,c,u){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~u}function i1(a){if(P0){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}P0=!1}tc=0,Sn=qt=lt=null,Hf=!1,Vp=D0=0,jf=null}function Qr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?lt.memoizedState=Sn=a:Sn=Sn.next=a,Sn}function Nn(){if(qt===null){var a=lt.alternate;a=a!==null?a.memoizedState:null}else a=qt.next;var c=Sn===null?lt.memoizedState:Sn.next;if(c!==null)Sn=c,qt=a;else{if(a===null)throw lt.alternate===null?Error(r(467)):Error(r(310));qt=a,a={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Sn===null?lt.memoizedState=Sn=a:Sn=Sn.next=a}return Sn}function a1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gp(a){var c=Vp;return Vp+=1,jf===null&&(jf=[]),a=gT(jf,a,c),c=lt,(Sn===null?c.memoizedState:Sn.next)===null&&(c=c.alternate,_.H=c===null||c.memoizedState===null?rO:sO),a}function U0(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Gp(a);if(a.$$typeof===T)return br(a)}throw Error(r(438,String(a)))}function o1(a){var c=null,u=lt.updateQueue;if(u!==null&&(c=u.memoCache),c==null){var d=lt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(c={data:d.data.map(function(m){return m.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),u===null&&(u=a1(),lt.updateQueue=u),u.memoCache=c,u=c.data[c.index],u===void 0)for(u=c.data[c.index]=Array(a),d=0;d<a;d++)u[d]=q;return c.index++,u}function Wa(a,c){return typeof c=="function"?c(a):c}function k0(a){var c=Nn();return c1(c,qt,a)}function c1(a,c,u){var d=a.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=u;var m=a.baseQueue,w=d.pending;if(w!==null){if(m!==null){var C=m.next;m.next=w.next,w.next=C}c.baseQueue=m=w,d.pending=null}if(w=a.baseState,m===null)a.memoizedState=w;else{c=m.next;var U=C=null,z=null,te=c,ue=!1;do{var he=te.lane&-536870913;if(he!==te.lane?(bt&he)===he:(tc&he)===he){var se=te.revertLane;if(se===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),he===Lf&&(ue=!0);else if((tc&se)===se){te=te.next,se===Lf&&(ue=!0);continue}else he={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},z===null?(U=z=he,C=w):z=z.next=he,lt.lanes|=se,cc|=se;he=te.action,Bl&&u(w,he),w=te.hasEagerState?te.eagerState:u(w,he)}else se={lane:he,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},z===null?(U=z=se,C=w):z=z.next=se,lt.lanes|=he,cc|=he;te=te.next}while(te!==null&&te!==c);if(z===null?C=w:z.next=U,!vs(w,a.memoizedState)&&(Hn=!0,ue&&(u=$f,u!==null)))throw u;a.memoizedState=w,a.baseState=C,a.baseQueue=z,d.lastRenderedState=w}return m===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function l1(a){var c=Nn(),u=c.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var d=u.dispatch,m=u.pending,w=c.memoizedState;if(m!==null){u.pending=null;var C=m=m.next;do w=a(w,C.action),C=C.next;while(C!==m);vs(w,c.memoizedState)||(Hn=!0),c.memoizedState=w,c.baseQueue===null&&(c.baseState=w),u.lastRenderedState=w}return[w,d]}function CT(a,c,u){var d=lt,m=Nn(),w=Dt;if(w){if(u===void 0)throw Error(r(407));u=u()}else u=c();var C=!vs((qt||m).memoizedState,u);C&&(m.memoizedState=u,Hn=!0),m=m.queue;var U=NT.bind(null,d,m,a);if(Kp(2048,8,U,[a]),m.getSnapshot!==c||C||Sn!==null&&Sn.memoizedState.tag&1){if(d.flags|=2048,zf(9,B0(),ST.bind(null,d,m,u,c),null),en===null)throw Error(r(349));w||(tc&124)!==0||_T(d,c,u)}return u}function _T(a,c,u){a.flags|=16384,a={getSnapshot:c,value:u},c=lt.updateQueue,c===null?(c=a1(),lt.updateQueue=c,c.stores=[a]):(u=c.stores,u===null?c.stores=[a]:u.push(a))}function ST(a,c,u,d){c.value=u,c.getSnapshot=d,TT(c)&&OT(a)}function NT(a,c,u){return u(function(){TT(c)&&OT(a)})}function TT(a){var c=a.getSnapshot;a=a.value;try{var u=c();return!vs(a,u)}catch{return!0}}function OT(a){var c=Uf(a,2);c!==null&&Ts(c,a,2)}function u1(a){var c=Qr();if(typeof a=="function"){var u=a;if(a=u(),Bl){Xi(!0);try{u()}finally{Xi(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:a},c}function xT(a,c,u,d){return a.baseState=u,c1(a,qt,typeof d=="function"?d:Wa)}function JB(a,c,u,d,m){if(L0(a))throw Error(r(485));if(a=c.action,a!==null){var w={payload:m,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){w.listeners.push(C)}};_.T!==null?u(!0):w.isTransition=!1,d(w),u=c.pending,u===null?(w.next=c.pending=w,IT(c,w)):(w.next=u.next,c.pending=u.next=w)}}function IT(a,c){var u=c.action,d=c.payload,m=a.state;if(c.isTransition){var w=_.T,C={};_.T=C;try{var U=u(m,d),z=_.S;z!==null&&z(C,U),RT(a,c,U)}catch(te){f1(a,c,te)}finally{_.T=w}}else try{w=u(m,d),RT(a,c,w)}catch(te){f1(a,c,te)}}function RT(a,c,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){PT(a,c,d)},function(d){return f1(a,c,d)}):PT(a,c,u)}function PT(a,c,u){c.status="fulfilled",c.value=u,DT(c),a.state=u,c=a.pending,c!==null&&(u=c.next,u===c?a.pending=null:(u=u.next,c.next=u,IT(a,u)))}function f1(a,c,u){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do c.status="rejected",c.reason=u,DT(c),c=c.next;while(c!==d)}a.action=null}function DT(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function UT(a,c){return c}function kT(a,c){if(Dt){var u=en.formState;if(u!==null){e:{var d=lt;if(Dt){if(pn){t:{for(var m=pn,w=ea;m.nodeType!==8;){if(!w){m=null;break t}if(m=_i(m.nextSibling),m===null){m=null;break t}}w=m.data,m=w==="F!"||w==="F"?m:null}if(m){pn=_i(m.nextSibling),d=m.data==="F!";break e}}Pl(d)}d=!1}d&&(c=u[0])}}return u=Qr(),u.memoizedState=u.baseState=c,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:UT,lastRenderedState:c},u.queue=d,u=eO.bind(null,lt,d),d.dispatch=u,d=u1(!1),w=m1.bind(null,lt,!1,d.queue),d=Qr(),m={state:c,dispatch:null,action:a,pending:null},d.queue=m,u=JB.bind(null,lt,m,w,u),m.dispatch=u,d.memoizedState=a,[c,u,!1]}function BT(a){var c=Nn();return MT(c,qt,a)}function MT(a,c,u){if(c=c1(a,c,UT)[0],a=k0(Wa)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var d=Gp(c)}catch(C){throw C===Fp?x0:C}else d=c;c=Nn();var m=c.queue,w=m.dispatch;return u!==c.memoizedState&&(lt.flags|=2048,zf(9,B0(),XB.bind(null,m,u),null)),[d,w,a]}function XB(a,c){a.action=c}function LT(a){var c=Nn(),u=qt;if(u!==null)return MT(c,u,a);Nn(),c=c.memoizedState,u=Nn();var d=u.queue.dispatch;return u.memoizedState=a,[c,d,!1]}function zf(a,c,u,d){return a={tag:a,create:u,deps:d,inst:c,next:null},c=lt.updateQueue,c===null&&(c=a1(),lt.updateQueue=c),u=c.lastEffect,u===null?c.lastEffect=a.next=a:(d=u.next,u.next=a,a.next=d,c.lastEffect=a),a}function B0(){return{destroy:void 0,resource:void 0}}function $T(){return Nn().memoizedState}function M0(a,c,u,d){var m=Qr();d=d===void 0?null:d,lt.flags|=a,m.memoizedState=zf(1|c,B0(),u,d)}function Kp(a,c,u,d){var m=Nn();d=d===void 0?null:d;var w=m.memoizedState.inst;qt!==null&&d!==null&&t1(d,qt.memoizedState.deps)?m.memoizedState=zf(c,w,u,d):(lt.flags|=a,m.memoizedState=zf(1|c,w,u,d))}function FT(a,c){M0(8390656,8,a,c)}function HT(a,c){Kp(2048,8,a,c)}function jT(a,c){return Kp(4,2,a,c)}function zT(a,c){return Kp(4,4,a,c)}function qT(a,c){if(typeof c=="function"){a=a();var u=c(a);return function(){typeof u=="function"?u():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function VT(a,c,u){u=u!=null?u.concat([a]):null,Kp(4,4,qT.bind(null,c,a),u)}function h1(){}function GT(a,c){var u=Nn();c=c===void 0?null:c;var d=u.memoizedState;return c!==null&&t1(c,d[1])?d[0]:(u.memoizedState=[a,c],a)}function KT(a,c){var u=Nn();c=c===void 0?null:c;var d=u.memoizedState;if(c!==null&&t1(c,d[1]))return d[0];if(d=a(),Bl){Xi(!0);try{a()}finally{Xi(!1)}}return u.memoizedState=[d,c],d}function d1(a,c,u){return u===void 0||(tc&1073741824)!==0?a.memoizedState=c:(a.memoizedState=u,a=QO(),lt.lanes|=a,cc|=a,u)}function WT(a,c,u,d){return vs(u,c)?u:Ff.current!==null?(a=d1(a,u,d),vs(a,c)||(Hn=!0),a):(tc&42)===0?(Hn=!0,a.memoizedState=u):(a=QO(),lt.lanes|=a,cc|=a,c)}function YT(a,c,u,d,m){var w=M.p;M.p=w!==0&&8>w?w:8;var C=_.T,U={};_.T=U,m1(a,!1,c,u);try{var z=m(),te=_.S;if(te!==null&&te(U,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ue=YB(z,d);Wp(a,c,ue,Ns(a))}else Wp(a,c,d,Ns(a))}catch(he){Wp(a,c,{then:function(){},status:"rejected",reason:he},Ns())}finally{M.p=w,_.T=C}}function eM(){}function p1(a,c,u,d){if(a.tag!==5)throw Error(r(476));var m=QT(a).queue;YT(a,m,c,V,u===null?eM:function(){return ZT(a),u(d)})}function QT(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:V},next:null};var u={};return c.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:u},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function ZT(a){var c=QT(a).next.queue;Wp(a,c,{},Ns())}function g1(){return br(hg)}function JT(){return Nn().memoizedState}function XT(){return Nn().memoizedState}function tM(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var u=Ns();a=Xo(u);var d=ec(c,a,u);d!==null&&(Ts(d,c,u),jp(d,c,u)),c={cache:Vv()},a.payload=c;return}c=c.return}}function nM(a,c,u){var d=Ns();u={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},L0(a)?tO(c,u):(u=kv(a,c,u,d),u!==null&&(Ts(u,a,d),nO(u,c,d)))}function eO(a,c,u){var d=Ns();Wp(a,c,u,d)}function Wp(a,c,u,d){var m={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(L0(a))tO(c,m);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=c.lastRenderedReducer,w!==null))try{var C=c.lastRenderedState,U=w(C,u);if(m.hasEagerState=!0,m.eagerState=U,vs(U,C))return v0(a,c,m,0),en===null&&E0(),!1}catch{}finally{}if(u=kv(a,c,m,d),u!==null)return Ts(u,a,d),nO(u,c,d),!0}return!1}function m1(a,c,u,d){if(d={lane:2,revertLane:W1(),action:d,hasEagerState:!1,eagerState:null,next:null},L0(a)){if(c)throw Error(r(479))}else c=kv(a,u,d,2),c!==null&&Ts(c,a,2)}function L0(a){var c=a.alternate;return a===lt||c!==null&&c===lt}function tO(a,c){Hf=P0=!0;var u=a.pending;u===null?c.next=c:(c.next=u.next,u.next=c),a.pending=c}function nO(a,c,u){if((u&4194048)!==0){var d=c.lanes;d&=a.pendingLanes,u|=d,c.lanes=u,uN(a,u)}}var $0={readContext:br,use:U0,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useLayoutEffect:bn,useInsertionEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useSyncExternalStore:bn,useId:bn,useHostTransitionStatus:bn,useFormState:bn,useActionState:bn,useOptimistic:bn,useMemoCache:bn,useCacheRefresh:bn},rO={readContext:br,use:U0,useCallback:function(a,c){return Qr().memoizedState=[a,c===void 0?null:c],a},useContext:br,useEffect:FT,useImperativeHandle:function(a,c,u){u=u!=null?u.concat([a]):null,M0(4194308,4,qT.bind(null,c,a),u)},useLayoutEffect:function(a,c){return M0(4194308,4,a,c)},useInsertionEffect:function(a,c){M0(4,2,a,c)},useMemo:function(a,c){var u=Qr();c=c===void 0?null:c;var d=a();if(Bl){Xi(!0);try{a()}finally{Xi(!1)}}return u.memoizedState=[d,c],d},useReducer:function(a,c,u){var d=Qr();if(u!==void 0){var m=u(c);if(Bl){Xi(!0);try{u(c)}finally{Xi(!1)}}}else m=c;return d.memoizedState=d.baseState=m,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:m},d.queue=a,a=a.dispatch=nM.bind(null,lt,a),[d.memoizedState,a]},useRef:function(a){var c=Qr();return a={current:a},c.memoizedState=a},useState:function(a){a=u1(a);var c=a.queue,u=eO.bind(null,lt,c);return c.dispatch=u,[a.memoizedState,u]},useDebugValue:h1,useDeferredValue:function(a,c){var u=Qr();return d1(u,a,c)},useTransition:function(){var a=u1(!1);return a=YT.bind(null,lt,a.queue,!0,!1),Qr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,u){var d=lt,m=Qr();if(Dt){if(u===void 0)throw Error(r(407));u=u()}else{if(u=c(),en===null)throw Error(r(349));(bt&124)!==0||_T(d,c,u)}m.memoizedState=u;var w={value:u,getSnapshot:c};return m.queue=w,FT(NT.bind(null,d,w,a),[a]),d.flags|=2048,zf(9,B0(),ST.bind(null,d,w,u,c),null),u},useId:function(){var a=Qr(),c=en.identifierPrefix;if(Dt){var u=Va,d=qa;u=(d&~(1<<32-Dr(d)-1)).toString(32)+u,c=""+c+"R"+u,u=D0++,0<u&&(c+="H"+u.toString(32)),c+=""}else u=QB++,c=""+c+"r"+u.toString(32)+"";return a.memoizedState=c},useHostTransitionStatus:g1,useFormState:kT,useActionState:kT,useOptimistic:function(a){var c=Qr();c.memoizedState=c.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=u,c=m1.bind(null,lt,!0,u),u.dispatch=c,[a,c]},useMemoCache:o1,useCacheRefresh:function(){return Qr().memoizedState=tM.bind(null,lt)}},sO={readContext:br,use:U0,useCallback:GT,useContext:br,useEffect:HT,useImperativeHandle:VT,useInsertionEffect:jT,useLayoutEffect:zT,useMemo:KT,useReducer:k0,useRef:$T,useState:function(){return k0(Wa)},useDebugValue:h1,useDeferredValue:function(a,c){var u=Nn();return WT(u,qt.memoizedState,a,c)},useTransition:function(){var a=k0(Wa)[0],c=Nn().memoizedState;return[typeof a=="boolean"?a:Gp(a),c]},useSyncExternalStore:CT,useId:JT,useHostTransitionStatus:g1,useFormState:BT,useActionState:BT,useOptimistic:function(a,c){var u=Nn();return xT(u,qt,a,c)},useMemoCache:o1,useCacheRefresh:XT},rM={readContext:br,use:U0,useCallback:GT,useContext:br,useEffect:HT,useImperativeHandle:VT,useInsertionEffect:jT,useLayoutEffect:zT,useMemo:KT,useReducer:l1,useRef:$T,useState:function(){return l1(Wa)},useDebugValue:h1,useDeferredValue:function(a,c){var u=Nn();return qt===null?d1(u,a,c):WT(u,qt.memoizedState,a,c)},useTransition:function(){var a=l1(Wa)[0],c=Nn().memoizedState;return[typeof a=="boolean"?a:Gp(a),c]},useSyncExternalStore:CT,useId:JT,useHostTransitionStatus:g1,useFormState:LT,useActionState:LT,useOptimistic:function(a,c){var u=Nn();return qt!==null?xT(u,qt,a,c):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:o1,useCacheRefresh:XT},qf=null,Yp=0;function F0(a){var c=Yp;return Yp+=1,qf===null&&(qf=[]),gT(qf,a,c)}function Qp(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function H0(a,c){throw c.$$typeof===g?Error(r(525)):(a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function iO(a){var c=a._init;return c(a._payload)}function aO(a){function c(Z,Y){if(a){var J=Z.deletions;J===null?(Z.deletions=[Y],Z.flags|=16):J.push(Y)}}function u(Z,Y){if(!a)return null;for(;Y!==null;)c(Z,Y),Y=Y.sibling;return null}function d(Z){for(var Y=new Map;Z!==null;)Z.key!==null?Y.set(Z.key,Z):Y.set(Z.index,Z),Z=Z.sibling;return Y}function m(Z,Y){return Z=za(Z,Y),Z.index=0,Z.sibling=null,Z}function w(Z,Y,J){return Z.index=J,a?(J=Z.alternate,J!==null?(J=J.index,J<Y?(Z.flags|=67108866,Y):J):(Z.flags|=67108866,Y)):(Z.flags|=1048576,Y)}function C(Z){return a&&Z.alternate===null&&(Z.flags|=67108866),Z}function U(Z,Y,J,fe){return Y===null||Y.tag!==6?(Y=Mv(J,Z.mode,fe),Y.return=Z,Y):(Y=m(Y,J),Y.return=Z,Y)}function z(Z,Y,J,fe){var Me=J.type;return Me===v?ue(Z,Y,J.props.children,fe,J.key):Y!==null&&(Y.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===$&&iO(Me)===Y.type)?(Y=m(Y,J.props),Qp(Y,J),Y.return=Z,Y):(Y=C0(J.type,J.key,J.props,null,Z.mode,fe),Qp(Y,J),Y.return=Z,Y)}function te(Z,Y,J,fe){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==J.containerInfo||Y.stateNode.implementation!==J.implementation?(Y=Lv(J,Z.mode,fe),Y.return=Z,Y):(Y=m(Y,J.children||[]),Y.return=Z,Y)}function ue(Z,Y,J,fe,Me){return Y===null||Y.tag!==7?(Y=Ol(J,Z.mode,fe,Me),Y.return=Z,Y):(Y=m(Y,J),Y.return=Z,Y)}function he(Z,Y,J){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Mv(""+Y,Z.mode,J),Y.return=Z,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case y:return J=C0(Y.type,Y.key,Y.props,null,Z.mode,J),Qp(J,Y),J.return=Z,J;case b:return Y=Lv(Y,Z.mode,J),Y.return=Z,Y;case $:var fe=Y._init;return Y=fe(Y._payload),he(Z,Y,J)}if(x(Y)||W(Y))return Y=Ol(Y,Z.mode,J,null),Y.return=Z,Y;if(typeof Y.then=="function")return he(Z,F0(Y),J);if(Y.$$typeof===T)return he(Z,T0(Z,Y),J);H0(Z,Y)}return null}function se(Z,Y,J,fe){var Me=Y!==null?Y.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Me!==null?null:U(Z,Y,""+J,fe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case y:return J.key===Me?z(Z,Y,J,fe):null;case b:return J.key===Me?te(Z,Y,J,fe):null;case $:return Me=J._init,J=Me(J._payload),se(Z,Y,J,fe)}if(x(J)||W(J))return Me!==null?null:ue(Z,Y,J,fe,null);if(typeof J.then=="function")return se(Z,Y,F0(J),fe);if(J.$$typeof===T)return se(Z,Y,T0(Z,J),fe);H0(Z,J)}return null}function ae(Z,Y,J,fe,Me){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Z=Z.get(J)||null,U(Y,Z,""+fe,Me);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case y:return Z=Z.get(fe.key===null?J:fe.key)||null,z(Y,Z,fe,Me);case b:return Z=Z.get(fe.key===null?J:fe.key)||null,te(Y,Z,fe,Me);case $:var ft=fe._init;return fe=ft(fe._payload),ae(Z,Y,J,fe,Me)}if(x(fe)||W(fe))return Z=Z.get(J)||null,ue(Y,Z,fe,Me,null);if(typeof fe.then=="function")return ae(Z,Y,J,F0(fe),Me);if(fe.$$typeof===T)return ae(Z,Y,J,T0(Y,fe),Me);H0(Y,fe)}return null}function Xe(Z,Y,J,fe){for(var Me=null,ft=null,He=Y,Ye=Y=0,zn=null;He!==null&&Ye<J.length;Ye++){He.index>Ye?(zn=He,He=null):zn=He.sibling;var _t=se(Z,He,J[Ye],fe);if(_t===null){He===null&&(He=zn);break}a&&He&&_t.alternate===null&&c(Z,He),Y=w(_t,Y,Ye),ft===null?Me=_t:ft.sibling=_t,ft=_t,He=zn}if(Ye===J.length)return u(Z,He),Dt&&Il(Z,Ye),Me;if(He===null){for(;Ye<J.length;Ye++)He=he(Z,J[Ye],fe),He!==null&&(Y=w(He,Y,Ye),ft===null?Me=He:ft.sibling=He,ft=He);return Dt&&Il(Z,Ye),Me}for(He=d(He);Ye<J.length;Ye++)zn=ae(He,Z,Ye,J[Ye],fe),zn!==null&&(a&&zn.alternate!==null&&He.delete(zn.key===null?Ye:zn.key),Y=w(zn,Y,Ye),ft===null?Me=zn:ft.sibling=zn,ft=zn);return a&&He.forEach(function(yc){return c(Z,yc)}),Dt&&Il(Z,Ye),Me}function Ke(Z,Y,J,fe){if(J==null)throw Error(r(151));for(var Me=null,ft=null,He=Y,Ye=Y=0,zn=null,_t=J.next();He!==null&&!_t.done;Ye++,_t=J.next()){He.index>Ye?(zn=He,He=null):zn=He.sibling;var yc=se(Z,He,_t.value,fe);if(yc===null){He===null&&(He=zn);break}a&&He&&yc.alternate===null&&c(Z,He),Y=w(yc,Y,Ye),ft===null?Me=yc:ft.sibling=yc,ft=yc,He=zn}if(_t.done)return u(Z,He),Dt&&Il(Z,Ye),Me;if(He===null){for(;!_t.done;Ye++,_t=J.next())_t=he(Z,_t.value,fe),_t!==null&&(Y=w(_t,Y,Ye),ft===null?Me=_t:ft.sibling=_t,ft=_t);return Dt&&Il(Z,Ye),Me}for(He=d(He);!_t.done;Ye++,_t=J.next())_t=ae(He,Z,Ye,_t.value,fe),_t!==null&&(a&&_t.alternate!==null&&He.delete(_t.key===null?Ye:_t.key),Y=w(_t,Y,Ye),ft===null?Me=_t:ft.sibling=_t,ft=_t);return a&&He.forEach(function(sL){return c(Z,sL)}),Dt&&Il(Z,Ye),Me}function Gt(Z,Y,J,fe){if(typeof J=="object"&&J!==null&&J.type===v&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case y:e:{for(var Me=J.key;Y!==null;){if(Y.key===Me){if(Me=J.type,Me===v){if(Y.tag===7){u(Z,Y.sibling),fe=m(Y,J.props.children),fe.return=Z,Z=fe;break e}}else if(Y.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===$&&iO(Me)===Y.type){u(Z,Y.sibling),fe=m(Y,J.props),Qp(fe,J),fe.return=Z,Z=fe;break e}u(Z,Y);break}else c(Z,Y);Y=Y.sibling}J.type===v?(fe=Ol(J.props.children,Z.mode,fe,J.key),fe.return=Z,Z=fe):(fe=C0(J.type,J.key,J.props,null,Z.mode,fe),Qp(fe,J),fe.return=Z,Z=fe)}return C(Z);case b:e:{for(Me=J.key;Y!==null;){if(Y.key===Me)if(Y.tag===4&&Y.stateNode.containerInfo===J.containerInfo&&Y.stateNode.implementation===J.implementation){u(Z,Y.sibling),fe=m(Y,J.children||[]),fe.return=Z,Z=fe;break e}else{u(Z,Y);break}else c(Z,Y);Y=Y.sibling}fe=Lv(J,Z.mode,fe),fe.return=Z,Z=fe}return C(Z);case $:return Me=J._init,J=Me(J._payload),Gt(Z,Y,J,fe)}if(x(J))return Xe(Z,Y,J,fe);if(W(J)){if(Me=W(J),typeof Me!="function")throw Error(r(150));return J=Me.call(J),Ke(Z,Y,J,fe)}if(typeof J.then=="function")return Gt(Z,Y,F0(J),fe);if(J.$$typeof===T)return Gt(Z,Y,T0(Z,J),fe);H0(Z,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,Y!==null&&Y.tag===6?(u(Z,Y.sibling),fe=m(Y,J),fe.return=Z,Z=fe):(u(Z,Y),fe=Mv(J,Z.mode,fe),fe.return=Z,Z=fe),C(Z)):u(Z,Y)}return function(Z,Y,J,fe){try{Yp=0;var Me=Gt(Z,Y,J,fe);return qf=null,Me}catch(He){if(He===Fp||He===x0)throw He;var ft=As(29,He,null,Z.mode);return ft.lanes=fe,ft.return=Z,ft}finally{}}}var Vf=aO(!0),oO=aO(!1),Js=G(null),ta=null;function nc(a){var c=a.alternate;re(Rn,Rn.current&1),re(Js,a),ta===null&&(c===null||Ff.current!==null||c.memoizedState!==null)&&(ta=a)}function cO(a){if(a.tag===22){if(re(Rn,Rn.current),re(Js,a),ta===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&(ta=a)}}else rc()}function rc(){re(Rn,Rn.current),re(Js,Js.current)}function Ya(a){X(Js),ta===a&&(ta=null),X(Rn)}var Rn=G(0);function j0(a){for(var c=a;c!==null;){if(c.tag===13){var u=c.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||aA(u)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function y1(a,c,u,d){c=a.memoizedState,u=u(d,c),u=u==null?c:p({},c,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var w1={enqueueSetState:function(a,c,u){a=a._reactInternals;var d=Ns(),m=Xo(d);m.payload=c,u!=null&&(m.callback=u),c=ec(a,m,d),c!==null&&(Ts(c,a,d),jp(c,a,d))},enqueueReplaceState:function(a,c,u){a=a._reactInternals;var d=Ns(),m=Xo(d);m.tag=1,m.payload=c,u!=null&&(m.callback=u),c=ec(a,m,d),c!==null&&(Ts(c,a,d),jp(c,a,d))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var u=Ns(),d=Xo(u);d.tag=2,c!=null&&(d.callback=c),c=ec(a,d,u),c!==null&&(Ts(c,a,u),jp(c,a,u))}};function lO(a,c,u,d,m,w,C){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,w,C):c.prototype&&c.prototype.isPureReactComponent?!Pp(u,d)||!Pp(m,w):!0}function uO(a,c,u,d){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(u,d),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(u,d),c.state!==a&&w1.enqueueReplaceState(c,c.state,null)}function Ml(a,c){var u=c;if("ref"in c){u={};for(var d in c)d!=="ref"&&(u[d]=c[d])}if(a=a.defaultProps){u===c&&(u=p({},u));for(var m in a)u[m]===void 0&&(u[m]=a[m])}return u}var z0=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function fO(a){z0(a)}function hO(a){console.error(a)}function dO(a){z0(a)}function q0(a,c){try{var u=a.onUncaughtError;u(c.value,{componentStack:c.stack})}catch(d){setTimeout(function(){throw d})}}function pO(a,c,u){try{var d=a.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function b1(a,c,u){return u=Xo(u),u.tag=3,u.payload={element:null},u.callback=function(){q0(a,c)},u}function gO(a){return a=Xo(a),a.tag=3,a}function mO(a,c,u,d){var m=u.type.getDerivedStateFromError;if(typeof m=="function"){var w=d.value;a.payload=function(){return m(w)},a.callback=function(){pO(c,u,d)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(a.callback=function(){pO(c,u,d),typeof m!="function"&&(lc===null?lc=new Set([this]):lc.add(this));var U=d.stack;this.componentDidCatch(d.value,{componentStack:U!==null?U:""})})}function sM(a,c,u,d,m){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(c=u.alternate,c!==null&&Mp(c,u,m,!0),u=Js.current,u!==null){switch(u.tag){case 13:return ta===null?z1():u.alternate===null&&gn===0&&(gn=3),u.flags&=-257,u.flags|=65536,u.lanes=m,d===Wv?u.flags|=16384:(c=u.updateQueue,c===null?u.updateQueue=new Set([d]):c.add(d),V1(a,d,m)),!1;case 22:return u.flags|=65536,d===Wv?u.flags|=16384:(c=u.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=c):(u=c.retryQueue,u===null?c.retryQueue=new Set([d]):u.add(d)),V1(a,d,m)),!1}throw Error(r(435,u.tag))}return V1(a,d,m),z1(),!1}if(Dt)return c=Js.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=m,d!==Hv&&(a=Error(r(422),{cause:d}),Bp(Ws(a,u)))):(d!==Hv&&(c=Error(r(423),{cause:d}),Bp(Ws(c,u))),a=a.current.alternate,a.flags|=65536,m&=-m,a.lanes|=m,d=Ws(d,u),m=b1(a.stateNode,d,m),Zv(a,m),gn!==4&&(gn=2)),!1;var w=Error(r(520),{cause:d});if(w=Ws(w,u),rg===null?rg=[w]:rg.push(w),gn!==4&&(gn=2),c===null)return!0;d=Ws(d,u),u=c;do{switch(u.tag){case 3:return u.flags|=65536,a=m&-m,u.lanes|=a,a=b1(u.stateNode,d,a),Zv(u,a),!1;case 1:if(c=u.type,w=u.stateNode,(u.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(lc===null||!lc.has(w))))return u.flags|=65536,m&=-m,u.lanes|=m,m=gO(m),mO(m,a,u,d),Zv(u,m),!1}u=u.return}while(u!==null);return!1}var yO=Error(r(461)),Hn=!1;function rr(a,c,u,d){c.child=a===null?oO(c,null,u,d):Vf(c,a.child,u,d)}function wO(a,c,u,d,m){u=u.render;var w=c.ref;if("ref"in d){var C={};for(var U in d)U!=="ref"&&(C[U]=d[U])}else C=d;return Ul(c),d=n1(a,c,u,C,w,m),U=r1(),a!==null&&!Hn?(s1(a,c,m),Qa(a,c,m)):(Dt&&U&&$v(c),c.flags|=1,rr(a,c,d,m),c.child)}function bO(a,c,u,d,m){if(a===null){var w=u.type;return typeof w=="function"&&!Bv(w)&&w.defaultProps===void 0&&u.compare===null?(c.tag=15,c.type=w,EO(a,c,w,d,m)):(a=C0(u.type,null,d,c,c.mode,m),a.ref=c.ref,a.return=c,c.child=a)}if(w=a.child,!T1(a,m)){var C=w.memoizedProps;if(u=u.compare,u=u!==null?u:Pp,u(C,d)&&a.ref===c.ref)return Qa(a,c,m)}return c.flags|=1,a=za(w,d),a.ref=c.ref,a.return=c,c.child=a}function EO(a,c,u,d,m){if(a!==null){var w=a.memoizedProps;if(Pp(w,d)&&a.ref===c.ref)if(Hn=!1,c.pendingProps=d=w,T1(a,m))(a.flags&131072)!==0&&(Hn=!0);else return c.lanes=a.lanes,Qa(a,c,m)}return E1(a,c,u,d,m)}function vO(a,c,u){var d=c.pendingProps,m=d.children,w=a!==null?a.memoizedState:null;if(d.mode==="hidden"){if((c.flags&128)!==0){if(d=w!==null?w.baseLanes|u:u,a!==null){for(m=c.child=a.child,w=0;m!==null;)w=w|m.lanes|m.childLanes,m=m.sibling;c.childLanes=w&~d}else c.childLanes=0,c.child=null;return AO(a,c,d,u)}if((u&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&O0(c,w!==null?w.cachePool:null),w!==null?ET(c,w):Xv(),cO(c);else return c.lanes=c.childLanes=536870912,AO(a,c,w!==null?w.baseLanes|u:u,u)}else w!==null?(O0(c,w.cachePool),ET(c,w),rc(),c.memoizedState=null):(a!==null&&O0(c,null),Xv(),rc());return rr(a,c,m,u),c.child}function AO(a,c,u,d){var m=Kv();return m=m===null?null:{parent:In._currentValue,pool:m},c.memoizedState={baseLanes:u,cachePool:m},a!==null&&O0(c,null),Xv(),cO(c),a!==null&&Mp(a,c,d,!0),null}function V0(a,c){var u=c.ref;if(u===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(a===null||a.ref!==u)&&(c.flags|=4194816)}}function E1(a,c,u,d,m){return Ul(c),u=n1(a,c,u,d,void 0,m),d=r1(),a!==null&&!Hn?(s1(a,c,m),Qa(a,c,m)):(Dt&&d&&$v(c),c.flags|=1,rr(a,c,u,m),c.child)}function CO(a,c,u,d,m,w){return Ul(c),c.updateQueue=null,u=AT(c,d,u,m),vT(a),d=r1(),a!==null&&!Hn?(s1(a,c,w),Qa(a,c,w)):(Dt&&d&&$v(c),c.flags|=1,rr(a,c,u,w),c.child)}function _O(a,c,u,d,m){if(Ul(c),c.stateNode===null){var w=kf,C=u.contextType;typeof C=="object"&&C!==null&&(w=br(C)),w=new u(d,w),c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=w1,c.stateNode=w,w._reactInternals=c,w=c.stateNode,w.props=d,w.state=c.memoizedState,w.refs={},Yv(c),C=u.contextType,w.context=typeof C=="object"&&C!==null?br(C):kf,w.state=c.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(y1(c,u,C,d),w.state=c.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(C=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),C!==w.state&&w1.enqueueReplaceState(w,w.state,null),qp(c,d,w,m),zp(),w.state=c.memoizedState),typeof w.componentDidMount=="function"&&(c.flags|=4194308),d=!0}else if(a===null){w=c.stateNode;var U=c.memoizedProps,z=Ml(u,U);w.props=z;var te=w.context,ue=u.contextType;C=kf,typeof ue=="object"&&ue!==null&&(C=br(ue));var he=u.getDerivedStateFromProps;ue=typeof he=="function"||typeof w.getSnapshotBeforeUpdate=="function",U=c.pendingProps!==U,ue||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U||te!==C)&&uO(c,w,d,C),Jo=!1;var se=c.memoizedState;w.state=se,qp(c,d,w,m),zp(),te=c.memoizedState,U||se!==te||Jo?(typeof he=="function"&&(y1(c,u,he,d),te=c.memoizedState),(z=Jo||lO(c,u,z,d,se,te,C))?(ue||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(c.flags|=4194308)):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=d,c.memoizedState=te),w.props=d,w.state=te,w.context=C,d=z):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),d=!1)}else{w=c.stateNode,Qv(a,c),C=c.memoizedProps,ue=Ml(u,C),w.props=ue,he=c.pendingProps,se=w.context,te=u.contextType,z=kf,typeof te=="object"&&te!==null&&(z=br(te)),U=u.getDerivedStateFromProps,(te=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==he||se!==z)&&uO(c,w,d,z),Jo=!1,se=c.memoizedState,w.state=se,qp(c,d,w,m),zp();var ae=c.memoizedState;C!==he||se!==ae||Jo||a!==null&&a.dependencies!==null&&N0(a.dependencies)?(typeof U=="function"&&(y1(c,u,U,d),ae=c.memoizedState),(ue=Jo||lO(c,u,ue,d,se,ae,z)||a!==null&&a.dependencies!==null&&N0(a.dependencies))?(te||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,ae,z),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,ae,z)),typeof w.componentDidUpdate=="function"&&(c.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===a.memoizedProps&&se===a.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&se===a.memoizedState||(c.flags|=1024),c.memoizedProps=d,c.memoizedState=ae),w.props=d,w.state=ae,w.context=z,d=ue):(typeof w.componentDidUpdate!="function"||C===a.memoizedProps&&se===a.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&se===a.memoizedState||(c.flags|=1024),d=!1)}return w=d,V0(a,c),d=(c.flags&128)!==0,w||d?(w=c.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:w.render(),c.flags|=1,a!==null&&d?(c.child=Vf(c,a.child,null,m),c.child=Vf(c,null,u,m)):rr(a,c,u,m),c.memoizedState=w.state,a=c.child):a=Qa(a,c,m),a}function SO(a,c,u,d){return kp(),c.flags|=256,rr(a,c,u,d),c.child}var v1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function A1(a){return{baseLanes:a,cachePool:hT()}}function C1(a,c,u){return a=a!==null?a.childLanes&~u:0,c&&(a|=Xs),a}function NO(a,c,u){var d=c.pendingProps,m=!1,w=(c.flags&128)!==0,C;if((C=w)||(C=a!==null&&a.memoizedState===null?!1:(Rn.current&2)!==0),C&&(m=!0,c.flags&=-129),C=(c.flags&32)!==0,c.flags&=-33,a===null){if(Dt){if(m?nc(c):rc(),Dt){var U=pn,z;if(z=U){e:{for(z=U,U=ea;z.nodeType!==8;){if(!U){U=null;break e}if(z=_i(z.nextSibling),z===null){U=null;break e}}U=z}U!==null?(c.memoizedState={dehydrated:U,treeContext:xl!==null?{id:qa,overflow:Va}:null,retryLane:536870912,hydrationErrors:null},z=As(18,null,null,0),z.stateNode=U,z.return=c,c.child=z,Ur=c,pn=null,z=!0):z=!1}z||Pl(c)}if(U=c.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return aA(U)?c.lanes=32:c.lanes=536870912,null;Ya(c)}return U=d.children,d=d.fallback,m?(rc(),m=c.mode,U=G0({mode:"hidden",children:U},m),d=Ol(d,m,u,null),U.return=c,d.return=c,U.sibling=d,c.child=U,m=c.child,m.memoizedState=A1(u),m.childLanes=C1(a,C,u),c.memoizedState=v1,d):(nc(c),_1(c,U))}if(z=a.memoizedState,z!==null&&(U=z.dehydrated,U!==null)){if(w)c.flags&256?(nc(c),c.flags&=-257,c=S1(a,c,u)):c.memoizedState!==null?(rc(),c.child=a.child,c.flags|=128,c=null):(rc(),m=d.fallback,U=c.mode,d=G0({mode:"visible",children:d.children},U),m=Ol(m,U,u,null),m.flags|=2,d.return=c,m.return=c,d.sibling=m,c.child=d,Vf(c,a.child,null,u),d=c.child,d.memoizedState=A1(u),d.childLanes=C1(a,C,u),c.memoizedState=v1,c=m);else if(nc(c),aA(U)){if(C=U.nextSibling&&U.nextSibling.dataset,C)var te=C.dgst;C=te,d=Error(r(419)),d.stack="",d.digest=C,Bp({value:d,source:null,stack:null}),c=S1(a,c,u)}else if(Hn||Mp(a,c,u,!1),C=(u&a.childLanes)!==0,Hn||C){if(C=en,C!==null&&(d=u&-u,d=(d&42)!==0?1:ov(d),d=(d&(C.suspendedLanes|u))!==0?0:d,d!==0&&d!==z.retryLane))throw z.retryLane=d,Uf(a,d),Ts(C,a,d),yO;U.data==="$?"||z1(),c=S1(a,c,u)}else U.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=z.treeContext,pn=_i(U.nextSibling),Ur=c,Dt=!0,Rl=null,ea=!1,a!==null&&(Qs[Zs++]=qa,Qs[Zs++]=Va,Qs[Zs++]=xl,qa=a.id,Va=a.overflow,xl=c),c=_1(c,d.children),c.flags|=4096);return c}return m?(rc(),m=d.fallback,U=c.mode,z=a.child,te=z.sibling,d=za(z,{mode:"hidden",children:d.children}),d.subtreeFlags=z.subtreeFlags&65011712,te!==null?m=za(te,m):(m=Ol(m,U,u,null),m.flags|=2),m.return=c,d.return=c,d.sibling=m,c.child=d,d=m,m=c.child,U=a.child.memoizedState,U===null?U=A1(u):(z=U.cachePool,z!==null?(te=In._currentValue,z=z.parent!==te?{parent:te,pool:te}:z):z=hT(),U={baseLanes:U.baseLanes|u,cachePool:z}),m.memoizedState=U,m.childLanes=C1(a,C,u),c.memoizedState=v1,d):(nc(c),u=a.child,a=u.sibling,u=za(u,{mode:"visible",children:d.children}),u.return=c,u.sibling=null,a!==null&&(C=c.deletions,C===null?(c.deletions=[a],c.flags|=16):C.push(a)),c.child=u,c.memoizedState=null,u)}function _1(a,c){return c=G0({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function G0(a,c){return a=As(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function S1(a,c,u){return Vf(c,a.child,null,u),a=_1(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function TO(a,c,u){a.lanes|=c;var d=a.alternate;d!==null&&(d.lanes|=c),zv(a.return,c,u)}function N1(a,c,u,d,m){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:m}:(w.isBackwards=c,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=u,w.tailMode=m)}function OO(a,c,u){var d=c.pendingProps,m=d.revealOrder,w=d.tail;if(rr(a,c,d.children,u),d=Rn.current,(d&2)!==0)d=d&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&TO(a,u,c);else if(a.tag===19)TO(a,u,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}switch(re(Rn,d),m){case"forwards":for(u=c.child,m=null;u!==null;)a=u.alternate,a!==null&&j0(a)===null&&(m=u),u=u.sibling;u=m,u===null?(m=c.child,c.child=null):(m=u.sibling,u.sibling=null),N1(c,!1,m,u,w);break;case"backwards":for(u=null,m=c.child,c.child=null;m!==null;){if(a=m.alternate,a!==null&&j0(a)===null){c.child=m;break}a=m.sibling,m.sibling=u,u=m,m=a}N1(c,!0,u,null,w);break;case"together":N1(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Qa(a,c,u){if(a!==null&&(c.dependencies=a.dependencies),cc|=c.lanes,(u&c.childLanes)===0)if(a!==null){if(Mp(a,c,u,!1),(u&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,u=za(a,a.pendingProps),c.child=u,u.return=c;a.sibling!==null;)a=a.sibling,u=u.sibling=za(a,a.pendingProps),u.return=c;u.sibling=null}return c.child}function T1(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&N0(a)))}function iM(a,c,u){switch(c.tag){case 3:$e(c,c.stateNode.containerInfo),Zo(c,In,a.memoizedState.cache),kp();break;case 27:case 5:Ct(c);break;case 4:$e(c,c.stateNode.containerInfo);break;case 10:Zo(c,c.type,c.memoizedProps.value);break;case 13:var d=c.memoizedState;if(d!==null)return d.dehydrated!==null?(nc(c),c.flags|=128,null):(u&c.child.childLanes)!==0?NO(a,c,u):(nc(c),a=Qa(a,c,u),a!==null?a.sibling:null);nc(c);break;case 19:var m=(a.flags&128)!==0;if(d=(u&c.childLanes)!==0,d||(Mp(a,c,u,!1),d=(u&c.childLanes)!==0),m){if(d)return OO(a,c,u);c.flags|=128}if(m=c.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),re(Rn,Rn.current),d)break;return null;case 22:case 23:return c.lanes=0,vO(a,c,u);case 24:Zo(c,In,a.memoizedState.cache)}return Qa(a,c,u)}function xO(a,c,u){if(a!==null)if(a.memoizedProps!==c.pendingProps)Hn=!0;else{if(!T1(a,u)&&(c.flags&128)===0)return Hn=!1,iM(a,c,u);Hn=(a.flags&131072)!==0}else Hn=!1,Dt&&(c.flags&1048576)!==0&&iT(c,S0,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var d=c.elementType,m=d._init;if(d=m(d._payload),c.type=d,typeof d=="function")Bv(d)?(a=Ml(d,a),c.tag=1,c=_O(null,c,d,a,u)):(c.tag=0,c=E1(null,c,d,a,u));else{if(d!=null){if(m=d.$$typeof,m===k){c.tag=11,c=wO(null,c,d,a,u);break e}else if(m===F){c.tag=14,c=bO(null,c,d,a,u);break e}}throw c=ee(d)||d,Error(r(306,c,""))}}return c;case 0:return E1(a,c,c.type,c.pendingProps,u);case 1:return d=c.type,m=Ml(d,c.pendingProps),_O(a,c,d,m,u);case 3:e:{if($e(c,c.stateNode.containerInfo),a===null)throw Error(r(387));d=c.pendingProps;var w=c.memoizedState;m=w.element,Qv(a,c),qp(c,d,null,u);var C=c.memoizedState;if(d=C.cache,Zo(c,In,d),d!==w.cache&&qv(c,[In],u,!0),zp(),d=C.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:C.cache},c.updateQueue.baseState=w,c.memoizedState=w,c.flags&256){c=SO(a,c,d,u);break e}else if(d!==m){m=Ws(Error(r(424)),c),Bp(m),c=SO(a,c,d,u);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(pn=_i(a.firstChild),Ur=c,Dt=!0,Rl=null,ea=!0,u=oO(c,null,d,u),c.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(kp(),d===m){c=Qa(a,c,u);break e}rr(a,c,d,u)}c=c.child}return c;case 26:return V0(a,c),a===null?(u=Dx(c.type,null,c.pendingProps,null))?c.memoizedState=u:Dt||(u=c.type,a=c.pendingProps,d=aw(me.current).createElement(u),d[wr]=c,d[Wr]=a,ir(d,u,a),Fn(d),c.stateNode=d):c.memoizedState=Dx(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return Ct(c),a===null&&Dt&&(d=c.stateNode=Ix(c.type,c.pendingProps,me.current),Ur=c,ea=!0,m=pn,hc(c.type)?(oA=m,pn=_i(d.firstChild)):pn=m),rr(a,c,c.pendingProps.children,u),V0(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&Dt&&((m=d=pn)&&(d=DM(d,c.type,c.pendingProps,ea),d!==null?(c.stateNode=d,Ur=c,pn=_i(d.firstChild),ea=!1,m=!0):m=!1),m||Pl(c)),Ct(c),m=c.type,w=c.pendingProps,C=a!==null?a.memoizedProps:null,d=w.children,rA(m,w)?d=null:C!==null&&rA(m,C)&&(c.flags|=32),c.memoizedState!==null&&(m=n1(a,c,ZB,null,null,u),hg._currentValue=m),V0(a,c),rr(a,c,d,u),c.child;case 6:return a===null&&Dt&&((a=u=pn)&&(u=UM(u,c.pendingProps,ea),u!==null?(c.stateNode=u,Ur=c,pn=null,a=!0):a=!1),a||Pl(c)),null;case 13:return NO(a,c,u);case 4:return $e(c,c.stateNode.containerInfo),d=c.pendingProps,a===null?c.child=Vf(c,null,d,u):rr(a,c,d,u),c.child;case 11:return wO(a,c,c.type,c.pendingProps,u);case 7:return rr(a,c,c.pendingProps,u),c.child;case 8:return rr(a,c,c.pendingProps.children,u),c.child;case 12:return rr(a,c,c.pendingProps.children,u),c.child;case 10:return d=c.pendingProps,Zo(c,c.type,d.value),rr(a,c,d.children,u),c.child;case 9:return m=c.type._context,d=c.pendingProps.children,Ul(c),m=br(m),d=d(m),c.flags|=1,rr(a,c,d,u),c.child;case 14:return bO(a,c,c.type,c.pendingProps,u);case 15:return EO(a,c,c.type,c.pendingProps,u);case 19:return OO(a,c,u);case 31:return d=c.pendingProps,u=c.mode,d={mode:d.mode,children:d.children},a===null?(u=G0(d,u),u.ref=c.ref,c.child=u,u.return=c,c=u):(u=za(a.child,d),u.ref=c.ref,c.child=u,u.return=c,c=u),c;case 22:return vO(a,c,u);case 24:return Ul(c),d=br(In),a===null?(m=Kv(),m===null&&(m=en,w=Vv(),m.pooledCache=w,w.refCount++,w!==null&&(m.pooledCacheLanes|=u),m=w),c.memoizedState={parent:d,cache:m},Yv(c),Zo(c,In,m)):((a.lanes&u)!==0&&(Qv(a,c),qp(c,null,null,u),zp()),m=a.memoizedState,w=c.memoizedState,m.parent!==d?(m={parent:d,cache:d},c.memoizedState=m,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=m),Zo(c,In,d)):(d=w.cache,Zo(c,In,d),d!==m.cache&&qv(c,[In],u,!0))),rr(a,c,c.pendingProps.children,u),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Za(a){a.flags|=4}function IO(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!Lx(c)){if(c=Js.current,c!==null&&((bt&4194048)===bt?ta!==null:(bt&62914560)!==bt&&(bt&536870912)===0||c!==ta))throw Hp=Wv,dT;a.flags|=8192}}function K0(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?cN():536870912,a.lanes|=c,Yf|=c)}function Zp(a,c){if(!Dt)switch(a.tailMode){case"hidden":c=a.tail;for(var u=null;c!==null;)c.alternate!==null&&(u=c),c=c.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function fn(a){var c=a.alternate!==null&&a.alternate.child===a.child,u=0,d=0;if(c)for(var m=a.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=a,m=m.sibling;else for(m=a.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=a,m=m.sibling;return a.subtreeFlags|=d,a.childLanes=u,c}function aM(a,c,u){var d=c.pendingProps;switch(Fv(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(c),null;case 1:return fn(c),null;case 3:return u=c.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),c.memoizedState.cache!==d&&(c.flags|=2048),Ka(In),qe(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(Up(c)?Za(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,cT())),fn(c),null;case 26:return u=c.memoizedState,a===null?(Za(c),u!==null?(fn(c),IO(c,u)):(fn(c),c.flags&=-16777217)):u?u!==a.memoizedState?(Za(c),fn(c),IO(c,u)):(fn(c),c.flags&=-16777217):(a.memoizedProps!==d&&Za(c),fn(c),c.flags&=-16777217),null;case 27:rn(c),u=me.current;var m=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==d&&Za(c);else{if(!d){if(c.stateNode===null)throw Error(r(166));return fn(c),null}a=le.current,Up(c)?aT(c):(a=Ix(m,d,u),c.stateNode=a,Za(c))}return fn(c),null;case 5:if(rn(c),u=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==d&&Za(c);else{if(!d){if(c.stateNode===null)throw Error(r(166));return fn(c),null}if(a=le.current,Up(c))aT(c);else{switch(m=aw(me.current),a){case 1:a=m.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:a=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":a=m.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":a=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":a=m.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof d.is=="string"?m.createElement("select",{is:d.is}):m.createElement("select"),d.multiple?a.multiple=!0:d.size&&(a.size=d.size);break;default:a=typeof d.is=="string"?m.createElement(u,{is:d.is}):m.createElement(u)}}a[wr]=c,a[Wr]=d;e:for(m=c.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break e;for(;m.sibling===null;){if(m.return===null||m.return===c)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}c.stateNode=a;e:switch(ir(a,u,d),u){case"button":case"input":case"select":case"textarea":a=!!d.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Za(c)}}return fn(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==d&&Za(c);else{if(typeof d!="string"&&c.stateNode===null)throw Error(r(166));if(a=me.current,Up(c)){if(a=c.stateNode,u=c.memoizedProps,d=null,m=Ur,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}a[wr]=c,a=!!(a.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||Cx(a.nodeValue,u)),a||Pl(c)}else a=aw(a).createTextNode(d),a[wr]=c,c.stateNode=a}return fn(c),null;case 13:if(d=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(m=Up(c),d!==null&&d.dehydrated!==null){if(a===null){if(!m)throw Error(r(318));if(m=c.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[wr]=c}else kp(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;fn(c),m=!1}else m=cT(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=m),m=!0;if(!m)return c.flags&256?(Ya(c),c):(Ya(c),null)}if(Ya(c),(c.flags&128)!==0)return c.lanes=u,c;if(u=d!==null,a=a!==null&&a.memoizedState!==null,u){d=c.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool);var w=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==m&&(d.flags|=2048)}return u!==a&&u&&(c.child.flags|=8192),K0(c,c.updateQueue),fn(c),null;case 4:return qe(),a===null&&J1(c.stateNode.containerInfo),fn(c),null;case 10:return Ka(c.type),fn(c),null;case 19:if(X(Rn),m=c.memoizedState,m===null)return fn(c),null;if(d=(c.flags&128)!==0,w=m.rendering,w===null)if(d)Zp(m,!1);else{if(gn!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(w=j0(a),w!==null){for(c.flags|=128,Zp(m,!1),a=w.updateQueue,c.updateQueue=a,K0(c,a),c.subtreeFlags=0,a=u,u=c.child;u!==null;)sT(u,a),u=u.sibling;return re(Rn,Rn.current&1|2),c.child}a=a.sibling}m.tail!==null&&Vs()>Q0&&(c.flags|=128,d=!0,Zp(m,!1),c.lanes=4194304)}else{if(!d)if(a=j0(w),a!==null){if(c.flags|=128,d=!0,a=a.updateQueue,c.updateQueue=a,K0(c,a),Zp(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Dt)return fn(c),null}else 2*Vs()-m.renderingStartTime>Q0&&u!==536870912&&(c.flags|=128,d=!0,Zp(m,!1),c.lanes=4194304);m.isBackwards?(w.sibling=c.child,c.child=w):(a=m.last,a!==null?a.sibling=w:c.child=w,m.last=w)}return m.tail!==null?(c=m.tail,m.rendering=c,m.tail=c.sibling,m.renderingStartTime=Vs(),c.sibling=null,a=Rn.current,re(Rn,d?a&1|2:a&1),c):(fn(c),null);case 22:case 23:return Ya(c),e1(),d=c.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(c.flags|=8192):d&&(c.flags|=8192),d?(u&536870912)!==0&&(c.flags&128)===0&&(fn(c),c.subtreeFlags&6&&(c.flags|=8192)):fn(c),u=c.updateQueue,u!==null&&K0(c,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),d=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(d=c.memoizedState.cachePool.pool),d!==u&&(c.flags|=2048),a!==null&&X(kl),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),c.memoizedState.cache!==u&&(c.flags|=2048),Ka(In),fn(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function oM(a,c){switch(Fv(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Ka(In),qe(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return rn(c),null;case 13:if(Ya(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));kp()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return X(Rn),null;case 4:return qe(),null;case 10:return Ka(c.type),null;case 22:case 23:return Ya(c),e1(),a!==null&&X(kl),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return Ka(In),null;case 25:return null;default:return null}}function RO(a,c){switch(Fv(c),c.tag){case 3:Ka(In),qe();break;case 26:case 27:case 5:rn(c);break;case 4:qe();break;case 13:Ya(c);break;case 19:X(Rn);break;case 10:Ka(c.type);break;case 22:case 23:Ya(c),e1(),a!==null&&X(kl);break;case 24:Ka(In)}}function Jp(a,c){try{var u=c.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var m=d.next;u=m;do{if((u.tag&a)===a){d=void 0;var w=u.create,C=u.inst;d=w(),C.destroy=d}u=u.next}while(u!==m)}}catch(U){Qt(c,c.return,U)}}function sc(a,c,u){try{var d=c.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var w=m.next;d=w;do{if((d.tag&a)===a){var C=d.inst,U=C.destroy;if(U!==void 0){C.destroy=void 0,m=c;var z=u,te=U;try{te()}catch(ue){Qt(m,z,ue)}}}d=d.next}while(d!==w)}}catch(ue){Qt(c,c.return,ue)}}function PO(a){var c=a.updateQueue;if(c!==null){var u=a.stateNode;try{bT(c,u)}catch(d){Qt(a,a.return,d)}}}function DO(a,c,u){u.props=Ml(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(d){Qt(a,c,d)}}function Xp(a,c){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof u=="function"?a.refCleanup=u(d):u.current=d}}catch(m){Qt(a,c,m)}}function na(a,c){var u=a.ref,d=a.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(m){Qt(a,c,m)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(m){Qt(a,c,m)}else u.current=null}function UO(a){var c=a.type,u=a.memoizedProps,d=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(m){Qt(a,a.return,m)}}function O1(a,c,u){try{var d=a.stateNode;OM(d,a.type,u,c),d[Wr]=c}catch(m){Qt(a,a.return,m)}}function kO(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&hc(a.type)||a.tag===4}function x1(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||kO(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&hc(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function I1(a,c,u){var d=a.tag;if(d===5||d===6)a=a.stateNode,c?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,c):(c=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,c.appendChild(a),u=u._reactRootContainer,u!=null||c.onclick!==null||(c.onclick=iw));else if(d!==4&&(d===27&&hc(a.type)&&(u=a.stateNode,c=null),a=a.child,a!==null))for(I1(a,c,u),a=a.sibling;a!==null;)I1(a,c,u),a=a.sibling}function W0(a,c,u){var d=a.tag;if(d===5||d===6)a=a.stateNode,c?u.insertBefore(a,c):u.appendChild(a);else if(d!==4&&(d===27&&hc(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(W0(a,c,u),a=a.sibling;a!==null;)W0(a,c,u),a=a.sibling}function BO(a){var c=a.stateNode,u=a.memoizedProps;try{for(var d=a.type,m=c.attributes;m.length;)c.removeAttributeNode(m[0]);ir(c,d,u),c[wr]=a,c[Wr]=u}catch(w){Qt(a,a.return,w)}}var Ja=!1,En=!1,R1=!1,MO=typeof WeakSet=="function"?WeakSet:Set,jn=null;function cM(a,c){if(a=a.containerInfo,tA=hw,a=WN(a),xv(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var m=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var C=0,U=-1,z=-1,te=0,ue=0,he=a,se=null;t:for(;;){for(var ae;he!==u||m!==0&&he.nodeType!==3||(U=C+m),he!==w||d!==0&&he.nodeType!==3||(z=C+d),he.nodeType===3&&(C+=he.nodeValue.length),(ae=he.firstChild)!==null;)se=he,he=ae;for(;;){if(he===a)break t;if(se===u&&++te===m&&(U=C),se===w&&++ue===d&&(z=C),(ae=he.nextSibling)!==null)break;he=se,se=he.parentNode}he=ae}u=U===-1||z===-1?null:{start:U,end:z}}else u=null}u=u||{start:0,end:0}}else u=null;for(nA={focusedElem:a,selectionRange:u},hw=!1,jn=c;jn!==null;)if(c=jn,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,jn=a;else for(;jn!==null;){switch(c=jn,w=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&w!==null){a=void 0,u=c,m=w.memoizedProps,w=w.memoizedState,d=u.stateNode;try{var Xe=Ml(u.type,m,u.elementType===u.type);a=d.getSnapshotBeforeUpdate(Xe,w),d.__reactInternalSnapshotBeforeUpdate=a}catch(Ke){Qt(u,u.return,Ke)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,u=a.nodeType,u===9)iA(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":iA(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=c.sibling,a!==null){a.return=c.return,jn=a;break}jn=c.return}}function LO(a,c,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:ic(a,u),d&4&&Jp(5,u);break;case 1:if(ic(a,u),d&4)if(a=u.stateNode,c===null)try{a.componentDidMount()}catch(C){Qt(u,u.return,C)}else{var m=Ml(u.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(m,c,a.__reactInternalSnapshotBeforeUpdate)}catch(C){Qt(u,u.return,C)}}d&64&&PO(u),d&512&&Xp(u,u.return);break;case 3:if(ic(a,u),d&64&&(a=u.updateQueue,a!==null)){if(c=null,u.child!==null)switch(u.child.tag){case 27:case 5:c=u.child.stateNode;break;case 1:c=u.child.stateNode}try{bT(a,c)}catch(C){Qt(u,u.return,C)}}break;case 27:c===null&&d&4&&BO(u);case 26:case 5:ic(a,u),c===null&&d&4&&UO(u),d&512&&Xp(u,u.return);break;case 12:ic(a,u);break;case 13:ic(a,u),d&4&&HO(a,u),d&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=yM.bind(null,u),kM(a,u))));break;case 22:if(d=u.memoizedState!==null||Ja,!d){c=c!==null&&c.memoizedState!==null||En,m=Ja;var w=En;Ja=d,(En=c)&&!w?ac(a,u,(u.subtreeFlags&8772)!==0):ic(a,u),Ja=m,En=w}break;case 30:break;default:ic(a,u)}}function $O(a){var c=a.alternate;c!==null&&(a.alternate=null,$O(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&uv(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var on=null,Zr=!1;function Xa(a,c,u){for(u=u.child;u!==null;)FO(a,c,u),u=u.sibling}function FO(a,c,u){if(Pr&&typeof Pr.onCommitFiberUnmount=="function")try{Pr.onCommitFiberUnmount(Wo,u)}catch{}switch(u.tag){case 26:En||na(u,c),Xa(a,c,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:En||na(u,c);var d=on,m=Zr;hc(u.type)&&(on=u.stateNode,Zr=!1),Xa(a,c,u),cg(u.stateNode),on=d,Zr=m;break;case 5:En||na(u,c);case 6:if(d=on,m=Zr,on=null,Xa(a,c,u),on=d,Zr=m,on!==null)if(Zr)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(u.stateNode)}catch(w){Qt(u,c,w)}else try{on.removeChild(u.stateNode)}catch(w){Qt(u,c,w)}break;case 18:on!==null&&(Zr?(a=on,Ox(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),mg(a)):Ox(on,u.stateNode));break;case 4:d=on,m=Zr,on=u.stateNode.containerInfo,Zr=!0,Xa(a,c,u),on=d,Zr=m;break;case 0:case 11:case 14:case 15:En||sc(2,u,c),En||sc(4,u,c),Xa(a,c,u);break;case 1:En||(na(u,c),d=u.stateNode,typeof d.componentWillUnmount=="function"&&DO(u,c,d)),Xa(a,c,u);break;case 21:Xa(a,c,u);break;case 22:En=(d=En)||u.memoizedState!==null,Xa(a,c,u),En=d;break;default:Xa(a,c,u)}}function HO(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{mg(a)}catch(u){Qt(c,c.return,u)}}function lM(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new MO),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new MO),c;default:throw Error(r(435,a.tag))}}function P1(a,c){var u=lM(a);c.forEach(function(d){var m=wM.bind(null,a,d);u.has(d)||(u.add(d),d.then(m,m))})}function Cs(a,c){var u=c.deletions;if(u!==null)for(var d=0;d<u.length;d++){var m=u[d],w=a,C=c,U=C;e:for(;U!==null;){switch(U.tag){case 27:if(hc(U.type)){on=U.stateNode,Zr=!1;break e}break;case 5:on=U.stateNode,Zr=!1;break e;case 3:case 4:on=U.stateNode.containerInfo,Zr=!0;break e}U=U.return}if(on===null)throw Error(r(160));FO(w,C,m),on=null,Zr=!1,w=m.alternate,w!==null&&(w.return=null),m.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)jO(c,a),c=c.sibling}var Ci=null;function jO(a,c){var u=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Cs(c,a),_s(a),d&4&&(sc(3,a,a.return),Jp(3,a),sc(5,a,a.return));break;case 1:Cs(c,a),_s(a),d&512&&(En||u===null||na(u,u.return)),d&64&&Ja&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var m=Ci;if(Cs(c,a),_s(a),d&512&&(En||u===null||na(u,u.return)),d&4){var w=u!==null?u.memoizedState:null;if(d=a.memoizedState,u===null)if(d===null)if(a.stateNode===null){e:{d=a.type,u=a.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":w=m.getElementsByTagName("title")[0],(!w||w[Cp]||w[wr]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=m.createElement(d),m.head.insertBefore(w,m.querySelector("head > title"))),ir(w,d,u),w[wr]=a,Fn(w),d=w;break e;case"link":var C=Bx("link","href",m).get(d+(u.href||""));if(C){for(var U=0;U<C.length;U++)if(w=C[U],w.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&w.getAttribute("rel")===(u.rel==null?null:u.rel)&&w.getAttribute("title")===(u.title==null?null:u.title)&&w.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(U,1);break t}}w=m.createElement(d),ir(w,d,u),m.head.appendChild(w);break;case"meta":if(C=Bx("meta","content",m).get(d+(u.content||""))){for(U=0;U<C.length;U++)if(w=C[U],w.getAttribute("content")===(u.content==null?null:""+u.content)&&w.getAttribute("name")===(u.name==null?null:u.name)&&w.getAttribute("property")===(u.property==null?null:u.property)&&w.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&w.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(U,1);break t}}w=m.createElement(d),ir(w,d,u),m.head.appendChild(w);break;default:throw Error(r(468,d))}w[wr]=a,Fn(w),d=w}a.stateNode=d}else Mx(m,a.type,a.stateNode);else a.stateNode=kx(m,d,a.memoizedProps);else w!==d?(w===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):w.count--,d===null?Mx(m,a.type,a.stateNode):kx(m,d,a.memoizedProps)):d===null&&a.stateNode!==null&&O1(a,a.memoizedProps,u.memoizedProps)}break;case 27:Cs(c,a),_s(a),d&512&&(En||u===null||na(u,u.return)),u!==null&&d&4&&O1(a,a.memoizedProps,u.memoizedProps);break;case 5:if(Cs(c,a),_s(a),d&512&&(En||u===null||na(u,u.return)),a.flags&32){m=a.stateNode;try{Tf(m,"")}catch(ae){Qt(a,a.return,ae)}}d&4&&a.stateNode!=null&&(m=a.memoizedProps,O1(a,m,u!==null?u.memoizedProps:m)),d&1024&&(R1=!0);break;case 6:if(Cs(c,a),_s(a),d&4){if(a.stateNode===null)throw Error(r(162));d=a.memoizedProps,u=a.stateNode;try{u.nodeValue=d}catch(ae){Qt(a,a.return,ae)}}break;case 3:if(lw=null,m=Ci,Ci=ow(c.containerInfo),Cs(c,a),Ci=m,_s(a),d&4&&u!==null&&u.memoizedState.isDehydrated)try{mg(c.containerInfo)}catch(ae){Qt(a,a.return,ae)}R1&&(R1=!1,zO(a));break;case 4:d=Ci,Ci=ow(a.stateNode.containerInfo),Cs(c,a),_s(a),Ci=d;break;case 12:Cs(c,a),_s(a);break;case 13:Cs(c,a),_s(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(L1=Vs()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,P1(a,d)));break;case 22:m=a.memoizedState!==null;var z=u!==null&&u.memoizedState!==null,te=Ja,ue=En;if(Ja=te||m,En=ue||z,Cs(c,a),En=ue,Ja=te,_s(a),d&8192)e:for(c=a.stateNode,c._visibility=m?c._visibility&-2:c._visibility|1,m&&(u===null||z||Ja||En||Ll(a)),u=null,c=a;;){if(c.tag===5||c.tag===26){if(u===null){z=u=c;try{if(w=z.stateNode,m)C=w.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{U=z.stateNode;var he=z.memoizedProps.style,se=he!=null&&he.hasOwnProperty("display")?he.display:null;U.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(ae){Qt(z,z.return,ae)}}}else if(c.tag===6){if(u===null){z=c;try{z.stateNode.nodeValue=m?"":z.memoizedProps}catch(ae){Qt(z,z.return,ae)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;u===c&&(u=null),c=c.return}u===c&&(u=null),c.sibling.return=c.return,c=c.sibling}d&4&&(d=a.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,P1(a,u))));break;case 19:Cs(c,a),_s(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,P1(a,d)));break;case 30:break;case 21:break;default:Cs(c,a),_s(a)}}function _s(a){var c=a.flags;if(c&2){try{for(var u,d=a.return;d!==null;){if(kO(d)){u=d;break}d=d.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var m=u.stateNode,w=x1(a);W0(a,w,m);break;case 5:var C=u.stateNode;u.flags&32&&(Tf(C,""),u.flags&=-33);var U=x1(a);W0(a,U,C);break;case 3:case 4:var z=u.stateNode.containerInfo,te=x1(a);I1(a,te,z);break;default:throw Error(r(161))}}catch(ue){Qt(a,a.return,ue)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function zO(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;zO(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function ic(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)LO(a,c.alternate,c),c=c.sibling}function Ll(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:sc(4,c,c.return),Ll(c);break;case 1:na(c,c.return);var u=c.stateNode;typeof u.componentWillUnmount=="function"&&DO(c,c.return,u),Ll(c);break;case 27:cg(c.stateNode);case 26:case 5:na(c,c.return),Ll(c);break;case 22:c.memoizedState===null&&Ll(c);break;case 30:Ll(c);break;default:Ll(c)}a=a.sibling}}function ac(a,c,u){for(u=u&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var d=c.alternate,m=a,w=c,C=w.flags;switch(w.tag){case 0:case 11:case 15:ac(m,w,u),Jp(4,w);break;case 1:if(ac(m,w,u),d=w,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(te){Qt(d,d.return,te)}if(d=w,m=d.updateQueue,m!==null){var U=d.stateNode;try{var z=m.shared.hiddenCallbacks;if(z!==null)for(m.shared.hiddenCallbacks=null,m=0;m<z.length;m++)wT(z[m],U)}catch(te){Qt(d,d.return,te)}}u&&C&64&&PO(w),Xp(w,w.return);break;case 27:BO(w);case 26:case 5:ac(m,w,u),u&&d===null&&C&4&&UO(w),Xp(w,w.return);break;case 12:ac(m,w,u);break;case 13:ac(m,w,u),u&&C&4&&HO(m,w);break;case 22:w.memoizedState===null&&ac(m,w,u),Xp(w,w.return);break;case 30:break;default:ac(m,w,u)}c=c.sibling}}function D1(a,c){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&Lp(u))}function U1(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Lp(a))}function ra(a,c,u,d){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)qO(a,c,u,d),c=c.sibling}function qO(a,c,u,d){var m=c.flags;switch(c.tag){case 0:case 11:case 15:ra(a,c,u,d),m&2048&&Jp(9,c);break;case 1:ra(a,c,u,d);break;case 3:ra(a,c,u,d),m&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Lp(a)));break;case 12:if(m&2048){ra(a,c,u,d),a=c.stateNode;try{var w=c.memoizedProps,C=w.id,U=w.onPostCommit;typeof U=="function"&&U(C,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(z){Qt(c,c.return,z)}}else ra(a,c,u,d);break;case 13:ra(a,c,u,d);break;case 23:break;case 22:w=c.stateNode,C=c.alternate,c.memoizedState!==null?w._visibility&2?ra(a,c,u,d):eg(a,c):w._visibility&2?ra(a,c,u,d):(w._visibility|=2,Gf(a,c,u,d,(c.subtreeFlags&10256)!==0)),m&2048&&D1(C,c);break;case 24:ra(a,c,u,d),m&2048&&U1(c.alternate,c);break;default:ra(a,c,u,d)}}function Gf(a,c,u,d,m){for(m=m&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var w=a,C=c,U=u,z=d,te=C.flags;switch(C.tag){case 0:case 11:case 15:Gf(w,C,U,z,m),Jp(8,C);break;case 23:break;case 22:var ue=C.stateNode;C.memoizedState!==null?ue._visibility&2?Gf(w,C,U,z,m):eg(w,C):(ue._visibility|=2,Gf(w,C,U,z,m)),m&&te&2048&&D1(C.alternate,C);break;case 24:Gf(w,C,U,z,m),m&&te&2048&&U1(C.alternate,C);break;default:Gf(w,C,U,z,m)}c=c.sibling}}function eg(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var u=a,d=c,m=d.flags;switch(d.tag){case 22:eg(u,d),m&2048&&D1(d.alternate,d);break;case 24:eg(u,d),m&2048&&U1(d.alternate,d);break;default:eg(u,d)}c=c.sibling}}var tg=8192;function Kf(a){if(a.subtreeFlags&tg)for(a=a.child;a!==null;)VO(a),a=a.sibling}function VO(a){switch(a.tag){case 26:Kf(a),a.flags&tg&&a.memoizedState!==null&&WM(Ci,a.memoizedState,a.memoizedProps);break;case 5:Kf(a);break;case 3:case 4:var c=Ci;Ci=ow(a.stateNode.containerInfo),Kf(a),Ci=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=tg,tg=16777216,Kf(a),tg=c):Kf(a));break;default:Kf(a)}}function GO(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function ng(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var u=0;u<c.length;u++){var d=c[u];jn=d,WO(d,a)}GO(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)KO(a),a=a.sibling}function KO(a){switch(a.tag){case 0:case 11:case 15:ng(a),a.flags&2048&&sc(9,a,a.return);break;case 3:ng(a);break;case 12:ng(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,Y0(a)):ng(a);break;default:ng(a)}}function Y0(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var u=0;u<c.length;u++){var d=c[u];jn=d,WO(d,a)}GO(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:sc(8,c,c.return),Y0(c);break;case 22:u=c.stateNode,u._visibility&2&&(u._visibility&=-3,Y0(c));break;default:Y0(c)}a=a.sibling}}function WO(a,c){for(;jn!==null;){var u=jn;switch(u.tag){case 0:case 11:case 15:sc(8,u,c);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Lp(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,jn=d;else e:for(u=a;jn!==null;){d=jn;var m=d.sibling,w=d.return;if($O(d),d===u){jn=null;break e}if(m!==null){m.return=w,jn=m;break e}jn=w}}}var uM={getCacheForType:function(a){var c=br(In),u=c.data.get(a);return u===void 0&&(u=a(),c.data.set(a,u)),u}},fM=typeof WeakMap=="function"?WeakMap:Map,$t=0,en=null,dt=null,bt=0,Ft=0,Ss=null,oc=!1,Wf=!1,k1=!1,eo=0,gn=0,cc=0,$l=0,B1=0,Xs=0,Yf=0,rg=null,Jr=null,M1=!1,L1=0,Q0=1/0,Z0=null,lc=null,sr=0,uc=null,Qf=null,Zf=0,$1=0,F1=null,YO=null,sg=0,H1=null;function Ns(){if(($t&2)!==0&&bt!==0)return bt&-bt;if(_.T!==null){var a=Lf;return a!==0?a:W1()}return fN()}function QO(){Xs===0&&(Xs=(bt&536870912)===0||Dt?oN():536870912);var a=Js.current;return a!==null&&(a.flags|=32),Xs}function Ts(a,c,u){(a===en&&(Ft===2||Ft===9)||a.cancelPendingCommit!==null)&&(Jf(a,0),fc(a,bt,Xs,!1)),Ap(a,u),(($t&2)===0||a!==en)&&(a===en&&(($t&2)===0&&($l|=u),gn===4&&fc(a,bt,Xs,!1)),sa(a))}function ZO(a,c,u){if(($t&6)!==0)throw Error(r(327));var d=!u&&(c&124)===0&&(c&a.expiredLanes)===0||vp(a,c),m=d?pM(a,c):q1(a,c,!0),w=d;do{if(m===0){Wf&&!d&&fc(a,c,0,!1);break}else{if(u=a.current.alternate,w&&!hM(u)){m=q1(a,c,!1),w=!1;continue}if(m===2){if(w=c,a.errorRecoveryDisabledLanes&w)var C=0;else C=a.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){c=C;e:{var U=a;m=rg;var z=U.current.memoizedState.isDehydrated;if(z&&(Jf(U,C).flags|=256),C=q1(U,C,!1),C!==2){if(k1&&!z){U.errorRecoveryDisabledLanes|=w,$l|=w,m=4;break e}w=Jr,Jr=m,w!==null&&(Jr===null?Jr=w:Jr.push.apply(Jr,w))}m=C}if(w=!1,m!==2)continue}}if(m===1){Jf(a,0),fc(a,c,0,!0);break}e:{switch(d=a,w=m,w){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:fc(d,c,Xs,!oc);break e;case 2:Jr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(m=L1+300-Vs(),10<m)){if(fc(d,c,Xs,!oc),c0(d,0,!0)!==0)break e;d.timeoutHandle=Nx(JO.bind(null,d,u,Jr,Z0,M1,c,Xs,$l,Yf,oc,w,2,-0,0),m);break e}JO(d,u,Jr,Z0,M1,c,Xs,$l,Yf,oc,w,0,-0,0)}}break}while(!0);sa(a)}function JO(a,c,u,d,m,w,C,U,z,te,ue,he,se,ae){if(a.timeoutHandle=-1,he=c.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(fg={stylesheets:null,count:0,unsuspend:KM},VO(c),he=YM(),he!==null)){a.cancelPendingCommit=he(ix.bind(null,a,c,w,u,d,m,C,U,z,ue,1,se,ae)),fc(a,w,C,!te);return}ix(a,c,w,u,d,m,C,U,z)}function hM(a){for(var c=a;;){var u=c.tag;if((u===0||u===11||u===15)&&c.flags&16384&&(u=c.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var m=u[d],w=m.getSnapshot;m=m.value;try{if(!vs(w(),m))return!1}catch{return!1}}if(u=c.child,c.subtreeFlags&16384&&u!==null)u.return=c,c=u;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function fc(a,c,u,d){c&=~B1,c&=~$l,a.suspendedLanes|=c,a.pingedLanes&=~c,d&&(a.warmLanes|=c),d=a.expirationTimes;for(var m=c;0<m;){var w=31-Dr(m),C=1<<w;d[w]=-1,m&=~C}u!==0&&lN(a,u,c)}function J0(){return($t&6)===0?(ig(0),!1):!0}function j1(){if(dt!==null){if(Ft===0)var a=dt.return;else a=dt,Ga=Dl=null,i1(a),qf=null,Yp=0,a=dt;for(;a!==null;)RO(a.alternate,a),a=a.return;dt=null}}function Jf(a,c){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,IM(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),j1(),en=a,dt=u=za(a.current,null),bt=c,Ft=0,Ss=null,oc=!1,Wf=vp(a,c),k1=!1,Yf=Xs=B1=$l=cc=gn=0,Jr=rg=null,M1=!1,(c&8)!==0&&(c|=c&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=c;0<d;){var m=31-Dr(d),w=1<<m;c|=a[m],d&=~w}return eo=c,E0(),u}function XO(a,c){lt=null,_.H=$0,c===Fp||c===x0?(c=mT(),Ft=3):c===dT?(c=mT(),Ft=4):Ft=c===yO?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Ss=c,dt===null&&(gn=1,q0(a,Ws(c,a.current)))}function ex(){var a=_.H;return _.H=$0,a===null?$0:a}function tx(){var a=_.A;return _.A=uM,a}function z1(){gn=4,oc||(bt&4194048)!==bt&&Js.current!==null||(Wf=!0),(cc&134217727)===0&&($l&134217727)===0||en===null||fc(en,bt,Xs,!1)}function q1(a,c,u){var d=$t;$t|=2;var m=ex(),w=tx();(en!==a||bt!==c)&&(Z0=null,Jf(a,c)),c=!1;var C=gn;e:do try{if(Ft!==0&&dt!==null){var U=dt,z=Ss;switch(Ft){case 8:j1(),C=6;break e;case 3:case 2:case 9:case 6:Js.current===null&&(c=!0);var te=Ft;if(Ft=0,Ss=null,Xf(a,U,z,te),u&&Wf){C=0;break e}break;default:te=Ft,Ft=0,Ss=null,Xf(a,U,z,te)}}dM(),C=gn;break}catch(ue){XO(a,ue)}while(!0);return c&&a.shellSuspendCounter++,Ga=Dl=null,$t=d,_.H=m,_.A=w,dt===null&&(en=null,bt=0,E0()),C}function dM(){for(;dt!==null;)nx(dt)}function pM(a,c){var u=$t;$t|=2;var d=ex(),m=tx();en!==a||bt!==c?(Z0=null,Q0=Vs()+500,Jf(a,c)):Wf=vp(a,c);e:do try{if(Ft!==0&&dt!==null){c=dt;var w=Ss;t:switch(Ft){case 1:Ft=0,Ss=null,Xf(a,c,w,1);break;case 2:case 9:if(pT(w)){Ft=0,Ss=null,rx(c);break}c=function(){Ft!==2&&Ft!==9||en!==a||(Ft=7),sa(a)},w.then(c,c);break e;case 3:Ft=7;break e;case 4:Ft=5;break e;case 7:pT(w)?(Ft=0,Ss=null,rx(c)):(Ft=0,Ss=null,Xf(a,c,w,7));break;case 5:var C=null;switch(dt.tag){case 26:C=dt.memoizedState;case 5:case 27:var U=dt;if(!C||Lx(C)){Ft=0,Ss=null;var z=U.sibling;if(z!==null)dt=z;else{var te=U.return;te!==null?(dt=te,X0(te)):dt=null}break t}}Ft=0,Ss=null,Xf(a,c,w,5);break;case 6:Ft=0,Ss=null,Xf(a,c,w,6);break;case 8:j1(),gn=6;break e;default:throw Error(r(462))}}gM();break}catch(ue){XO(a,ue)}while(!0);return Ga=Dl=null,_.H=d,_.A=m,$t=u,dt!==null?0:(en=null,bt=0,E0(),gn)}function gM(){for(;dt!==null&&!Go();)nx(dt)}function nx(a){var c=xO(a.alternate,a,eo);a.memoizedProps=a.pendingProps,c===null?X0(a):dt=c}function rx(a){var c=a,u=c.alternate;switch(c.tag){case 15:case 0:c=CO(u,c,c.pendingProps,c.type,void 0,bt);break;case 11:c=CO(u,c,c.pendingProps,c.type.render,c.ref,bt);break;case 5:i1(c);default:RO(u,c),c=dt=sT(c,eo),c=xO(u,c,eo)}a.memoizedProps=a.pendingProps,c===null?X0(a):dt=c}function Xf(a,c,u,d){Ga=Dl=null,i1(c),qf=null,Yp=0;var m=c.return;try{if(sM(a,m,c,u,bt)){gn=1,q0(a,Ws(u,a.current)),dt=null;return}}catch(w){if(m!==null)throw dt=m,w;gn=1,q0(a,Ws(u,a.current)),dt=null;return}c.flags&32768?(Dt||d===1?a=!0:Wf||(bt&536870912)!==0?a=!1:(oc=a=!0,(d===2||d===9||d===3||d===6)&&(d=Js.current,d!==null&&d.tag===13&&(d.flags|=16384))),sx(c,a)):X0(c)}function X0(a){var c=a;do{if((c.flags&32768)!==0){sx(c,oc);return}a=c.return;var u=aM(c.alternate,c,eo);if(u!==null){dt=u;return}if(c=c.sibling,c!==null){dt=c;return}dt=c=a}while(c!==null);gn===0&&(gn=5)}function sx(a,c){do{var u=oM(a.alternate,a);if(u!==null){u.flags&=32767,dt=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!c&&(a=a.sibling,a!==null)){dt=a;return}dt=a=u}while(a!==null);gn=6,dt=null}function ix(a,c,u,d,m,w,C,U,z){a.cancelPendingCommit=null;do ew();while(sr!==0);if(($t&6)!==0)throw Error(r(327));if(c!==null){if(c===a.current)throw Error(r(177));if(w=c.lanes|c.childLanes,w|=Uv,K6(a,u,w,C,U,z),a===en&&(dt=en=null,bt=0),Qf=c,uc=a,Zf=u,$1=w,F1=m,YO=d,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,bM(Ko,function(){return ux(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||d){d=_.T,_.T=null,m=M.p,M.p=2,C=$t,$t|=4;try{cM(a,c,u)}finally{$t=C,M.p=m,_.T=d}}sr=1,ax(),ox(),cx()}}function ax(){if(sr===1){sr=0;var a=uc,c=Qf,u=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||u){u=_.T,_.T=null;var d=M.p;M.p=2;var m=$t;$t|=4;try{jO(c,a);var w=nA,C=WN(a.containerInfo),U=w.focusedElem,z=w.selectionRange;if(C!==U&&U&&U.ownerDocument&&KN(U.ownerDocument.documentElement,U)){if(z!==null&&xv(U)){var te=z.start,ue=z.end;if(ue===void 0&&(ue=te),"selectionStart"in U)U.selectionStart=te,U.selectionEnd=Math.min(ue,U.value.length);else{var he=U.ownerDocument||document,se=he&&he.defaultView||window;if(se.getSelection){var ae=se.getSelection(),Xe=U.textContent.length,Ke=Math.min(z.start,Xe),Gt=z.end===void 0?Ke:Math.min(z.end,Xe);!ae.extend&&Ke>Gt&&(C=Gt,Gt=Ke,Ke=C);var Z=GN(U,Ke),Y=GN(U,Gt);if(Z&&Y&&(ae.rangeCount!==1||ae.anchorNode!==Z.node||ae.anchorOffset!==Z.offset||ae.focusNode!==Y.node||ae.focusOffset!==Y.offset)){var J=he.createRange();J.setStart(Z.node,Z.offset),ae.removeAllRanges(),Ke>Gt?(ae.addRange(J),ae.extend(Y.node,Y.offset)):(J.setEnd(Y.node,Y.offset),ae.addRange(J))}}}}for(he=[],ae=U;ae=ae.parentNode;)ae.nodeType===1&&he.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<he.length;U++){var fe=he[U];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}hw=!!tA,nA=tA=null}finally{$t=m,M.p=d,_.T=u}}a.current=c,sr=2}}function ox(){if(sr===2){sr=0;var a=uc,c=Qf,u=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||u){u=_.T,_.T=null;var d=M.p;M.p=2;var m=$t;$t|=4;try{LO(a,c.alternate,c)}finally{$t=m,M.p=d,_.T=u}}sr=3}}function cx(){if(sr===4||sr===3){sr=0,bf();var a=uc,c=Qf,u=Zf,d=YO;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?sr=5:(sr=0,Qf=uc=null,lx(a,a.pendingLanes));var m=a.pendingLanes;if(m===0&&(lc=null),cv(u),c=c.stateNode,Pr&&typeof Pr.onCommitFiberRoot=="function")try{Pr.onCommitFiberRoot(Wo,c,void 0,(c.current.flags&128)===128)}catch{}if(d!==null){c=_.T,m=M.p,M.p=2,_.T=null;try{for(var w=a.onRecoverableError,C=0;C<d.length;C++){var U=d[C];w(U.value,{componentStack:U.stack})}}finally{_.T=c,M.p=m}}(Zf&3)!==0&&ew(),sa(a),m=a.pendingLanes,(u&4194090)!==0&&(m&42)!==0?a===H1?sg++:(sg=0,H1=a):sg=0,ig(0)}}function lx(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,Lp(c)))}function ew(a){return ax(),ox(),cx(),ux()}function ux(){if(sr!==5)return!1;var a=uc,c=$1;$1=0;var u=cv(Zf),d=_.T,m=M.p;try{M.p=32>u?32:u,_.T=null,u=F1,F1=null;var w=uc,C=Zf;if(sr=0,Qf=uc=null,Zf=0,($t&6)!==0)throw Error(r(331));var U=$t;if($t|=4,KO(w.current),qO(w,w.current,C,u),$t=U,ig(0,!1),Pr&&typeof Pr.onPostCommitFiberRoot=="function")try{Pr.onPostCommitFiberRoot(Wo,w)}catch{}return!0}finally{M.p=m,_.T=d,lx(a,c)}}function fx(a,c,u){c=Ws(u,c),c=b1(a.stateNode,c,2),a=ec(a,c,2),a!==null&&(Ap(a,2),sa(a))}function Qt(a,c,u){if(a.tag===3)fx(a,a,u);else for(;c!==null;){if(c.tag===3){fx(c,a,u);break}else if(c.tag===1){var d=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(lc===null||!lc.has(d))){a=Ws(u,a),u=gO(2),d=ec(c,u,2),d!==null&&(mO(u,d,c,a),Ap(d,2),sa(d));break}}c=c.return}}function V1(a,c,u){var d=a.pingCache;if(d===null){d=a.pingCache=new fM;var m=new Set;d.set(c,m)}else m=d.get(c),m===void 0&&(m=new Set,d.set(c,m));m.has(u)||(k1=!0,m.add(u),a=mM.bind(null,a,c,u),c.then(a,a))}function mM(a,c,u){var d=a.pingCache;d!==null&&d.delete(c),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,en===a&&(bt&u)===u&&(gn===4||gn===3&&(bt&62914560)===bt&&300>Vs()-L1?($t&2)===0&&Jf(a,0):B1|=u,Yf===bt&&(Yf=0)),sa(a)}function hx(a,c){c===0&&(c=cN()),a=Uf(a,c),a!==null&&(Ap(a,c),sa(a))}function yM(a){var c=a.memoizedState,u=0;c!==null&&(u=c.retryLane),hx(a,u)}function wM(a,c){var u=0;switch(a.tag){case 13:var d=a.stateNode,m=a.memoizedState;m!==null&&(u=m.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(c),hx(a,u)}function bM(a,c){return _n(a,c)}var tw=null,eh=null,G1=!1,nw=!1,K1=!1,Fl=0;function sa(a){a!==eh&&a.next===null&&(eh===null?tw=eh=a:eh=eh.next=a),nw=!0,G1||(G1=!0,vM())}function ig(a,c){if(!K1&&nw){K1=!0;do for(var u=!1,d=tw;d!==null;){if(a!==0){var m=d.pendingLanes;if(m===0)var w=0;else{var C=d.suspendedLanes,U=d.pingedLanes;w=(1<<31-Dr(42|a)+1)-1,w&=m&~(C&~U),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(u=!0,mx(d,w))}else w=bt,w=c0(d,d===en?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||vp(d,w)||(u=!0,mx(d,w));d=d.next}while(u);K1=!1}}function EM(){dx()}function dx(){nw=G1=!1;var a=0;Fl!==0&&(xM()&&(a=Fl),Fl=0);for(var c=Vs(),u=null,d=tw;d!==null;){var m=d.next,w=px(d,c);w===0?(d.next=null,u===null?tw=m:u.next=m,m===null&&(eh=u)):(u=d,(a!==0||(w&3)!==0)&&(nw=!0)),d=m}ig(a)}function px(a,c){for(var u=a.suspendedLanes,d=a.pingedLanes,m=a.expirationTimes,w=a.pendingLanes&-62914561;0<w;){var C=31-Dr(w),U=1<<C,z=m[C];z===-1?((U&u)===0||(U&d)!==0)&&(m[C]=G6(U,c)):z<=c&&(a.expiredLanes|=U),w&=~U}if(c=en,u=bt,u=c0(a,a===c?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,u===0||a===c&&(Ft===2||Ft===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&nr(d),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||vp(a,u)){if(c=u&-u,c===a.callbackPriority)return c;switch(d!==null&&nr(d),cv(u)){case 2:case 8:u=bp;break;case 32:u=Ko;break;case 268435456:u=Ep;break;default:u=Ko}return d=gx.bind(null,a),u=_n(u,d),a.callbackPriority=c,a.callbackNode=u,c}return d!==null&&d!==null&&nr(d),a.callbackPriority=2,a.callbackNode=null,2}function gx(a,c){if(sr!==0&&sr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(ew()&&a.callbackNode!==u)return null;var d=bt;return d=c0(a,a===en?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(ZO(a,d,c),px(a,Vs()),a.callbackNode!=null&&a.callbackNode===u?gx.bind(null,a):null)}function mx(a,c){if(ew())return null;ZO(a,c,!0)}function vM(){RM(function(){($t&6)!==0?_n(wp,EM):dx()})}function W1(){return Fl===0&&(Fl=oN()),Fl}function yx(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:d0(""+a)}function wx(a,c){var u=c.ownerDocument.createElement("input");return u.name=c.name,u.value=c.value,a.id&&u.setAttribute("form",a.id),c.parentNode.insertBefore(u,c),a=new FormData(a),u.parentNode.removeChild(u),a}function AM(a,c,u,d,m){if(c==="submit"&&u&&u.stateNode===m){var w=yx((m[Wr]||null).action),C=d.submitter;C&&(c=(c=C[Wr]||null)?yx(c.formAction):C.getAttribute("formAction"),c!==null&&(w=c,C=null));var U=new y0("action","action",null,d,m);a.push({event:U,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Fl!==0){var z=C?wx(m,C):new FormData(m);p1(u,{pending:!0,data:z,method:m.method,action:w},null,z)}}else typeof w=="function"&&(U.preventDefault(),z=C?wx(m,C):new FormData(m),p1(u,{pending:!0,data:z,method:m.method,action:w},w,z))},currentTarget:m}]})}}for(var Y1=0;Y1<Dv.length;Y1++){var Q1=Dv[Y1],CM=Q1.toLowerCase(),_M=Q1[0].toUpperCase()+Q1.slice(1);Ai(CM,"on"+_M)}Ai(ZN,"onAnimationEnd"),Ai(JN,"onAnimationIteration"),Ai(XN,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(HB,"onTransitionRun"),Ai(jB,"onTransitionStart"),Ai(zB,"onTransitionCancel"),Ai(eT,"onTransitionEnd"),_f("onMouseEnter",["mouseout","mouseover"]),_f("onMouseLeave",["mouseout","mouseover"]),_f("onPointerEnter",["pointerout","pointerover"]),_f("onPointerLeave",["pointerout","pointerover"]),_l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_l("onBeforeInput",["compositionend","keypress","textInput","paste"]),_l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ag="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ag));function bx(a,c){c=(c&4)!==0;for(var u=0;u<a.length;u++){var d=a[u],m=d.event;d=d.listeners;e:{var w=void 0;if(c)for(var C=d.length-1;0<=C;C--){var U=d[C],z=U.instance,te=U.currentTarget;if(U=U.listener,z!==w&&m.isPropagationStopped())break e;w=U,m.currentTarget=te;try{w(m)}catch(ue){z0(ue)}m.currentTarget=null,w=z}else for(C=0;C<d.length;C++){if(U=d[C],z=U.instance,te=U.currentTarget,U=U.listener,z!==w&&m.isPropagationStopped())break e;w=U,m.currentTarget=te;try{w(m)}catch(ue){z0(ue)}m.currentTarget=null,w=z}}}}function pt(a,c){var u=c[lv];u===void 0&&(u=c[lv]=new Set);var d=a+"__bubble";u.has(d)||(Ex(c,a,2,!1),u.add(d))}function Z1(a,c,u){var d=0;c&&(d|=4),Ex(u,a,d,c)}var rw="_reactListening"+Math.random().toString(36).slice(2);function J1(a){if(!a[rw]){a[rw]=!0,dN.forEach(function(u){u!=="selectionchange"&&(SM.has(u)||Z1(u,!1,a),Z1(u,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[rw]||(c[rw]=!0,Z1("selectionchange",!1,c))}}function Ex(a,c,u,d){switch(qx(c)){case 2:var m=JM;break;case 8:m=XM;break;default:m=hA}u=m.bind(null,c,u,a),m=void 0,!Ev||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(m=!0),d?m!==void 0?a.addEventListener(c,u,{capture:!0,passive:m}):a.addEventListener(c,u,!0):m!==void 0?a.addEventListener(c,u,{passive:m}):a.addEventListener(c,u,!1)}function X1(a,c,u,d,m){var w=d;if((c&1)===0&&(c&2)===0&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var U=d.stateNode.containerInfo;if(U===m)break;if(C===4)for(C=d.return;C!==null;){var z=C.tag;if((z===3||z===4)&&C.stateNode.containerInfo===m)return;C=C.return}for(;U!==null;){if(C=vf(U),C===null)return;if(z=C.tag,z===5||z===6||z===26||z===27){d=w=C;continue e}U=U.parentNode}}d=d.return}TN(function(){var te=w,ue=wv(u),he=[];e:{var se=tT.get(a);if(se!==void 0){var ae=y0,Xe=a;switch(a){case"keypress":if(g0(u)===0)break e;case"keydown":case"keyup":ae=bB;break;case"focusin":Xe="focus",ae=_v;break;case"focusout":Xe="blur",ae=_v;break;case"beforeblur":case"afterblur":ae=_v;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=IN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=oB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=AB;break;case ZN:case JN:case XN:ae=uB;break;case eT:ae=_B;break;case"scroll":case"scrollend":ae=iB;break;case"wheel":ae=NB;break;case"copy":case"cut":case"paste":ae=hB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=PN;break;case"toggle":case"beforetoggle":ae=OB}var Ke=(c&4)!==0,Gt=!Ke&&(a==="scroll"||a==="scrollend"),Z=Ke?se!==null?se+"Capture":null:se;Ke=[];for(var Y=te,J;Y!==null;){var fe=Y;if(J=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||J===null||Z===null||(fe=Sp(Y,Z),fe!=null&&Ke.push(og(Y,fe,J))),Gt)break;Y=Y.return}0<Ke.length&&(se=new ae(se,Xe,null,u,ue),he.push({event:se,listeners:Ke}))}}if((c&7)===0){e:{if(se=a==="mouseover"||a==="pointerover",ae=a==="mouseout"||a==="pointerout",se&&u!==yv&&(Xe=u.relatedTarget||u.fromElement)&&(vf(Xe)||Xe[Ef]))break e;if((ae||se)&&(se=ue.window===ue?ue:(se=ue.ownerDocument)?se.defaultView||se.parentWindow:window,ae?(Xe=u.relatedTarget||u.toElement,ae=te,Xe=Xe?vf(Xe):null,Xe!==null&&(Gt=i(Xe),Ke=Xe.tag,Xe!==Gt||Ke!==5&&Ke!==27&&Ke!==6)&&(Xe=null)):(ae=null,Xe=te),ae!==Xe)){if(Ke=IN,fe="onMouseLeave",Z="onMouseEnter",Y="mouse",(a==="pointerout"||a==="pointerover")&&(Ke=PN,fe="onPointerLeave",Z="onPointerEnter",Y="pointer"),Gt=ae==null?se:_p(ae),J=Xe==null?se:_p(Xe),se=new Ke(fe,Y+"leave",ae,u,ue),se.target=Gt,se.relatedTarget=J,fe=null,vf(ue)===te&&(Ke=new Ke(Z,Y+"enter",Xe,u,ue),Ke.target=J,Ke.relatedTarget=Gt,fe=Ke),Gt=fe,ae&&Xe)t:{for(Ke=ae,Z=Xe,Y=0,J=Ke;J;J=th(J))Y++;for(J=0,fe=Z;fe;fe=th(fe))J++;for(;0<Y-J;)Ke=th(Ke),Y--;for(;0<J-Y;)Z=th(Z),J--;for(;Y--;){if(Ke===Z||Z!==null&&Ke===Z.alternate)break t;Ke=th(Ke),Z=th(Z)}Ke=null}else Ke=null;ae!==null&&vx(he,se,ae,Ke,!1),Xe!==null&&Gt!==null&&vx(he,Gt,Xe,Ke,!0)}}e:{if(se=te?_p(te):window,ae=se.nodeName&&se.nodeName.toLowerCase(),ae==="select"||ae==="input"&&se.type==="file")var Me=FN;else if(LN(se))if(HN)Me=LB;else{Me=BB;var ft=kB}else ae=se.nodeName,!ae||ae.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?te&&mv(te.elementType)&&(Me=FN):Me=MB;if(Me&&(Me=Me(a,te))){$N(he,Me,u,ue);break e}ft&&ft(a,se,te),a==="focusout"&&te&&se.type==="number"&&te.memoizedProps.value!=null&&gv(se,"number",se.value)}switch(ft=te?_p(te):window,a){case"focusin":(LN(ft)||ft.contentEditable==="true")&&(Rf=ft,Iv=te,Dp=null);break;case"focusout":Dp=Iv=Rf=null;break;case"mousedown":Rv=!0;break;case"contextmenu":case"mouseup":case"dragend":Rv=!1,YN(he,u,ue);break;case"selectionchange":if(FB)break;case"keydown":case"keyup":YN(he,u,ue)}var He;if(Nv)e:{switch(a){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else If?BN(a,u)&&(Ye="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(Ye="onCompositionStart");Ye&&(DN&&u.locale!=="ko"&&(If||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&If&&(He=ON()):(Qo=ue,vv="value"in Qo?Qo.value:Qo.textContent,If=!0)),ft=sw(te,Ye),0<ft.length&&(Ye=new RN(Ye,a,null,u,ue),he.push({event:Ye,listeners:ft}),He?Ye.data=He:(He=MN(u),He!==null&&(Ye.data=He)))),(He=IB?RB(a,u):PB(a,u))&&(Ye=sw(te,"onBeforeInput"),0<Ye.length&&(ft=new RN("onBeforeInput","beforeinput",null,u,ue),he.push({event:ft,listeners:Ye}),ft.data=He)),AM(he,a,te,u,ue)}bx(he,c)})}function og(a,c,u){return{instance:a,listener:c,currentTarget:u}}function sw(a,c){for(var u=c+"Capture",d=[];a!==null;){var m=a,w=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||w===null||(m=Sp(a,u),m!=null&&d.unshift(og(a,m,w)),m=Sp(a,c),m!=null&&d.push(og(a,m,w))),a.tag===3)return d;a=a.return}return[]}function th(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function vx(a,c,u,d,m){for(var w=c._reactName,C=[];u!==null&&u!==d;){var U=u,z=U.alternate,te=U.stateNode;if(U=U.tag,z!==null&&z===d)break;U!==5&&U!==26&&U!==27||te===null||(z=te,m?(te=Sp(u,w),te!=null&&C.unshift(og(u,te,z))):m||(te=Sp(u,w),te!=null&&C.push(og(u,te,z)))),u=u.return}C.length!==0&&a.push({event:c,listeners:C})}var NM=/\r\n?/g,TM=/\u0000|\uFFFD/g;function Ax(a){return(typeof a=="string"?a:""+a).replace(NM,`
`).replace(TM,"")}function Cx(a,c){return c=Ax(c),Ax(a)===c}function iw(){}function Vt(a,c,u,d,m,w){switch(u){case"children":typeof d=="string"?c==="body"||c==="textarea"&&d===""||Tf(a,d):(typeof d=="number"||typeof d=="bigint")&&c!=="body"&&Tf(a,""+d);break;case"className":u0(a,"class",d);break;case"tabIndex":u0(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":u0(a,u,d);break;case"style":SN(a,d,w);break;case"data":if(c!=="object"){u0(a,"data",d);break}case"src":case"href":if(d===""&&(c!=="a"||u!=="href")){a.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(u);break}d=d0(""+d),a.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(u==="formAction"?(c!=="input"&&Vt(a,c,"name",m.name,m,null),Vt(a,c,"formEncType",m.formEncType,m,null),Vt(a,c,"formMethod",m.formMethod,m,null),Vt(a,c,"formTarget",m.formTarget,m,null)):(Vt(a,c,"encType",m.encType,m,null),Vt(a,c,"method",m.method,m,null),Vt(a,c,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(u);break}d=d0(""+d),a.setAttribute(u,d);break;case"onClick":d!=null&&(a.onclick=iw);break;case"onScroll":d!=null&&pt("scroll",a);break;case"onScrollEnd":d!=null&&pt("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(u=d.__html,u!=null){if(m.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}u=d0(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(u,""+d):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":d===!0?a.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(u,d):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(u,d):a.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(u):a.setAttribute(u,d);break;case"popover":pt("beforetoggle",a),pt("toggle",a),l0(a,"popover",d);break;case"xlinkActuate":Ha(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Ha(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Ha(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Ha(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Ha(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Ha(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Ha(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Ha(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Ha(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":l0(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=rB.get(u)||u,l0(a,u,d))}}function eA(a,c,u,d,m,w){switch(u){case"style":SN(a,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(u=d.__html,u!=null){if(m.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"children":typeof d=="string"?Tf(a,d):(typeof d=="number"||typeof d=="bigint")&&Tf(a,""+d);break;case"onScroll":d!=null&&pt("scroll",a);break;case"onScrollEnd":d!=null&&pt("scrollend",a);break;case"onClick":d!=null&&(a.onclick=iw);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pN.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(m=u.endsWith("Capture"),c=u.slice(2,m?u.length-7:void 0),w=a[Wr]||null,w=w!=null?w[u]:null,typeof w=="function"&&a.removeEventListener(c,w,m),typeof d=="function")){typeof w!="function"&&w!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(c,d,m);break e}u in a?a[u]=d:d===!0?a.setAttribute(u,""):l0(a,u,d)}}}function ir(a,c,u){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",a),pt("load",a);var d=!1,m=!1,w;for(w in u)if(u.hasOwnProperty(w)){var C=u[w];if(C!=null)switch(w){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Vt(a,c,w,C,u,null)}}m&&Vt(a,c,"srcSet",u.srcSet,u,null),d&&Vt(a,c,"src",u.src,u,null);return;case"input":pt("invalid",a);var U=w=C=m=null,z=null,te=null;for(d in u)if(u.hasOwnProperty(d)){var ue=u[d];if(ue!=null)switch(d){case"name":m=ue;break;case"type":C=ue;break;case"checked":z=ue;break;case"defaultChecked":te=ue;break;case"value":w=ue;break;case"defaultValue":U=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,c));break;default:Vt(a,c,d,ue,u,null)}}vN(a,w,U,z,te,C,m,!1),f0(a);return;case"select":pt("invalid",a),d=C=w=null;for(m in u)if(u.hasOwnProperty(m)&&(U=u[m],U!=null))switch(m){case"value":w=U;break;case"defaultValue":C=U;break;case"multiple":d=U;default:Vt(a,c,m,U,u,null)}c=w,u=C,a.multiple=!!d,c!=null?Nf(a,!!d,c,!1):u!=null&&Nf(a,!!d,u,!0);return;case"textarea":pt("invalid",a),w=m=d=null;for(C in u)if(u.hasOwnProperty(C)&&(U=u[C],U!=null))switch(C){case"value":d=U;break;case"defaultValue":m=U;break;case"children":w=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(91));break;default:Vt(a,c,C,U,u,null)}CN(a,d,m,w),f0(a);return;case"option":for(z in u)if(u.hasOwnProperty(z)&&(d=u[z],d!=null))switch(z){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Vt(a,c,z,d,u,null)}return;case"dialog":pt("beforetoggle",a),pt("toggle",a),pt("cancel",a),pt("close",a);break;case"iframe":case"object":pt("load",a);break;case"video":case"audio":for(d=0;d<ag.length;d++)pt(ag[d],a);break;case"image":pt("error",a),pt("load",a);break;case"details":pt("toggle",a);break;case"embed":case"source":case"link":pt("error",a),pt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in u)if(u.hasOwnProperty(te)&&(d=u[te],d!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Vt(a,c,te,d,u,null)}return;default:if(mv(c)){for(ue in u)u.hasOwnProperty(ue)&&(d=u[ue],d!==void 0&&eA(a,c,ue,d,u,void 0));return}}for(U in u)u.hasOwnProperty(U)&&(d=u[U],d!=null&&Vt(a,c,U,d,u,null))}function OM(a,c,u,d){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,w=null,C=null,U=null,z=null,te=null,ue=null;for(ae in u){var he=u[ae];if(u.hasOwnProperty(ae)&&he!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":z=he;default:d.hasOwnProperty(ae)||Vt(a,c,ae,null,d,he)}}for(var se in d){var ae=d[se];if(he=u[se],d.hasOwnProperty(se)&&(ae!=null||he!=null))switch(se){case"type":w=ae;break;case"name":m=ae;break;case"checked":te=ae;break;case"defaultChecked":ue=ae;break;case"value":C=ae;break;case"defaultValue":U=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,c));break;default:ae!==he&&Vt(a,c,se,ae,d,he)}}pv(a,C,U,z,te,ue,w,m);return;case"select":ae=C=U=se=null;for(w in u)if(z=u[w],u.hasOwnProperty(w)&&z!=null)switch(w){case"value":break;case"multiple":ae=z;default:d.hasOwnProperty(w)||Vt(a,c,w,null,d,z)}for(m in d)if(w=d[m],z=u[m],d.hasOwnProperty(m)&&(w!=null||z!=null))switch(m){case"value":se=w;break;case"defaultValue":U=w;break;case"multiple":C=w;default:w!==z&&Vt(a,c,m,w,d,z)}c=U,u=C,d=ae,se!=null?Nf(a,!!u,se,!1):!!d!=!!u&&(c!=null?Nf(a,!!u,c,!0):Nf(a,!!u,u?[]:"",!1));return;case"textarea":ae=se=null;for(U in u)if(m=u[U],u.hasOwnProperty(U)&&m!=null&&!d.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Vt(a,c,U,null,d,m)}for(C in d)if(m=d[C],w=u[C],d.hasOwnProperty(C)&&(m!=null||w!=null))switch(C){case"value":se=m;break;case"defaultValue":ae=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==w&&Vt(a,c,C,m,d,w)}AN(a,se,ae);return;case"option":for(var Xe in u)if(se=u[Xe],u.hasOwnProperty(Xe)&&se!=null&&!d.hasOwnProperty(Xe))switch(Xe){case"selected":a.selected=!1;break;default:Vt(a,c,Xe,null,d,se)}for(z in d)if(se=d[z],ae=u[z],d.hasOwnProperty(z)&&se!==ae&&(se!=null||ae!=null))switch(z){case"selected":a.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:Vt(a,c,z,se,d,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in u)se=u[Ke],u.hasOwnProperty(Ke)&&se!=null&&!d.hasOwnProperty(Ke)&&Vt(a,c,Ke,null,d,se);for(te in d)if(se=d[te],ae=u[te],d.hasOwnProperty(te)&&se!==ae&&(se!=null||ae!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,c));break;default:Vt(a,c,te,se,d,ae)}return;default:if(mv(c)){for(var Gt in u)se=u[Gt],u.hasOwnProperty(Gt)&&se!==void 0&&!d.hasOwnProperty(Gt)&&eA(a,c,Gt,void 0,d,se);for(ue in d)se=d[ue],ae=u[ue],!d.hasOwnProperty(ue)||se===ae||se===void 0&&ae===void 0||eA(a,c,ue,se,d,ae);return}}for(var Z in u)se=u[Z],u.hasOwnProperty(Z)&&se!=null&&!d.hasOwnProperty(Z)&&Vt(a,c,Z,null,d,se);for(he in d)se=d[he],ae=u[he],!d.hasOwnProperty(he)||se===ae||se==null&&ae==null||Vt(a,c,he,se,d,ae)}var tA=null,nA=null;function aw(a){return a.nodeType===9?a:a.ownerDocument}function _x(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sx(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function rA(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var sA=null;function xM(){var a=window.event;return a&&a.type==="popstate"?a===sA?!1:(sA=a,!0):(sA=null,!1)}var Nx=typeof setTimeout=="function"?setTimeout:void 0,IM=typeof clearTimeout=="function"?clearTimeout:void 0,Tx=typeof Promise=="function"?Promise:void 0,RM=typeof queueMicrotask=="function"?queueMicrotask:typeof Tx<"u"?function(a){return Tx.resolve(null).then(a).catch(PM)}:Nx;function PM(a){setTimeout(function(){throw a})}function hc(a){return a==="head"}function Ox(a,c){var u=c,d=0,m=0;do{var w=u.nextSibling;if(a.removeChild(u),w&&w.nodeType===8)if(u=w.data,u==="/$"){if(0<d&&8>d){u=d;var C=a.ownerDocument;if(u&1&&cg(C.documentElement),u&2&&cg(C.body),u&4)for(u=C.head,cg(u),C=u.firstChild;C;){var U=C.nextSibling,z=C.nodeName;C[Cp]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&C.rel.toLowerCase()==="stylesheet"||u.removeChild(C),C=U}}if(m===0){a.removeChild(w),mg(c);return}m--}else u==="$"||u==="$?"||u==="$!"?m++:d=u.charCodeAt(0)-48;else d=0;u=w}while(u);mg(c)}function iA(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var u=c;switch(c=c.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":iA(u),uv(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function DM(a,c,u,d){for(;a.nodeType===1;){var m=u;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Cp])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(w=a.getAttribute("rel"),w==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(w!==m.rel||a.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||a.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||a.getAttribute("title")!==(m.title==null?null:m.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(w=a.getAttribute("src"),(w!==(m.src==null?null:m.src)||a.getAttribute("type")!==(m.type==null?null:m.type)||a.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&w&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var w=m.name==null?null:""+m.name;if(m.type==="hidden"&&a.getAttribute("name")===w)return a}else return a;if(a=_i(a.nextSibling),a===null)break}return null}function UM(a,c,u){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=_i(a.nextSibling),a===null))return null;return a}function aA(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function kM(a,c){var u=a.ownerDocument;if(a.data!=="$?"||u.readyState==="complete")c();else{var d=function(){c(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function _i(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var oA=null;function xx(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"){if(c===0)return a;c--}else u==="/$"&&c++}a=a.previousSibling}return null}function Ix(a,c,u){switch(c=aw(u),a){case"html":if(a=c.documentElement,!a)throw Error(r(452));return a;case"head":if(a=c.head,!a)throw Error(r(453));return a;case"body":if(a=c.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function cg(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);uv(a)}var ei=new Map,Rx=new Set;function ow(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var to=M.d;M.d={f:BM,r:MM,D:LM,C:$M,L:FM,m:HM,X:zM,S:jM,M:qM};function BM(){var a=to.f(),c=J0();return a||c}function MM(a){var c=Af(a);c!==null&&c.tag===5&&c.type==="form"?ZT(c):to.r(a)}var nh=typeof document>"u"?null:document;function Px(a,c,u){var d=nh;if(d&&typeof c=="string"&&c){var m=Ks(c);m='link[rel="'+a+'"][href="'+m+'"]',typeof u=="string"&&(m+='[crossorigin="'+u+'"]'),Rx.has(m)||(Rx.add(m),a={rel:a,crossOrigin:u,href:c},d.querySelector(m)===null&&(c=d.createElement("link"),ir(c,"link",a),Fn(c),d.head.appendChild(c)))}}function LM(a){to.D(a),Px("dns-prefetch",a,null)}function $M(a,c){to.C(a,c),Px("preconnect",a,c)}function FM(a,c,u){to.L(a,c,u);var d=nh;if(d&&a&&c){var m='link[rel="preload"][as="'+Ks(c)+'"]';c==="image"&&u&&u.imageSrcSet?(m+='[imagesrcset="'+Ks(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(m+='[imagesizes="'+Ks(u.imageSizes)+'"]')):m+='[href="'+Ks(a)+'"]';var w=m;switch(c){case"style":w=rh(a);break;case"script":w=sh(a)}ei.has(w)||(a=p({rel:"preload",href:c==="image"&&u&&u.imageSrcSet?void 0:a,as:c},u),ei.set(w,a),d.querySelector(m)!==null||c==="style"&&d.querySelector(lg(w))||c==="script"&&d.querySelector(ug(w))||(c=d.createElement("link"),ir(c,"link",a),Fn(c),d.head.appendChild(c)))}}function HM(a,c){to.m(a,c);var u=nh;if(u&&a){var d=c&&typeof c.as=="string"?c.as:"script",m='link[rel="modulepreload"][as="'+Ks(d)+'"][href="'+Ks(a)+'"]',w=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=sh(a)}if(!ei.has(w)&&(a=p({rel:"modulepreload",href:a},c),ei.set(w,a),u.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(ug(w)))return}d=u.createElement("link"),ir(d,"link",a),Fn(d),u.head.appendChild(d)}}}function jM(a,c,u){to.S(a,c,u);var d=nh;if(d&&a){var m=Cf(d).hoistableStyles,w=rh(a);c=c||"default";var C=m.get(w);if(!C){var U={loading:0,preload:null};if(C=d.querySelector(lg(w)))U.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":c},u),(u=ei.get(w))&&cA(a,u);var z=C=d.createElement("link");Fn(z),ir(z,"link",a),z._p=new Promise(function(te,ue){z.onload=te,z.onerror=ue}),z.addEventListener("load",function(){U.loading|=1}),z.addEventListener("error",function(){U.loading|=2}),U.loading|=4,cw(C,c,d)}C={type:"stylesheet",instance:C,count:1,state:U},m.set(w,C)}}}function zM(a,c){to.X(a,c);var u=nh;if(u&&a){var d=Cf(u).hoistableScripts,m=sh(a),w=d.get(m);w||(w=u.querySelector(ug(m)),w||(a=p({src:a,async:!0},c),(c=ei.get(m))&&lA(a,c),w=u.createElement("script"),Fn(w),ir(w,"link",a),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(m,w))}}function qM(a,c){to.M(a,c);var u=nh;if(u&&a){var d=Cf(u).hoistableScripts,m=sh(a),w=d.get(m);w||(w=u.querySelector(ug(m)),w||(a=p({src:a,async:!0,type:"module"},c),(c=ei.get(m))&&lA(a,c),w=u.createElement("script"),Fn(w),ir(w,"link",a),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(m,w))}}function Dx(a,c,u,d){var m=(m=me.current)?ow(m):null;if(!m)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(c=rh(u.href),u=Cf(m).hoistableStyles,d=u.get(c),d||(d={type:"style",instance:null,count:0,state:null},u.set(c,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=rh(u.href);var w=Cf(m).hoistableStyles,C=w.get(a);if(C||(m=m.ownerDocument||m,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(a,C),(w=m.querySelector(lg(a)))&&!w._p&&(C.instance=w,C.state.loading=5),ei.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ei.set(a,u),w||VM(m,a,u,C.state))),c&&d===null)throw Error(r(528,""));return C}if(c&&d!==null)throw Error(r(529,""));return null;case"script":return c=u.async,u=u.src,typeof u=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=sh(u),u=Cf(m).hoistableScripts,d=u.get(c),d||(d={type:"script",instance:null,count:0,state:null},u.set(c,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function rh(a){return'href="'+Ks(a)+'"'}function lg(a){return'link[rel="stylesheet"]['+a+"]"}function Ux(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function VM(a,c,u,d){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?d.loading=1:(c=a.createElement("link"),d.preload=c,c.addEventListener("load",function(){return d.loading|=1}),c.addEventListener("error",function(){return d.loading|=2}),ir(c,"link",u),Fn(c),a.head.appendChild(c))}function sh(a){return'[src="'+Ks(a)+'"]'}function ug(a){return"script[async]"+a}function kx(a,c,u){if(c.count++,c.instance===null)switch(c.type){case"style":var d=a.querySelector('style[data-href~="'+Ks(u.href)+'"]');if(d)return c.instance=d,Fn(d),d;var m=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),Fn(d),ir(d,"style",m),cw(d,u.precedence,a),c.instance=d;case"stylesheet":m=rh(u.href);var w=a.querySelector(lg(m));if(w)return c.state.loading|=4,c.instance=w,Fn(w),w;d=Ux(u),(m=ei.get(m))&&cA(d,m),w=(a.ownerDocument||a).createElement("link"),Fn(w);var C=w;return C._p=new Promise(function(U,z){C.onload=U,C.onerror=z}),ir(w,"link",d),c.state.loading|=4,cw(w,u.precedence,a),c.instance=w;case"script":return w=sh(u.src),(m=a.querySelector(ug(w)))?(c.instance=m,Fn(m),m):(d=u,(m=ei.get(w))&&(d=p({},u),lA(d,m)),a=a.ownerDocument||a,m=a.createElement("script"),Fn(m),ir(m,"link",d),a.head.appendChild(m),c.instance=m);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(d=c.instance,c.state.loading|=4,cw(d,u.precedence,a));return c.instance}function cw(a,c,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,w=m,C=0;C<d.length;C++){var U=d[C];if(U.dataset.precedence===c)w=U;else if(w!==m)break}w?w.parentNode.insertBefore(a,w.nextSibling):(c=u.nodeType===9?u.head:u,c.insertBefore(a,c.firstChild))}function cA(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function lA(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var lw=null;function Bx(a,c,u){if(lw===null){var d=new Map,m=lw=new Map;m.set(u,d)}else m=lw,d=m.get(u),d||(d=new Map,m.set(u,d));if(d.has(a))return d;for(d.set(a,null),u=u.getElementsByTagName(a),m=0;m<u.length;m++){var w=u[m];if(!(w[Cp]||w[wr]||a==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var C=w.getAttribute(c)||"";C=a+C;var U=d.get(C);U?U.push(w):d.set(C,[w])}}return d}function Mx(a,c,u){a=a.ownerDocument||a,a.head.insertBefore(u,c==="title"?a.querySelector("head > title"):null)}function GM(a,c,u){if(u===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function Lx(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var fg=null;function KM(){}function WM(a,c,u){if(fg===null)throw Error(r(475));var d=fg;if(c.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var m=rh(u.href),w=a.querySelector(lg(m));if(w){a=w._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(d.count++,d=uw.bind(d),a.then(d,d)),c.state.loading|=4,c.instance=w,Fn(w);return}w=a.ownerDocument||a,u=Ux(u),(m=ei.get(m))&&cA(u,m),w=w.createElement("link"),Fn(w);var C=w;C._p=new Promise(function(U,z){C.onload=U,C.onerror=z}),ir(w,"link",u),c.instance=w}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(d.count++,c=uw.bind(d),a.addEventListener("load",c),a.addEventListener("error",c))}}function YM(){if(fg===null)throw Error(r(475));var a=fg;return a.stylesheets&&a.count===0&&uA(a,a.stylesheets),0<a.count?function(c){var u=setTimeout(function(){if(a.stylesheets&&uA(a,a.stylesheets),a.unsuspend){var d=a.unsuspend;a.unsuspend=null,d()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(u)}}:null}function uw(){if(this.count--,this.count===0){if(this.stylesheets)uA(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var fw=null;function uA(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,fw=new Map,c.forEach(QM,a),fw=null,uw.call(a))}function QM(a,c){if(!(c.state.loading&4)){var u=fw.get(a);if(u)var d=u.get(null);else{u=new Map,fw.set(a,u);for(var m=a.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<m.length;w++){var C=m[w];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),d=C)}d&&u.set(null,d)}m=c.instance,C=m.getAttribute("data-precedence"),w=u.get(C)||d,w===d&&u.set(null,m),u.set(C,m),this.count++,d=uw.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),w?w.parentNode.insertBefore(m,w.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(m,a.firstChild)),c.state.loading|=4}}var hg={$$typeof:T,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function ZM(a,c,u,d,m,w,C,U){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=av(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=av(0),this.hiddenUpdates=av(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=w,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function $x(a,c,u,d,m,w,C,U,z,te,ue,he){return a=new ZM(a,c,u,C,U,z,te,he),c=1,w===!0&&(c|=24),w=As(3,null,null,c),a.current=w,w.stateNode=a,c=Vv(),c.refCount++,a.pooledCache=c,c.refCount++,w.memoizedState={element:d,isDehydrated:u,cache:c},Yv(w),a}function Fx(a){return a?(a=kf,a):kf}function Hx(a,c,u,d,m,w){m=Fx(m),d.context===null?d.context=m:d.pendingContext=m,d=Xo(c),d.payload={element:u},w=w===void 0?null:w,w!==null&&(d.callback=w),u=ec(a,d,c),u!==null&&(Ts(u,a,c),jp(u,a,c))}function jx(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<c?u:c}}function fA(a,c){jx(a,c),(a=a.alternate)&&jx(a,c)}function zx(a){if(a.tag===13){var c=Uf(a,67108864);c!==null&&Ts(c,a,67108864),fA(a,67108864)}}var hw=!0;function JM(a,c,u,d){var m=_.T;_.T=null;var w=M.p;try{M.p=2,hA(a,c,u,d)}finally{M.p=w,_.T=m}}function XM(a,c,u,d){var m=_.T;_.T=null;var w=M.p;try{M.p=8,hA(a,c,u,d)}finally{M.p=w,_.T=m}}function hA(a,c,u,d){if(hw){var m=dA(d);if(m===null)X1(a,c,d,dw,u),Vx(a,d);else if(tL(m,a,c,u,d))d.stopPropagation();else if(Vx(a,d),c&4&&-1<eL.indexOf(a)){for(;m!==null;){var w=Af(m);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var C=Cl(w.pendingLanes);if(C!==0){var U=w;for(U.pendingLanes|=2,U.entangledLanes|=2;C;){var z=1<<31-Dr(C);U.entanglements[1]|=z,C&=~z}sa(w),($t&6)===0&&(Q0=Vs()+500,ig(0))}}break;case 13:U=Uf(w,2),U!==null&&Ts(U,w,2),J0(),fA(w,2)}if(w=dA(d),w===null&&X1(a,c,d,dw,u),w===m)break;m=w}m!==null&&d.stopPropagation()}else X1(a,c,d,null,u)}}function dA(a){return a=wv(a),pA(a)}var dw=null;function pA(a){if(dw=null,a=vf(a),a!==null){var c=i(a);if(c===null)a=null;else{var u=c.tag;if(u===13){if(a=o(c),a!==null)return a;a=null}else if(u===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return dw=a,null}function qx(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sv()){case wp:return 2;case bp:return 8;case Ko:case r0:return 32;case Ep:return 268435456;default:return 32}default:return 32}}var gA=!1,dc=null,pc=null,gc=null,dg=new Map,pg=new Map,mc=[],eL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vx(a,c){switch(a){case"focusin":case"focusout":dc=null;break;case"dragenter":case"dragleave":pc=null;break;case"mouseover":case"mouseout":gc=null;break;case"pointerover":case"pointerout":dg.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":pg.delete(c.pointerId)}}function gg(a,c,u,d,m,w){return a===null||a.nativeEvent!==w?(a={blockedOn:c,domEventName:u,eventSystemFlags:d,nativeEvent:w,targetContainers:[m]},c!==null&&(c=Af(c),c!==null&&zx(c)),a):(a.eventSystemFlags|=d,c=a.targetContainers,m!==null&&c.indexOf(m)===-1&&c.push(m),a)}function tL(a,c,u,d,m){switch(c){case"focusin":return dc=gg(dc,a,c,u,d,m),!0;case"dragenter":return pc=gg(pc,a,c,u,d,m),!0;case"mouseover":return gc=gg(gc,a,c,u,d,m),!0;case"pointerover":var w=m.pointerId;return dg.set(w,gg(dg.get(w)||null,a,c,u,d,m)),!0;case"gotpointercapture":return w=m.pointerId,pg.set(w,gg(pg.get(w)||null,a,c,u,d,m)),!0}return!1}function Gx(a){var c=vf(a.target);if(c!==null){var u=i(c);if(u!==null){if(c=u.tag,c===13){if(c=o(u),c!==null){a.blockedOn=c,W6(a.priority,function(){if(u.tag===13){var d=Ns();d=ov(d);var m=Uf(u,d);m!==null&&Ts(m,u,d),fA(u,d)}});return}}else if(c===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function pw(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var u=dA(a.nativeEvent);if(u===null){u=a.nativeEvent;var d=new u.constructor(u.type,u);yv=d,u.target.dispatchEvent(d),yv=null}else return c=Af(u),c!==null&&zx(c),a.blockedOn=u,!1;c.shift()}return!0}function Kx(a,c,u){pw(a)&&u.delete(c)}function nL(){gA=!1,dc!==null&&pw(dc)&&(dc=null),pc!==null&&pw(pc)&&(pc=null),gc!==null&&pw(gc)&&(gc=null),dg.forEach(Kx),pg.forEach(Kx)}function gw(a,c){a.blockedOn===c&&(a.blockedOn=null,gA||(gA=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,nL)))}var mw=null;function Wx(a){mw!==a&&(mw=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){mw===a&&(mw=null);for(var c=0;c<a.length;c+=3){var u=a[c],d=a[c+1],m=a[c+2];if(typeof d!="function"){if(pA(d||u)===null)continue;break}var w=Af(u);w!==null&&(a.splice(c,3),c-=3,p1(w,{pending:!0,data:m,method:u.method,action:d},d,m))}}))}function mg(a){function c(z){return gw(z,a)}dc!==null&&gw(dc,a),pc!==null&&gw(pc,a),gc!==null&&gw(gc,a),dg.forEach(c),pg.forEach(c);for(var u=0;u<mc.length;u++){var d=mc[u];d.blockedOn===a&&(d.blockedOn=null)}for(;0<mc.length&&(u=mc[0],u.blockedOn===null);)Gx(u),u.blockedOn===null&&mc.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var m=u[d],w=u[d+1],C=m[Wr]||null;if(typeof w=="function")C||Wx(u);else if(C){var U=null;if(w&&w.hasAttribute("formAction")){if(m=w,C=w[Wr]||null)U=C.formAction;else if(pA(m)!==null)continue}else U=C.action;typeof U=="function"?u[d+1]=U:(u.splice(d,3),d-=3),Wx(u)}}}function mA(a){this._internalRoot=a}yw.prototype.render=mA.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));var u=c.current,d=Ns();Hx(u,d,a,c,null,null)},yw.prototype.unmount=mA.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Hx(a.current,2,null,a,null,null),J0(),c[Ef]=null}};function yw(a){this._internalRoot=a}yw.prototype.unstable_scheduleHydration=function(a){if(a){var c=fN();a={blockedOn:null,target:a,priority:c};for(var u=0;u<mc.length&&c!==0&&c<mc[u].priority;u++);mc.splice(u,0,a),u===0&&Gx(a)}};var Yx=e.version;if(Yx!=="19.1.0")throw Error(r(527,Yx,"19.1.0"));M.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=f(c),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var rL={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ww=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ww.isDisabled&&ww.supportsFiber)try{Wo=ww.inject(rL),Pr=ww}catch{}}return bg.createRoot=function(a,c){if(!s(a))throw Error(r(299));var u=!1,d="",m=fO,w=hO,C=dO,U=null;return c!=null&&(c.unstable_strictMode===!0&&(u=!0),c.identifierPrefix!==void 0&&(d=c.identifierPrefix),c.onUncaughtError!==void 0&&(m=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(C=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(U=c.unstable_transitionCallbacks)),c=$x(a,1,!1,null,null,u,d,m,w,C,U,null),a[Ef]=c.current,J1(a),new mA(c)},bg.hydrateRoot=function(a,c,u){if(!s(a))throw Error(r(299));var d=!1,m="",w=fO,C=hO,U=dO,z=null,te=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(w=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(z=u.unstable_transitionCallbacks),u.formState!==void 0&&(te=u.formState)),c=$x(a,1,!0,c,u??null,d,m,w,C,U,z,te),c.context=Fx(null),u=c.current,d=Ns(),d=ov(d),m=Xo(d),m.callback=null,ec(u,m,d),u=d,c.current.lanes=u,Ap(c,u),sa(c),a[Ef]=c.current,J1(a),new yw(c)},bg.version="19.1.0",bg}var aI;function gL(){if(aI)return EA.exports;aI=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),EA.exports=pL(),EA.exports}var mL=gL();const yL=Symbol(),V2=Symbol(),qg="a",mU="f",oI="p",yU="c",wU="t",G2="h",nm="w",K2="o",W2="k";let wL=(n,e)=>new Proxy(n,e);const QC=Object.getPrototypeOf,ZC=new WeakMap,bU=n=>n&&(ZC.has(n)?ZC.get(n):QC(n)===Object.prototype||QC(n)===Array.prototype),Sb=n=>typeof n=="object"&&n!==null,bL=n=>Object.values(Object.getOwnPropertyDescriptors(n)).some(e=>!e.configurable&&!e.writable),EL=n=>{if(Array.isArray(n))return Array.from(n);const e=Object.getOwnPropertyDescriptors(n);return Object.values(e).forEach(t=>{t.configurable=!0}),Object.create(QC(n),e)},vL=(n,e)=>{const t={[mU]:e};let r=!1;const s=(l,f)=>{if(!r){let h=t[qg].get(n);if(h||(h={},t[qg].set(n,h)),l===nm)h[nm]=!0;else{let p=h[l];p||(p=new Set,h[l]=p),p.add(f)}}},i=()=>{r=!0,t[qg].delete(n)},o={get(l,f){return f===V2?n:(s(W2,f),EU(Reflect.get(l,f),t[qg],t[yU],t[wU]))},has(l,f){return f===yL?(i(),!0):(s(G2,f),Reflect.has(l,f))},getOwnPropertyDescriptor(l,f){return s(K2,f),Reflect.getOwnPropertyDescriptor(l,f)},ownKeys(l){return s(nm),Reflect.ownKeys(l)}};return e&&(o.set=o.deleteProperty=()=>!1),[o,t]},Y2=n=>n[V2]||n,EU=(n,e,t,r)=>{if(!bU(n))return n;let s=r&&r.get(n);if(!s){const f=Y2(n);bL(f)?s=[f,EL(f)]:s=[f],r==null||r.set(n,s)}const[i,o]=s;let l=t&&t.get(i);return(!l||l[1][mU]!==!!o)&&(l=vL(i,!!o),l[1][oI]=wL(o||i,l[0]),t&&t.set(i,l)),l[1][qg]=e,l[1][yU]=t,l[1][wU]=r,l[1][oI]},AL=(n,e)=>{const t=Reflect.ownKeys(n),r=Reflect.ownKeys(e);return t.length!==r.length||t.some((s,i)=>s!==r[i])},vU=(n,e,t,r,s=Object.is)=>{if(s(n,e))return!1;if(!Sb(n)||!Sb(e))return!0;const i=t.get(Y2(n));if(!i)return!0;if(r){if(r.get(n)===e)return!1;r.set(n,e)}let o=null;for(const l of i[G2]||[])if(o=Reflect.has(n,l)!==Reflect.has(e,l),o)return o;if(i[nm]===!0){if(o=AL(n,e),o)return o}else for(const l of i[K2]||[]){const f=!!Reflect.getOwnPropertyDescriptor(n,l),h=!!Reflect.getOwnPropertyDescriptor(e,l);if(o=f!==h,o)return o}for(const l of i[W2]||[])if(o=vU(n[l],e[l],t,r,s),o)return o;if(o===null)throw new Error("invalid used");return o},CL=n=>bU(n)&&n[V2]||null,cI=(n,e=!0)=>{ZC.set(n,e)},_L=(n,e,t)=>{const r=[],s=new WeakSet,i=(o,l)=>{var f,h,p;if(s.has(o))return;Sb(o)&&s.add(o);const g=Sb(o)&&e.get(Y2(o));if(g){if((f=g[G2])===null||f===void 0||f.forEach(y=>{const b=`:has(${String(y)})`;r.push(l?[...l,b]:[b])}),g[nm]===!0){const y=":ownKeys";r.push(l?[...l,y]:[y])}else(h=g[K2])===null||h===void 0||h.forEach(y=>{const b=`:hasOwn(${String(y)})`;r.push(l?[...l,b]:[b])});(p=g[W2])===null||p===void 0||p.forEach(y=>{"value"in(Object.getOwnPropertyDescriptor(o,y)||{})&&i(o[y],l?[...l,y]:[y])})}else l&&r.push(l)};return i(n),r},Nb={},Q2=n=>typeof n=="object"&&n!==null,SL=n=>Q2(n)&&!Dy.has(n)&&(Array.isArray(n)||!(Symbol.iterator in n))&&!(n instanceof WeakMap)&&!(n instanceof WeakSet)&&!(n instanceof Error)&&!(n instanceof Number)&&!(n instanceof Date)&&!(n instanceof String)&&!(n instanceof RegExp)&&!(n instanceof ArrayBuffer)&&!(n instanceof Promise),AU=(n,e)=>{const t=JC.get(n);if((t==null?void 0:t[0])===e)return t[1];const r=Array.isArray(n)?[]:Object.create(Object.getPrototypeOf(n));return cI(r,!0),JC.set(n,[e,r]),Reflect.ownKeys(n).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(n,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(n,s),l={value:i,enumerable:o,configurable:!0};if(Dy.has(i))cI(i,!1);else if(dl.has(i)){const[f,h]=dl.get(i);l.value=AU(f,h())}Object.defineProperty(r,s,l)}),Object.preventExtensions(r)},NL=(n,e,t,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);t(i);const l=Reflect.deleteProperty(s,i);return l&&r(["delete",[i],o]),l},set(s,i,o,l){const f=!n()&&Reflect.has(s,i),h=Reflect.get(s,i,l);if(f&&(lI(h,o)||vm.has(o)&&lI(h,vm.get(o))))return!0;t(i),Q2(o)&&(o=CL(o)||o);const p=!dl.has(o)&&OL(o)?nn(o):o;return e(i,p),Reflect.set(s,i,p,l),r(["set",[i],o,h]),!0}}),dl=new WeakMap,Dy=new WeakSet,JC=new WeakMap,Vg=[1,1],vm=new WeakMap;let lI=Object.is,TL=(n,e)=>new Proxy(n,e),OL=SL,xL=AU,IL=NL;function nn(n={}){if(!Q2(n))throw new Error("object required");const e=vm.get(n);if(e)return e;let t=Vg[0];const r=new Set,s=(A,S=++Vg[0])=>{t!==S&&(t=S,r.forEach(O=>O(A,S)))};let i=Vg[1];const o=(A=++Vg[1])=>(i!==A&&!r.size&&(i=A,f.forEach(([S])=>{const O=S[1](A);O>t&&(t=O)})),t),l=A=>(S,O)=>{const T=[...S];T[1]=[A,...T[1]],s(T,O)},f=new Map,h=(A,S)=>{const O=!Dy.has(S)&&dl.get(S);if(O){if((Nb?"production":void 0)!=="production"&&f.has(A))throw new Error("prop listener already exists");if(r.size){const T=O[2](l(A));f.set(A,[O,T])}else f.set(A,[O])}},p=A=>{var S;const O=f.get(A);O&&(f.delete(A),(S=O[1])==null||S.call(O))},g=A=>(r.add(A),r.size===1&&f.forEach(([O,T],k)=>{if((Nb?"production":void 0)!=="production"&&T)throw new Error("remove already exists");const R=O[2](l(k));f.set(k,[O,R])}),()=>{r.delete(A),r.size===0&&f.forEach(([O,T],k)=>{T&&(T(),f.set(k,[O]))})});let y=!0;const b=IL(()=>y,h,p,s),v=TL(n,b);vm.set(n,v);const E=[n,o,g];return dl.set(v,E),Reflect.ownKeys(n).forEach(A=>{const S=Object.getOwnPropertyDescriptor(n,A);"value"in S&&S.writable&&(v[A]=n[A])}),y=!1,v}function tr(n,e,t){const r=dl.get(n);(Nb?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let l=!1;const h=o(p=>{i.push(p),s||(s=Promise.resolve().then(()=>{s=void 0,l&&e(i.splice(0))}))});return l=!0,()=>{l=!1,h()}}function Ku(n){const e=dl.get(n);(Nb?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[t,r]=e;return xL(t,r())}function Wu(n){return Dy.add(n),n}function RL(){return{proxyStateMap:dl,refSet:Dy,snapCache:JC,versionHolder:Vg,proxyCache:vm}}function Ir(n,e,t,r){let s=n[e];return tr(n,()=>{const i=n[e];Object.is(s,i)||t(s=i)})}const{proxyStateMap:PL,snapCache:DL}=RL(),bw=n=>PL.has(n);function UL(n){const e=[];let t=0;const r=new Map,s=new WeakMap,i=()=>{const h=DL.get(l),p=h==null?void 0:h[1];if(p&&!s.has(p)){const g=new Map(r);s.set(p,g)}},o=h=>s.get(h)||r,l={data:e,index:t,epoch:0,get size(){return bw(this)||i(),o(this).size},get(h){const g=o(this).get(h);if(g===void 0){this.epoch;return}return this.data[g]},has(h){const p=o(this);return this.epoch,p.has(h)},set(h,p){if(!bw(this))throw new Error("Cannot perform mutations on a snapshot");const g=r.get(h);return g===void 0?(r.set(h,this.index),this.data[this.index++]=p):this.data[g]=p,this.epoch++,this},delete(h){if(!bw(this))throw new Error("Cannot perform mutations on a snapshot");const p=r.get(h);return p===void 0?!1:(delete this.data[p],r.delete(h),this.epoch++,!0)},clear(){if(!bw(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(h){this.epoch,o(this).forEach((g,y)=>{h(this.data[g],y,this)})},*entries(){this.epoch;const h=o(this);for(const[p,g]of h)yield[p,this.data[g]]},*keys(){this.epoch;const h=o(this);for(const p of h.keys())yield p},*values(){this.epoch;const h=o(this);for(const p of h.values())yield this.data[p]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},f=nn(l);return Object.defineProperties(f,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(f),f}var uI={};const oe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof uI<"u"?uI.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},CU={caipNetworkIdToNumber(n){return n?Number(n.split(":")[1]):void 0},parseEvmChainId(n){return typeof n=="string"?this.caipNetworkIdToNumber(n):n},getNetworksByNamespace(n,e){return(n==null?void 0:n.filter(t=>t.chainNamespace===e))||[]},getFirstNetworkByNamespace(n,e){return this.getNetworksByNamespace(n,e)[0]},getNetworkNameByCaipNetworkId(n,e){var s;if(!e)return;const t=n.find(i=>i.caipNetworkId===e);if(t)return t.name;const[r]=e.split(":");return((s=oe.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var kL=20,BL=1,Yu=1e6,fI=1e6,ML=-7,LL=21,$L=!1,Uy="[big.js] ",lf=Uy+"Invalid ",vE=lf+"decimal places",FL=lf+"rounding mode",_U=Uy+"Division by zero",zt={},Pa=void 0,HL=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function SU(){function n(e){var t=this;if(!(t instanceof n))return e===Pa?SU():new n(e);if(e instanceof n)t.s=e.s,t.e=e.e,t.c=e.c.slice();else{if(typeof e!="string"){if(n.strict===!0&&typeof e!="bigint")throw TypeError(lf+"value");e=e===0&&1/e<0?"-0":String(e)}jL(t,e)}t.constructor=n}return n.prototype=zt,n.DP=kL,n.RM=BL,n.NE=ML,n.PE=LL,n.strict=$L,n.roundDown=0,n.roundHalfUp=1,n.roundHalfEven=2,n.roundUp=3,n}function jL(n,e){var t,r,s;if(!HL.test(e))throw Error(lf+"number");for(n.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)n.c=[n.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(n.e=t-r-1,n.c=[],t=0;r<=s;)n.c[t++]=+e.charAt(r++)}return n}function uf(n,e,t,r){var s=n.c;if(t===Pa&&(t=n.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error(FL);if(e<1)r=t===3&&(r||!!s[0])||e===0&&(t===1&&s[0]>=5||t===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Pa))),s.length=1,r?(n.e=n.e-e+1,s[0]=1):s[0]=n.e=0;else if(e<s.length){if(r=t===1&&s[e]>=5||t===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Pa||s[e-1]&1))||t===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++n.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return n}function ff(n,e,t){var r=n.e,s=n.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return n.s<0&&t?"-"+s:s}zt.abs=function(){var n=new this.constructor(this);return n.s=1,n};zt.cmp=function(n){var e,t=this,r=t.c,s=(n=new t.constructor(n)).c,i=t.s,o=n.s,l=t.e,f=n.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,l!=f)return l>f^e?1:-1;for(o=(l=r.length)<(f=s.length)?l:f,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return l==f?0:l>f^e?1:-1};zt.div=function(n){var e=this,t=e.constructor,r=e.c,s=(n=new t(n)).c,i=e.s==n.s?1:-1,o=t.DP;if(o!==~~o||o<0||o>Yu)throw Error(vE);if(!s[0])throw Error(_U);if(!r[0])return n.s=i,n.c=[n.e=0],n;var l,f,h,p,g,y=s.slice(),b=l=s.length,v=r.length,E=r.slice(0,l),A=E.length,S=n,O=S.c=[],T=0,k=o+(S.e=e.e-n.e)+1;for(S.s=i,i=k<0?0:k,y.unshift(0);A++<l;)E.push(0);do{for(h=0;h<10;h++){if(l!=(A=E.length))p=l>A?1:-1;else for(g=-1,p=0;++g<l;)if(s[g]!=E[g]){p=s[g]>E[g]?1:-1;break}if(p<0){for(f=A==l?s:y;A;){if(E[--A]<f[A]){for(g=A;g&&!E[--g];)E[g]=9;--E[g],E[A]+=10}E[A]-=f[A]}for(;!E[0];)E.shift()}else break}O[T++]=p?h:++h,E[0]&&p?E[A]=r[b]||0:E=[r[b]]}while((b++<v||E[0]!==Pa)&&i--);return!O[0]&&T!=1&&(O.shift(),S.e--,k--),T>k&&uf(S,k,t.RM,E[0]!==Pa),S};zt.eq=function(n){return this.cmp(n)===0};zt.gt=function(n){return this.cmp(n)>0};zt.gte=function(n){return this.cmp(n)>-1};zt.lt=function(n){return this.cmp(n)<0};zt.lte=function(n){return this.cmp(n)<1};zt.minus=zt.sub=function(n){var e,t,r,s,i=this,o=i.constructor,l=i.s,f=(n=new o(n)).s;if(l!=f)return n.s=-f,i.plus(n);var h=i.c.slice(),p=i.e,g=n.c,y=n.e;if(!h[0]||!g[0])return g[0]?n.s=-f:h[0]?n=new o(i):n.s=1,n;if(l=p-y){for((s=l<0)?(l=-l,r=h):(y=p,r=g),r.reverse(),f=l;f--;)r.push(0);r.reverse()}else for(t=((s=h.length<g.length)?h:g).length,l=f=0;f<t;f++)if(h[f]!=g[f]){s=h[f]<g[f];break}if(s&&(r=h,h=g,g=r,n.s=-n.s),(f=(t=g.length)-(e=h.length))>0)for(;f--;)h[e++]=0;for(f=e;t>l;){if(h[--t]<g[t]){for(e=t;e&&!h[--e];)h[e]=9;--h[e],h[t]+=10}h[t]-=g[t]}for(;h[--f]===0;)h.pop();for(;h[0]===0;)h.shift(),--y;return h[0]||(n.s=1,h=[y=0]),n.c=h,n.e=y,n};zt.mod=function(n){var e,t=this,r=t.constructor,s=t.s,i=(n=new r(n)).s;if(!n.c[0])throw Error(_U);return t.s=n.s=1,e=n.cmp(t)==1,t.s=s,n.s=i,e?new r(t):(s=r.DP,i=r.RM,r.DP=r.RM=0,t=t.div(n),r.DP=s,r.RM=i,this.minus(t.times(n)))};zt.neg=function(){var n=new this.constructor(this);return n.s=-n.s,n};zt.plus=zt.add=function(n){var e,t,r,s=this,i=s.constructor;if(n=new i(n),s.s!=n.s)return n.s=-n.s,s.minus(n);var o=s.e,l=s.c,f=n.e,h=n.c;if(!l[0]||!h[0])return h[0]||(l[0]?n=new i(s):n.s=s.s),n;if(l=l.slice(),e=o-f){for(e>0?(f=o,r=h):(e=-e,r=l),r.reverse();e--;)r.push(0);r.reverse()}for(l.length-h.length<0&&(r=h,h=l,l=r),e=h.length,t=0;e;l[e]%=10)t=(l[--e]=l[e]+h[e]+t)/10|0;for(t&&(l.unshift(t),++f),e=l.length;l[--e]===0;)l.pop();return n.c=l,n.e=f,n};zt.pow=function(n){var e=this,t=new e.constructor("1"),r=t,s=n<0;if(n!==~~n||n<-fI||n>fI)throw Error(lf+"exponent");for(s&&(n=-n);n&1&&(r=r.times(e)),n>>=1,!!n;)e=e.times(e);return s?t.div(r):r};zt.prec=function(n,e){if(n!==~~n||n<1||n>Yu)throw Error(lf+"precision");return uf(new this.constructor(this),n,e)};zt.round=function(n,e){if(n===Pa)n=0;else if(n!==~~n||n<-Yu||n>Yu)throw Error(vE);return uf(new this.constructor(this),n+this.e+1,e)};zt.sqrt=function(){var n,e,t,r=this,s=r.constructor,i=r.s,o=r.e,l=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(Uy+"No square root");i=Math.sqrt(+ff(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),n=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):n=new s(i+""),o=n.e+(s.DP+=4);do t=n,n=l.times(t.plus(r.div(t)));while(t.c.slice(0,o).join("")!==n.c.slice(0,o).join(""));return uf(n,(s.DP-=4)+n.e+1,s.RM)};zt.times=zt.mul=function(n){var e,t=this,r=t.constructor,s=t.c,i=(n=new r(n)).c,o=s.length,l=i.length,f=t.e,h=n.e;if(n.s=t.s==n.s?1:-1,!s[0]||!i[0])return n.c=[n.e=0],n;for(n.e=f+h,o<l&&(e=s,s=i,i=e,h=o,o=l,l=h),e=new Array(h=o+l);h--;)e[h]=0;for(f=l;f--;){for(l=0,h=o+f;h>f;)l=e[h]+i[f]*s[h-f-1]+l,e[h--]=l%10,l=l/10|0;e[h]=l}for(l?++n.e:e.shift(),f=e.length;!e[--f];)e.pop();return n.c=e,n};zt.toExponential=function(n,e){var t=this,r=t.c[0];if(n!==Pa){if(n!==~~n||n<0||n>Yu)throw Error(vE);for(t=uf(new t.constructor(t),++n,e);t.c.length<n;)t.c.push(0)}return ff(t,!0,!!r)};zt.toFixed=function(n,e){var t=this,r=t.c[0];if(n!==Pa){if(n!==~~n||n<0||n>Yu)throw Error(vE);for(t=uf(new t.constructor(t),n+t.e+1,e),n=n+t.e+1;t.c.length<n;)t.c.push(0)}return ff(t,!1,!!r)};zt[Symbol.for("nodejs.util.inspect.custom")]=zt.toJSON=zt.toString=function(){var n=this,e=n.constructor;return ff(n,n.e<=e.NE||n.e>=e.PE,!!n.c[0])};zt.toNumber=function(){var n=+ff(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(n.toString()))throw Error(Uy+"Imprecise conversion");return n};zt.toPrecision=function(n,e){var t=this,r=t.constructor,s=t.c[0];if(n!==Pa){if(n!==~~n||n<1||n>Yu)throw Error(lf+"precision");for(t=uf(new r(t),n,e);t.c.length<n;)t.c.push(0)}return ff(t,n<=t.e||t.e<=r.NE||t.e>=r.PE,!!s)};zt.valueOf=function(){var n=this,e=n.constructor;if(e.strict===!0)throw Error(Uy+"valueOf disallowed");return ff(n,n.e<=e.NE||n.e>=e.PE,!0)};var Eg=SU();const zL={bigNumber(n){return n?new Eg(n):new Eg(0)},multiply(n,e){if(n===void 0||e===void 0)return new Eg(0);const t=new Eg(n),r=new Eg(e);return t.times(r)},formatNumberToLocalString(n,e=2){return n===void 0?"0.00":typeof n=="number"?n.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(n).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(n){return n===void 0?0:parseFloat(n.replace(/,/gu,""))}},qL=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],VL=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],GL=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],KL={getERC20Abi:n=>oe.USDT_CONTRACT_ADDRESSES.includes(n)?GL:qL,getSwapAbi:()=>VL},Fr={validateCaipAddress(n){var e;if(((e=n.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return n},parseCaipAddress(n){const e=n.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${n}`);const[t,r,s]=e;if(!t||!r||!s)throw new Error(`Invalid CAIP-10 address: ${n}`);return{chainNamespace:t,chainId:r,address:s}},parseCaipNetworkId(n){const e=n.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${n}`);const[t,r]=e;if(!t||!r)throw new Error(`Invalid CAIP-2 network id: ${n}`);return{chainNamespace:t,chainId:r}}},et={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function _A(n){if(!n)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${n}:connected_connector_id`}const Qe={setItem(n,e){Gg()&&e!==void 0&&localStorage.setItem(n,e)},getItem(n){if(Gg())return localStorage.getItem(n)||void 0},removeItem(n){Gg()&&localStorage.removeItem(n)},clear(){Gg()&&localStorage.clear()}};function Gg(){return typeof window<"u"&&typeof localStorage<"u"}function Io(n,e){return e==="light"?{"--w3m-accent":(n==null?void 0:n["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(n==null?void 0:n["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var hI={};const SA=(typeof process<"u"&&typeof hI<"u"?hI.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",NU=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],WL="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",kt={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:SA,SECURE_SITE_DASHBOARD:`${SA}/dashboard`,SECURE_SITE_FAVICON:`${SA}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:[oe.CHAIN.EVM,oe.CHAIN.SOLANA],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[oe.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[oe.CHAIN.EVM,oe.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[oe.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[oe.CHAIN.EVM,oe.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},be={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(n,e){return Date.now()-n>e},getActiveNetworkProps(){const n=be.getActiveNamespace(),e=be.getActiveCaipNetworkId(),t=e?e.split(":")[1]:void 0,r=t?isNaN(Number(t))?t:Number(t):void 0;return{namespace:n,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:n,href:e}){try{Qe.setItem(et.DEEPLINK_CHOICE,JSON.stringify({href:e,name:n}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const n=Qe.getItem(et.DEEPLINK_CHOICE);if(n)return JSON.parse(n)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Qe.removeItem(et.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(n){try{Qe.setItem(et.ACTIVE_NAMESPACE,n)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(n){try{Qe.setItem(et.ACTIVE_CAIP_NETWORK_ID,n),be.setActiveNamespace(n.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Qe.getItem(et.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Qe.removeItem(et.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(n){try{const e=_A(n);Qe.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(n){try{const e=be.getRecentWallets();e.find(r=>r.id===n.id)||(e.unshift(n),e.length>2&&e.pop(),Qe.setItem(et.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const n=Qe.getItem(et.RECENT_WALLETS);return n?JSON.parse(n):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(n,e){try{const t=_A(n);Qe.setItem(t,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Qe.getItem(et.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(n){if(n)try{const e=_A(n);return Qe.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",n)}},setConnectedSocialProvider(n){try{Qe.setItem(et.CONNECTED_SOCIAL,n)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Qe.getItem(et.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Qe.removeItem(et.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Qe.getItem(et.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var t;const n=Qe.getItem(et.ACTIVE_CAIP_NETWORK_ID);return(t=n==null?void 0:n.split(":"))==null?void 0:t[1]},setConnectionStatus(n){try{Qe.setItem(et.CONNECTION_STATUS,n)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Qe.getItem(et.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const n=Qe.getItem(et.CONNECTED_NAMESPACES);return n!=null&&n.length?n.split(","):[]}catch{return[]}},setConnectedNamespaces(n){try{const e=Array.from(new Set(n));Qe.setItem(et.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(n){try{const e=be.getConnectedNamespaces();e.includes(n)||(e.push(n),be.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(n){try{const e=be.getConnectedNamespaces(),t=e.indexOf(n);t>-1&&(e.splice(t,1),be.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Qe.getItem(et.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(n){try{Qe.setItem(et.TELEGRAM_SOCIAL_PROVIDER,n)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Qe.removeItem(et.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let n={};try{const e=Qe.getItem(et.PORTFOLIO_CACHE);n=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return n},removeAddressFromBalanceCache(n){try{const e=be.getBalanceCache();Qe.setItem(et.PORTFOLIO_CACHE,JSON.stringify({...e,[n]:void 0}))}catch{console.info("Unable to remove address from balance cache",n)}},getBalanceCacheForCaipAddress(n){try{const t=be.getBalanceCache()[n];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;be.removeAddressFromBalanceCache(n)}catch{console.info("Unable to get balance cache for address",n)}},updateBalanceCache(n){try{const e=be.getBalanceCache();e[n.caipAddress]=n,Qe.setItem(et.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",n)}},getNativeBalanceCache(){let n={};try{const e=Qe.getItem(et.NATIVE_BALANCE_CACHE);n=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return n},removeAddressFromNativeBalanceCache(n){try{const e=be.getBalanceCache();Qe.setItem(et.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[n]:void 0}))}catch{console.info("Unable to remove address from balance cache",n)}},getNativeBalanceCacheForCaipAddress(n){try{const t=be.getNativeBalanceCache()[n];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",n),be.removeAddressFromBalanceCache(n)}catch{console.info("Unable to get balance cache for address",n)}},updateNativeBalanceCache(n){try{const e=be.getNativeBalanceCache();e[n.caipAddress]=n,Qe.setItem(et.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",n)}},getEnsCache(){let n={};try{const e=Qe.getItem(et.ENS_CACHE);n=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return n},getEnsFromCacheForAddress(n){try{const t=be.getEnsCache()[n];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;be.removeEnsFromCache(n)}catch{console.info("Unable to get ens name from cache",n)}},updateEnsCache(n){try{const e=be.getEnsCache();e[n.address]=n,Qe.setItem(et.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",n)}},removeEnsFromCache(n){try{const e=be.getEnsCache();Qe.setItem(et.ENS_CACHE,JSON.stringify({...e,[n]:void 0}))}catch{console.info("Unable to remove ens name from cache",n)}},getIdentityCache(){let n={};try{const e=Qe.getItem(et.IDENTITY_CACHE);n=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return n},getIdentityFromCacheForAddress(n){try{const t=be.getIdentityCache()[n];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;be.removeIdentityFromCache(n)}catch{console.info("Unable to get identity from cache",n)}},updateIdentityCache(n){try{const e=be.getIdentityCache();e[n.address]={identity:n.identity,timestamp:n.timestamp},Qe.setItem(et.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",n)}},removeIdentityFromCache(n){try{const e=be.getIdentityCache();Qe.setItem(et.IDENTITY_CACHE,JSON.stringify({...e,[n]:void 0}))}catch{console.info("Unable to remove identity from cache",n)}},clearAddressCache(){try{Qe.removeItem(et.PORTFOLIO_CACHE),Qe.removeItem(et.NATIVE_BALANCE_CACHE),Qe.removeItem(et.ENS_CACHE),Qe.removeItem(et.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(n){try{Qe.setItem(et.PREFERRED_ACCOUNT_TYPES,JSON.stringify(n))}catch{console.info("Unable to set preferred account types",n)}},getPreferredAccountTypes(){try{const n=Qe.getItem(et.PREFERRED_ACCOUNT_TYPES);return n?JSON.parse(n):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(n,e){try{const t=be.getConnections(),r=t[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of n){const l=s.get(o.connectorId),f=o.connectorId===oe.CONNECTOR_ID.AUTH;if(l&&!f){const h=new Set(l.accounts.map(g=>g.address.toLowerCase())),p=o.accounts.filter(g=>!h.has(g.address.toLowerCase()));l.accounts.push(...p)}else s.set(o.connectorId,{...o})}const i={...t,[e]:Array.from(s.values())};Qe.setItem(et.CONNECTIONS,JSON.stringify(i))}catch(t){console.error("Unable to sync connections to storage",t)}},getConnections(){try{const n=Qe.getItem(et.CONNECTIONS);return n?JSON.parse(n):{}}catch(n){return console.error("Unable to get connections from storage",n),{}}},deleteAddressFromConnection({connectorId:n,address:e,namespace:t}){try{const r=be.getConnections(),s=r[t]??[],i=new Map(s.map(l=>[l.connectorId,l])),o=i.get(n);o&&(o.accounts.filter(f=>f.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(n):i.set(n,{...o,accounts:o.accounts.filter(f=>f.address.toLowerCase()!==e.toLowerCase())})),Qe.setItem(et.CONNECTIONS,JSON.stringify({...r,[t]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${n}" in namespace "${t}"`)}},getDisconnectedConnectorIds(){try{const n=Qe.getItem(et.DISCONNECTED_CONNECTOR_IDS);return n?JSON.parse(n):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(n,e){try{const t=be.getDisconnectedConnectorIds(),r=t[e]??[];r.push(n),Qe.setItem(et.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...t,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${n}" for namespace "${e}"`)}},removeDisconnectedConnectorId(n,e){try{const t=be.getDisconnectedConnectorIds();let r=t[e]??[];r=r.filter(s=>s.toLowerCase()!==n.toLowerCase()),Qe.setItem(et.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...t,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${n}" for namespace "${e}"`)}},isConnectorDisconnected(n,e){try{return(be.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===n.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${n}" for namespace "${e}"`)}return!1}},Re={isMobile(){var n;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((n=window.matchMedia("(pointer:coarse)"))!=null&&n.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(n,e=""){return n==null?void 0:n.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const n=window==null?void 0:window.navigator.userAgent.toLowerCase();return Re.isMobile()&&n.includes("android")},isIos(){if(!this.isMobile())return!1;const n=window==null?void 0:window.navigator.userAgent.toLowerCase();return n.includes("iphone")||n.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(n){return n?n-Date.now()<=kt.TEN_SEC_MS:!0},isAllowedRetry(n,e=kt.ONE_SEC_MS){return Date.now()-n>=e},copyToClopboard(n){navigator.clipboard.writeText(n)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var n,e;if(Re.isClient()&&window.self!==window.top)try{const t=(e=(n=window==null?void 0:window.location)==null?void 0:n.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(t){const s=new URL(t),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+kt.FOUR_MINUTES_MS},getNetworkId(n){return n==null?void 0:n.split(":")[1]},getPlainAddress(n){return n==null?void 0:n.split(":")[2]},async wait(n){return new Promise(e=>{setTimeout(e,n)})},debounce(n,e=500){let t;return(...r)=>{function s(){n(...r)}t&&clearTimeout(t),t=setTimeout(s,e)}},isHttpUrl(n){return n.startsWith("http://")||n.startsWith("https://")},formatNativeUrl(n,e,t=null){if(Re.isHttpUrl(n))return this.formatUniversalUrl(n,e);let r=n,s=t;r.includes("://")||(r=n.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(n,e){if(!Re.isHttpUrl(n))return this.formatNativeUrl(n,e);let t=n;t.endsWith("/")||(t=`${t}/`);const r=encodeURIComponent(e);return{redirect:`${t}wc?uri=${r}`,href:t}},getOpenTargetForPlatform(n){return n==="popupWindow"?n:this.isTelegram()?be.getTelegramSocialProvider()?"_top":"_blank":n},openHref(n,e,t){window==null||window.open(n,this.getOpenTargetForPlatform(e),t||"noreferrer noopener")},returnOpenHref(n,e,t){return window==null?void 0:window.open(n,this.getOpenTargetForPlatform(e),t||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var t,r;if(typeof window>"u")return!1;const n=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(t=window.matchMedia("(display-mode: standalone)"))==null?void 0:t.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(n||e)},async preloadImage(n){const e=new Promise((t,r)=>{const s=new Image;s.onload=t,s.onerror=r,s.crossOrigin="anonymous",s.src=n});return Promise.race([e,Re.wait(2e3)])},formatBalance(n,e){let t="0.000";if(typeof n=="string"){const r=Number(n);if(r){const s=Math.floor(r*1e3)/1e3;s&&(t=s.toString())}}return`${t}${e?` ${e}`:""}`},formatBalance2(n,e){var r;let t;if(n==="0")t="0";else if(typeof n=="string"){const s=Number(n);s&&(t=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:t??"0",rest:t==="0"?"000":"",symbol:e}},getApiUrl(){return oe.W3M_API_URL},getBlockchainApiUrl(){return oe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return oe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})},parseError(n){var e,t;return typeof n=="string"?n:typeof((t=(e=n==null?void 0:n.issues)==null?void 0:e[0])==null?void 0:t.message)=="string"?n.issues[0].message:n instanceof Error?n.message:"Unknown error"},sortRequestedNetworks(n,e=[]){const t={};return e&&n&&(n.forEach((r,s)=>{t[r]=s}),e.sort((r,s)=>{const i=t[r.id],o=t[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(n){let e=0;for(const t of n)e+=t.value??0;return e},formatTokenBalance(n){const e=n.toFixed(2),[t,r]=e.split(".");return{dollars:t,pennies:r}},isAddress(n,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(n)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(n)||/^(?:0x)?[0-9A-F]{40}$/iu.test(n))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(n);default:return!1}},uniqueBy(n,e){const t=new Set;return n.filter(r=>{const s=r[e];return t.has(s)?!1:(t.add(s),!0)})},generateSdkVersion(n,e,t){const s=n.length===0?kt.ADAPTER_TYPES.UNIVERSAL:n.map(i=>i.adapterType).join(",");return`${e}-${s}-${t}`},createAccount(n,e,t,r,s){return{namespace:n,address:e,type:t,publicKey:r,path:s}},isCaipAddress(n){if(typeof n!="string")return!1;const e=n.split(":"),t=e[0];return e.filter(Boolean).length===3&&t in oe.CHAIN_NAME_MAP},getAccount(n){return n?typeof n=="string"?{address:n,chainId:void 0}:{address:n.address,chainId:n.chainId}:{address:void 0,chainId:void 0}},isMac(){const n=window==null?void 0:window.navigator.userAgent.toLowerCase();return n.includes("macintosh")&&!n.includes("safari")},formatTelegramSocialLoginUrl(n){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,t="state=";if(new URL(n).host==="auth.magic.link"){const s="provider_authorization_url=",i=n.substring(n.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),t,e);return n.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(n,t,e)},injectIntoUrl(n,e,t){const r=n.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${n}`);const s=n.indexOf("&",r),i=e.length,o=s!==-1?s:n.length,l=n.substring(0,r+i),f=n.substring(r+i,o),h=n.substring(s),p=f+t;return l+p+h}};async function vg(...n){const e=await fetch(...n);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class ky{constructor({baseUrl:e,clientId:t}){this.baseUrl=e,this.clientId=t}async get({headers:e,signal:t,cache:r,...s}){const i=this.createUrl(s);return(await vg(i,{method:"GET",headers:e,signal:t,cache:r})).json()}async getBlob({headers:e,signal:t,...r}){const s=this.createUrl(r);return(await vg(s,{method:"GET",headers:e,signal:t})).blob()}async post({body:e,headers:t,signal:r,...s}){const i=this.createUrl(s);return(await vg(i,{method:"POST",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:t,signal:r,...s}){const i=this.createUrl(s);return(await vg(i,{method:"PUT",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:t,signal:r,...s}){const i=this.createUrl(s);return(await vg(i,{method:"DELETE",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:t}){const r=new URL(e,this.baseUrl);return t&&Object.entries(t).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const YL={getFeatureValue(n,e){const t=e==null?void 0:e[n];return t===void 0?kt.DEFAULT_FEATURES[n]:t},filterSocialsByPlatform(n){if(!n||!n.length)return n;if(Re.isTelegram()){if(Re.isIos())return n.filter(e=>e!=="google");if(Re.isMac())return n.filter(e=>e!=="x");if(Re.isAndroid())return n.filter(e=>!["facebook","x"].includes(e))}return n}},Fe=nn({features:kt.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:kt.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),pe={state:Fe,subscribeKey(n,e){return Ir(Fe,n,e)},setOptions(n){Object.assign(Fe,n)},setRemoteFeatures(n){var t,r;if(!n)return;const e={...Fe.remoteFeatures,...n};Fe.remoteFeatures=e,(t=Fe.remoteFeatures)!=null&&t.socials&&(Fe.remoteFeatures.socials=YL.filterSocialsByPlatform(Fe.remoteFeatures.socials)),(r=Fe.features)!=null&&r.pay&&(Fe.remoteFeatures.email=!1,Fe.remoteFeatures.socials=!1)},setFeatures(n){var t;if(!n)return;Fe.features||(Fe.features=kt.DEFAULT_FEATURES);const e={...Fe.features,...n};Fe.features=e,(t=Fe.features)!=null&&t.pay&&Fe.remoteFeatures&&(Fe.remoteFeatures.email=!1,Fe.remoteFeatures.socials=!1)},setProjectId(n){Fe.projectId=n},setCustomRpcUrls(n){Fe.customRpcUrls=n},setAllWallets(n){Fe.allWallets=n},setIncludeWalletIds(n){Fe.includeWalletIds=n},setExcludeWalletIds(n){Fe.excludeWalletIds=n},setFeaturedWalletIds(n){Fe.featuredWalletIds=n},setTokens(n){Fe.tokens=n},setTermsConditionsUrl(n){Fe.termsConditionsUrl=n},setPrivacyPolicyUrl(n){Fe.privacyPolicyUrl=n},setCustomWallets(n){Fe.customWallets=n},setIsSiweEnabled(n){Fe.isSiweEnabled=n},setIsUniversalProvider(n){Fe.isUniversalProvider=n},setSdkVersion(n){Fe.sdkVersion=n},setMetadata(n){Fe.metadata=n},setDisableAppend(n){Fe.disableAppend=n},setEIP6963Enabled(n){Fe.enableEIP6963=n},setDebug(n){Fe.debug=n},setEnableWalletConnect(n){Fe.enableWalletConnect=n},setEnableWalletGuide(n){Fe.enableWalletGuide=n},setEnableAuthLogger(n){Fe.enableAuthLogger=n},setEnableWallets(n){Fe.enableWallets=n},setPreferUniversalLinks(n){Fe.experimental_preferUniversalLinks=n},setSIWX(n){if(n)for(const[e,t]of Object.entries(kt.SIWX_DEFAULTS))n[e]??(n[e]=t);Fe.siwx=n},setConnectMethodsOrder(n){Fe.features={...Fe.features,connectMethodsOrder:n}},setWalletFeaturesOrder(n){Fe.features={...Fe.features,walletFeaturesOrder:n}},setSocialsOrder(n){Fe.remoteFeatures={...Fe.remoteFeatures,socials:n}},setCollapseWallets(n){Fe.features={...Fe.features,collapseWallets:n}},setEnableEmbedded(n){Fe.enableEmbedded=n},setAllowUnsupportedChain(n){Fe.allowUnsupportedChain=n},setManualWCControl(n){Fe.manualWCControl=n},setEnableNetworkSwitch(n){Fe.enableNetworkSwitch=n},setEnableReconnect(n){Fe.enableReconnect=n},setDefaultAccountTypes(n={}){Object.entries(n).forEach(([e,t])=>{t&&(Fe.defaultAccountTypes[e]=t)})},setUniversalProviderConfigOverride(n){Fe.universalProviderConfigOverride=n},getUniversalProviderConfigOverride(){return Fe.universalProviderConfigOverride},getSnapshot(){return Ku(Fe)}},QL=Object.freeze({enabled:!0,events:[]}),ZL=new ky({baseUrl:Re.getAnalyticsUrl(),clientId:null}),JL=5,XL=60*1e3,wc=nn({...QL}),e9={state:wc,subscribeKey(n,e){return Ir(wc,n,e)},async sendError(n,e){if(!wc.enabled)return;const t=Date.now();if(wc.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return t-o<XL}).length>=JL)return;const s={type:"error",event:e,properties:{errorType:n.name,errorMessage:n.message,stackTrace:n.stack,timestamp:new Date().toISOString()}};wc.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:l}=pe.state;await ZL.post({path:"/e",params:{projectId:i,st:o,sv:l||"html-wagmi-4.2.2"},body:{eventId:Re.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:n.name,errorMessage:n.message,stackTrace:n.stack}}})}catch{}},enable(){wc.enabled=!0},disable(){wc.enabled=!1},clearEvents(){wc.events=[]}};class Hd extends Error{constructor(e,t,r){super(e),this.name="AppKitError",this.category=t,this.originalError=r,Object.setPrototypeOf(this,Hd.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const l=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${l}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Hd):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function dI(n,e){const t=n instanceof Hd?n:new Hd(n instanceof Error?n.message:String(n),e,n);throw e9.sendError(t,t.category),t}function zs(n,e="INTERNAL_SDK_ERROR"){const t={};return Object.keys(n).forEach(r=>{const s=n[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(l){return dI(l,e)}}:i=(...o)=>{try{return s(...o)}catch(l){return dI(l,e)}},t[r]=i}else t[r]=s}),t}var jd={};const t9="https://secure.walletconnect.org/sdk",n9=(typeof process<"u"&&typeof jd<"u"?jd.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||t9,r9=(typeof process<"u"&&typeof jd<"u"?jd.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",s9=(typeof process<"u"&&typeof jd<"u"?jd.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Be={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ln={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Sa={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},i9={handleMobileDeeplinkRedirect(n,e){const t=window.location.href,r=encodeURIComponent(t);if(n===Sa.PHANTOM.id&&!("phantom"in window)){const s=t.startsWith("https")?"https":"http",i=t.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Sa.PHANTOM.url}/ul/browse/${r}?ref=${o}`}n===Sa.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Sa.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===oe.CHAIN.SOLANA&&n===Sa.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Sa.COINBASE.url}/dapp?cb_url=${r}`)}},Os=nn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),a9={state:Os,subscribeNetworkImages(n){return tr(Os.networkImages,()=>n(Os.networkImages))},subscribeKey(n,e){return Ir(Os,n,e)},subscribe(n){return tr(Os,()=>n(Os))},setWalletImage(n,e){Os.walletImages[n]=e},setNetworkImage(n,e){Os.networkImages[n]=e},setChainImage(n,e){Os.chainImages[n]=e},setConnectorImage(n,e){Os.connectorImages={...Os.connectorImages,[n]:e}},setTokenImage(n,e){Os.tokenImages[n]=e},setCurrencyImage(n,e){Os.currencyImages[n]=e}},Fi=zs(a9),o9={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},NA=nn({networkImagePromises:{}}),TU={async fetchWalletImage(n){if(n)return await je._fetchWalletImage(n),this.getWalletImageById(n)},async fetchNetworkImage(n){if(!n)return;const e=this.getNetworkImageById(n);return e||(NA.networkImagePromises[n]||(NA.networkImagePromises[n]=je._fetchNetworkImage(n)),await NA.networkImagePromises[n],this.getNetworkImageById(n))},getWalletImageById(n){if(n)return Fi.state.walletImages[n]},getWalletImage(n){if(n!=null&&n.image_url)return n==null?void 0:n.image_url;if(n!=null&&n.image_id)return Fi.state.walletImages[n.image_id]},getNetworkImage(n){var e,t,r;if((e=n==null?void 0:n.assets)!=null&&e.imageUrl)return(t=n==null?void 0:n.assets)==null?void 0:t.imageUrl;if((r=n==null?void 0:n.assets)!=null&&r.imageId)return Fi.state.networkImages[n.assets.imageId]},getNetworkImageById(n){if(n)return Fi.state.networkImages[n]},getConnectorImage(n){var e;if(n!=null&&n.imageUrl)return n.imageUrl;if((e=n==null?void 0:n.info)!=null&&e.icon)return n.info.icon;if(n!=null&&n.imageId)return Fi.state.connectorImages[n.imageId]},getChainImage(n){return Fi.state.networkImages[o9[n]]}},bc=nn({message:"",variant:"info",open:!1}),c9={state:bc,subscribeKey(n,e){return Ir(bc,n,e)},open(n,e){const{debug:t}=pe.state,{shortMessage:r,longMessage:s}=n;t&&(bc.message=r,bc.variant=e,bc.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){bc.open=!1,bc.message="",bc.variant="info"}},Un=zs(c9),l9=Re.getAnalyticsUrl(),u9=new ky({baseUrl:l9,clientId:null}),f9=["MODAL_CREATED"],no=nn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),jt={state:no,subscribe(n){return tr(no,()=>n(no))},getSdkProperties(){const{projectId:n,sdkType:e,sdkVersion:t}=pe.state;return{projectId:n,st:e,sv:t||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(n){try{const e=Ue.state.address;if(f9.includes(n.data.event)||typeof window>"u")return;await u9.post({path:"/e",params:jt.getSdkProperties(),body:{eventId:Re.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:n.timestamp,props:{...n.data,address:e}}}),no.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===oe.HTTP_STATUS_CODES.FORBIDDEN&&!no.reportedErrors.FORBIDDEN&&(Un.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Gg()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),no.reportedErrors.FORBIDDEN=!0)}},sendEvent(n){var e;no.timestamp=Date.now(),no.data=n,((e=pe.state.features)!=null&&e.analytics||n.event==="INITIALIZE")&&jt._sendAnalyticsEvent(no)}},h9=Re.getApiUrl(),Xr=new ky({baseUrl:h9,clientId:null}),d9=40,pI=4,p9=20,nt=nn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),je={state:nt,subscribeKey(n,e){return Ir(nt,n,e)},_getSdkProperties(){const{projectId:n,sdkType:e,sdkVersion:t}=pe.state;return{projectId:n,st:e||"appkit",sv:t||"html-wagmi-4.2.2"}},_filterOutExtensions(n){return pe.state.isUniversalProvider?n.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):n},async _fetchWalletImage(n){const e=`${Xr.baseUrl}/getWalletImage/${n}`,t=await Xr.getBlob({path:e,params:je._getSdkProperties()});Fi.setWalletImage(n,URL.createObjectURL(t))},async _fetchNetworkImage(n){const e=`${Xr.baseUrl}/public/getAssetImage/${n}`,t=await Xr.getBlob({path:e,params:je._getSdkProperties()});Fi.setNetworkImage(n,URL.createObjectURL(t))},async _fetchConnectorImage(n){const e=`${Xr.baseUrl}/public/getAssetImage/${n}`,t=await Xr.getBlob({path:e,params:je._getSdkProperties()});Fi.setConnectorImage(n,URL.createObjectURL(t))},async _fetchCurrencyImage(n){const e=`${Xr.baseUrl}/public/getCurrencyImage/${n}`,t=await Xr.getBlob({path:e,params:je._getSdkProperties()});Fi.setCurrencyImage(n,URL.createObjectURL(t))},async _fetchTokenImage(n){const e=`${Xr.baseUrl}/public/getTokenImage/${n}`,t=await Xr.getBlob({path:e,params:je._getSdkProperties()});Fi.setTokenImage(n,URL.createObjectURL(t))},_filterWalletsByPlatform(n){return Re.isMobile()?n==null?void 0:n.filter(t=>t.mobile_link||t.id===Sa.COINBASE.id?!0:L.state.activeChain==="solana"&&(t.id===Sa.SOLFLARE.id||t.id===Sa.PHANTOM.id)):n},async fetchProjectConfig(){return(await Xr.get({path:"/appkit/v1/config",params:je._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:n}=await Xr.get({path:"/projects/v1/origins",params:je._getSdkProperties()});return n}catch(n){if(n instanceof Error&&n.cause instanceof Response){const e=n.cause.status;if(e===oe.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:n});if(e>=oe.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:n});return[]}return[]}},async fetchNetworkImages(){const n=L.getAllRequestedCaipNetworks(),e=n==null?void 0:n.map(({assets:t})=>t==null?void 0:t.imageId).filter(Boolean).filter(t=>!TU.getNetworkImageById(t));e&&await Promise.allSettled(e.map(t=>je._fetchNetworkImage(t)))},async fetchConnectorImages(){const{connectors:n}=ve.state,e=n.map(({imageId:t})=>t).filter(Boolean);await Promise.allSettled(e.map(t=>je._fetchConnectorImage(t)))},async fetchCurrencyImages(n=[]){await Promise.allSettled(n.map(e=>je._fetchCurrencyImage(e)))},async fetchTokenImages(n=[]){await Promise.allSettled(n.map(e=>je._fetchTokenImage(e)))},async fetchWallets(n){var i;const e=n.exclude??[];je._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Sa).map(o=>o.id));const r=await Xr.get({path:"/getWallets",params:{...je._getSdkProperties(),...n,page:String(n.page),entries:String(n.entries),include:(i=n.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:je._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:n}=pe.state;if(n!=null&&n.length){const e={...je._getSdkProperties(),page:1,entries:(n==null?void 0:n.length)??pI,include:n},{data:t}=await je.fetchWallets(e),r=[...t].sort((i,o)=>n.indexOf(i.id)-n.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>je._fetchWalletImage(i))),nt.featured=r,nt.allFeatured=r}},async fetchRecommendedWallets(){try{nt.isFetchingRecommendedWallets=!0;const{includeWalletIds:n,excludeWalletIds:e,featuredWalletIds:t}=pe.state,r=[...e??[],...t??[]].filter(Boolean),s=L.getRequestedCaipNetworkIds().join(","),i={page:1,entries:pI,include:n,exclude:r,chains:s},{data:o,count:l}=await je.fetchWallets(i),f=be.getRecentWallets(),h=o.map(g=>g.image_id).filter(Boolean),p=f.map(g=>g.image_id).filter(Boolean);await Promise.allSettled([...h,...p].map(g=>je._fetchWalletImage(g))),nt.recommended=o,nt.allRecommended=o,nt.count=l??0}catch{}finally{nt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:n}){const{includeWalletIds:e,excludeWalletIds:t,featuredWalletIds:r}=pe.state,s=L.getRequestedCaipNetworkIds().join(","),i=[...nt.recommended.map(({id:p})=>p),...t??[],...r??[]].filter(Boolean),o={page:n,entries:d9,include:e,exclude:i,chains:s},{data:l,count:f}=await je.fetchWallets(o),h=l.slice(0,p9).map(p=>p.image_id).filter(Boolean);await Promise.allSettled(h.map(p=>je._fetchWalletImage(p))),nt.wallets=Re.uniqueBy([...nt.wallets,...je._filterOutExtensions(l)],"id").filter(p=>{var g;return(g=p.chains)==null?void 0:g.some(y=>s.includes(y))}),nt.count=f>nt.count?f:nt.count,nt.page=n},async initializeExcludedWallets({ids:n}){const e={page:1,entries:n.length,include:n},{data:t}=await je.fetchWallets(e);t&&t.forEach(r=>{nt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:n,badge:e}){const{includeWalletIds:t,excludeWalletIds:r}=pe.state,s=L.getRequestedCaipNetworkIds().join(",");nt.search=[];const i={page:1,entries:100,search:n==null?void 0:n.trim(),badge_type:e,include:t,exclude:r,chains:s},{data:o}=await je.fetchWallets(i);jt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:n??""}});const l=o.map(f=>f.image_id).filter(Boolean);await Promise.allSettled([...l.map(f=>je._fetchWalletImage(f)),Re.wait(300)]),nt.search=je._filterOutExtensions(o)},initPromise(n,e){const t=nt.promises[n];return t||(nt.promises[n]=e())},prefetch({fetchConnectorImages:n=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:t=!0,fetchNetworkImages:r=!0}={}){const s=[n&&je.initPromise("connectorImages",je.fetchConnectorImages),e&&je.initPromise("featuredWallets",je.fetchFeaturedWallets),t&&je.initPromise("recommendedWallets",je.fetchRecommendedWallets),r&&je.initPromise("networkImages",je.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var n;(n=pe.state.features)!=null&&n.analytics&&je.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:n}=await Xr.get({path:"/getAnalyticsConfig",params:je._getSdkProperties()});pe.setFeatures({analytics:n})}catch{pe.setFeatures({analytics:!1})}},filterByNamespaces(n){if(!(n!=null&&n.length)){nt.featured=nt.allFeatured,nt.recommended=nt.allRecommended;return}const e=L.getRequestedCaipNetworkIds().join(",");nt.featured=nt.allFeatured.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))}),nt.recommended=nt.allRecommended.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))}),nt.filteredWallets=nt.wallets.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){nt.filteredWallets=[]},setFilterByNamespace(n){if(!n){nt.featured=nt.allFeatured,nt.recommended=nt.allRecommended;return}const e=L.getRequestedCaipNetworkIds().join(",");nt.featured=nt.allFeatured.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))}),nt.recommended=nt.allRecommended.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))}),nt.filteredWallets=nt.wallets.filter(t=>{var r;return(r=t.chains)==null?void 0:r.some(s=>e.includes(s))})}},Kt=nn({view:"Connect",history:["Connect"],transactionStack:[]}),g9={state:Kt,subscribeKey(n,e){return Ir(Kt,n,e)},pushTransactionStack(n){Kt.transactionStack.push(n)},popTransactionStack(n){const e=Kt.transactionStack.pop();if(!e)return;const{onSuccess:t,onError:r,onCancel:s}=e;switch(n){case"success":t==null||t();break;case"error":r==null||r(),Ze.goBack();break;case"cancel":s==null||s(),Ze.goBack();break}},push(n,e){n!==Kt.view&&(Kt.view=n,Kt.history.push(n),Kt.data=e)},reset(n,e){Kt.view=n,Kt.history=[n],Kt.data=e},replace(n,e){Kt.history.at(-1)===n||(Kt.view=n,Kt.history[Kt.history.length-1]=n,Kt.data=e)},goBack(){var r;const n=L.state.activeCaipAddress,e=Ze.state.view==="ConnectingFarcaster",t=!n&&e;if(Kt.history.length>1){Kt.history.pop();const[s]=Kt.history.slice(-1);s&&(n&&s==="Connect"?Kt.view="Account":Kt.view=s)}else It.close();(r=Kt.data)!=null&&r.wallet&&(Kt.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(t){Ue.setFarcasterUrl(void 0,L.state.activeChain);const l=ve.getAuthConnector();(s=l==null?void 0:l.provider)==null||s.reload();const f=Ku(pe.state);(o=(i=l==null?void 0:l.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:f.metadata,sdkVersion:f.sdkVersion,projectId:f.projectId,sdkType:f.sdkType})}},100)},goBackToIndex(n){if(Kt.history.length>1){Kt.history=Kt.history.slice(0,n+1);const[e]=Kt.history.slice(-1);e&&(Kt.view=e)}},goBackOrCloseModal(){Ze.state.history.length>1?Ze.goBack():It.close()}},Ze=zs(g9),ro=nn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),XC={state:ro,subscribe(n){return tr(ro,()=>n(ro))},setThemeMode(n){ro.themeMode=n;try{const e=ve.getAuthConnector();if(e){const t=XC.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:n,themeVariables:t,w3mThemeVariables:Io(t,n)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(n){ro.themeVariables={...ro.themeVariables,...n};try{const e=ve.getAuthConnector();if(e){const t=XC.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:t,w3mThemeVariables:Io(ro.themeVariables,ro.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Ku(ro)}},us=zs(XC),OU={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},St=nn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...OU},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),m9={state:St,subscribe(n){return tr(St,()=>{n(St)})},subscribeKey(n,e){return Ir(St,n,e)},initialize(n){n.forEach(e=>{const t=be.getConnectedConnectorId(e);t&&ve.setConnectorId(t,e)})},setActiveConnector(n){n&&(St.activeConnector=Wu(n))},setConnectors(n){n.filter(s=>!St.allConnectors.some(i=>i.id===s.id&&ve.getConnectorName(i.name)===ve.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&St.allConnectors.push(Wu(s))});const t=ve.getEnabledNamespaces(),r=ve.getEnabledConnectors(t);St.connectors=ve.mergeMultiChainConnectors(r)},filterByNamespaces(n){Object.keys(St.filterByNamespaceMap).forEach(e=>{St.filterByNamespaceMap[e]=!1}),n.forEach(e=>{St.filterByNamespaceMap[e]=!0}),ve.updateConnectorsForEnabledNamespaces()},filterByNamespace(n,e){St.filterByNamespaceMap[n]=e,ve.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const n=ve.getEnabledNamespaces(),e=ve.getEnabledConnectors(n),t=ve.areAllNamespacesEnabled();St.connectors=ve.mergeMultiChainConnectors(e),t?je.clearFilterByNamespaces():je.filterByNamespaces(n)},getEnabledNamespaces(){return Object.entries(St.filterByNamespaceMap).filter(([n,e])=>e).map(([n])=>n)},getEnabledConnectors(n){return St.allConnectors.filter(e=>n.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(St.filterByNamespaceMap).every(n=>n)},mergeMultiChainConnectors(n){const e=ve.generateConnectorMapByName(n),t=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===oe.CONNECTOR_ID.AUTH;r.length>1&&s?t.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&t.push(s)}),t},generateConnectorMapByName(n){const e=new Map;return n.forEach(t=>{const{name:r}=t,s=ve.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(l=>l.chain===t.chain)||i.push(t),e.set(s,i)}),e},getConnectorName(n){return n&&({"Trust Wallet":"Trust"}[n]||n)},getUniqueConnectorsByName(n){const e=[];return n.forEach(t=>{e.find(r=>r.chain===t.chain)||e.push(t)}),e},addConnector(n){var e,t,r;if(n.id===oe.CONNECTOR_ID.AUTH){const s=n,i=Ku(pe.state),o=us.getSnapshot().themeMode,l=us.getSnapshot().themeVariables;(t=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||t.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:l,w3mThemeVariables:Io(l,o)}),ve.setConnectors([n])}else ve.setConnectors([n])},getAuthConnector(n){var r;const e=n||L.state.activeChain,t=St.connectors.find(s=>s.id===oe.CONNECTOR_ID.AUTH);if(t)return(r=t==null?void 0:t.connectors)!=null&&r.length?t.connectors.find(i=>i.chain===e):t},getAnnouncedConnectorRdns(){return St.connectors.filter(n=>n.type==="ANNOUNCED").map(n=>{var e;return(e=n.info)==null?void 0:e.rdns})},getConnectorById(n){return St.allConnectors.find(e=>e.id===n)},getConnector(n,e){return St.allConnectors.filter(r=>r.chain===L.state.activeChain).find(r=>{var s;return r.explorerId===n||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(n){var i,o;if(n.id!=="ID_AUTH")return;const e=n,t=Ku(pe.state),r=us.getSnapshot().themeMode,s=us.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:t.metadata,sdkVersion:t.sdkVersion,sdkType:t.sdkType,projectId:t.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Io(s,r)})},getConnectorsByNamespace(n){const e=St.allConnectors.filter(t=>t.chain===n);return ve.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(n){return L.checkIfSmartAccountEnabled()&&Hs(n)===Ln.ACCOUNT_TYPES.EOA},selectWalletConnector(n){const e=ve.getConnector(n.id,n.rdns);i9.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||n.id,L.state.activeChain),e?Ze.push("ConnectingExternal",{connector:e,wallet:n}):Ze.push("ConnectingWalletConnect",{wallet:n})},getConnectors(n){return n?ve.getConnectorsByNamespace(n):ve.mergeMultiChainConnectors(St.allConnectors)},setFilterByNamespace(n){St.filterByNamespace=n,St.connectors=ve.getConnectors(n),je.setFilterByNamespace(n)},setConnectorId(n,e){n&&(St.activeConnectorIds={...St.activeConnectorIds,[e]:n},be.setConnectedConnectorId(e,n))},removeConnectorId(n){St.activeConnectorIds={...St.activeConnectorIds,[n]:void 0},be.deleteConnectedConnectorId(n)},getConnectorId(n){if(n)return St.activeConnectorIds[n]},isConnected(n){return n?!!St.activeConnectorIds[n]:Object.values(St.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){St.activeConnectorIds={...OU}}},ve=zs(m9),y9=1e3,Ag={checkNamespaceConnectorId(n,e){return ve.getConnectorId(n)===e},isSocialProvider(n){return kt.DEFAULT_REMOTE_FEATURES.socials.includes(n)},connectWalletConnect({walletConnect:n,connector:e,closeModalOnConnect:t=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,l)=>{if(n&&ve.setActiveConnector(e),s==null||s(Re.isMobile()&&n),r){const h=It.subscribeKey("open",p=>{p||(Ze.state.view!==r&&Ze.replace(r),h(),l(new Error("Modal closed")))})}const f=L.subscribeKey("activeCaipAddress",h=>{h&&(i==null||i(),t&&It.close(),f(),o(Fr.parseCaipAddress(h)))})})},connectExternal(n){return new Promise((e,t)=>{const r=L.subscribeKey("activeCaipAddress",s=>{s&&(It.close(),r(),e(Fr.parseCaipAddress(s)))});_e.connectExternal(n,n.chain).catch(()=>{r(),t(new Error("Connection rejected"))})})},connectSocial({social:n,closeModalOnConnect:e=!0,onOpenFarcaster:t,onConnect:r}){let s=Ue.state.socialWindow,i=Ue.state.socialProvider,o=!1,l=null;const f=L.subscribeKey("activeCaipAddress",h=>{h&&(e&&It.close(),f())});return new Promise((h,p)=>{async function g(b){var v,E;if((v=b.data)!=null&&v.resultUri)if(b.origin===oe.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",g,!1);try{const A=ve.getAuthConnector();if(A&&!o){s&&(s.close(),Ue.setSocialWindow(void 0,L.state.activeChain),s=Ue.state.socialWindow),o=!0;const S=b.data.resultUri;if(i&&jt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),i){be.setConnectedSocialProvider(i),await _e.connectExternal({id:A.id,type:A.type,socialUri:S},A.chain);const O=L.state.activeCaipAddress;if(!O){p(new Error("Failed to connect"));return}h(Fr.parseCaipAddress(O)),jt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i,caipNetworkId:(E=L.getActiveCaipNetwork())==null?void 0:E.caipNetworkId}})}}}catch{i&&jt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),p(new Error("Failed to connect"))}}else i&&jt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function y(){if(n&&(Ue.setSocialProvider(n,L.state.activeChain),i=Ue.state.socialProvider,jt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){t==null||t();const b=It.subscribeKey("open",E=>{!E&&n==="farcaster"&&(p(new Error("Popup closed")),r==null||r(),b())}),v=ve.getAuthConnector();if(v&&!Ue.state.farcasterUrl)try{const{url:E}=await v.provider.getFarcasterUri();Ue.setFarcasterUrl(E,L.state.activeChain)}catch{p(new Error("Failed to connect to farcaster"))}}else{const b=ve.getAuthConnector();l=Re.returnOpenHref(`${oe.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(b&&i){const{uri:v}=await b.provider.getSocialRedirectUri({provider:i});if(l&&v){Ue.setSocialWindow(l,L.state.activeChain),s=Ue.state.socialWindow,l.location.href=v;const E=setInterval(()=>{s!=null&&s.closed&&!o&&(p(new Error("Popup closed")),clearInterval(E))},1e3);window.addEventListener("message",g,!1)}else l==null||l.close(),p(new Error("Failed to initiate social connection"))}}catch{p(new Error("Failed to initiate social connection")),l==null||l.close()}}}y()})},connectEmail({closeModalOnConnect:n=!0,redirectViewOnModalClose:e="Connect",onOpen:t,onConnect:r}){return new Promise((s,i)=>{if(t==null||t(),e){const l=It.subscribeKey("open",f=>{f||(Ze.state.view!==e&&Ze.replace(e),l(),i(new Error("Modal closed")))})}const o=L.subscribeKey("activeCaipAddress",l=>{l&&(r==null||r(),n&&It.close(),o(),s(Fr.parseCaipAddress(l)))})})},async updateEmail(){const n=be.getConnectedConnectorId(L.state.activeChain),e=ve.getAuthConnector();if(!e)throw new Error("No auth connector found");if(n!==oe.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const t=e.provider.getEmail()??"";return Ze.push("UpdateEmailWallet",{email:t,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const l=e.provider.getEmail()??"";l!==t&&(It.close(),clearInterval(i),o(),r({email:l}))},y9),o=It.subscribeKey("open",l=>{l||(Ze.state.view!=="Connect"&&Ze.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(n){return L.checkIfSmartAccountEnabled()&&Hs(n)===Ln.ACCOUNT_TYPES.EOA}};function xU(){var r,s;const n=((r=L.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=L.state.activeCaipNetwork)==null?void 0:s.id)||1,t=kt.NATIVE_TOKEN_ADDRESS[n];return`${n}:${e}:${t}`}function Hs(n){var t;return(t=L.getAccountData(n))==null?void 0:t.preferredAccountType}const Tb={getConnectionStatus(n,e){const t=ve.state.activeConnectorIds[e],r=_e.getConnections(e);return!!t&&n.connectorId===t?"connected":r.some(o=>o.connectorId.toLowerCase()===n.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:n,connectorId:e,addresses:t}){return n.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&t){const i=r.accounts.filter(o=>!t.some(f=>f.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(n,e){const t=new Set(n);return e.filter(r=>!t.has(r.connectorId))},getConnectionsByConnectorId(n,e){return n.filter(t=>t.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(n){var l;const e=!!((l=pe.state.remoteFeatures)!=null&&l.multiWallet),t=ve.state.activeConnectorIds[n],r=_e.getConnections(n),i=(_e.state.recentConnections.get(n)??[]).filter(f=>ve.getConnectorById(f.connectorId)),o=Tb.excludeExistingConnections([...r.map(f=>f.connectorId),...t?[t]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(f=>f.connectorId.toLowerCase()===(t==null?void 0:t.toLowerCase())),recentConnections:[]}}},Zl=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Pn=nn({...Zl}),w9={state:Pn,subscribeKey(n,e){return Ir(Pn,n,e)},showLoading(n,e={}){this._showMessage({message:n,variant:"loading",...e})},showSuccess(n){this._showMessage({message:n,variant:"success"})},showSvg(n,e){this._showMessage({message:n,svg:e})},showError(n){const e=Re.parseError(n);this._showMessage({message:e,variant:"error"})},hide(){Pn.message=Zl.message,Pn.variant=Zl.variant,Pn.svg=Zl.svg,Pn.open=Zl.open,Pn.autoClose=Zl.autoClose},_showMessage({message:n,svg:e,variant:t="success",autoClose:r=Zl.autoClose}){Pn.open?(Pn.open=!1,setTimeout(()=>{Pn.message=n,Pn.variant=t,Pn.svg=e,Pn.open=!0,Pn.autoClose=r},150)):(Pn.message=n,Pn.variant=t,Pn.svg=e,Pn.open=!0,Pn.autoClose=r)}},Ia=w9,cn=nn({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),b9={state:cn,subscribe(n){return tr(cn,()=>n(cn))},setLastNetworkInView(n){cn.lastNetworkInView=n},async fetchTransactions(n){var e;if(!n)throw new Error("Transactions can't be fetched without an accountAddress");cn.loading=!0;try{const t=await Ge.fetchTransactions({account:n,cursor:cn.next,chainId:(e=L.state.activeCaipNetwork)==null?void 0:e.caipNetworkId}),r=rb.filterSpamTransactions(t.data),s=rb.filterByConnectedChain(r),i=[...cn.transactions,...s];cn.loading=!1,cn.transactions=i,cn.transactionsByYear=rb.groupTransactionsByYearAndMonth(cn.transactionsByYear,s),cn.empty=i.length===0,cn.next=t.next?t.next:void 0}catch{const r=L.state.activeChain;jt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:n,projectId:pe.state.projectId,cursor:cn.next,isSmartAccount:Hs(r)===Ln.ACCOUNT_TYPES.SMART_ACCOUNT}}),Ia.showError("Failed to fetch transactions"),cn.loading=!1,cn.empty=!0,cn.next=void 0}},groupTransactionsByYearAndMonth(n={},e=[]){const t=n;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=t[s]??{},f=(o[i]??[]).filter(h=>h.id!==r.id);t[s]={...o,[i]:[...f,r].sort((h,p)=>new Date(p.metadata.minedAt).getTime()-new Date(h.metadata.minedAt).getTime())}}),t},filterSpamTransactions(n){return n.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(n){var r;const e=(r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return n.filter(s=>s.metadata.chain===e)},clearCursor(){cn.next=void 0},resetTransactions(){cn.transactions=[],cn.transactionsByYear={},cn.lastNetworkInView=void 0,cn.loading=!1,cn.empty=!1,cn.next=void 0}},rb=zs(b9,"API_ERROR"),Et=nn({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Hl;const E9={state:Et,subscribe(n){return tr(Et,()=>n(Et))},subscribeKey(n,e){return Ir(Et,n,e)},_getClient(){return Et._client},setClient(n){Et._client=Wu(n)},initialize(n){const e=n.filter(t=>!!t.namespace).map(t=>t.namespace);_e.syncStorageConnections(e)},syncStorageConnections(n){const e=be.getConnections(),t=n??Array.from(L.state.chains.keys());for(const r of t){const s=e[r]??[],i=new Map(Et.recentConnections);i.set(r,s),Et.recentConnections=i}},getConnections(n){return n?Et.connections.get(n)??[]:[]},hasAnyConnection(n){const e=_e.state.connections;return Array.from(e.values()).flatMap(t=>t).some(({connectorId:t})=>t===n)},async connectWalletConnect(){var n,e,t,r;if(Re.isTelegram()||Re.isSafari()&&Re.isIos()){if(Hl){await Hl,Hl=void 0;return}if(!Re.isPairingExpired(Et==null?void 0:Et.wcPairingExpiry)){const s=Et.wcUri;Et.wcUri=s;return}Hl=(e=(n=_e._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:e.call(n).catch(()=>{}),_e.state.status="connecting",await Hl,Hl=void 0,Et.wcPairingExpiry=void 0,_e.state.status="connected"}else await((r=(t=_e._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:r.call(t))},async connectExternal(n,e,t=!0){var s,i;const r=await((i=(s=_e._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,n));return t&&L.setActiveNamespace(e),r},async reconnectExternal(n){var t,r;await((r=(t=_e._getClient())==null?void 0:t.reconnectExternal)==null?void 0:r.call(t,n));const e=n.chain||L.state.activeChain;e&&ve.setConnectorId(n.id,e)},async setPreferredAccountType(n,e){var r;if(!e)return;It.setLoading(!0,L.state.activeChain);const t=ve.getAuthConnector();t&&(Ue.setPreferredAccountType(n,e),await t.provider.setPreferredAccount(n),be.setPreferredAccountTypes(Object.entries(L.state.chains).reduce((s,[i,o])=>{const l=i,f=Hs(l);return f!==void 0&&(s[l]=f),s},{})),await _e.reconnectExternal(t),It.setLoading(!1,L.state.activeChain),jt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:n,network:((r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(n){var e;return(e=_e._getClient())==null?void 0:e.signMessage(n)},parseUnits(n,e){var t;return(t=_e._getClient())==null?void 0:t.parseUnits(n,e)},formatUnits(n,e){var t;return(t=_e._getClient())==null?void 0:t.formatUnits(n,e)},async sendTransaction(n){var e;return(e=_e._getClient())==null?void 0:e.sendTransaction(n)},async getCapabilities(n){var e;return(e=_e._getClient())==null?void 0:e.getCapabilities(n)},async grantPermissions(n){var e;return(e=_e._getClient())==null?void 0:e.grantPermissions(n)},async walletGetAssets(n){var e;return((e=_e._getClient())==null?void 0:e.walletGetAssets(n))??{}},async estimateGas(n){var e;return(e=_e._getClient())==null?void 0:e.estimateGas(n)},async writeContract(n){var e;return(e=_e._getClient())==null?void 0:e.writeContract(n)},async getEnsAddress(n){var e;return(e=_e._getClient())==null?void 0:e.getEnsAddress(n)},async getEnsAvatar(n){var e;return(e=_e._getClient())==null?void 0:e.getEnsAvatar(n)},checkInstalled(n){var e,t;return((t=(e=_e._getClient())==null?void 0:e.checkInstalled)==null?void 0:t.call(e,n))||!1},resetWcConnection(){Et.wcUri=void 0,Et.wcPairingExpiry=void 0,Et.wcLinking=void 0,Et.recentWallet=void 0,Et.status="disconnected",rb.resetTransactions(),be.deleteWalletConnectDeepLink()},resetUri(){Et.wcUri=void 0,Et.wcPairingExpiry=void 0,Hl=void 0},finalizeWcConnection(){var t,r,s;const{wcLinking:n,recentWallet:e}=_e.state;n&&be.setWalletConnectDeepLink(n),e&&be.setAppKitRecent(e),jt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:n?"mobile":"qrcode",name:((r=(t=Ze.state.data)==null?void 0:t.wallet)==null?void 0:r.name)||"Unknown",caipNetworkId:(s=L.getActiveCaipNetwork())==null?void 0:s.caipNetworkId}})},setWcBasic(n){Et.wcBasic=n},setUri(n){Et.wcUri=n,Et.wcPairingExpiry=Re.getPairingExpiry()},setWcLinking(n){Et.wcLinking=n},setWcError(n){Et.wcError=n,Et.buffering=!1},setRecentWallet(n){Et.recentWallet=n},setBuffering(n){Et.buffering=n},setStatus(n){Et.status=n},setIsSwitchingConnection(n){Et.isSwitchingConnection=n},async disconnect({id:n,namespace:e,initialDisconnect:t}={}){var r;try{await((r=_e._getClient())==null?void 0:r.disconnect({id:n,chainNamespace:e,initialDisconnect:t}))}catch(s){throw new Hd("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(n,e){const t=new Map(Et.connections);t.set(e,n),Et.connections=t},async handleAuthAccountSwitch({address:n,namespace:e}){var s,i;const t=(i=(s=Ue.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=t&&t.address.toLowerCase()===n.toLowerCase()&&Ag.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await _e.setPreferredAccountType(r,e)},async handleActiveConnection({connection:n,namespace:e,address:t}){const r=ve.getConnectorById(n.connectorId),s=n.connectorId===oe.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${n.connectorId}`);if(s)s&&t&&await _e.handleAuthAccountSwitch({address:t,namespace:e});else{const i=await _e.connectExternal({id:r.id,type:r.type,provider:r.provider,address:t,chain:e},e);return i==null?void 0:i.address}return t},async handleDisconnectedConnection({connection:n,namespace:e,address:t,closeModalOnConnect:r}){var h,p;const s=ve.getConnectorById(n.connectorId),i=(p=(h=n.auth)==null?void 0:h.name)==null?void 0:p.toLowerCase(),o=n.connectorId===oe.CONNECTOR_ID.AUTH,l=n.connectorId===oe.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${n.connectorId}`);let f;if(o)if(i&&Ag.isSocialProvider(i)){const{address:g}=await Ag.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){It.open({view:"ConnectingFarcaster"})},onConnect(){Ze.replace("ProfileWallets")}});f=g}else{const{address:g}=await Ag.connectEmail({closeModalOnConnect:r,onOpen(){It.open({view:"EmailLogin"})},onConnect(){Ze.replace("ProfileWallets")}});f=g}else if(l){const{address:g}=await Ag.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(y){It.open({view:y?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Ze.replace("ProfileWallets")}});f=g}else{const g=await _e.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);g&&(f=g.address)}return o&&t&&await _e.handleAuthAccountSwitch({address:t,namespace:e}),f},async switchConnection({connection:n,address:e,namespace:t,closeModalOnConnect:r,onChange:s}){let i;const o=Ue.getCaipAddress(t);if(o){const{address:f}=Fr.parseCaipAddress(o);i=f}const l=Tb.getConnectionStatus(n,t);switch(l){case"connected":case"active":{const f=await _e.handleActiveConnection({connection:n,namespace:t,address:e});if(i&&f){const h=f.toLowerCase()!==i.toLowerCase();s==null||s({address:f,namespace:t,hasSwitchedAccount:h,hasSwitchedWallet:l==="active"})}break}case"disconnected":{const f=await _e.handleDisconnectedConnection({connection:n,namespace:t,address:e,closeModalOnConnect:r});f&&(s==null||s({address:f,namespace:t,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${l}`)}}},_e=zs(E9),ih=nn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),zi={state:ih,subscribe(n){return tr(ih,()=>n(ih))},subscribeOpen(n){return Ir(ih,"open",n)},set(n){Object.assign(ih,{...ih,...n})}},v9={async getTokenList(){var r;const n=L.state.activeCaipNetwork,e=await Ge.fetchSwapTokens({chainId:n==null?void 0:n.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const n=L.state.activeCaipNetwork;if(!n)return null;try{switch(n.chainNamespace){case"solana":const t=(e=await(_e==null?void 0:_e.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:t,fast:t,instant:t};case"eip155":default:return await Ge.fetchGasPrice({chainId:n.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:n,userAddress:e,sourceTokenAmount:t,sourceTokenDecimals:r}){const s=await Ge.fetchSwapAllowance({tokenAddress:n,userAddress:e});if(s!=null&&s.allowance&&t&&r){const i=_e.parseUnits(t,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(n){const e=await Z2.getMyTokensWithBalance(n);return Ue.setTokenBalance(e,L.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(n){return(n==null?void 0:n.map(e=>({...e,address:e!=null&&e.address?e.address:xU(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Ht=nn({tokenBalances:[],loading:!1}),A9={state:Ht,subscribe(n){return tr(Ht,()=>n(Ht))},subscribeKey(n,e){return Ir(Ht,n,e)},setToken(n){n&&(Ht.token=Wu(n))},setTokenAmount(n){Ht.sendTokenAmount=n},setReceiverAddress(n){Ht.receiverAddress=n},setReceiverProfileImageUrl(n){Ht.receiverProfileImageUrl=n},setReceiverProfileName(n){Ht.receiverProfileName=n},setNetworkBalanceInUsd(n){Ht.networkBalanceInUSD=n},setLoading(n){Ht.loading=n},async sendToken(){var n;try{switch(Ut.setLoading(!0),(n=L.state.activeCaipNetwork)==null?void 0:n.chainNamespace){case"eip155":await Ut.sendEvmToken();return;case"solana":await Ut.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Ut.setLoading(!1)}},async sendEvmToken(){var t,r,s;const n=L.state.activeChain;if(!n)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Hs(n);if(!Ut.state.sendTokenAmount||!Ut.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Ut.state.token)throw new Error("A token is required");(t=Ut.state.token)!=null&&t.address?(jt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ln.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ut.state.token.address,amount:Ut.state.sendTokenAmount,network:((r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await Ut.sendERC20Token({receiverAddress:Ut.state.receiverAddress,tokenAddress:Ut.state.token.address,sendTokenAmount:Ut.state.sendTokenAmount,decimals:Ut.state.token.quantity.decimals})):(jt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ln.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ut.state.token.symbol||"",amount:Ut.state.sendTokenAmount,network:((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Ut.sendNativeToken({receiverAddress:Ut.state.receiverAddress,sendTokenAmount:Ut.state.sendTokenAmount,decimals:Ut.state.token.quantity.decimals}))},async fetchTokenBalance(n){var i,o;Ht.loading=!0;const e=(i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,t=(o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=L.state.activeCaipAddress,s=r?Re.getPlainAddress(r):void 0;if(Ht.lastRetry&&!Re.isAllowedRetry(Ht.lastRetry,30*kt.ONE_SEC_MS))return Ht.loading=!1,[];try{if(s&&e&&t){const l=await Z2.getMyTokensWithBalance();return Ht.tokenBalances=l,Ht.lastRetry=void 0,l}}catch(l){Ht.lastRetry=Date.now(),n==null||n(l),Ia.showError("Token Balance Unavailable")}finally{Ht.loading=!1}return[]},fetchNetworkBalance(){if(Ht.tokenBalances.length===0)return;const n=v9.mapBalancesToSwapTokens(Ht.tokenBalances);if(!n)return;const e=n.find(t=>t.address===xU());e&&(Ht.networkBalanceInUSD=e?zL.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(n){var i,o,l;Ze.pushTransactionStack({});const e=n.receiverAddress,t=Ue.state.address,r=_e.parseUnits(n.sendTokenAmount.toString(),Number(n.decimals));await _e.sendTransaction({chainNamespace:oe.CHAIN.EVM,to:e,address:t,data:"0x",value:r??BigInt(0)}),jt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Hs("eip155")===Ln.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=Ut.state.token)==null?void 0:i.symbol)||"",amount:n.sendTokenAmount,network:((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(l=_e._getClient())==null||l.updateBalance("eip155"),Ut.resetSend()},async sendERC20Token(n){Ze.pushTransactionStack({onSuccess(){Ze.replace("Account")}});const e=_e.parseUnits(n.sendTokenAmount.toString(),Number(n.decimals));if(Ue.state.address&&n.sendTokenAmount&&n.receiverAddress&&n.tokenAddress){const t=Re.getPlainAddress(n.tokenAddress);if(!t)throw new Error("SendController:sendERC20Token - tokenAddress is required");await _e.writeContract({fromAddress:Ue.state.address,tokenAddress:t,args:[n.receiverAddress,e??BigInt(0)],method:"transfer",abi:KL.getERC20Abi(t),chainNamespace:oe.CHAIN.EVM}),Ut.resetSend()}},async sendSolanaToken(){var n;if(!Ut.state.sendTokenAmount||!Ut.state.receiverAddress)throw new Error("An amount and receiver address are required");Ze.pushTransactionStack({onSuccess(){Ze.replace("Account")}}),await _e.sendTransaction({chainNamespace:"solana",to:Ut.state.receiverAddress,value:Ut.state.sendTokenAmount}),(n=_e._getClient())==null||n.updateBalance("solana"),Ut.resetSend()},resetSend(){Ht.token=void 0,Ht.sendTokenAmount=void 0,Ht.receiverAddress=void 0,Ht.receiverProfileImageUrl=void 0,Ht.receiverProfileName=void 0,Ht.loading=!1,Ht.tokenBalances=[]}},Ut=zs(A9),TA={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},Ew={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Se=nn({chains:UL(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),C9={state:Se,subscribe(n){return tr(Se,()=>{n(Se)})},subscribeKey(n,e){return Ir(Se,n,e)},subscribeChainProp(n,e,t){let r;return tr(Se.chains,()=>{var i;const s=t||Se.activeChain;if(s){const o=(i=Se.chains.get(s))==null?void 0:i[n];r!==o&&(r=o,e(o))}})},initialize(n,e,t){const{chainId:r,namespace:s}=be.getActiveNetworkProps(),i=e==null?void 0:e.find(p=>p.id.toString()===(r==null?void 0:r.toString())),l=n.find(p=>(p==null?void 0:p.namespace)===s)||(n==null?void 0:n[0]),f=n.map(p=>p.namespace).filter(p=>p!==void 0),h=pe.state.enableEmbedded?new Set([...f]):new Set([...(e==null?void 0:e.map(p=>p.chainNamespace))??[]]);((n==null?void 0:n.length)===0||!l)&&(Se.noAdapters=!0),Se.noAdapters||(Se.activeChain=l==null?void 0:l.namespace,Se.activeCaipNetwork=i,L.setChainNetworkData(l==null?void 0:l.namespace,{caipNetwork:i}),Se.activeChain&&zi.set({activeChain:l==null?void 0:l.namespace})),h.forEach(p=>{const g=e==null?void 0:e.filter(v=>v.chainNamespace===p),y=be.getPreferredAccountTypes()||{},b={...pe.state.defaultAccountTypes,...y};L.state.chains.set(p,{namespace:p,networkState:nn({...Ew,caipNetwork:g==null?void 0:g[0]}),accountState:nn({...TA,preferredAccountType:b[p]}),caipNetworks:g??[],...t}),L.setRequestedCaipNetworks(g??[],p)})},removeAdapter(n){var e,t;if(Se.activeChain===n){const r=Array.from(Se.chains.entries()).find(([s])=>s!==n);if(r){const s=(t=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:t[0];s&&L.setActiveCaipNetwork(s)}}Se.chains.delete(n)},addAdapter(n,{networkControllerClient:e,connectionControllerClient:t},r){if(!n.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Se.chains.set(n.namespace,{namespace:n.namespace,networkState:{...Ew,caipNetwork:r[0]},accountState:TA,caipNetworks:r,connectionControllerClient:t,networkControllerClient:e}),L.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===n.namespace))??[],n.namespace)},addNetwork(n){var t;const e=Se.chains.get(n.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(t=e.caipNetworks)!=null&&t.find(s=>s.id===n.id)||r.push(n),Se.chains.set(n.chainNamespace,{...e,caipNetworks:r}),L.setRequestedCaipNetworks(r,n.chainNamespace),ve.filterByNamespace(n.chainNamespace,!0)}},removeNetwork(n,e){var r,s,i;const t=Se.chains.get(n);if(t){const o=((r=Se.activeCaipNetwork)==null?void 0:r.id)===e,l=[...((s=t.caipNetworks)==null?void 0:s.filter(f=>f.id!==e))||[]];o&&((i=t==null?void 0:t.caipNetworks)!=null&&i[0])&&L.setActiveCaipNetwork(t.caipNetworks[0]),Se.chains.set(n,{...t,caipNetworks:l}),L.setRequestedCaipNetworks(l||[],n),l.length===0&&ve.filterByNamespace(n,!1)}},setAdapterNetworkState(n,e){const t=Se.chains.get(n);t&&(t.networkState={...t.networkState||Ew,...e},Se.chains.set(n,t))},setChainAccountData(n,e,t=!0){if(!n)throw new Error("Chain is required to update chain account data");const r=Se.chains.get(n);if(r){const s={...r.accountState||TA,...e};Se.chains.set(n,{...r,accountState:s}),(Se.chains.size===1||Se.activeChain===n)&&(e.caipAddress&&(Se.activeCaipAddress=e.caipAddress),Ue.replaceState(s))}},setChainNetworkData(n,e){if(!n)return;const t=Se.chains.get(n);if(t){const r={...t.networkState||Ew,...e};Se.chains.set(n,{...t,networkState:r})}},setAccountProp(n,e,t,r=!0){L.setChainAccountData(t,{[n]:e},r)},setActiveNamespace(n){var r,s;Se.activeChain=n;const e=n?Se.chains.get(n):void 0,t=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;t!=null&&t.id&&n&&(Se.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Se.activeCaipNetwork=t,L.setChainNetworkData(n,{caipNetwork:t}),be.setActiveCaipNetworkId(t==null?void 0:t.caipNetworkId),zi.set({activeChain:n,selectedNetworkId:t==null?void 0:t.caipNetworkId}))},setActiveCaipNetwork(n){var r,s,i;if(!n)return;Se.activeChain!==n.chainNamespace&&L.setIsSwitchingNamespace(!0);const e=Se.chains.get(n.chainNamespace);Se.activeChain=n.chainNamespace,Se.activeCaipNetwork=n,L.setChainNetworkData(n.chainNamespace,{caipNetwork:n}),(r=e==null?void 0:e.accountState)!=null&&r.address?Se.activeCaipAddress=`${n.chainNamespace}:${n.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Se.activeCaipAddress=void 0,L.setAccountProp("caipAddress",Se.activeCaipAddress,n.chainNamespace),e&&Ue.replaceState(e.accountState),Ut.resetSend(),zi.set({activeChain:Se.activeChain,selectedNetworkId:(i=Se.activeCaipNetwork)==null?void 0:i.caipNetworkId}),be.setActiveCaipNetworkId(n.caipNetworkId),!L.checkIfSupportedNetwork(n.chainNamespace)&&pe.state.enableNetworkSwitch&&!pe.state.allowUnsupportedChain&&!_e.state.wcBasic&&L.showUnsupportedChainUI()},addCaipNetwork(n){var t;if(!n)return;const e=Se.chains.get(n.chainNamespace);e&&((t=e==null?void 0:e.caipNetworks)==null||t.push(n))},async switchActiveNamespace(n){var s;if(!n)return;const e=n!==L.state.activeChain,t=(s=L.getNetworkData(n))==null?void 0:s.caipNetwork,r=L.getCaipNetworkByNamespace(n,t==null?void 0:t.id);e&&r&&await L.switchActiveNetwork(r)},async switchActiveNetwork(n){var i;const e=L.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const t=L.state.chains.get(e),r=!((i=t==null?void 0:t.caipNetworks)!=null&&i.some(o=>{var l;return o.id===((l=Se.activeCaipNetwork)==null?void 0:l.id)})),s=L.getNetworkControllerClient(n.chainNamespace);if(s){try{await s.switchCaipNetwork(n),r&&It.close()}catch{Ze.goBack()}jt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:n.caipNetworkId}})}},getNetworkControllerClient(n){const e=n||Se.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const t=Se.chains.get(e);if(!t)throw new Error("Chain adapter not found");if(!t.networkControllerClient)throw new Error("NetworkController client not set");return t.networkControllerClient},getConnectionControllerClient(n){const e=n||Se.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const t=Se.chains.get(e);if(!(t!=null&&t.connectionControllerClient))throw new Error("ConnectionController client not set");return t.connectionControllerClient},getAccountProp(n,e){var s;let t=Se.activeChain;if(e&&(t=e),!t)return;const r=(s=Se.chains.get(t))==null?void 0:s.accountState;if(r)return r[n]},getNetworkProp(n,e){var r;const t=(r=Se.chains.get(e))==null?void 0:r.networkState;if(t)return t[n]},getRequestedCaipNetworks(n){const e=Se.chains.get(n),{approvedCaipNetworkIds:t=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Re.sortRequestedNetworks(t,r).filter(o=>o==null?void 0:o.id)},getAllRequestedCaipNetworks(){const n=[];return Se.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const t=L.getRequestedCaipNetworks(e.namespace);n.push(...t)}),n},setRequestedCaipNetworks(n,e){L.setAdapterNetworkState(e,{requestedCaipNetworks:n});const r=L.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));ve.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const n=[];return Se.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const t=L.getApprovedCaipNetworkIds(e.namespace);n.push(...t)}),n},getActiveCaipNetwork(n){var e,t;return n?(t=(e=Se.chains.get(n))==null?void 0:e.networkState)==null?void 0:t.caipNetwork:Se.activeCaipNetwork},getActiveCaipAddress(){return Se.activeCaipAddress},getApprovedCaipNetworkIds(n){var r;const e=Se.chains.get(n);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(n){const e=L.getNetworkControllerClient(),t=await(e==null?void 0:e.getApprovedCaipNetworksData());L.setAdapterNetworkState(n,{approvedCaipNetworkIds:t==null?void 0:t.approvedCaipNetworkIds,supportsAllNetworks:t==null?void 0:t.supportsAllNetworks})},checkIfSupportedNetwork(n,e){var s;const t=e||((s=Se.activeCaipNetwork)==null?void 0:s.caipNetworkId),r=L.getRequestedCaipNetworks(n);return r.length?r==null?void 0:r.some(i=>i.caipNetworkId===t):!0},checkIfSupportedChainId(n){if(!Se.activeChain)return!0;const e=L.getRequestedCaipNetworks(Se.activeChain);return e==null?void 0:e.some(t=>t.id===n)},setSmartAccountEnabledNetworks(n,e){L.setAdapterNetworkState(e,{smartAccountEnabledNetworks:n})},checkIfSmartAccountEnabled(){var r;const n=CU.caipNetworkIdToNumber((r=Se.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Se.activeChain;if(!e||!n)return!1;const t=L.getNetworkProp("smartAccountEnabledNetworks",e);return!!(t!=null&&t.includes(Number(n)))},showUnsupportedChainUI(){It.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const n=Se.activeCaipNetwork;return!!(n!=null&&n.chainNamespace&&kt.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(n.chainNamespace))},resetNetwork(n){L.setAdapterNetworkState(n,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(n){const e=n;if(!e)throw new Error("Chain is required to set account prop");const t=pe.state.defaultAccountTypes[e],r=L.getAccountProp("preferredAccountType",e);Se.activeCaipAddress=void 0,L.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:t||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),ve.removeConnectorId(e)},setIsSwitchingNamespace(n){Se.isSwitchingNamespace=n},getFirstCaipNetworkSupportsAuthConnector(){var t,r;const n=[];let e;if(Se.chains.forEach(s=>{oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&n.push(s.namespace)}),n.length>0){const s=n[0];return e=s?(r=(t=Se.chains.get(s))==null?void 0:t.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(n){var e;return n?(e=L.state.chains.get(n))==null?void 0:e.accountState:Ue.state},getNetworkData(n){var t;const e=n||Se.activeChain;if(e)return(t=L.state.chains.get(e))==null?void 0:t.networkState},getCaipNetworkByNamespace(n,e){var s,i,o;if(!n)return;const t=L.state.chains.get(n),r=(s=t==null?void 0:t.caipNetworks)==null?void 0:s.find(l=>l.id===e);return r||((i=t==null?void 0:t.networkState)==null?void 0:i.caipNetwork)||((o=t==null?void 0:t.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const n=ve.state.filterByNamespace;return(n?[Se.chains.get(n)]:Array.from(Se.chains.values())).flatMap(t=>(t==null?void 0:t.caipNetworks)||[]).map(t=>t.caipNetworkId)},getCaipNetworks(n){return n?L.getRequestedCaipNetworks(n):L.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(n){Se.lastConnectedSIWECaipNetwork=n},getLastConnectedSIWECaipNetwork(){return Se.lastConnectedSIWECaipNetwork}},L=zs(C9),_9={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},IU=Re.getBlockchainApiUrl(),es=nn({clientId:null,api:new ky({baseUrl:IU,clientId:null}),supportedChains:{http:[],ws:[]}}),Ge={state:es,async get(n){const{st:e,sv:t}=Ge.getSdkProperties(),r=pe.state.projectId,s={...n.params||{},st:e,sv:t,projectId:r};return es.api.get({...n,params:s})},getSdkProperties(){const{sdkType:n,sdkVersion:e}=pe.state;return{st:n||"unknown",sv:e||"unknown"}},async isNetworkSupported(n){if(!n)return!1;try{es.supportedChains.http.length||await Ge.getSupportedNetworks()}catch{return!1}return es.supportedChains.http.includes(n)},async getSupportedNetworks(){try{const n=await Ge.get({path:"v1/supported-chains"});return es.supportedChains=n,n}catch{return es.supportedChains}},async fetchIdentity({address:n,caipNetworkId:e}){if(!await Ge.isNetworkSupported(e))return{avatar:"",name:""};const r=be.getIdentityFromCacheForAddress(n);if(r)return r;const s=await Ge.get({path:`/v1/identity/${n}`,params:{sender:L.state.activeCaipAddress?Re.getPlainAddress(L.state.activeCaipAddress):void 0}});return be.updateIdentityCache({address:n,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:n,cursor:e,signal:t,cache:r,chainId:s}){var o;return await Ge.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Ge.get({path:`/v1/account/${n}/history`,params:{cursor:e,chainId:s},signal:t,cache:r}):{data:[],next:void 0}},async fetchSwapQuote({amount:n,userAddress:e,from:t,to:r,gasPrice:s}){var o;return await Ge.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Ge.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:n,userAddress:e,from:t,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:n}){var t;return await Ge.isNetworkSupported((t=L.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?Ge.get({path:"/v1/convert/tokens",params:{chainId:n}}):{tokens:[]}},async fetchTokenPrice({addresses:n}){var t;return await Ge.isNetworkSupported((t=L.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?es.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:n,projectId:pe.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:n,userAddress:e}){var r;return await Ge.isNetworkSupported((r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ge.get({path:"/v1/convert/allowance",params:{tokenAddress:n,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:n}){var s;const{st:e,sv:t}=Ge.getSdkProperties();if(!await Ge.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Ge.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:n,st:e,sv:t}})},async generateSwapCalldata({amount:n,from:e,to:t,userAddress:r,disableEstimate:s}){var o;if(!await Ge.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return es.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:n,eip155:{slippage:kt.CONVERT_SLIPPAGE_TOLERANCE},projectId:pe.state.projectId,from:e,to:t,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:n,to:e,userAddress:t}){var o;const{st:r,sv:s}=Ge.getSdkProperties();if(!await Ge.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ge.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:t,from:n,to:e,st:r,sv:s}})},async getBalance(n,e,t){var h;const{st:r,sv:s}=Ge.getSdkProperties();if(!await Ge.isNetworkSupported((h=L.state.activeCaipNetwork)==null?void 0:h.caipNetworkId))return Ia.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${n}`,l=be.getBalanceCacheForCaipAddress(o);if(l)return l;const f=await Ge.get({path:`/v1/account/${n}/balance`,params:{currency:"usd",chainId:e,forceUpdate:t,st:r,sv:s}});return be.updateBalanceCache({caipAddress:o,balance:f,timestamp:Date.now()}),f},async lookupEnsName(n){var t;return await Ge.isNetworkSupported((t=L.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?Ge.get({path:`/v1/profile/account/${n}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:n}){var t;return await Ge.isNetworkSupported((t=L.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?Ge.get({path:`/v1/profile/reverse/${n}`,params:{sender:Ue.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(n){var t;return await Ge.isNetworkSupported((t=L.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?Ge.get({path:`/v1/profile/suggestions/${n}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:n,address:e,message:t,signature:r}){var i;return await Ge.isNetworkSupported((i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?es.api.post({path:"/v1/profile/account",body:{coin_type:n,address:e,message:t,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:n,partnerUserId:e,defaultNetwork:t,purchaseAmount:r,paymentAmount:s}){var l;return await Ge.isNetworkSupported((l=L.state.activeCaipNetwork)==null?void 0:l.caipNetworkId)?(await es.api.post({path:"/v1/generators/onrampurl",params:{projectId:pe.state.projectId},body:{destinationWallets:n,defaultNetwork:t,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Ge.isNetworkSupported((e=L.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Ge.get({path:"/v1/onramp/options"})}catch{return _9}},async getOnrampQuote({purchaseCurrency:n,paymentCurrency:e,amount:t,network:r}){var s;try{return await Ge.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await es.api.post({path:"/v1/onramp/quote",params:{projectId:pe.state.projectId},body:{purchaseCurrency:n,paymentCurrency:e,amount:t,network:r}}):null}catch{return{networkFee:{amount:t,currency:e.id},paymentSubtotal:{amount:t,currency:e.id},paymentTotal:{amount:t,currency:e.id},purchaseAmount:{amount:t,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(n){var t;return await Ge.isNetworkSupported((t=L.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)?Ge.get({path:`/v1/sessions/${n}`}):[]},async revokeSmartSession(n,e,t){var s;return await Ge.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?es.api.post({path:`/v1/sessions/${n}/revoke`,params:{projectId:pe.state.projectId},body:{pci:e,signature:t}}):{success:!1}},setClientId(n){es.clientId=n,es.api=new ky({baseUrl:IU,clientId:n})}},vw=BigInt(2**32-1),gI=BigInt(32);function S9(n,e=!1){return e?{h:Number(n&vw),l:Number(n>>gI&vw)}:{h:Number(n>>gI&vw)|0,l:Number(n&vw)|0}}function N9(n,e=!1){const t=n.length;let r=new Uint32Array(t),s=new Uint32Array(t);for(let i=0;i<t;i++){const{h:o,l}=S9(n[i],e);[r[i],s[i]]=[o,l]}return[r,s]}const T9=(n,e,t)=>n<<t|e>>>32-t,O9=(n,e,t)=>e<<t|n>>>32-t,x9=(n,e,t)=>e<<t-32|n>>>64-t,I9=(n,e,t)=>n<<t-32|e>>>64-t,ah=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function R9(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Ob(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function zd(n,...e){if(!R9(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function dfe(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ob(n.outputLen),Ob(n.blockLen)}function mI(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function P9(n,e){zd(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function D9(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function RU(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function pfe(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function gfe(n,e){return n<<32-e|n>>>e}const U9=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function k9(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function B9(n){for(let e=0;e<n.length;e++)n[e]=k9(n[e]);return n}const yI=U9?n=>n:B9,M9=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",L9=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function mfe(n){if(zd(n),M9)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=L9[n[t]];return e}function $9(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function PU(n){return typeof n=="string"&&(n=$9(n)),zd(n),n}function yfe(...n){let e=0;for(let r=0;r<n.length;r++){const s=n[r];zd(s),e+=s.length}const t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){const i=n[r];t.set(i,s),s+=i.length}return t}let F9=class{};function H9(n){const e=r=>n().update(PU(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function bfe(n=32){if(ah&&typeof ah.getRandomValues=="function")return ah.getRandomValues(new Uint8Array(n));if(ah&&typeof ah.randomBytes=="function")return Uint8Array.from(ah.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const j9=BigInt(0),Cg=BigInt(1),z9=BigInt(2),q9=BigInt(7),V9=BigInt(256),G9=BigInt(113),DU=[],UU=[],kU=[];for(let n=0,e=Cg,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],DU.push(2*(5*r+t)),UU.push((n+1)*(n+2)/2%64);let s=j9;for(let i=0;i<7;i++)e=(e<<Cg^(e>>q9)*G9)%V9,e&z9&&(s^=Cg<<(Cg<<BigInt(i))-Cg);kU.push(s)}const BU=N9(kU,!0),K9=BU[0],W9=BU[1],wI=(n,e,t)=>t>32?x9(n,e,t):T9(n,e,t),bI=(n,e,t)=>t>32?I9(n,e,t):O9(n,e,t);function Y9(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const l=(o+8)%10,f=(o+2)%10,h=t[f],p=t[f+1],g=wI(h,p,1)^t[l],y=bI(h,p,1)^t[l+1];for(let b=0;b<50;b+=10)n[o+b]^=g,n[o+b+1]^=y}let s=n[2],i=n[3];for(let o=0;o<24;o++){const l=UU[o],f=wI(s,i,l),h=bI(s,i,l),p=DU[o];s=n[p],i=n[p+1],n[p]=f,n[p+1]=h}for(let o=0;o<50;o+=10){for(let l=0;l<10;l++)t[l]=n[o+l];for(let l=0;l<10;l++)n[o+l]^=~t[(l+2)%10]&t[(l+4)%10]}n[0]^=K9[r],n[1]^=W9[r]}RU(t)}let Q9=class MU extends F9{constructor(e,t,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=i,Ob(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=D9(this.state)}clone(){return this._cloneInto()}keccak(){yI(this.state32),Y9(this.state32,this.rounds),yI(this.state32),this.posOut=0,this.pos=0}update(e){mI(this),e=PU(e),zd(e);const{blockLen:t,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let l=0;l<o;l++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,(t&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){mI(this,!1),zd(e),this.finish();const t=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ob(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(P9(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,RU(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new MU(t,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Z9=(n,e,t)=>H9(()=>new Q9(e,n,t)),J9=Z9(1,136,256/8);function X9(n,e){let t=n.toString();const r=t.startsWith("-");r&&(t=t.slice(1)),t=t.padStart(e,"0");let[s,i]=[t.slice(0,t.length-e),t.slice(t.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}const e$="modulepreload",t$=function(n){return"/crowdfunding/"+n},EI={},Mr=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let o=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),f=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=o(t.map(h=>{if(h=t$(h),h in EI)return;EI[h]=!0;const p=h.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":e$,p||(y.as="script"),y.crossOrigin="",y.href=h,f&&y.setAttribute("nonce",f),document.head.appendChild(y),p)return new Promise((b,v)=>{y.addEventListener("load",b),y.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},OA={createBalance(n,e){const t={name:n.metadata.name||"",symbol:n.metadata.symbol||"",decimals:n.metadata.decimals||0,value:n.metadata.value||0,price:n.metadata.price||0,iconUrl:n.metadata.iconUrl||""};return{name:t.name,symbol:t.symbol,chainId:e,address:n.address==="native"?void 0:this.convertAddressToCAIP10Address(n.address,e),value:t.value,price:t.price,quantity:{decimals:t.decimals.toString(),numeric:this.convertHexToBalance({hex:n.balance,decimals:t.decimals})},iconUrl:t.iconUrl}},convertHexToBalance({hex:n,decimals:e}){return X9(BigInt(n),e)},convertAddressToCAIP10Address(n,e){return`${e}:${n}`},createCAIP2ChainId(n,e){return`${e}:${parseInt(n,16)}`},getChainIdHexFromCAIP2ChainId(n){const e=n.split(":");if(e.length<2||!e[1])return"0x0";const t=e[1],r=parseInt(t,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(n){return typeof n!="object"||n===null?!1:Object.values(n).every(e=>Array.isArray(e)&&e.every(t=>this.isValidAsset(t)))},isValidAsset(n){return typeof n=="object"&&n!==null&&typeof n.address=="string"&&typeof n.balance=="string"&&(n.type==="ERC20"||n.type==="NATIVE")&&typeof n.metadata=="object"&&n.metadata!==null&&typeof n.metadata.name=="string"&&typeof n.metadata.symbol=="string"&&typeof n.metadata.decimals=="number"&&typeof n.metadata.price=="number"&&typeof n.metadata.iconUrl=="string"}},Z2={async getMyTokensWithBalance(n){const e=Ue.state.address,t=L.state.activeCaipNetwork,r=ve.getConnectorId("eip155")===oe.CONNECTOR_ID.AUTH;if(!e||!t)return[];const s=`${t.caipNetworkId}:${e}`,i=be.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(t.chainNamespace===oe.CHAIN.EVM&&r){const l=await this.getEIP155Balances(e,t);if(l)return this.filterLowQualityTokens(l)}const o=await Ge.getBalance(e,t.caipNetworkId,n);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(n,e){var t,r;try{const s=OA.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await _e.getCapabilities(n);if(!((r=(t=i==null?void 0:i[s])==null?void 0:t.assetDiscovery)!=null&&r.supported))return null;const o=await _e.walletGetAssets({account:n,chainFilter:[s]});if(!OA.isWalletGetAssetsResponse(o))return null;const f=(o[s]||[]).map(h=>OA.createBalance(h,e.caipNetworkId));return be.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${n}`,balance:{balances:f},timestamp:Date.now()}),f}catch{return null}},filterLowQualityTokens(n){return n.filter(e=>e.quantity.decimals!=="0")}},ia=nn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),n$={state:ia,replaceState(n){n&&Object.assign(ia,Wu(n))},subscribe(n){return L.subscribeChainProp("accountState",e=>{if(e)return n(e)})},subscribeKey(n,e,t){let r;return L.subscribeChainProp("accountState",s=>{if(s){const i=s[n];r!==i&&(r=i,e(i))}},t)},setStatus(n,e){L.setAccountProp("status",n,e)},getCaipAddress(n){return L.getAccountProp("caipAddress",n)},setCaipAddress(n,e){const t=n?Re.getPlainAddress(n):void 0;e===L.state.activeChain&&(L.state.activeCaipAddress=n),L.setAccountProp("caipAddress",n,e),L.setAccountProp("address",t,e)},setBalance(n,e,t){L.setAccountProp("balance",n,t),L.setAccountProp("balanceSymbol",e,t)},setProfileName(n,e){L.setAccountProp("profileName",n,e)},setProfileImage(n,e){L.setAccountProp("profileImage",n,e)},setUser(n,e){L.setAccountProp("user",n,e)},setAddressExplorerUrl(n,e){L.setAccountProp("addressExplorerUrl",n,e)},setSmartAccountDeployed(n,e){L.setAccountProp("smartAccountDeployed",n,e)},setCurrentTab(n){L.setAccountProp("currentTab",n,L.state.activeChain)},setTokenBalance(n,e){n&&L.setAccountProp("tokenBalance",n,e)},setShouldUpdateToAddress(n,e){L.setAccountProp("shouldUpdateToAddress",n,e)},addAddressLabel(n,e,t){const r=L.getAccountProp("addressLabels",t)||new Map;r.set(n,e),L.setAccountProp("addressLabels",r,t)},removeAddressLabel(n,e){const t=L.getAccountProp("addressLabels",e)||new Map;t.delete(n),L.setAccountProp("addressLabels",t,e)},setConnectedWalletInfo(n,e){L.setAccountProp("connectedWalletInfo",n,e,!1)},setPreferredAccountType(n,e){L.setAccountProp("preferredAccountType",n,e)},setSocialProvider(n,e){n&&L.setAccountProp("socialProvider",n,e)},setSocialWindow(n,e){L.setAccountProp("socialWindow",n?Wu(n):void 0,e)},setFarcasterUrl(n,e){L.setAccountProp("farcasterUrl",n,e)},async fetchTokenBalance(n){var i,o;ia.balanceLoading=!0;const e=(i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,t=(o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=L.state.activeCaipAddress,s=r?Re.getPlainAddress(r):void 0;if(ia.lastRetry&&!Re.isAllowedRetry(ia.lastRetry,30*kt.ONE_SEC_MS))return ia.balanceLoading=!1,[];try{if(s&&e&&t){const l=await Z2.getMyTokensWithBalance();return Ue.setTokenBalance(l,t),ia.lastRetry=void 0,ia.balanceLoading=!1,l}}catch(l){ia.lastRetry=Date.now(),n==null||n(l),Ia.showError("Token Balance Unavailable")}finally{ia.balanceLoading=!1}return[]},resetAccount(n){L.resetAccount(n)}},Ue=zs(n$),r$={onSwitchNetwork({network:n,ignoreSwitchConfirmation:e=!1}){const t=L.state.activeCaipNetwork,r=Ze.state.data;if(n.id===(t==null?void 0:t.id))return;const i=Ue.getCaipAddress(L.state.activeChain),o=n.chainNamespace!==L.state.activeChain,l=Ue.getCaipAddress(n.chainNamespace),h=ve.getConnectorId(L.state.activeChain)===oe.CONNECTOR_ID.AUTH,p=oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(g=>g===n.chainNamespace);e||h&&p?Ze.push("SwitchNetwork",{...r,network:n}):i&&o&&!l?Ze.push("SwitchActiveChain",{switchToChain:n.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:n}):Ze.push("SwitchNetwork",{...r,network:n})}},ts=nn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),s$={state:ts,subscribe(n){return tr(ts,()=>n(ts))},subscribeKey(n,e){return Ir(ts,n,e)},async open(n){var i,o;const e=n==null?void 0:n.namespace,t=L.state.activeChain,r=e&&e!==t,s=(i=L.getAccountData(n==null?void 0:n.namespace))==null?void 0:i.caipAddress;if(_e.state.wcBasic?je.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await je.prefetch(),ve.setFilterByNamespace(n==null?void 0:n.namespace),It.setLoading(!0,e),e&&r){const l=((o=L.getNetworkData(e))==null?void 0:o.caipNetwork)||L.getRequestedCaipNetworks(e)[0];l&&r$.onSwitchNetwork({network:l,ignoreSwitchConfirmation:!0})}else{const l=L.state.noAdapters;pe.state.manualWCControl||l&&!s?Re.isMobile()?Ze.reset("AllWallets"):Ze.reset("ConnectingWalletConnectBasic"):n!=null&&n.view?Ze.reset(n.view,n.data):s?Ze.reset("Account"):Ze.reset("Connect")}ts.open=!0,zi.set({open:!0}),jt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const n=pe.state.enableEmbedded,e=!!L.state.activeCaipAddress;ts.open&&jt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),ts.open=!1,Ze.reset("Connect"),It.clearLoading(),n?e?Ze.replace("Account"):Ze.push("Connect"):zi.set({open:!1}),_e.resetUri()},setLoading(n,e){e&&ts.loadingNamespaceMap.set(e,n),ts.loading=n,zi.set({loading:n})},clearLoading(){ts.loadingNamespaceMap.clear(),ts.loading=!1,zi.set({loading:!1})},shake(){ts.shake||(ts.shake=!0,setTimeout(()=>{ts.shake=!1},500))}},It=zs(s$),rm={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},e_={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},i$={providers:NU,selectedProvider:null,error:null,purchaseCurrency:rm,paymentCurrency:e_,purchaseCurrencies:[rm],paymentCurrencies:[],quotesLoading:!1},vt=nn(i$),a$={state:vt,subscribe(n){return tr(vt,()=>n(vt))},subscribeKey(n,e){return Ir(vt,n,e)},setSelectedProvider(n){if(n&&n.name==="meld"){const e=L.state.activeChain,t=e===oe.CHAIN.SOLANA?"SOL":"USDC",r=L.getAccountProp("address",e)??"",s=new URL(n.url);s.searchParams.append("publicKey",WL),s.searchParams.append("destinationCurrencyCode",t),s.searchParams.append("walletAddress",r),s.searchParams.append("externalCustomerId",pe.state.projectId),vt.selectedProvider={...n,url:s.toString()}}else vt.selectedProvider=n},setOnrampProviders(n){if(Array.isArray(n)&&n.every(e=>typeof e=="string")){const e=n,t=NU.filter(r=>e.includes(r.name));vt.providers=t}else vt.providers=[]},setPurchaseCurrency(n){vt.purchaseCurrency=n},setPaymentCurrency(n){vt.paymentCurrency=n},setPurchaseAmount(n){t_.state.purchaseAmount=n},setPaymentAmount(n){t_.state.paymentAmount=n},async getAvailableCurrencies(){const n=await Ge.getOnrampOptions();vt.purchaseCurrencies=n.purchaseCurrencies,vt.paymentCurrencies=n.paymentCurrencies,vt.paymentCurrency=n.paymentCurrencies[0]||e_,vt.purchaseCurrency=n.purchaseCurrencies[0]||rm,await je.fetchCurrencyImages(n.paymentCurrencies.map(e=>e.id)),await je.fetchTokenImages(n.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var n,e;vt.quotesLoading=!0;try{const t=await Ge.getOnrampQuote({purchaseCurrency:vt.purchaseCurrency,paymentCurrency:vt.paymentCurrency,amount:((n=vt.paymentAmount)==null?void 0:n.toString())||"0",network:(e=vt.purchaseCurrency)==null?void 0:e.symbol});return vt.quotesLoading=!1,vt.purchaseAmount=Number(t==null?void 0:t.purchaseAmount.amount),t}catch(t){return vt.error=t.message,vt.quotesLoading=!1,null}finally{vt.quotesLoading=!1}},resetState(){vt.selectedProvider=null,vt.error=null,vt.purchaseCurrency=rm,vt.paymentCurrency=e_,vt.purchaseCurrencies=[rm],vt.paymentCurrencies=[],vt.paymentAmount=void 0,vt.purchaseAmount=void 0,vt.quotesLoading=!1}},t_=zs(a$),vI=2147483648,o$={convertEVMChainIdToCoinType(n){if(n>=vI)throw new Error("Invalid chainId");return(vI|n)>>>0}},ti=nn({suggestions:[],loading:!1}),c$={state:ti,subscribe(n){return tr(ti,()=>n(ti))},subscribeKey(n,e){return Ir(ti,n,e)},async resolveName(n){var e,t;try{return await Ge.lookupEnsName(n)}catch(r){const s=r;throw new Error(((t=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:t.description)||"Error resolving name")}},async isNameRegistered(n){try{return await Ge.lookupEnsName(n),!0}catch{return!1}},async getSuggestions(n){try{ti.loading=!0,ti.suggestions=[];const e=await Ge.getEnsNameSuggestions(n);return ti.suggestions=e.suggestions.map(t=>({...t,name:t.name}))||[],ti.suggestions}catch(e){const t=sm.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(t)}finally{ti.loading=!1}},async getNamesForAddress(n){try{if(!L.state.activeCaipNetwork)return[];const t=be.getEnsFromCacheForAddress(n);if(t)return t;const r=await Ge.reverseLookupEnsName({address:n});return be.updateEnsCache({address:n,ens:r,timestamp:Date.now()}),r}catch(e){const t=sm.parseEnsApiError(e,"Error fetching names for address");throw new Error(t)}},async registerName(n){const e=L.state.activeCaipNetwork,t=Ue.state.address,r=ve.getAuthConnector();if(!e)throw new Error("Network not found");if(!t||!r)throw new Error("Address or auth connector not found");ti.loading=!0;try{const s=JSON.stringify({name:n,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Ze.pushTransactionStack({onCancel(){Ze.replace("RegisterAccountName")}});const i=await _e.signMessage(s);ti.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const l=o$.convertEVMChainIdToCoinType(Number(o));await Ge.registerEnsName({coinType:l,address:t,signature:i,message:s}),Ue.setProfileName(n,e.chainNamespace),Ze.replace("RegisterAccountNameSuccess")}catch(s){const i=sm.parseEnsApiError(s,`Error registering name ${n}`);throw Ze.replace("RegisterAccountName"),new Error(i)}finally{ti.loading=!1}},validateName(n){return/^[a-zA-Z0-9-]{4,}$/u.test(n)},parseEnsApiError(n,e){var r,s;const t=n;return((s=(r=t==null?void 0:t.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},sm=zs(c$);var Aw={exports:{}},AI;function l$(){if(AI)return Aw.exports;AI=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(R,D,F){return Function.prototype.apply.call(R,D,F)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(R){return Object.getOwnPropertyNames(R).concat(Object.getOwnPropertySymbols(R))}:t=function(R){return Object.getOwnPropertyNames(R)};function r(k){console&&console.warn&&console.warn(k)}var s=Number.isNaN||function(R){return R!==R};function i(){i.init.call(this)}Aw.exports=i,Aw.exports.once=S,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function l(k){if(typeof k!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof k)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(k){if(typeof k!="number"||k<0||s(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+k+".");o=k}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(R){if(typeof R!="number"||R<0||s(R))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+R+".");return this._maxListeners=R,this};function f(k){return k._maxListeners===void 0?i.defaultMaxListeners:k._maxListeners}i.prototype.getMaxListeners=function(){return f(this)},i.prototype.emit=function(R){for(var D=[],F=1;F<arguments.length;F++)D.push(arguments[F]);var $=R==="error",B=this._events;if(B!==void 0)$=$&&B.error===void 0;else if(!$)return!1;if($){var q;if(D.length>0&&(q=D[0]),q instanceof Error)throw q;var j=new Error("Unhandled error."+(q?" ("+q.message+")":""));throw j.context=q,j}var W=B[R];if(W===void 0)return!1;if(typeof W=="function")e(W,this,D);else for(var ie=W.length,ee=v(W,ie),F=0;F<ie;++F)e(ee[F],this,D);return!0};function h(k,R,D,F){var $,B,q;if(l(D),B=k._events,B===void 0?(B=k._events=Object.create(null),k._eventsCount=0):(B.newListener!==void 0&&(k.emit("newListener",R,D.listener?D.listener:D),B=k._events),q=B[R]),q===void 0)q=B[R]=D,++k._eventsCount;else if(typeof q=="function"?q=B[R]=F?[D,q]:[q,D]:F?q.unshift(D):q.push(D),$=f(k),$>0&&q.length>$&&!q.warned){q.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(R)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=k,j.type=R,j.count=q.length,r(j)}return k}i.prototype.addListener=function(R,D){return h(this,R,D,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(R,D){return h(this,R,D,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(k,R,D){var F={fired:!1,wrapFn:void 0,target:k,type:R,listener:D},$=p.bind(F);return $.listener=D,F.wrapFn=$,$}i.prototype.once=function(R,D){return l(D),this.on(R,g(this,R,D)),this},i.prototype.prependOnceListener=function(R,D){return l(D),this.prependListener(R,g(this,R,D)),this},i.prototype.removeListener=function(R,D){var F,$,B,q,j;if(l(D),$=this._events,$===void 0)return this;if(F=$[R],F===void 0)return this;if(F===D||F.listener===D)--this._eventsCount===0?this._events=Object.create(null):(delete $[R],$.removeListener&&this.emit("removeListener",R,F.listener||D));else if(typeof F!="function"){for(B=-1,q=F.length-1;q>=0;q--)if(F[q]===D||F[q].listener===D){j=F[q].listener,B=q;break}if(B<0)return this;B===0?F.shift():E(F,B),F.length===1&&($[R]=F[0]),$.removeListener!==void 0&&this.emit("removeListener",R,j||D)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(R){var D,F,$;if(F=this._events,F===void 0)return this;if(F.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):F[R]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete F[R]),this;if(arguments.length===0){var B=Object.keys(F),q;for($=0;$<B.length;++$)q=B[$],q!=="removeListener"&&this.removeAllListeners(q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(D=F[R],typeof D=="function")this.removeListener(R,D);else if(D!==void 0)for($=D.length-1;$>=0;$--)this.removeListener(R,D[$]);return this};function y(k,R,D){var F=k._events;if(F===void 0)return[];var $=F[R];return $===void 0?[]:typeof $=="function"?D?[$.listener||$]:[$]:D?A($):v($,$.length)}i.prototype.listeners=function(R){return y(this,R,!0)},i.prototype.rawListeners=function(R){return y(this,R,!1)},i.listenerCount=function(k,R){return typeof k.listenerCount=="function"?k.listenerCount(R):b.call(k,R)},i.prototype.listenerCount=b;function b(k){var R=this._events;if(R!==void 0){var D=R[k];if(typeof D=="function")return 1;if(D!==void 0)return D.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function v(k,R){for(var D=new Array(R),F=0;F<R;++F)D[F]=k[F];return D}function E(k,R){for(;R+1<k.length;R++)k[R]=k[R+1];k.pop()}function A(k){for(var R=new Array(k.length),D=0;D<R.length;++D)R[D]=k[D].listener||k[D];return R}function S(k,R){return new Promise(function(D,F){function $(q){k.removeListener(R,B),F(q)}function B(){typeof k.removeListener=="function"&&k.removeListener("error",$),D([].slice.call(arguments))}T(k,R,B,{once:!0}),R!=="error"&&O(k,$,{once:!0})})}function O(k,R,D){typeof k.on=="function"&&T(k,"error",R,D)}function T(k,R,D,F){if(typeof k.on=="function")F.once?k.once(R,D):k.on(R,D);else if(typeof k.addEventListener=="function")k.addEventListener(R,function $(B){F.once&&k.removeEventListener(R,$),D(B)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof k)}return Aw.exports}var bi=l$();const J2=z2(bi);var xA={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n_=function(n,e){return n_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n_(n,e)};function u$(n,e){n_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var r_=function(){return r_=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},r_.apply(this,arguments)};function f$(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function h$(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var l=n.length-1;l>=0;l--)(o=n[l])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i}function d$(n,e){return function(t,r){e(t,r,n)}}function p$(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function g$(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(p){try{h(r.next(p))}catch(g){o(g)}}function f(p){try{h(r.throw(p))}catch(g){o(g)}}function h(p){p.done?i(p.value):s(p.value).then(l,f)}h((r=r.apply(n,e||[])).next())})}function m$(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(p){return f([h,p])}}function f(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,s=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],s=0}finally{r=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function y$(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}function w$(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function s_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function LU(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return i}function b$(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(LU(arguments[e]));return n}function E$(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),s=0,e=0;e<t;e++)for(var i=arguments[e],o=0,l=i.length;o<l;o++,s++)r[s]=i[o];return r}function Am(n){return this instanceof Am?(this.v=n,this):new Am(n)}function v$(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(y){r[y]&&(s[y]=function(b){return new Promise(function(v,E){i.push([y,b,v,E])>1||l(y,b)})})}function l(y,b){try{f(r[y](b))}catch(v){g(i[0][3],v)}}function f(y){y.value instanceof Am?Promise.resolve(y.value.v).then(h,p):g(i[0][2],y)}function h(y){l("next",y)}function p(y){l("throw",y)}function g(y,b){y(b),i.shift(),i.length&&l(i[0][0],i[0][1])}}function A$(n){var e,t;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=n[s]?function(o){return(t=!t)?{value:Am(n[s](o)),done:s==="return"}:i?i(o):o}:i}}function C$(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof s_=="function"?s_(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(o){return new Promise(function(l,f){o=n[i](o),s(l,f,o.done,o.value)})}}function s(i,o,l,f){Promise.resolve(f).then(function(h){i({value:h,done:l})},o)}}function _$(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function S$(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function N$(n){return n&&n.__esModule?n:{default:n}}function T$(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function O$(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const x$=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return r_},__asyncDelegator:A$,__asyncGenerator:v$,__asyncValues:C$,__await:Am,__awaiter:g$,__classPrivateFieldGet:T$,__classPrivateFieldSet:O$,__createBinding:y$,__decorate:h$,__exportStar:w$,__extends:u$,__generator:m$,__importDefault:N$,__importStar:S$,__makeTemplateObject:_$,__metadata:p$,__param:d$,__read:LU,__rest:f$,__spread:b$,__spreadArrays:E$,__values:s_},Symbol.toStringTag,{value:"Module"})),AE=gU(x$);var IA={},_g={},CI;function I$(){if(CI)return _g;CI=1,Object.defineProperty(_g,"__esModule",{value:!0}),_g.delay=void 0;function n(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return _g.delay=n,_g}var jl={},RA={},zl={},_I;function R$(){return _I||(_I=1,Object.defineProperty(zl,"__esModule",{value:!0}),zl.ONE_THOUSAND=zl.ONE_HUNDRED=void 0,zl.ONE_HUNDRED=100,zl.ONE_THOUSAND=1e3),zl}var PA={},SI;function P$(){return SI||(SI=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(PA)),PA}var NI;function $U(){return NI||(NI=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=AE;e.__exportStar(R$(),n),e.__exportStar(P$(),n)}(RA)),RA}var TI;function D$(){if(TI)return jl;TI=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.fromMiliseconds=jl.toMiliseconds=void 0;const n=$U();function e(r){return r*n.ONE_THOUSAND}jl.toMiliseconds=e;function t(r){return Math.floor(r/n.ONE_THOUSAND)}return jl.fromMiliseconds=t,jl}var OI;function U$(){return OI||(OI=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=AE;e.__exportStar(I$(),n),e.__exportStar(D$(),n)}(IA)),IA}var oh={},xI;function k$(){if(xI)return oh;xI=1,Object.defineProperty(oh,"__esModule",{value:!0}),oh.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const r=this.get(t);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const s=Date.now()-r.started;this.timestamps.set(t,{started:r.started,elapsed:s})}get(t){const r=this.timestamps.get(t);if(typeof r>"u")throw new Error(`No timestamp found for label: ${t}`);return r}elapsed(t){const r=this.get(t);return r.elapsed||Date.now()-r.started}}return oh.Watch=n,oh.default=n,oh}var DA={},Sg={},II;function B$(){if(II)return Sg;II=1,Object.defineProperty(Sg,"__esModule",{value:!0}),Sg.IWatch=void 0;class n{}return Sg.IWatch=n,Sg}var RI;function M$(){return RI||(RI=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),AE.__exportStar(B$(),n)}(DA)),DA}var PI;function L$(){return PI||(PI=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=AE;e.__exportStar(U$(),n),e.__exportStar(k$(),n),e.__exportStar(M$(),n),e.__exportStar($U(),n)}(xA)),xA}var Ce=L$();class hf{}let $$=class extends hf{constructor(e){super()}};const DI=Ce.FIVE_SECONDS,df={pulse:"heartbeat_pulse"};let F$=class FU extends $${constructor(e){super(e),this.events=new bi.EventEmitter,this.interval=DI,this.interval=(e==null?void 0:e.interval)||DI}static async init(e){const t=new FU(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Ce.toMiliseconds(this.interval))}pulse(){this.events.emit(df.pulse)}};const H$=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,j$=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,z$=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function q$(n,e){if(n==="__proto__"||n==="constructor"&&e&&typeof e=="object"&&"prototype"in e){V$(n);return}return e}function V$(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function Cw(n,e={}){if(typeof n!="string")return n;if(n[0]==='"'&&n[n.length-1]==='"'&&n.indexOf("\\")===-1)return n.slice(1,-1);const t=n.trim();if(t.length<=9)switch(t.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!z$.test(n)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(H$.test(n)||j$.test(n)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,q$)}return JSON.parse(n)}catch(r){if(e.strict)throw r;return n}}function G$(n){return!n||typeof n.then!="function"?Promise.resolve(n):n}function Gn(n,...e){try{return G$(n(...e))}catch(t){return Promise.reject(t)}}function K$(n){const e=typeof n;return n===null||e!=="object"&&e!=="function"}function W$(n){const e=Object.getPrototypeOf(n);return!e||e.isPrototypeOf(Object)}function sb(n){if(K$(n))return String(n);if(W$(n)||Array.isArray(n))return JSON.stringify(n);if(typeof n.toJSON=="function")return sb(n.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const i_="base64:";function Y$(n){return typeof n=="string"?n:i_+J$(n)}function Q$(n){return typeof n!="string"||!n.startsWith(i_)?n:Z$(n.slice(i_.length))}function Z$(n){return globalThis.Buffer?Buffer.from(n,"base64"):Uint8Array.from(globalThis.atob(n),e=>e.codePointAt(0))}function J$(n){return globalThis.Buffer?Buffer.from(n).toString("base64"):globalThis.btoa(String.fromCodePoint(...n))}function as(n){var e;return n&&((e=n.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function X$(...n){return as(n.join(":"))}function _w(n){return n=as(n),n?n+":":""}function e7(n,e){if(e===void 0)return!0;let t=0,r=n.indexOf(":");for(;r>-1;)t++,r=n.indexOf(":",r+1);return t<=e}function t7(n,e){return e?n.startsWith(e)&&n[n.length-1]!=="$":n[n.length-1]!=="$"}const n7="memory",r7=()=>{const n=new Map;return{name:n7,getInstance:()=>n,hasItem(e){return n.has(e)},getItem(e){return n.get(e)??null},getItemRaw(e){return n.get(e)??null},setItem(e,t){n.set(e,t)},setItemRaw(e,t){n.set(e,t)},removeItem(e){n.delete(e)},getKeys(){return[...n.keys()]},clear(){n.clear()},dispose(){n.clear()}}};function s7(n={}){const e={mounts:{"":n.driver||r7()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=h=>{for(const p of e.mountpoints)if(h.startsWith(p))return{base:p,relativeKey:h.slice(p.length),driver:e.mounts[p]};return{base:"",relativeKey:h,driver:e.mounts[""]}},r=(h,p)=>e.mountpoints.filter(g=>g.startsWith(h)||p&&h.startsWith(g)).map(g=>({relativeBase:h.length>g.length?h.slice(g.length):void 0,mountpoint:g,driver:e.mounts[g]})),s=(h,p)=>{if(e.watching){p=as(p);for(const g of e.watchListeners)g(h,p)}},i=async()=>{if(!e.watching){e.watching=!0;for(const h in e.mounts)e.unwatch[h]=await UI(e.mounts[h],s,h)}},o=async()=>{if(e.watching){for(const h in e.unwatch)await e.unwatch[h]();e.unwatch={},e.watching=!1}},l=(h,p,g)=>{const y=new Map,b=v=>{let E=y.get(v.base);return E||(E={driver:v.driver,base:v.base,items:[]},y.set(v.base,E)),E};for(const v of h){const E=typeof v=="string",A=as(E?v:v.key),S=E?void 0:v.value,O=E||!v.options?p:{...p,...v.options},T=t(A);b(T).items.push({key:A,value:S,relativeKey:T.relativeKey,options:O})}return Promise.all([...y.values()].map(v=>g(v))).then(v=>v.flat())},f={hasItem(h,p={}){h=as(h);const{relativeKey:g,driver:y}=t(h);return Gn(y.hasItem,g,p)},getItem(h,p={}){h=as(h);const{relativeKey:g,driver:y}=t(h);return Gn(y.getItem,g,p).then(b=>Cw(b))},getItems(h,p={}){return l(h,p,g=>g.driver.getItems?Gn(g.driver.getItems,g.items.map(y=>({key:y.relativeKey,options:y.options})),p).then(y=>y.map(b=>({key:X$(g.base,b.key),value:Cw(b.value)}))):Promise.all(g.items.map(y=>Gn(g.driver.getItem,y.relativeKey,y.options).then(b=>({key:y.key,value:Cw(b)})))))},getItemRaw(h,p={}){h=as(h);const{relativeKey:g,driver:y}=t(h);return y.getItemRaw?Gn(y.getItemRaw,g,p):Gn(y.getItem,g,p).then(b=>Q$(b))},async setItem(h,p,g={}){if(p===void 0)return f.removeItem(h);h=as(h);const{relativeKey:y,driver:b}=t(h);b.setItem&&(await Gn(b.setItem,y,sb(p),g),b.watch||s("update",h))},async setItems(h,p){await l(h,p,async g=>{if(g.driver.setItems)return Gn(g.driver.setItems,g.items.map(y=>({key:y.relativeKey,value:sb(y.value),options:y.options})),p);g.driver.setItem&&await Promise.all(g.items.map(y=>Gn(g.driver.setItem,y.relativeKey,sb(y.value),y.options)))})},async setItemRaw(h,p,g={}){if(p===void 0)return f.removeItem(h,g);h=as(h);const{relativeKey:y,driver:b}=t(h);if(b.setItemRaw)await Gn(b.setItemRaw,y,p,g);else if(b.setItem)await Gn(b.setItem,y,Y$(p),g);else return;b.watch||s("update",h)},async removeItem(h,p={}){typeof p=="boolean"&&(p={removeMeta:p}),h=as(h);const{relativeKey:g,driver:y}=t(h);y.removeItem&&(await Gn(y.removeItem,g,p),(p.removeMeta||p.removeMata)&&await Gn(y.removeItem,g+"$",p),y.watch||s("remove",h))},async getMeta(h,p={}){typeof p=="boolean"&&(p={nativeOnly:p}),h=as(h);const{relativeKey:g,driver:y}=t(h),b=Object.create(null);if(y.getMeta&&Object.assign(b,await Gn(y.getMeta,g,p)),!p.nativeOnly){const v=await Gn(y.getItem,g+"$",p).then(E=>Cw(E));v&&typeof v=="object"&&(typeof v.atime=="string"&&(v.atime=new Date(v.atime)),typeof v.mtime=="string"&&(v.mtime=new Date(v.mtime)),Object.assign(b,v))}return b},setMeta(h,p,g={}){return this.setItem(h+"$",p,g)},removeMeta(h,p={}){return this.removeItem(h+"$",p)},async getKeys(h,p={}){var A;h=_w(h);const g=r(h,!0);let y=[];const b=[];let v=!0;for(const S of g){(A=S.driver.flags)!=null&&A.maxDepth||(v=!1);const O=await Gn(S.driver.getKeys,S.relativeBase,p);for(const T of O){const k=S.mountpoint+as(T);y.some(R=>k.startsWith(R))||b.push(k)}y=[S.mountpoint,...y.filter(T=>!T.startsWith(S.mountpoint))]}const E=p.maxDepth!==void 0&&!v;return b.filter(S=>(!E||e7(S,p.maxDepth))&&t7(S,h))},async clear(h,p={}){h=_w(h),await Promise.all(r(h,!1).map(async g=>{if(g.driver.clear)return Gn(g.driver.clear,g.relativeBase,p);if(g.driver.removeItem){const y=await g.driver.getKeys(g.relativeBase||"",p);return Promise.all(y.map(b=>g.driver.removeItem(b,p)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(h=>kI(h)))},async watch(h){return await i(),e.watchListeners.push(h),async()=>{e.watchListeners=e.watchListeners.filter(p=>p!==h),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(h,p){if(h=_w(h),h&&e.mounts[h])throw new Error(`already mounted at ${h}`);return h&&(e.mountpoints.push(h),e.mountpoints.sort((g,y)=>y.length-g.length)),e.mounts[h]=p,e.watching&&Promise.resolve(UI(p,s,h)).then(g=>{e.unwatch[h]=g}).catch(console.error),f},async unmount(h,p=!0){var g,y;h=_w(h),!(!h||!e.mounts[h])&&(e.watching&&h in e.unwatch&&((y=(g=e.unwatch)[h])==null||y.call(g),delete e.unwatch[h]),p&&await kI(e.mounts[h]),e.mountpoints=e.mountpoints.filter(b=>b!==h),delete e.mounts[h])},getMount(h=""){h=as(h)+":";const p=t(h);return{driver:p.driver,base:p.base}},getMounts(h="",p={}){return h=as(h),r(h,p.parents).map(y=>({driver:y.driver,base:y.mountpoint}))},keys:(h,p={})=>f.getKeys(h,p),get:(h,p={})=>f.getItem(h,p),set:(h,p,g={})=>f.setItem(h,p,g),has:(h,p={})=>f.hasItem(h,p),del:(h,p={})=>f.removeItem(h,p),remove:(h,p={})=>f.removeItem(h,p)};return f}function UI(n,e,t){return n.watch?n.watch((r,s)=>e(r,t+s)):()=>{}}async function kI(n){typeof n.dispose=="function"&&await Gn(n.dispose)}function pf(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}function HU(n,e){let t;const r=()=>{if(t)return t;const s=indexedDB.open(n);return s.onupgradeneeded=()=>s.result.createObjectStore(e),t=pf(s),t.then(i=>{i.onclose=()=>t=void 0},()=>{}),t};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let UA;function By(){return UA||(UA=HU("keyval-store","keyval")),UA}function BI(n,e=By()){return e("readonly",t=>pf(t.get(n)))}function i7(n,e,t=By()){return t("readwrite",r=>(r.put(e,n),pf(r.transaction)))}function a7(n,e=By()){return e("readwrite",t=>(t.delete(n),pf(t.transaction)))}function o7(n=By()){return n("readwrite",e=>(e.clear(),pf(e.transaction)))}function c7(n,e){return n.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},pf(n.transaction)}function l7(n=By()){return n("readonly",e=>{if(e.getAllKeys)return pf(e.getAllKeys());const t=[];return c7(e,r=>t.push(r.key)).then(()=>t)})}const u7=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),f7=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Qu(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return f7(n)}catch{return n}}function Mo(n){return typeof n=="string"?n:u7(n)||""}const h7="idb-keyval";var d7=(n={})=>{const e=n.base&&n.base.length>0?`${n.base}:`:"",t=s=>e+s;let r;return n.dbName&&n.storeName&&(r=HU(n.dbName,n.storeName)),{name:h7,options:n,async hasItem(s){return!(typeof await BI(t(s),r)>"u")},async getItem(s){return await BI(t(s),r)??null},setItem(s,i){return i7(t(s),i,r)},removeItem(s){return a7(t(s),r)},getKeys(){return l7(r)},clear(){return o7(r)}}};const p7="WALLET_CONNECT_V2_INDEXED_DB",g7="keyvaluestorage";let m7=class{constructor(){this.indexedDb=s7({driver:d7({dbName:p7,storeName:g7})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,Mo(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var kA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ib={exports:{}};(function(){let n;function e(){}n=e,n.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},n.prototype.setItem=function(t,r){this[t]=String(r)},n.prototype.removeItem=function(t){delete this[t]},n.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(r){t[r]=void 0,delete t[r]})},n.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof kA<"u"&&kA.localStorage?ib.exports=kA.localStorage:typeof window<"u"&&window.localStorage?ib.exports=window.localStorage:ib.exports=new e})();function y7(n){var e;return[n[0],Qu((e=n[1])!=null?e:"")]}let w7=class{constructor(){this.localStorage=ib.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(y7)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return Qu(t)}async setItem(e,t){this.localStorage.setItem(e,Mo(t))}async removeItem(e){this.localStorage.removeItem(e)}};const b7="wc_storage_version",MI=1,E7=async(n,e,t)=>{const r=b7,s=await e.getItem(r);if(s&&s>=MI){t(e);return}const i=await n.getKeys();if(!i.length){t(e);return}const o=[];for(;i.length;){const l=i.shift();if(!l)continue;const f=l.toLowerCase();if(f.includes("wc@")||f.includes("walletconnect")||f.includes("wc_")||f.includes("wallet_connect")){const h=await n.getItem(l);await e.setItem(l,h),o.push(l)}}await e.setItem(r,MI),t(e),v7(n,o)},v7=async(n,e)=>{e.length&&e.forEach(async t=>{await n.removeItem(t)})};let A7=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new w7;this.storage=e;try{const t=new m7;E7(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var BA,LI;function C7(){if(LI)return BA;LI=1;function n(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}BA=e;function e(t,r,s){var i=s&&s.stringify||n,o=1;if(typeof t=="object"&&t!==null){var l=r.length+o;if(l===1)return t;var f=new Array(l);f[0]=i(t);for(var h=1;h<l;h++)f[h]=i(r[h]);return f.join(" ")}if(typeof t!="string")return t;var p=r.length;if(p===0)return t;for(var g="",y=1-o,b=-1,v=t&&t.length||0,E=0;E<v;){if(t.charCodeAt(E)===37&&E+1<v){switch(b=b>-1?b:0,t.charCodeAt(E+1)){case 100:case 102:if(y>=p||r[y]==null)break;b<E&&(g+=t.slice(b,E)),g+=Number(r[y]),b=E+2,E++;break;case 105:if(y>=p||r[y]==null)break;b<E&&(g+=t.slice(b,E)),g+=Math.floor(Number(r[y])),b=E+2,E++;break;case 79:case 111:case 106:if(y>=p||r[y]===void 0)break;b<E&&(g+=t.slice(b,E));var A=typeof r[y];if(A==="string"){g+="'"+r[y]+"'",b=E+2,E++;break}if(A==="function"){g+=r[y].name||"<anonymous>",b=E+2,E++;break}g+=i(r[y]),b=E+2,E++;break;case 115:if(y>=p)break;b<E&&(g+=t.slice(b,E)),g+=String(r[y]),b=E+2,E++;break;case 37:b<E&&(g+=t.slice(b,E)),g+="%",b=E+2,E++,y--;break}++y}++E}return b===-1?t:(b<v&&(g+=t.slice(b)),g)}return BA}var MA,$I;function _7(){if($I)return MA;$I=1;const n=C7();MA=s;const e=R().console||{},t={mapHttpRequest:v,mapHttpResponse:v,wrapRequestSerializer:E,wrapResponseSerializer:E,wrapErrorSerializer:E,req:v,res:v,err:y};function r(D,F){return Array.isArray(D)?D.filter(function(B){return B!=="!stdSerializers.err"}):D===!0?Object.keys(F):!1}function s(D){D=D||{},D.browser=D.browser||{};const F=D.browser.transmit;if(F&&typeof F.send!="function")throw Error("pino: transmit option must have a send function");const $=D.browser.write||e;D.browser.write&&(D.browser.asObject=!0);const B=D.serializers||{},q=r(D.browser.serialize,B);let j=D.browser.serialize;Array.isArray(D.browser.serialize)&&D.browser.serialize.indexOf("!stdSerializers.err")>-1&&(j=!1);const W=["error","fatal","warn","info","debug","trace"];typeof $=="function"&&($.error=$.fatal=$.warn=$.info=$.debug=$.trace=$),D.enabled===!1&&(D.level="silent");const ie=D.level||"info",ee=Object.create($);ee.log||(ee.log=A),Object.defineProperty(ee,"levelVal",{get:_}),Object.defineProperty(ee,"level",{get:M,set:V});const x={transmit:F,serialize:q,asObject:D.browser.asObject,levels:W,timestamp:b(D)};ee.levels=s.levels,ee.level=ie,ee.setMaxListeners=ee.getMaxListeners=ee.emit=ee.addListener=ee.on=ee.prependListener=ee.once=ee.prependOnceListener=ee.removeListener=ee.removeAllListeners=ee.listeners=ee.listenerCount=ee.eventNames=ee.write=ee.flush=A,ee.serializers=B,ee._serialize=q,ee._stdErrSerialize=j,ee.child=K,F&&(ee._logEvent=g());function _(){return this.level==="silent"?1/0:this.levels.values[this.level]}function M(){return this._level}function V(I){if(I!=="silent"&&!this.levels.values[I])throw Error("unknown level "+I);this._level=I,i(x,ee,"error","log"),i(x,ee,"fatal","error"),i(x,ee,"warn","error"),i(x,ee,"info","log"),i(x,ee,"debug","log"),i(x,ee,"trace","log")}function K(I,G){if(!I)throw new Error("missing bindings for child Pino");G=G||{},q&&I.serializers&&(G.serializers=I.serializers);const X=G.serializers;if(q&&X){var re=Object.assign({},B,X),le=D.browser.serialize===!0?Object.keys(re):q;delete I.serializers,f([I],le,re,this._stdErrSerialize)}function ge(me){this._childLevel=(me._childLevel|0)+1,this.error=h(me,I,"error"),this.fatal=h(me,I,"fatal"),this.warn=h(me,I,"warn"),this.info=h(me,I,"info"),this.debug=h(me,I,"debug"),this.trace=h(me,I,"trace"),re&&(this.serializers=re,this._serialize=le),F&&(this._logEvent=g([].concat(me._logEvent.bindings,I)))}return ge.prototype=this,new ge(this)}return ee}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=t,s.stdTimeFunctions=Object.assign({},{nullTime:S,epochTime:O,unixTime:T,isoTime:k});function i(D,F,$,B){const q=Object.getPrototypeOf(F);F[$]=F.levelVal>F.levels.values[$]?A:q[$]?q[$]:e[$]||e[B]||A,o(D,F,$)}function o(D,F,$){!D.transmit&&F[$]===A||(F[$]=function(B){return function(){const j=D.timestamp(),W=new Array(arguments.length),ie=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var ee=0;ee<W.length;ee++)W[ee]=arguments[ee];if(D.serialize&&!D.asObject&&f(W,this._serialize,this.serializers,this._stdErrSerialize),D.asObject?B.call(ie,l(this,$,W,j)):B.apply(ie,W),D.transmit){const x=D.transmit.level||F.level,_=s.levels.values[x],M=s.levels.values[$];if(M<_)return;p(this,{ts:j,methodLevel:$,methodValue:M,transmitValue:s.levels.values[D.transmit.level||F.level],send:D.transmit.send,val:F.levelVal},W)}}}(F[$]))}function l(D,F,$,B){D._serialize&&f($,D._serialize,D.serializers,D._stdErrSerialize);const q=$.slice();let j=q[0];const W={};B&&(W.time=B),W.level=s.levels.values[F];let ie=(D._childLevel|0)+1;if(ie<1&&(ie=1),j!==null&&typeof j=="object"){for(;ie--&&typeof q[0]=="object";)Object.assign(W,q.shift());j=q.length?n(q.shift(),q):void 0}else typeof j=="string"&&(j=n(q.shift(),q));return j!==void 0&&(W.msg=j),W}function f(D,F,$,B){for(const q in D)if(B&&D[q]instanceof Error)D[q]=s.stdSerializers.err(D[q]);else if(typeof D[q]=="object"&&!Array.isArray(D[q]))for(const j in D[q])F&&F.indexOf(j)>-1&&j in $&&(D[q][j]=$[j](D[q][j]))}function h(D,F,$){return function(){const B=new Array(1+arguments.length);B[0]=F;for(var q=1;q<B.length;q++)B[q]=arguments[q-1];return D[$].apply(this,B)}}function p(D,F,$){const B=F.send,q=F.ts,j=F.methodLevel,W=F.methodValue,ie=F.val,ee=D._logEvent.bindings;f($,D._serialize||Object.keys(D.serializers),D.serializers,D._stdErrSerialize===void 0?!0:D._stdErrSerialize),D._logEvent.ts=q,D._logEvent.messages=$.filter(function(x){return ee.indexOf(x)===-1}),D._logEvent.level.label=j,D._logEvent.level.value=W,B(j,D._logEvent,ie),D._logEvent=g(ee)}function g(D){return{ts:0,messages:[],bindings:D||[],level:{label:"",value:0}}}function y(D){const F={type:D.constructor.name,msg:D.message,stack:D.stack};for(const $ in D)F[$]===void 0&&(F[$]=D[$]);return F}function b(D){return typeof D.timestamp=="function"?D.timestamp:D.timestamp===!1?S:O}function v(){return{}}function E(D){return D}function A(){}function S(){return!1}function O(){return Date.now()}function T(){return Math.round(Date.now()/1e3)}function k(){return new Date(Date.now()).toISOString()}function R(){function D(F){return typeof F<"u"&&F}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return D(self)||D(window)||D(this)||{}}}return MA}var Oh=_7();const My=z2(Oh),S7={level:"info"},Ly="custom_context",X2=1e3*1024;let N7=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},FI=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new N7(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}},jU=class{constructor(e,t=X2){this.level=e??"error",this.levelValue=Oh.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new FI(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===Oh.levels.values.error?console.error(e):t===Oh.levels.values.warn?console.warn(e):t===Oh.levels.values.debug?console.debug(e):t===Oh.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Mo({timestamp:new Date().toISOString(),log:e}));const t=typeof e=="string"?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new FI(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(Mo({extraMetadata:e})),new Blob(t,{type:"application/json"})}},T7=class{constructor(e,t=X2){this.baseChunkLogger=new jU(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}},O7=class{constructor(e,t=X2){this.baseChunkLogger=new jU(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var x7=Object.defineProperty,I7=Object.defineProperties,R7=Object.getOwnPropertyDescriptors,HI=Object.getOwnPropertySymbols,P7=Object.prototype.hasOwnProperty,D7=Object.prototype.propertyIsEnumerable,jI=(n,e,t)=>e in n?x7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xb=(n,e)=>{for(var t in e||(e={}))P7.call(e,t)&&jI(n,t,e[t]);if(HI)for(var t of HI(e))D7.call(e,t)&&jI(n,t,e[t]);return n},Ib=(n,e)=>I7(n,R7(e));function cp(n){return Ib(xb({},n),{level:(n==null?void 0:n.level)||S7.level})}function U7(n,e=Ly){return n[e]||""}function k7(n,e,t=Ly){return n[t]=e,n}function bs(n,e=Ly){let t="";return typeof n.bindings>"u"?t=U7(n,e):t=n.bindings().context||"",t}function B7(n,e,t=Ly){const r=bs(n,t);return r.trim()?`${r}/${e}`:e}function Rr(n,e,t=Ly){const r=B7(n,e,t),s=n.child({context:r});return k7(s,r,t)}function M7(n){var e,t;const r=new T7((e=n.opts)==null?void 0:e.level,n.maxSizeInBytes);return{logger:My(Ib(xb({},n.opts),{level:"trace",browser:Ib(xb({},(t=n.opts)==null?void 0:t.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function L7(n){var e;const t=new O7((e=n.opts)==null?void 0:e.level,n.maxSizeInBytes);return{logger:My(Ib(xb({},n.opts),{level:"trace"}),t),chunkLoggerController:t}}function eS(n){return typeof n.loggerOverride<"u"&&typeof n.loggerOverride!="string"?{logger:n.loggerOverride,chunkLoggerController:null}:typeof window<"u"?M7(n):L7(n)}var $7=Object.defineProperty,F7=(n,e,t)=>e in n?$7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,zI=(n,e,t)=>F7(n,typeof e!="symbol"?e+"":e,t);let H7=class extends hf{constructor(e){super(),this.opts=e,zI(this,"protocol","wc"),zI(this,"version",2)}};var j7=Object.defineProperty,z7=(n,e,t)=>e in n?j7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,q7=(n,e,t)=>z7(n,e+"",t);let V7=class extends hf{constructor(e,t){super(),this.core=e,this.logger=t,q7(this,"records",new Map)}},G7=class{constructor(e,t){this.logger=e,this.core=t}},K7=class extends hf{constructor(e,t){super(),this.relayer=e,this.logger=t}},W7=class extends hf{constructor(e){super()}},Y7=class{constructor(e,t,r,s){this.core=e,this.logger=t,this.name=r}},Q7=class extends hf{constructor(e,t){super(),this.relayer=e,this.logger=t}},Z7=class extends hf{constructor(e,t){super(),this.core=e,this.logger=t}},J7=class{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}},X7=class{constructor(e,t){this.projectId=e,this.logger=t}},eF=class{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}};var tF=Object.defineProperty,nF=(n,e,t)=>e in n?tF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qI=(n,e,t)=>nF(n,typeof e!="symbol"?e+"":e,t);let rF=class{constructor(e){this.opts=e,qI(this,"protocol","wc"),qI(this,"version",2)}},sF=class{constructor(e){this.client=e}};function iF(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function zU(n,...e){if(!iF(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function VI(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function aF(n,e){zU(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const ch=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const LA=n=>new DataView(n.buffer,n.byteOffset,n.byteLength);function oF(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function qU(n){return typeof n=="string"&&(n=oF(n)),zU(n),n}let cF=class{clone(){return this._cloneInto()}};function lF(n){const e=r=>n().update(qU(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function VU(n=32){if(ch&&typeof ch.getRandomValues=="function")return ch.getRandomValues(new Uint8Array(n));if(ch&&typeof ch.randomBytes=="function")return ch.randomBytes(n);throw new Error("crypto.getRandomValues must be defined")}function uF(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),l=Number(t&i),f=r?4:0,h=r?0:4;n.setUint32(e+f,o,r),n.setUint32(e+h,l,r)}let fF=class extends cF{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=LA(this.buffer)}update(e){VI(this);const{view:t,buffer:r,blockLen:s}=this;e=qU(e);const i=e.length;for(let o=0;o<i;){const l=Math.min(s-this.pos,i-o);if(l===s){const f=LA(e);for(;s<=i-o;o+=s)this.process(f,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){VI(this),aF(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let g=o;g<s;g++)t[g]=0;uF(r,s-8,BigInt(this.length*8),i),this.process(r,0);const l=LA(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,p=this.get();if(h>p.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<h;g++)l.setUint32(4*g,p[g],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:i,destroyed:o,pos:l}=this;return e.length=s,e.pos=l,e.finished=i,e.destroyed=o,s%t&&e.buffer.set(r),e}};const Sw=BigInt(2**32-1),a_=BigInt(32);function GU(n,e=!1){return e?{h:Number(n&Sw),l:Number(n>>a_&Sw)}:{h:Number(n>>a_&Sw)|0,l:Number(n&Sw)|0}}function hF(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:i,l:o}=GU(n[s],e);[t[s],r[s]]=[i,o]}return[t,r]}const dF=(n,e)=>BigInt(n>>>0)<<a_|BigInt(e>>>0),pF=(n,e,t)=>n>>>t,gF=(n,e,t)=>n<<32-t|e>>>t,mF=(n,e,t)=>n>>>t|e<<32-t,yF=(n,e,t)=>n<<32-t|e>>>t,wF=(n,e,t)=>n<<64-t|e>>>t-32,bF=(n,e,t)=>n>>>t-32|e<<64-t,EF=(n,e)=>e,vF=(n,e)=>n,AF=(n,e,t)=>n<<t|e>>>32-t,CF=(n,e,t)=>e<<t|n>>>32-t,_F=(n,e,t)=>e<<t-32|n>>>64-t,SF=(n,e,t)=>n<<t-32|e>>>64-t;function NF(n,e,t,r){const s=(e>>>0)+(r>>>0);return{h:n+t+(s/2**32|0)|0,l:s|0}}const TF=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),OF=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,xF=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),IF=(n,e,t,r,s)=>e+t+r+s+(n/2**32|0)|0,RF=(n,e,t,r,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),PF=(n,e,t,r,s,i)=>e+t+r+s+i+(n/2**32|0)|0,at={fromBig:GU,split:hF,toBig:dF,shrSH:pF,shrSL:gF,rotrSH:mF,rotrSL:yF,rotrBH:wF,rotrBL:bF,rotr32H:EF,rotr32L:vF,rotlSH:AF,rotlSL:CF,rotlBH:_F,rotlBL:SF,add:NF,add3L:TF,add3H:OF,add4L:xF,add4H:IF,add5H:PF,add5L:RF},[DF,UF]=at.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Ec=new Uint32Array(80),vc=new Uint32Array(80);let kF=class extends fF{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:s,Ch:i,Cl:o,Dh:l,Dl:f,Eh:h,El:p,Fh:g,Fl:y,Gh:b,Gl:v,Hh:E,Hl:A}=this;return[e,t,r,s,i,o,l,f,h,p,g,y,b,v,E,A]}set(e,t,r,s,i,o,l,f,h,p,g,y,b,v,E,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=l|0,this.Dl=f|0,this.Eh=h|0,this.El=p|0,this.Fh=g|0,this.Fl=y|0,this.Gh=b|0,this.Gl=v|0,this.Hh=E|0,this.Hl=A|0}process(e,t){for(let T=0;T<16;T++,t+=4)Ec[T]=e.getUint32(t),vc[T]=e.getUint32(t+=4);for(let T=16;T<80;T++){const k=Ec[T-15]|0,R=vc[T-15]|0,D=at.rotrSH(k,R,1)^at.rotrSH(k,R,8)^at.shrSH(k,R,7),F=at.rotrSL(k,R,1)^at.rotrSL(k,R,8)^at.shrSL(k,R,7),$=Ec[T-2]|0,B=vc[T-2]|0,q=at.rotrSH($,B,19)^at.rotrBH($,B,61)^at.shrSH($,B,6),j=at.rotrSL($,B,19)^at.rotrBL($,B,61)^at.shrSL($,B,6),W=at.add4L(F,j,vc[T-7],vc[T-16]),ie=at.add4H(W,D,q,Ec[T-7],Ec[T-16]);Ec[T]=ie|0,vc[T]=W|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:l,Cl:f,Dh:h,Dl:p,Eh:g,El:y,Fh:b,Fl:v,Gh:E,Gl:A,Hh:S,Hl:O}=this;for(let T=0;T<80;T++){const k=at.rotrSH(g,y,14)^at.rotrSH(g,y,18)^at.rotrBH(g,y,41),R=at.rotrSL(g,y,14)^at.rotrSL(g,y,18)^at.rotrBL(g,y,41),D=g&b^~g&E,F=y&v^~y&A,$=at.add5L(O,R,F,UF[T],vc[T]),B=at.add5H($,S,k,D,DF[T],Ec[T]),q=$|0,j=at.rotrSH(r,s,28)^at.rotrBH(r,s,34)^at.rotrBH(r,s,39),W=at.rotrSL(r,s,28)^at.rotrBL(r,s,34)^at.rotrBL(r,s,39),ie=r&i^r&l^i&l,ee=s&o^s&f^o&f;S=E|0,O=A|0,E=b|0,A=v|0,b=g|0,v=y|0,{h:g,l:y}=at.add(h|0,p|0,B|0,q|0),h=l|0,p=f|0,l=i|0,f=o|0,i=r|0,o=s|0;const x=at.add3L(q,W,ee);r=at.add3H(x,B,j,ie),s=x|0}({h:r,l:s}=at.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=at.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:l,l:f}=at.add(this.Ch|0,this.Cl|0,l|0,f|0),{h,l:p}=at.add(this.Dh|0,this.Dl|0,h|0,p|0),{h:g,l:y}=at.add(this.Eh|0,this.El|0,g|0,y|0),{h:b,l:v}=at.add(this.Fh|0,this.Fl|0,b|0,v|0),{h:E,l:A}=at.add(this.Gh|0,this.Gl|0,E|0,A|0),{h:S,l:O}=at.add(this.Hh|0,this.Hl|0,S|0,O|0),this.set(r,s,i,o,l,f,h,p,g,y,b,v,E,A,S,O)}roundClean(){Ec.fill(0),vc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const BF=lF(()=>new kF);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tS=BigInt(0),KU=BigInt(1),MF=BigInt(2);function nS(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function rS(n){if(!nS(n))throw new Error("Uint8Array expected")}function $A(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}const LF=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function sS(n){rS(n);let e="";for(let t=0;t<n.length;t++)e+=LF[n[t]];return e}function WU(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?tS:BigInt("0x"+n)}const so={_0:48,_9:57,A:65,F:70,a:97,f:102};function GI(n){if(n>=so._0&&n<=so._9)return n-so._0;if(n>=so.A&&n<=so.F)return n-(so.A-10);if(n>=so.a&&n<=so.f)return n-(so.a-10)}function YU(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=GI(n.charCodeAt(i)),l=GI(n.charCodeAt(i+1));if(o===void 0||l===void 0){const f=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+i)}r[s]=o*16+l}return r}function $F(n){return WU(sS(n))}function ab(n){return rS(n),WU(sS(Uint8Array.from(n).reverse()))}function QU(n,e){return YU(n.toString(16).padStart(e*2,"0"))}function o_(n,e){return QU(n,e).reverse()}function io(n,e,t){let r;if(typeof e=="string")try{r=YU(e)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(nS(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof t=="number"&&s!==t)throw new Error(n+" of length "+t+" expected, got "+s);return r}function KI(...n){let e=0;for(let r=0;r<n.length;r++){const s=n[r];rS(s),e+=s.length}const t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){const i=n[r];t.set(i,s),s+=i.length}return t}const FA=n=>typeof n=="bigint"&&tS<=n;function FF(n,e,t){return FA(n)&&FA(e)&&FA(t)&&e<=n&&n<t}function Ng(n,e,t,r){if(!FF(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function HF(n){let e;for(e=0;n>tS;n>>=KU,e+=1);return e}const jF=n=>(MF<<BigInt(n-1))-KU,zF={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||nS(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function iS(n,e,t={}){const r=(s,i,o)=>{const l=zF[i];if(typeof l!="function")throw new Error("invalid validator function");const f=n[s];if(!(o&&f===void 0)&&!l(f,n))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+f)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(t))r(s,i,!0);return n}function WI(n){const e=new WeakMap;return(t,...r)=>{const s=e.get(t);if(s!==void 0)return s;const i=n(t,...r);return e.set(t,i),i}}const Xn=BigInt(0),An=BigInt(1),tu=BigInt(2),qF=BigInt(3),c_=BigInt(4),YI=BigInt(5),QI=BigInt(8);function Bn(n,e){const t=n%e;return t>=Xn?t:e+t}function VF(n,e,t){if(e<Xn)throw new Error("invalid exponent, negatives unsupported");if(t<=Xn)throw new Error("invalid modulus");if(t===An)return Xn;let r=An;for(;e>Xn;)e&An&&(r=r*n%t),n=n*n%t,e>>=An;return r}function aa(n,e,t){let r=n;for(;e-- >Xn;)r*=r,r%=t;return r}function ZI(n,e){if(n===Xn)throw new Error("invert: expected non-zero number");if(e<=Xn)throw new Error("invert: expected positive modulus, got "+e);let t=Bn(n,e),r=e,s=Xn,i=An;for(;t!==Xn;){const o=r/t,l=r%t,f=s-i*o;r=t,t=l,s=i,i=f}if(r!==An)throw new Error("invert: does not exist");return Bn(s,e)}function GF(n){const e=(n-An)/tu;let t,r,s;for(t=n-An,r=0;t%tu===Xn;t/=tu,r++);for(s=tu;s<n&&VF(s,e,n)!==n-An;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(n+An)/c_;return function(l,f){const h=l.pow(f,o);if(!l.eql(l.sqr(h),f))throw new Error("Cannot find square root");return h}}const i=(t+An)/tu;return function(o,l){if(o.pow(l,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let f=r,h=o.pow(o.mul(o.ONE,s),t),p=o.pow(l,i),g=o.pow(l,t);for(;!o.eql(g,o.ONE);){if(o.eql(g,o.ZERO))return o.ZERO;let y=1;for(let v=o.sqr(g);y<f&&!o.eql(v,o.ONE);y++)v=o.sqr(v);const b=o.pow(h,An<<BigInt(f-y-1));h=o.sqr(b),p=o.mul(p,b),g=o.mul(g,h),f=y}return p}}function KF(n){if(n%c_===qF){const e=(n+An)/c_;return function(t,r){const s=t.pow(r,e);if(!t.eql(t.sqr(s),r))throw new Error("Cannot find square root");return s}}if(n%QI===YI){const e=(n-YI)/QI;return function(t,r){const s=t.mul(r,tu),i=t.pow(s,e),o=t.mul(r,i),l=t.mul(t.mul(o,tu),i),f=t.mul(o,t.sub(l,t.ONE));if(!t.eql(t.sqr(f),r))throw new Error("Cannot find square root");return f}}return GF(n)}const WF=(n,e)=>(Bn(n,e)&An)===An,YF=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function QF(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=YF.reduce((r,s)=>(r[s]="function",r),e);return iS(n,t)}function ZF(n,e,t){if(t<Xn)throw new Error("invalid exponent, negatives unsupported");if(t===Xn)return n.ONE;if(t===An)return e;let r=n.ONE,s=e;for(;t>Xn;)t&An&&(r=n.mul(r,s)),s=n.sqr(s),t>>=An;return r}function JF(n,e){const t=new Array(e.length),r=e.reduce((i,o,l)=>n.is0(o)?i:(t[l]=i,n.mul(i,o)),n.ONE),s=n.inv(r);return e.reduceRight((i,o,l)=>n.is0(o)?i:(t[l]=n.mul(i,t[l]),n.mul(i,o)),s),t}function ZU(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function JU(n,e,t=!1,r={}){if(n<=Xn)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:s,nByteLength:i}=ZU(n,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const l=Object.freeze({ORDER:n,isLE:t,BITS:s,BYTES:i,MASK:jF(s),ZERO:Xn,ONE:An,create:f=>Bn(f,n),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return Xn<=f&&f<n},is0:f=>f===Xn,isOdd:f=>(f&An)===An,neg:f=>Bn(-f,n),eql:(f,h)=>f===h,sqr:f=>Bn(f*f,n),add:(f,h)=>Bn(f+h,n),sub:(f,h)=>Bn(f-h,n),mul:(f,h)=>Bn(f*h,n),pow:(f,h)=>ZF(l,f,h),div:(f,h)=>Bn(f*ZI(h,n),n),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>ZI(f,n),sqrt:r.sqrt||(f=>(o||(o=KF(n)),o(l,f))),invertBatch:f=>JF(l,f),cmov:(f,h,p)=>p?h:f,toBytes:f=>t?o_(f,i):QU(f,i),fromBytes:f=>{if(f.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+f.length);return t?ab(f):$F(f)}});return Object.freeze(l)}const JI=BigInt(0),Nw=BigInt(1);function HA(n,e){const t=e.negate();return n?t:e}function XU(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function jA(n,e){XU(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1);return{windows:t,windowSize:r}}function XF(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function eH(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const zA=new WeakMap,e8=new WeakMap;function qA(n){return e8.get(n)||1}function tH(n,e){return{constTimeNegate:HA,hasPrecomputes(t){return qA(t)!==1},unsafeLadder(t,r,s=n.ZERO){let i=t;for(;r>JI;)r&Nw&&(s=s.add(i)),i=i.double(),r>>=Nw;return s},precomputeWindow(t,r){const{windows:s,windowSize:i}=jA(r,e),o=[];let l=t,f=l;for(let h=0;h<s;h++){f=l,o.push(f);for(let p=1;p<i;p++)f=f.add(l),o.push(f);l=f.double()}return o},wNAF(t,r,s){const{windows:i,windowSize:o}=jA(t,e);let l=n.ZERO,f=n.BASE;const h=BigInt(2**t-1),p=2**t,g=BigInt(t);for(let y=0;y<i;y++){const b=y*o;let v=Number(s&h);s>>=g,v>o&&(v-=p,s+=Nw);const E=b,A=b+Math.abs(v)-1,S=y%2!==0,O=v<0;v===0?f=f.add(HA(S,r[E])):l=l.add(HA(O,r[A]))}return{p:l,f}},wNAFUnsafe(t,r,s,i=n.ZERO){const{windows:o,windowSize:l}=jA(t,e),f=BigInt(2**t-1),h=2**t,p=BigInt(t);for(let g=0;g<o;g++){const y=g*l;if(s===JI)break;let b=Number(s&f);if(s>>=p,b>l&&(b-=h,s+=Nw),b===0)continue;let v=r[y+Math.abs(b)-1];b<0&&(v=v.negate()),i=i.add(v)}return i},getPrecomputes(t,r,s){let i=zA.get(r);return i||(i=this.precomputeWindow(r,t),t!==1&&zA.set(r,s(i))),i},wNAFCached(t,r,s){const i=qA(t);return this.wNAF(i,this.getPrecomputes(i,t,s),r)},wNAFCachedUnsafe(t,r,s,i){const o=qA(t);return o===1?this.unsafeLadder(t,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,s),r,i)},setWindowSize(t,r){XU(r,e),e8.set(t,r),zA.delete(t)}}}function nH(n,e,t,r){if(XF(t,n),eH(r,e),t.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=n.ZERO,i=HF(BigInt(t.length)),o=i>12?i-3:i>4?i-2:i?2:1,l=(1<<o)-1,f=new Array(l+1).fill(s),h=Math.floor((e.BITS-1)/o)*o;let p=s;for(let g=h;g>=0;g-=o){f.fill(s);for(let b=0;b<r.length;b++){const v=r[b],E=Number(v>>BigInt(g)&BigInt(l));f[E]=f[E].add(t[b])}let y=s;for(let b=f.length-1,v=s;b>0;b--)v=v.add(f[b]),y=y.add(v);if(p=p.add(y),g!==0)for(let b=0;b<o;b++)p=p.double()}return p}function rH(n){return QF(n.Fp),iS(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ZU(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}const Si=BigInt(0),ns=BigInt(1),Tw=BigInt(2),sH=BigInt(8),iH={zip215:!0};function aH(n){const e=rH(n);return iS(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function oH(n){const e=aH(n),{Fp:t,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:l,h:f}=e,h=Tw<<BigInt(l*8)-ns,p=t.create,g=JU(e.n,e.nBitLength),y=e.uvRatio||((x,_)=>{try{return{isValid:!0,value:t.sqrt(x*t.inv(_))}}catch{return{isValid:!1,value:Si}}}),b=e.adjustScalarBytes||(x=>x),v=e.domain||((x,_,M)=>{if($A("phflag",M),_.length||M)throw new Error("Contexts/pre-hash are not supported");return x});function E(x,_){Ng("coordinate "+x,_,Si,h)}function A(x){if(!(x instanceof T))throw new Error("ExtendedPoint expected")}const S=WI((x,_)=>{const{ex:M,ey:V,ez:K}=x,I=x.is0();_==null&&(_=I?sH:t.inv(K));const G=p(M*_),X=p(V*_),re=p(K*_);if(I)return{x:Si,y:ns};if(re!==ns)throw new Error("invZ was invalid");return{x:G,y:X}}),O=WI(x=>{const{a:_,d:M}=e;if(x.is0())throw new Error("bad point: ZERO");const{ex:V,ey:K,ez:I,et:G}=x,X=p(V*V),re=p(K*K),le=p(I*I),ge=p(le*le),me=p(X*_),ze=p(le*p(me+re)),$e=p(ge+p(M*p(X*re)));if(ze!==$e)throw new Error("bad point: equation left != right (1)");const qe=p(V*K),Ct=p(I*G);if(qe!==Ct)throw new Error("bad point: equation left != right (2)");return!0});class T{constructor(_,M,V,K){this.ex=_,this.ey=M,this.ez=V,this.et=K,E("x",_),E("y",M),E("z",V),E("t",K),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(_){if(_ instanceof T)throw new Error("extended point not allowed");const{x:M,y:V}=_||{};return E("x",M),E("y",V),new T(M,V,ns,p(M*V))}static normalizeZ(_){const M=t.invertBatch(_.map(V=>V.ez));return _.map((V,K)=>V.toAffine(M[K])).map(T.fromAffine)}static msm(_,M){return nH(T,g,_,M)}_setWindowSize(_){D.setWindowSize(this,_)}assertValidity(){O(this)}equals(_){A(_);const{ex:M,ey:V,ez:K}=this,{ex:I,ey:G,ez:X}=_,re=p(M*X),le=p(I*K),ge=p(V*X),me=p(G*K);return re===le&&ge===me}is0(){return this.equals(T.ZERO)}negate(){return new T(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){const{a:_}=e,{ex:M,ey:V,ez:K}=this,I=p(M*M),G=p(V*V),X=p(Tw*p(K*K)),re=p(_*I),le=M+V,ge=p(p(le*le)-I-G),me=re+G,ze=me-X,$e=re-G,qe=p(ge*ze),Ct=p(me*$e),rn=p(ge*$e),$n=p(ze*me);return new T(qe,Ct,$n,rn)}add(_){A(_);const{a:M,d:V}=e,{ex:K,ey:I,ez:G,et:X}=this,{ex:re,ey:le,ez:ge,et:me}=_;if(M===BigInt(-1)){const wp=p((I-K)*(le+re)),bp=p((I+K)*(le-re)),Ko=p(bp-wp);if(Ko===Si)return this.double();const r0=p(G*Tw*me),Ep=p(X*Tw*ge),s0=Ep+r0,i0=bp+wp,Wo=Ep-r0,Pr=p(s0*Ko),Xi=p(i0*Wo),Dr=p(s0*Wo),iv=p(Ko*i0);return new T(Pr,Xi,iv,Dr)}const ze=p(K*re),$e=p(I*le),qe=p(X*V*me),Ct=p(G*ge),rn=p((K+I)*(re+le)-ze-$e),$n=Ct-qe,_n=Ct+qe,nr=p($e-M*ze),Go=p(rn*$n),bf=p(_n*nr),Vs=p(rn*nr),sv=p($n*_n);return new T(Go,bf,sv,Vs)}subtract(_){return this.add(_.negate())}wNAF(_){return D.wNAFCached(this,_,T.normalizeZ)}multiply(_){const M=_;Ng("scalar",M,ns,r);const{p:V,f:K}=this.wNAF(M);return T.normalizeZ([V,K])[0]}multiplyUnsafe(_,M=T.ZERO){const V=_;return Ng("scalar",V,Si,r),V===Si?R:this.is0()||V===ns?this:D.wNAFCachedUnsafe(this,V,T.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return D.unsafeLadder(this,r).is0()}toAffine(_){return S(this,_)}clearCofactor(){const{h:_}=e;return _===ns?this:this.multiplyUnsafe(_)}static fromHex(_,M=!1){const{d:V,a:K}=e,I=t.BYTES;_=io("pointHex",_,I),$A("zip215",M);const G=_.slice(),X=_[I-1];G[I-1]=X&-129;const re=ab(G),le=M?h:t.ORDER;Ng("pointHex.y",re,Si,le);const ge=p(re*re),me=p(ge-ns),ze=p(V*ge-K);let{isValid:$e,value:qe}=y(me,ze);if(!$e)throw new Error("Point.fromHex: invalid y coordinate");const Ct=(qe&ns)===ns,rn=(X&128)!==0;if(!M&&qe===Si&&rn)throw new Error("Point.fromHex: x=0 and x_0=1");return rn!==Ct&&(qe=p(-qe)),T.fromAffine({x:qe,y:re})}static fromPrivateKey(_){return B(_).point}toRawBytes(){const{x:_,y:M}=this.toAffine(),V=o_(M,t.BYTES);return V[V.length-1]|=_&ns?128:0,V}toHex(){return sS(this.toRawBytes())}}T.BASE=new T(e.Gx,e.Gy,ns,p(e.Gx*e.Gy)),T.ZERO=new T(Si,ns,ns,Si);const{BASE:k,ZERO:R}=T,D=tH(T,l*8);function F(x){return Bn(x,r)}function $(x){return F(ab(x))}function B(x){const _=t.BYTES;x=io("private key",x,_);const M=io("hashed private key",i(x),2*_),V=b(M.slice(0,_)),K=M.slice(_,2*_),I=$(V),G=k.multiply(I),X=G.toRawBytes();return{head:V,prefix:K,scalar:I,point:G,pointBytes:X}}function q(x){return B(x).pointBytes}function j(x=new Uint8Array,..._){const M=KI(..._);return $(i(v(M,io("context",x),!!s)))}function W(x,_,M={}){x=io("message",x),s&&(x=s(x));const{prefix:V,scalar:K,pointBytes:I}=B(_),G=j(M.context,V,x),X=k.multiply(G).toRawBytes(),re=j(M.context,X,I,x),le=F(G+re*K);Ng("signature.s",le,Si,r);const ge=KI(X,o_(le,t.BYTES));return io("result",ge,t.BYTES*2)}const ie=iH;function ee(x,_,M,V=ie){const{context:K,zip215:I}=V,G=t.BYTES;x=io("signature",x,2*G),_=io("message",_),M=io("publicKey",M,G),I!==void 0&&$A("zip215",I),s&&(_=s(_));const X=ab(x.slice(G,2*G));let re,le,ge;try{re=T.fromHex(M,I),le=T.fromHex(x.slice(0,G),I),ge=k.multiplyUnsafe(X)}catch{return!1}if(!I&&re.isSmallOrder())return!1;const me=j(K,le.toRawBytes(),re.toRawBytes(),_);return le.add(re.multiplyUnsafe(me)).subtract(ge).clearCofactor().equals(T.ZERO)}return k._setWindowSize(8),{CURVE:e,getPublicKey:q,sign:W,verify:ee,ExtendedPoint:T,utils:{getExtendedPublicKey:B,randomPrivateKey:()=>o(t.BYTES),precompute(x=8,_=T.BASE){return _._setWindowSize(x),_.multiply(BigInt(3)),_}}}}BigInt(0),BigInt(1);const aS=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),XI=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const cH=BigInt(1),eR=BigInt(2);BigInt(3);const lH=BigInt(5),uH=BigInt(8);function fH(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),s=BigInt(80),i=aS,o=n*n%i*n%i,l=aa(o,eR,i)*o%i,f=aa(l,cH,i)*n%i,h=aa(f,lH,i)*f%i,p=aa(h,e,i)*h%i,g=aa(p,t,i)*p%i,y=aa(g,r,i)*g%i,b=aa(y,s,i)*y%i,v=aa(b,s,i)*y%i,E=aa(v,e,i)*h%i;return{pow_p_5_8:aa(E,eR,i)*n%i,b2:o}}function hH(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function dH(n,e){const t=aS,r=Bn(e*e*e,t),s=Bn(r*r*e,t),i=fH(n*s).pow_p_5_8;let o=Bn(n*r*i,t);const l=Bn(e*o*o,t),f=o,h=Bn(o*XI,t),p=l===n,g=l===Bn(-n,t),y=l===Bn(-n*XI,t);return p&&(o=f),(g||y)&&(o=h),WF(o,t)&&(o=Bn(-o,t)),{isValid:p||g,value:o}}const pH=JU(aS,void 0,!0),gH={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:pH,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:uH,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:BF,randomBytes:VU,adjustScalarBytes:hH,uvRatio:dH},t8=oH(gH),mH="EdDSA",yH="JWT",Rb=".",CE="base64url",n8="utf8",r8="utf8",wH=":",bH="did",EH="key",tR="base58btc",vH="z",AH="K36",CH=32;function oS(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function s8(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?oS(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function i8(n,e){e||(e=n.reduce((s,i)=>s+i.length,0));const t=s8(e);let r=0;for(const s of n)t.set(s,r),r+=s.length;return oS(t)}function _H(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var s=0;s<n.length;s++){var i=n.charAt(s),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=s}var l=n.length,f=n.charAt(0),h=Math.log(l)/Math.log(256),p=Math.log(256)/Math.log(l);function g(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var E=0,A=0,S=0,O=v.length;S!==O&&v[S]===0;)S++,E++;for(var T=(O-S)*p+1>>>0,k=new Uint8Array(T);S!==O;){for(var R=v[S],D=0,F=T-1;(R!==0||D<A)&&F!==-1;F--,D++)R+=256*k[F]>>>0,k[F]=R%l>>>0,R=R/l>>>0;if(R!==0)throw new Error("Non-zero carry");A=D,S++}for(var $=T-A;$!==T&&k[$]===0;)$++;for(var B=f.repeat(E);$<T;++$)B+=n.charAt(k[$]);return B}function y(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var E=0;if(v[E]!==" "){for(var A=0,S=0;v[E]===f;)A++,E++;for(var O=(v.length-E)*h+1>>>0,T=new Uint8Array(O);v[E];){var k=t[v.charCodeAt(E)];if(k===255)return;for(var R=0,D=O-1;(k!==0||R<S)&&D!==-1;D--,R++)k+=l*T[D]>>>0,T[D]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");S=R,E++}if(v[E]!==" "){for(var F=O-S;F!==O&&T[F]===0;)F++;for(var $=new Uint8Array(A+(O-F)),B=A;F!==O;)$[B++]=T[F++];return $}}}function b(v){var E=y(v);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:y,decode:b}}var SH=_H,NH=SH;const a8=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},TH=n=>new TextEncoder().encode(n),OH=n=>new TextDecoder().decode(n);let xH=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},IH=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return o8(this,e)}},RH=class{constructor(e){this.decoders=e}or(e){return o8(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const o8=(n,e)=>new RH({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});let PH=class{constructor(e,t,r,s){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=s,this.encoder=new xH(e,t,r),this.decoder=new IH(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const _E=({name:n,prefix:e,encode:t,decode:r})=>new PH(n,e,t,r),$y=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:s}=NH(t,e);return _E({prefix:n,name:e,encode:r,decode:i=>a8(s(i))})},DH=(n,e,t,r)=>{const s={};for(let p=0;p<e.length;++p)s[e[p]]=p;let i=n.length;for(;n[i-1]==="=";)--i;const o=new Uint8Array(i*t/8|0);let l=0,f=0,h=0;for(let p=0;p<i;++p){const g=s[n[p]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);f=f<<t|g,l+=t,l>=8&&(l-=8,o[h++]=255&f>>l)}if(l>=t||255&f<<8-l)throw new SyntaxError("Unexpected end of data");return o},UH=(n,e,t)=>{const r=e[e.length-1]==="=",s=(1<<t)-1;let i="",o=0,l=0;for(let f=0;f<n.length;++f)for(l=l<<8|n[f],o+=8;o>t;)o-=t,i+=e[s&l>>o];if(o&&(i+=e[s&l<<t-o]),r)for(;i.length*t&7;)i+="=";return i},gr=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>_E({prefix:e,name:n,encode(s){return UH(s,r,t)},decode(s){return DH(s,r,t,n)}}),kH=_E({prefix:"\0",name:"identity",encode:n=>OH(n),decode:n=>TH(n)});var BH=Object.freeze({__proto__:null,identity:kH});const MH=gr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var LH=Object.freeze({__proto__:null,base2:MH});const $H=gr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var FH=Object.freeze({__proto__:null,base8:$H});const HH=$y({prefix:"9",name:"base10",alphabet:"0123456789"});var jH=Object.freeze({__proto__:null,base10:HH});const zH=gr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),qH=gr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var VH=Object.freeze({__proto__:null,base16:zH,base16upper:qH});const GH=gr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),KH=gr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),WH=gr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),YH=gr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),QH=gr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ZH=gr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),JH=gr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),XH=gr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ej=gr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var tj=Object.freeze({__proto__:null,base32:GH,base32upper:KH,base32pad:WH,base32padupper:YH,base32hex:QH,base32hexupper:ZH,base32hexpad:JH,base32hexpadupper:XH,base32z:ej});const nj=$y({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rj=$y({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var sj=Object.freeze({__proto__:null,base36:nj,base36upper:rj});const ij=$y({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),aj=$y({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var oj=Object.freeze({__proto__:null,base58btc:ij,base58flickr:aj});const cj=gr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),lj=gr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),uj=gr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),fj=gr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var hj=Object.freeze({__proto__:null,base64:cj,base64pad:lj,base64url:uj,base64urlpad:fj});const c8=Array.from(""),dj=c8.reduce((n,e,t)=>(n[t]=e,n),[]),pj=c8.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function gj(n){return n.reduce((e,t)=>(e+=dj[t],e),"")}function mj(n){const e=[];for(const t of n){const r=pj[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const yj=_E({prefix:"",name:"base256emoji",encode:gj,decode:mj});var wj=Object.freeze({__proto__:null,base256emoji:yj}),bj=l8,nR=128,Ej=-128,vj=Math.pow(2,31);function l8(n,e,t){e=e||[],t=t||0;for(var r=t;n>=vj;)e[t++]=n&255|nR,n/=128;for(;n&Ej;)e[t++]=n&255|nR,n>>>=7;return e[t]=n|0,l8.bytes=t-r+1,e}var Aj=l_,Cj=128,rR=127;function l_(n,r){var t=0,r=r||0,s=0,i=r,o,l=n.length;do{if(i>=l)throw l_.bytes=0,new RangeError("Could not decode varint");o=n[i++],t+=s<28?(o&rR)<<s:(o&rR)*Math.pow(2,s),s+=7}while(o>=Cj);return l_.bytes=i-r,t}var _j=Math.pow(2,7),Sj=Math.pow(2,14),Nj=Math.pow(2,21),Tj=Math.pow(2,28),Oj=Math.pow(2,35),xj=Math.pow(2,42),Ij=Math.pow(2,49),Rj=Math.pow(2,56),Pj=Math.pow(2,63),Dj=function(n){return n<_j?1:n<Sj?2:n<Nj?3:n<Tj?4:n<Oj?5:n<xj?6:n<Ij?7:n<Rj?8:n<Pj?9:10},Uj={encode:bj,decode:Aj,encodingLength:Dj},u8=Uj;const sR=(n,e,t=0)=>(u8.encode(n,e,t),e),iR=n=>u8.encodingLength(n),u_=(n,e)=>{const t=e.byteLength,r=iR(n),s=r+iR(t),i=new Uint8Array(s+t);return sR(n,i,0),sR(t,i,r),i.set(e,s),new kj(n,t,e,i)};let kj=class{constructor(e,t,r,s){this.code=e,this.size=t,this.digest=r,this.bytes=s}};const f8=({name:n,code:e,encode:t})=>new Bj(n,e,t);let Bj=class{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?u_(this.code,t):t.then(r=>u_(this.code,r))}else throw Error("Unknown type, must be binary type")}};const h8=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),Mj=f8({name:"sha2-256",code:18,encode:h8("SHA-256")}),Lj=f8({name:"sha2-512",code:19,encode:h8("SHA-512")});var $j=Object.freeze({__proto__:null,sha256:Mj,sha512:Lj});const d8=0,Fj="identity",p8=a8,Hj=n=>u_(d8,p8(n)),jj={code:d8,name:Fj,encode:p8,digest:Hj};var zj=Object.freeze({__proto__:null,identity:jj});new TextEncoder,new TextDecoder;const aR={...BH,...LH,...FH,...jH,...VH,...tj,...sj,...oj,...hj,...wj};({...$j,...zj});function g8(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const oR=g8("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),VA=g8("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=s8(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),m8={utf8:oR,"utf-8":oR,hex:aR.base16,latin1:VA,ascii:VA,binary:VA,...aR};function SE(n,e="utf8"){const t=m8[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}function lp(n,e="utf8"){const t=m8[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?oS(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function cR(n){return Qu(SE(lp(n,CE),n8))}function Pb(n){return SE(lp(Mo(n),n8),CE)}function y8(n){const e=lp(AH,tR),t=vH+SE(i8([e,n]),tR);return[bH,EH,t].join(wH)}function qj(n){return SE(n,CE)}function Vj(n){return lp(n,CE)}function Gj(n){return lp([Pb(n.header),Pb(n.payload)].join(Rb),r8)}function Kj(n){return[Pb(n.header),Pb(n.payload),qj(n.signature)].join(Rb)}function f_(n){const e=n.split(Rb),t=cR(e[0]),r=cR(e[1]),s=Vj(e[2]),i=lp(e.slice(0,2).join(Rb),r8);return{header:t,payload:r,signature:s,data:i}}function lR(n=VU(CH)){const e=t8.getPublicKey(n);return{secretKey:i8([n,e]),publicKey:e}}async function Wj(n,e,t,r,s=Ce.fromMiliseconds(Date.now())){const i={alg:mH,typ:yH},o=y8(r.publicKey),l=s+t,f={iss:o,sub:n,aud:e,iat:s,exp:l},h=Gj({header:i,payload:f}),p=t8.sign(h,r.secretKey.slice(0,32));return Kj({header:i,payload:f,signature:p})}var uR=function(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))},Yj=function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n}(),Qj=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),Zj=function(){function n(e,t,r,s){this.name=e,this.version=t,this.os=r,this.bot=s,this.type="bot-device"}return n}(),Jj=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),Xj=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),ez=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,tz=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,fR=3,nz=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",ez]],hR=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function rz(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Xj:typeof navigator<"u"?iz(navigator.userAgent):oz()}function sz(n){return n!==""&&nz.reduce(function(e,t){var r=t[0],s=t[1];if(e)return e;var i=s.exec(n);return!!i&&[r,i]},!1)}function iz(n){var e=sz(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new Jj;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<fR&&(s=uR(uR([],s,!0),cz(fR-s.length),!0)):s=[];var i=s.join("."),o=az(n),l=tz.exec(n);return l&&l[1]?new Zj(t,i,o,l[1]):new Yj(t,i,o)}function az(n){for(var e=0,t=hR.length;e<t;e++){var r=hR[e],s=r[0],i=r[1],o=i.exec(n);if(o)return s}return null}function oz(){var n=typeof process<"u"&&process.version;return n?new Qj(process.version.slice(1)):null}function cz(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}var Zt={},dR;function w8(){if(dR)return Zt;dR=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.getLocalStorage=Zt.getLocalStorageOrThrow=Zt.getCrypto=Zt.getCryptoOrThrow=Zt.getLocation=Zt.getLocationOrThrow=Zt.getNavigator=Zt.getNavigatorOrThrow=Zt.getDocument=Zt.getDocumentOrThrow=Zt.getFromWindowOrThrow=Zt.getFromWindow=void 0;function n(y){let b;return typeof window<"u"&&typeof window[y]<"u"&&(b=window[y]),b}Zt.getFromWindow=n;function e(y){const b=n(y);if(!b)throw new Error(`${y} is not defined in Window`);return b}Zt.getFromWindowOrThrow=e;function t(){return e("document")}Zt.getDocumentOrThrow=t;function r(){return n("document")}Zt.getDocument=r;function s(){return e("navigator")}Zt.getNavigatorOrThrow=s;function i(){return n("navigator")}Zt.getNavigator=i;function o(){return e("location")}Zt.getLocationOrThrow=o;function l(){return n("location")}Zt.getLocation=l;function f(){return e("crypto")}Zt.getCryptoOrThrow=f;function h(){return n("crypto")}Zt.getCrypto=h;function p(){return e("localStorage")}Zt.getLocalStorageOrThrow=p;function g(){return n("localStorage")}return Zt.getLocalStorage=g,Zt}var Lo=w8(),Tg={},pR;function lz(){if(pR)return Tg;pR=1,Object.defineProperty(Tg,"__esModule",{value:!0}),Tg.getWindowMetadata=void 0;const n=w8();function e(){let t,r;try{t=n.getDocumentOrThrow(),r=n.getLocationOrThrow()}catch{return null}function s(){const b=t.getElementsByTagName("link"),v=[];for(let E=0;E<b.length;E++){const A=b[E],S=A.getAttribute("rel");if(S&&S.toLowerCase().indexOf("icon")>-1){const O=A.getAttribute("href");if(O)if(O.toLowerCase().indexOf("https:")===-1&&O.toLowerCase().indexOf("http:")===-1&&O.indexOf("//")!==0){let T=r.protocol+"//"+r.host;if(O.indexOf("/")===0)T+=O;else{const k=r.pathname.split("/");k.pop();const R=k.join("/");T+=R+"/"+O}v.push(T)}else if(O.indexOf("//")===0){const T=r.protocol+O;v.push(T)}else v.push(O)}}return v}function i(...b){const v=t.getElementsByTagName("meta");for(let E=0;E<v.length;E++){const A=v[E],S=["itemprop","property","name"].map(O=>A.getAttribute(O)).filter(O=>O?b.includes(O):!1);if(S.length&&S){const O=A.getAttribute("content");if(O)return O}}return""}function o(){let b=i("name","og:site_name","og:title","twitter:title");return b||(b=t.title),b}function l(){return i("description","og:description","twitter:description","keywords")}const f=o(),h=l(),p=r.origin,g=s();return{description:h,url:p,icons:g,name:f}}return Tg.getWindowMetadata=e,Tg}var uz=lz();function Cm(n,{strict:e=!0}={}){return!n||typeof n!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(n):n.startsWith("0x")}function h_(n){return Cm(n,{strict:!1})?Math.ceil((n.length-2)/2):n.length}const b8="2.31.0";let Og={getDocsUrl:({docsBaseUrl:n,docsPath:e="",docsSlug:t})=>e?`${n??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${b8}`},Fy=class d_ extends Error{constructor(e,t={}){var l;const r=(()=>{var f;return t.cause instanceof d_?t.cause.details:(f=t.cause)!=null&&f.message?t.cause.message:t.details})(),s=t.cause instanceof d_&&t.cause.docsPath||t.docsPath,i=(l=Og.getDocsUrl)==null?void 0:l.call(Og,{...t,docsPath:s}),o=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Og.version?[`Version: ${Og.version}`]:[]].join(`
`);super(o,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=b8}walk(e){return E8(this,e)}};function E8(n,e){return e!=null&&e(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause!==void 0?E8(n.cause,e):e?null:n}class Zfe extends Fy{constructor({offset:e,position:t,size:r}){super(`Slice ${t==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let v8=class extends Fy{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}};function up(n,{dir:e,size:t=32}={}){return typeof n=="string"?fz(n,{dir:e,size:t}):hz(n,{dir:e,size:t})}function fz(n,{dir:e,size:t=32}={}){if(t===null)return n;const r=n.replace("0x","");if(r.length>t*2)throw new v8({size:Math.ceil(r.length/2),targetSize:t,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function hz(n,{dir:e,size:t=32}={}){if(t===null)return n;if(n.length>t)throw new v8({size:n.length,targetSize:t,type:"bytes"});const r=new Uint8Array(t);for(let s=0;s<t;s++){const i=e==="right";r[i?s:t-s-1]=n[i?s:n.length-s-1]}return r}let dz=class extends Fy{constructor({max:e,min:t,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}},pz=class extends Fy{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function fp(n,{size:e}){if(h_(n)>e)throw new pz({givenSize:h_(n),maxSize:e})}function p_(n,e={}){const{signed:t}=e;e.size&&fp(n,{size:e.size});const r=BigInt(n);if(!t)return r;const s=(n.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function gz(n,e={}){return Number(p_(n,e))}const mz=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function g_(n,e={}){return typeof n=="number"||typeof n=="bigint"?C8(n,e):typeof n=="string"?bz(n,e):typeof n=="boolean"?yz(n,e):A8(n,e)}function yz(n,e={}){const t=`0x${Number(n)}`;return typeof e.size=="number"?(fp(t,{size:e.size}),up(t,{size:e.size})):t}function A8(n,e={}){let t="";for(let s=0;s<n.length;s++)t+=mz[n[s]];const r=`0x${t}`;return typeof e.size=="number"?(fp(r,{size:e.size}),up(r,{dir:"right",size:e.size})):r}function C8(n,e={}){const{signed:t,size:r}=e,s=BigInt(n);let i;r?t?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof n=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&t?-i-1n:0;if(i&&s>i||s<o){const f=typeof n=="bigint"?"n":"";throw new dz({max:i?`${i}${f}`:void 0,min:`${o}${f}`,signed:t,size:r,value:`${n}${f}`})}const l=`0x${(t&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?up(l,{size:r}):l}const wz=new TextEncoder;function bz(n,e={}){const t=wz.encode(n);return A8(t,e)}const Ez=new TextEncoder;function vz(n,e={}){return typeof n=="number"||typeof n=="bigint"?Cz(n,e):typeof n=="boolean"?Az(n,e):Cm(n)?_8(n,e):S8(n,e)}function Az(n,e={}){const t=new Uint8Array(1);return t[0]=Number(n),typeof e.size=="number"?(fp(t,{size:e.size}),up(t,{size:e.size})):t}const ao={zero:48,nine:57,A:65,F:70,a:97,f:102};function gR(n){if(n>=ao.zero&&n<=ao.nine)return n-ao.zero;if(n>=ao.A&&n<=ao.F)return n-(ao.A-10);if(n>=ao.a&&n<=ao.f)return n-(ao.a-10)}function _8(n,e={}){let t=n;e.size&&(fp(t,{size:e.size}),t=up(t,{dir:"right",size:e.size}));let r=t.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,l=0;o<s;o++){const f=gR(r.charCodeAt(l++)),h=gR(r.charCodeAt(l++));if(f===void 0||h===void 0)throw new Fy(`Invalid byte sequence ("${r[l-2]}${r[l-1]}" in "${r}").`);i[o]=f*16+h}return i}function Cz(n,e){const t=C8(n,e);return _8(t)}function S8(n,e={}){const t=Ez.encode(n);return typeof e.size=="number"?(fp(t,{size:e.size}),up(t,{dir:"right",size:e.size})):t}function N8(n,e){const t=e||"hex",r=J9(Cm(n,{strict:!1})?vz(n):n);return t==="bytes"?r:g_(r)}let _z=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const GA=new _z(8192);function Sz(n,e){if(GA.has(`${n}.${e}`))return GA.get(`${n}.${e}`);const t=n.substring(2).toLowerCase(),r=N8(S8(t),"bytes"),s=t.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return GA.set(`${n}.${e}`,i),i}function Nz(n){const e=N8(`0x${n.substring(4)}`).substring(26);return Sz(`0x${e}`)}async function Tz({hash:n,signature:e}){const t=Cm(n)?n:g_(n),{secp256k1:r}=await Mr(async()=>{const{secp256k1:o}=await import("./secp256k1-Di2IkAE_.js");return{secp256k1:o}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:h,s:p,v:g,yParity:y}=e,b=Number(y??g),v=mR(b);return new r.Signature(p_(h),p_(p)).addRecoveryBit(v)}const o=Cm(e)?e:g_(e);if(h_(o)!==65)throw new Error("invalid signature length");const l=gz(`0x${o.slice(130)}`),f=mR(l);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(f)})().recoverPublicKey(t.substring(2)).toHex(!1)}`}function mR(n){if(n===0||n===1)return n;if(n===27)return 0;if(n===28)return 1;throw new Error("Invalid yParityOrV value")}async function Oz({hash:n,signature:e}){return Nz(await Tz({hash:n,signature:e}))}function xz(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let h=0;h<e.length;h++)e[h]=255;for(let h=0;h<n.length;h++){const p=n.charAt(h),g=p.charCodeAt(0);if(e[g]!==255)throw new TypeError(p+" is ambiguous");e[g]=h}const t=n.length,r=n.charAt(0),s=Math.log(t)/Math.log(256),i=Math.log(256)/Math.log(t);function o(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";let p=0,g=0,y=0;const b=h.length;for(;y!==b&&h[y]===0;)y++,p++;const v=(b-y)*i+1>>>0,E=new Uint8Array(v);for(;y!==b;){let O=h[y],T=0;for(let k=v-1;(O!==0||T<g)&&k!==-1;k--,T++)O+=256*E[k]>>>0,E[k]=O%t>>>0,O=O/t>>>0;if(O!==0)throw new Error("Non-zero carry");g=T,y++}let A=v-g;for(;A!==v&&E[A]===0;)A++;let S=r.repeat(p);for(;A<v;++A)S+=n.charAt(E[A]);return S}function l(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;let p=0,g=0,y=0;for(;h[p]===r;)g++,p++;const b=(h.length-p)*s+1>>>0,v=new Uint8Array(b);for(;p<h.length;){const O=h.charCodeAt(p);if(O>255)return;let T=e[O];if(T===255)return;let k=0;for(let R=b-1;(T!==0||k<y)&&R!==-1;R--,k++)T+=t*v[R]>>>0,v[R]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");y=k,p++}let E=b-y;for(;E!==b&&v[E]===0;)E++;const A=new Uint8Array(g+(b-E));let S=g;for(;E!==b;)A[S++]=v[E++];return A}function f(h){const p=l(h);if(p)return p;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:l,decode:f}}var Iz="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Hy=xz(Iz);function Rz(n){const e=n.length;let t=0,r=0;for(;r<e;){let s=n.charCodeAt(r++);if((s&4294967168)===0){t++;continue}else if((s&4294965248)===0)t+=2;else{if(s>=55296&&s<=56319&&r<e){const i=n.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}(s&4294901760)===0?t+=3:t+=4}}return t}function Pz(n,e,t){const r=n.length;let s=t,i=0;for(;i<r;){let o=n.charCodeAt(i++);if((o&4294967168)===0){e[s++]=o;continue}else if((o&4294965248)===0)e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const l=n.charCodeAt(i);(l&64512)===56320&&(++i,o=((o&1023)<<10)+(l&1023)+65536)}(o&4294901760)===0?(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128):(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128)}e[s++]=o&63|128}}const Dz=new TextEncoder,Uz=50;function kz(n,e,t){Dz.encodeInto(n,e.subarray(t))}function Bz(n,e,t){n.length>Uz?kz(n,e,t):Pz(n,e,t)}const Mz=4096;function T8(n,e,t){let r=e;const s=r+t,i=[];let o="";for(;r<s;){const l=n[r++];if((l&128)===0)i.push(l);else if((l&224)===192){const f=n[r++]&63;i.push((l&31)<<6|f)}else if((l&240)===224){const f=n[r++]&63,h=n[r++]&63;i.push((l&31)<<12|f<<6|h)}else if((l&248)===240){const f=n[r++]&63,h=n[r++]&63,p=n[r++]&63;let g=(l&7)<<18|f<<12|h<<6|p;g>65535&&(g-=65536,i.push(g>>>10&1023|55296),g=56320|g&1023),i.push(g)}else i.push(l);i.length>=Mz&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const Lz=new TextDecoder,$z=200;function Fz(n,e,t){const r=n.subarray(e,e+t);return Lz.decode(r)}function Hz(n,e,t){return t>$z?Fz(n,e,t):T8(n,e,t)}class Ow{constructor(e,t){this.type=e,this.data=t}}class Ms extends Error{constructor(e){super(e);const t=Object.create(Ms.prototype);Object.setPrototypeOf(this,t),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Ms.name})}}const xg=4294967295;function jz(n,e,t){const r=t/4294967296,s=t;n.setUint32(e,r),n.setUint32(e+4,s)}function O8(n,e,t){const r=Math.floor(t/4294967296),s=t;n.setUint32(e,r),n.setUint32(e+4,s)}function x8(n,e){const t=n.getInt32(e),r=n.getUint32(e+4);return t*4294967296+r}function zz(n,e){const t=n.getUint32(e),r=n.getUint32(e+4);return t*4294967296+r}const qz=-1,Vz=4294967296-1,Gz=17179869184-1;function Kz({sec:n,nsec:e}){if(n>=0&&e>=0&&n<=Gz)if(e===0&&n<=Vz){const t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,n),t}else{const t=n/4294967296,r=n&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|t&3),i.setUint32(4,r),s}else{const t=new Uint8Array(12),r=new DataView(t.buffer);return r.setUint32(0,e),O8(r,4,n),t}}function Wz(n){const e=n.getTime(),t=Math.floor(e/1e3),r=(e-t*1e3)*1e6,s=Math.floor(r/1e9);return{sec:t+s,nsec:r-s*1e9}}function Yz(n){if(n instanceof Date){const e=Wz(n);return Kz(e)}else return null}function Qz(n){const e=new DataView(n.buffer,n.byteOffset,n.byteLength);switch(n.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const t=e.getUint32(0),r=e.getUint32(4),s=(t&3)*4294967296+r,i=t>>>2;return{sec:s,nsec:i}}case 12:{const t=x8(e,4),r=e.getUint32(0);return{sec:t,nsec:r}}default:throw new Ms(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${n.length}`)}}function Zz(n){const e=Qz(n);return new Date(e.sec*1e3+e.nsec/1e6)}const Jz={type:qz,encode:Yz,decode:Zz};class Db{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Jz)}register({type:e,encode:t,decode:r}){if(e>=0)this.encoders[e]=t,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=t,this.builtInDecoders[s]=r}}tryToEncode(e,t){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,t);if(i!=null){const o=-1-r;return new Ow(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,t);if(i!=null){const o=r;return new Ow(o,i)}}}return e instanceof Ow?e:null}decode(e,t,r){const s=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return s?s(e,t,r):new Ow(t,e)}}Db.defaultCodec=new Db;function Xz(n){return n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer}function m_(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):Xz(n)?new Uint8Array(n):Uint8Array.from(n)}const eq=100,tq=2048;let nq=class I8{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??Db.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??eq,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??tq,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new I8({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,t){if(t>this.maxDepth)throw new Error(`Too deep objects in depth ${t}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,t)}ensureBufferSizeToWrite(e){const t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(t*2)}resizeBuffer(e){const t=new ArrayBuffer(e),r=new Uint8Array(t),s=new DataView(t);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=Rz(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),Bz(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,t){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,t);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw new Error(`Too large binary: ${t}`);const r=m_(e);this.writeU8a(r)}encodeArray(e,t){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,t+1)}countWithoutUndefined(e,t){let r=0;for(const s of t)e[s]!==void 0&&r++;return r}encodeMap(e,t){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,t+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const t=e.data.length;if(t===1)this.writeU8(212);else if(t===2)this.writeU8(213);else if(t===4)this.writeU8(214);else if(t===8)this.writeU8(215);else if(t===16)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw new Error(`Too large extension object: ${t}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),jz(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),O8(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function rq(n,e){return new nq(e).encodeSharedRef(n)}function KA(n){return`${n<0?"-":""}0x${Math.abs(n).toString(16).padStart(2,"0")}`}const sq=16,iq=16;class aq{constructor(e=sq,t=iq){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=t,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,t,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let l=0;l<r;l++)if(o[l]!==e[t+l])continue e;return i.str}return null}store(e,t){const r=this.caches[e.length-1],s={bytes:e,str:t};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,t,r){const s=this.find(e,t,r);if(s!=null)return this.hit++,s;this.miss++;const i=T8(e,t,r),o=Uint8Array.prototype.slice.call(e,t,t+r);return this.store(o,i),i}}const y_="array",im="map_key",R8="map_value",oq=n=>{if(typeof n=="string"||typeof n=="number")return n;throw new Ms("The type of key must be string or number but "+typeof n)};class cq{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const t=this.getUninitializedStateFromPool();t.type=y_,t.position=0,t.size=e,t.array=new Array(e)}pushMapState(e){const t=this.getUninitializedStateFromPool();t.type=im,t.readCount=0,t.size=e,t.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===y_){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===im||e.type===R8){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Ig=-1,cS=new DataView(new ArrayBuffer(0)),lq=new Uint8Array(cS.buffer);try{cS.getInt8(0)}catch(n){if(!(n instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const yR=new RangeError("Insufficient data"),uq=new aq;let fq=class P8{constructor(e){this.totalPos=0,this.pos=0,this.view=cS,this.bytes=lq,this.headByte=Ig,this.stack=new cq,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??Db.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??xg,this.maxBinLength=(e==null?void 0:e.maxBinLength)??xg,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??xg,this.maxMapLength=(e==null?void 0:e.maxMapLength)??xg,this.maxExtLength=(e==null?void 0:e.maxExtLength)??xg,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:uq,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??oq}clone(){return new P8({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Ig,this.stack.reset()}setBuffer(e){const t=m_(e);this.bytes=t,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Ig&&!this.hasRemaining(1))this.setBuffer(e);else{const t=this.bytes.subarray(this.pos),r=m_(e),s=new Uint8Array(t.length+r.length);s.set(t),s.set(r,t.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:t,pos:r}=this;return new RangeError(`Extra ${t.byteLength-r} of ${t.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let t=!1,r;for await(const l of e){if(t)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(l);try{r=this.doDecodeSync(),t=!0}catch(f){if(!(f instanceof RangeError))throw f}this.totalPos+=this.pos}if(t){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${KA(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,t){if(this.entered){yield*this.clone().decodeMultiAsync(e,t);return}try{this.entered=!0;let r=t,s=-1;for await(const i of e){if(t&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let t;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else{const s=e-160;t=this.decodeString(s,0)}else if(e===192)t=null;else if(e===194)t=!1;else if(e===195)t=!0;else if(e===202)t=this.readF32();else if(e===203)t=this.readF64();else if(e===204)t=this.readU8();else if(e===205)t=this.readU16();else if(e===206)t=this.readU32();else if(e===207)this.useBigInt64?t=this.readU64AsBigInt():t=this.readU64();else if(e===208)t=this.readI8();else if(e===209)t=this.readI16();else if(e===210)t=this.readI32();else if(e===211)this.useBigInt64?t=this.readI64AsBigInt():t=this.readI64();else if(e===217){const s=this.lookU8();t=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();t=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();t=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(e===196){const s=this.lookU8();t=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();t=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();t=this.decodeBinary(s,4)}else if(e===212)t=this.decodeExtension(1,0);else if(e===213)t=this.decodeExtension(2,0);else if(e===214)t=this.decodeExtension(4,0);else if(e===215)t=this.decodeExtension(8,0);else if(e===216)t=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();t=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();t=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();t=this.decodeExtension(s,4)}else throw new Ms(`Unrecognized type byte: ${KA(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===y_)if(s.array[s.position]=t,s.position++,s.position===s.size)t=s.array,r.release(s);else continue e;else if(s.type===im){if(t==="__proto__")throw new Ms("The key __proto__ is not allowed");s.key=this.mapKeyConverter(t),s.type=R8;continue e}else if(s.map[s.key]=t,s.readCount++,s.readCount===s.size)t=s.map,r.release(s);else{s.key=null,s.type=im;continue e}}return t}}readHeadByte(){return this.headByte===Ig&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Ig}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Ms(`Unrecognized array type byte: ${KA(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Ms(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Ms(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,t){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,t):this.decodeBinary(e,t)}decodeUtf8String(e,t){var i;if(e>this.maxStrLength)throw new Ms(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+e)throw yR;const r=this.pos+t;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=Hz(this.bytes,r,e),this.pos+=t+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===im:!1}decodeBinary(e,t){if(e>this.maxBinLength)throw new Ms(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+t))throw yR;const r=this.pos+t,s=this.bytes.subarray(r,r+e);return this.pos+=t+e,s}decodeExtension(e,t){if(e>this.maxExtLength)throw new Ms(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+t),s=this.decodeBinary(e,t+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=zz(this.view,this.pos);return this.pos+=8,e}readI64(){const e=x8(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function hq(n,e){return new fq(e).decode(n)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dq(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function D8(n,e){return Array.isArray(e)?e.length===0?!0:n?e.every(t=>typeof t=="string"):e.every(t=>Number.isSafeInteger(t)):!1}function Ub(n,e){if(typeof e!="string")throw new Error(`${n}: string expected`);return!0}function lS(n){if(!Number.isSafeInteger(n))throw new Error(`invalid integer: ${n}`)}function w_(n){if(!Array.isArray(n))throw new Error("array expected")}function kb(n,e){if(!D8(!0,e))throw new Error(`${n}: array of strings expected`)}function pq(n,e){if(!D8(!1,e))throw new Error(`${n}: array of numbers expected`)}function gq(...n){const e=i=>i,t=(i,o)=>l=>i(o(l)),r=n.map(i=>i.encode).reduceRight(t,e),s=n.map(i=>i.decode).reduce(t,e);return{encode:r,decode:s}}function mq(n){const e=typeof n=="string"?n.split(""):n,t=e.length;kb("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(w_(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=t)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${n}`);return e[i]})),decode:s=>(w_(s),s.map(i=>{Ub("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${n}`);return o}))}}function yq(n=""){return Ub("join",n),{encode:e=>(kb("join.decode",e),e.join(n)),decode:e=>(Ub("join.decode",e),e.split(n))}}function wq(n,e="="){return lS(n),Ub("padding",e),{encode(t){for(kb("padding.encode",t);t.length*n%8;)t.push(e);return t},decode(t){kb("padding.decode",t);let r=t.length;if(r*n%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&t[r-1]===e;r--)if((r-1)*n%8===0)throw new Error("padding: invalid, string has too much padding");return t.slice(0,r)}}}const U8=(n,e)=>e===0?n:U8(e,n%e),Bb=(n,e)=>n+(e-U8(n,e)),WA=(()=>{let n=[];for(let e=0;e<40;e++)n.push(2**e);return n})();function wR(n,e,t,r){if(w_(n),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(Bb(e,t)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${t} carryBits=${Bb(e,t)}`);let s=0,i=0;const o=WA[e],l=WA[t]-1,f=[];for(const h of n){if(lS(h),h>=o)throw new Error(`convertRadix2: invalid data word=${h} from=${e}`);if(s=s<<e|h,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=t;i-=t)f.push((s>>i-t&l)>>>0);const p=WA[i];if(p===void 0)throw new Error("invalid carry");s&=p-1}if(s=s<<t-i&l,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&f.push(s>>>0),f}function bq(n,e=!1){if(lS(n),n<=0||n>32)throw new Error("radix2: bits should be in (0..32]");if(Bb(8,n)>32||Bb(n,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!dq(t))throw new Error("radix2.encode input should be Uint8Array");return wR(Array.from(t),8,n,!e)},decode:t=>(pq("radix2.decode",t),Uint8Array.from(wR(t,n,8,e)))}}const Eq=gq(bq(5),mq("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),wq(5),yq(""));function uS(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function k8(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?uS(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function am(n,e){e||(e=n.reduce((s,i)=>s+i.length,0));const t=k8(e);let r=0;for(const s of n)t.set(s,r),r+=s.length;return uS(t)}function vq(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var s=0;s<n.length;s++){var i=n.charAt(s),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=s}var l=n.length,f=n.charAt(0),h=Math.log(l)/Math.log(256),p=Math.log(256)/Math.log(l);function g(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var E=0,A=0,S=0,O=v.length;S!==O&&v[S]===0;)S++,E++;for(var T=(O-S)*p+1>>>0,k=new Uint8Array(T);S!==O;){for(var R=v[S],D=0,F=T-1;(R!==0||D<A)&&F!==-1;F--,D++)R+=256*k[F]>>>0,k[F]=R%l>>>0,R=R/l>>>0;if(R!==0)throw new Error("Non-zero carry");A=D,S++}for(var $=T-A;$!==T&&k[$]===0;)$++;for(var B=f.repeat(E);$<T;++$)B+=n.charAt(k[$]);return B}function y(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var E=0;if(v[E]!==" "){for(var A=0,S=0;v[E]===f;)A++,E++;for(var O=(v.length-E)*h+1>>>0,T=new Uint8Array(O);v[E];){var k=t[v.charCodeAt(E)];if(k===255)return;for(var R=0,D=O-1;(k!==0||R<S)&&D!==-1;D--,R++)k+=l*T[D]>>>0,T[D]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");S=R,E++}if(v[E]!==" "){for(var F=O-S;F!==O&&T[F]===0;)F++;for(var $=new Uint8Array(A+(O-F)),B=A;F!==O;)$[B++]=T[F++];return $}}}function b(v){var E=y(v);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:y,decode:b}}var Aq=vq,Cq=Aq;const _q=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Sq=n=>new TextEncoder().encode(n),Nq=n=>new TextDecoder().decode(n);class Tq{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Oq{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return B8(this,e)}}class xq{constructor(e){this.decoders=e}or(e){return B8(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const B8=(n,e)=>new xq({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class Iq{constructor(e,t,r,s){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=s,this.encoder=new Tq(e,t,r),this.decoder=new Oq(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const NE=({name:n,prefix:e,encode:t,decode:r})=>new Iq(n,e,t,r),jy=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:s}=Cq(t,e);return NE({prefix:n,name:e,encode:r,decode:i=>_q(s(i))})},Rq=(n,e,t,r)=>{const s={};for(let p=0;p<e.length;++p)s[e[p]]=p;let i=n.length;for(;n[i-1]==="=";)--i;const o=new Uint8Array(i*t/8|0);let l=0,f=0,h=0;for(let p=0;p<i;++p){const g=s[n[p]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);f=f<<t|g,l+=t,l>=8&&(l-=8,o[h++]=255&f>>l)}if(l>=t||255&f<<8-l)throw new SyntaxError("Unexpected end of data");return o},Pq=(n,e,t)=>{const r=e[e.length-1]==="=",s=(1<<t)-1;let i="",o=0,l=0;for(let f=0;f<n.length;++f)for(l=l<<8|n[f],o+=8;o>t;)o-=t,i+=e[s&l>>o];if(o&&(i+=e[s&l<<t-o]),r)for(;i.length*t&7;)i+="=";return i},mr=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>NE({prefix:e,name:n,encode(s){return Pq(s,r,t)},decode(s){return Rq(s,r,t,n)}}),Dq=NE({prefix:"\0",name:"identity",encode:n=>Nq(n),decode:n=>Sq(n)}),Uq=Object.freeze(Object.defineProperty({__proto__:null,identity:Dq},Symbol.toStringTag,{value:"Module"})),kq=mr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Bq=Object.freeze(Object.defineProperty({__proto__:null,base2:kq},Symbol.toStringTag,{value:"Module"})),Mq=mr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Lq=Object.freeze(Object.defineProperty({__proto__:null,base8:Mq},Symbol.toStringTag,{value:"Module"})),$q=jy({prefix:"9",name:"base10",alphabet:"0123456789"}),Fq=Object.freeze(Object.defineProperty({__proto__:null,base10:$q},Symbol.toStringTag,{value:"Module"})),Hq=mr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),jq=mr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),zq=Object.freeze(Object.defineProperty({__proto__:null,base16:Hq,base16upper:jq},Symbol.toStringTag,{value:"Module"})),qq=mr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Vq=mr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Gq=mr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Kq=mr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Wq=mr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Yq=mr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Qq=mr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Zq=mr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Jq=mr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Xq=Object.freeze(Object.defineProperty({__proto__:null,base32:qq,base32hex:Wq,base32hexpad:Qq,base32hexpadupper:Zq,base32hexupper:Yq,base32pad:Gq,base32padupper:Kq,base32upper:Vq,base32z:Jq},Symbol.toStringTag,{value:"Module"})),eV=jy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tV=jy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),nV=Object.freeze(Object.defineProperty({__proto__:null,base36:eV,base36upper:tV},Symbol.toStringTag,{value:"Module"})),rV=jy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),sV=jy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),iV=Object.freeze(Object.defineProperty({__proto__:null,base58btc:rV,base58flickr:sV},Symbol.toStringTag,{value:"Module"})),aV=mr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),oV=mr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),cV=mr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),lV=mr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),uV=Object.freeze(Object.defineProperty({__proto__:null,base64:aV,base64pad:oV,base64url:cV,base64urlpad:lV},Symbol.toStringTag,{value:"Module"})),M8=Array.from(""),fV=M8.reduce((n,e,t)=>(n[t]=e,n),[]),hV=M8.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function dV(n){return n.reduce((e,t)=>(e+=fV[t],e),"")}function pV(n){const e=[];for(const t of n){const r=hV[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const gV=NE({prefix:"",name:"base256emoji",encode:dV,decode:pV}),mV=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:gV},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bR={...Uq,...Bq,...Lq,...Fq,...zq,...Xq,...nV,...iV,...uV,...mV};function L8(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const ER=L8("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),YA=L8("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=k8(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),$8={utf8:ER,"utf-8":ER,hex:bR.base16,latin1:YA,ascii:YA,binary:YA,...bR};function mi(n,e="utf8"){const t=$8[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?uS(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function ms(n,e="utf8"){const t=$8[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}const yV={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var QA,vR;function F8(){if(vR)return QA;vR=1;const n="Input must be an string, Buffer or Uint8Array";function e(o){let l;if(o instanceof Uint8Array)l=o;else if(typeof o=="string")l=new TextEncoder().encode(o);else throw new Error(n);return l}function t(o){return Array.prototype.map.call(o,function(l){return(l<16?"0":"")+l.toString(16)}).join("")}function r(o){return(4294967296+o).toString(16).substring(1)}function s(o,l,f){let h=`
`+o+" = ";for(let p=0;p<l.length;p+=2){if(f===32)h+=r(l[p]).toUpperCase(),h+=" ",h+=r(l[p+1]).toUpperCase();else if(f===64)h+=r(l[p+1]).toUpperCase(),h+=r(l[p]).toUpperCase();else throw new Error("Invalid size "+f);p%6===4?h+=`
`+new Array(o.length+4).join(" "):p<l.length-2&&(h+=" ")}console.log(h)}function i(o,l,f){let h=new Date().getTime();const p=new Uint8Array(l);for(let y=0;y<l;y++)p[y]=y%256;const g=new Date().getTime();console.log("Generated random input in "+(g-h)+"ms"),h=g;for(let y=0;y<f;y++){const b=o(p),v=new Date().getTime(),E=v-h;h=v,console.log("Hashed in "+E+"ms: "+b.substring(0,20)+"..."),console.log(Math.round(l/(1<<20)/(E/1e3)*100)/100+" MB PER SECOND")}}return QA={normalizeInput:e,toHex:t,debugPrint:s,testSpeed:i},QA}var ZA,AR;function wV(){if(AR)return ZA;AR=1;const n=F8();function e(S,O,T){const k=S[O]+S[T];let R=S[O+1]+S[T+1];k>=4294967296&&R++,S[O]=k,S[O+1]=R}function t(S,O,T,k){let R=S[O]+T;T<0&&(R+=4294967296);let D=S[O+1]+k;R>=4294967296&&D++,S[O]=R,S[O+1]=D}function r(S,O){return S[O]^S[O+1]<<8^S[O+2]<<16^S[O+3]<<24}function s(S,O,T,k,R,D){const F=h[R],$=h[R+1],B=h[D],q=h[D+1];e(f,S,O),t(f,S,F,$);let j=f[k]^f[S],W=f[k+1]^f[S+1];f[k]=W,f[k+1]=j,e(f,T,k),j=f[O]^f[T],W=f[O+1]^f[T+1],f[O]=j>>>24^W<<8,f[O+1]=W>>>24^j<<8,e(f,S,O),t(f,S,B,q),j=f[k]^f[S],W=f[k+1]^f[S+1],f[k]=j>>>16^W<<16,f[k+1]=W>>>16^j<<16,e(f,T,k),j=f[O]^f[T],W=f[O+1]^f[T+1],f[O]=W>>>31^j<<1,f[O+1]=j>>>31^W<<1}const i=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],l=new Uint8Array(o.map(function(S){return S*2})),f=new Uint32Array(32),h=new Uint32Array(32);function p(S,O){let T=0;for(T=0;T<16;T++)f[T]=S.h[T],f[T+16]=i[T];for(f[24]=f[24]^S.t,f[25]=f[25]^S.t/4294967296,O&&(f[28]=~f[28],f[29]=~f[29]),T=0;T<32;T++)h[T]=r(S.b,4*T);for(T=0;T<12;T++)s(0,8,16,24,l[T*16+0],l[T*16+1]),s(2,10,18,26,l[T*16+2],l[T*16+3]),s(4,12,20,28,l[T*16+4],l[T*16+5]),s(6,14,22,30,l[T*16+6],l[T*16+7]),s(0,10,20,30,l[T*16+8],l[T*16+9]),s(2,12,22,24,l[T*16+10],l[T*16+11]),s(4,14,16,26,l[T*16+12],l[T*16+13]),s(6,8,18,28,l[T*16+14],l[T*16+15]);for(T=0;T<16;T++)S.h[T]=S.h[T]^f[T]^f[T+16]}const g=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function y(S,O,T,k){if(S===0||S>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(O&&O.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(T&&T.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(k&&k.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const R={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:S};g.fill(0),g[0]=S,O&&(g[1]=O.length),g[2]=1,g[3]=1,T&&g.set(T,32),k&&g.set(k,48);for(let D=0;D<16;D++)R.h[D]=i[D]^r(g,D*4);return O&&(b(R,O),R.c=128),R}function b(S,O){for(let T=0;T<O.length;T++)S.c===128&&(S.t+=S.c,p(S,!1),S.c=0),S.b[S.c++]=O[T]}function v(S){for(S.t+=S.c;S.c<128;)S.b[S.c++]=0;p(S,!0);const O=new Uint8Array(S.outlen);for(let T=0;T<S.outlen;T++)O[T]=S.h[T>>2]>>8*(T&3);return O}function E(S,O,T,k,R){T=T||64,S=n.normalizeInput(S),k&&(k=n.normalizeInput(k)),R&&(R=n.normalizeInput(R));const D=y(T,O,k,R);return b(D,S),v(D)}function A(S,O,T,k,R){const D=E(S,O,T,k,R);return n.toHex(D)}return ZA={blake2b:E,blake2bHex:A,blake2bInit:y,blake2bUpdate:b,blake2bFinal:v},ZA}var JA,CR;function bV(){if(CR)return JA;CR=1;const n=F8();function e(v,E){return v[E]^v[E+1]<<8^v[E+2]<<16^v[E+3]<<24}function t(v,E,A,S,O,T){o[v]=o[v]+o[E]+O,o[S]=r(o[S]^o[v],16),o[A]=o[A]+o[S],o[E]=r(o[E]^o[A],12),o[v]=o[v]+o[E]+T,o[S]=r(o[S]^o[v],8),o[A]=o[A]+o[S],o[E]=r(o[E]^o[A],7)}function r(v,E){return v>>>E^v<<32-E}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),o=new Uint32Array(16),l=new Uint32Array(16);function f(v,E){let A=0;for(A=0;A<8;A++)o[A]=v.h[A],o[A+8]=s[A];for(o[12]^=v.t,o[13]^=v.t/4294967296,E&&(o[14]=~o[14]),A=0;A<16;A++)l[A]=e(v.b,4*A);for(A=0;A<10;A++)t(0,4,8,12,l[i[A*16+0]],l[i[A*16+1]]),t(1,5,9,13,l[i[A*16+2]],l[i[A*16+3]]),t(2,6,10,14,l[i[A*16+4]],l[i[A*16+5]]),t(3,7,11,15,l[i[A*16+6]],l[i[A*16+7]]),t(0,5,10,15,l[i[A*16+8]],l[i[A*16+9]]),t(1,6,11,12,l[i[A*16+10]],l[i[A*16+11]]),t(2,7,8,13,l[i[A*16+12]],l[i[A*16+13]]),t(3,4,9,14,l[i[A*16+14]],l[i[A*16+15]]);for(A=0;A<8;A++)v.h[A]^=o[A]^o[A+8]}function h(v,E){if(!(v>0&&v<=32))throw new Error("Incorrect output length, should be in [1, 32]");const A=E?E.length:0;if(E&&!(A>0&&A<=32))throw new Error("Incorrect key length, should be in [1, 32]");const S={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:v};return S.h[0]^=16842752^A<<8^v,A>0&&(p(S,E),S.c=64),S}function p(v,E){for(let A=0;A<E.length;A++)v.c===64&&(v.t+=v.c,f(v,!1),v.c=0),v.b[v.c++]=E[A]}function g(v){for(v.t+=v.c;v.c<64;)v.b[v.c++]=0;f(v,!0);const E=new Uint8Array(v.outlen);for(let A=0;A<v.outlen;A++)E[A]=v.h[A>>2]>>8*(A&3)&255;return E}function y(v,E,A){A=A||32,v=n.normalizeInput(v);const S=h(A,E);return p(S,v),g(S)}function b(v,E,A){const S=y(v,E,A);return n.toHex(S)}return JA={blake2s:y,blake2sHex:b,blake2sInit:h,blake2sUpdate:p,blake2sFinal:g},JA}var XA,_R;function EV(){if(_R)return XA;_R=1;const n=wV(),e=bV();return XA={blake2b:n.blake2b,blake2bHex:n.blake2bHex,blake2bInit:n.blake2bInit,blake2bUpdate:n.blake2bUpdate,blake2bFinal:n.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},XA}var vV=EV(),AV={};const CV=":";function qh(n){const[e,t]=n.split(CV);return{namespace:e,reference:t}}function H8(n,e){return n.includes(":")?[n]:e.chains||[]}var _V=Object.defineProperty,SV=Object.defineProperties,NV=Object.getOwnPropertyDescriptors,SR=Object.getOwnPropertySymbols,TV=Object.prototype.hasOwnProperty,OV=Object.prototype.propertyIsEnumerable,b_=(n,e,t)=>e in n?_V(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,NR=(n,e)=>{for(var t in e||(e={}))TV.call(e,t)&&b_(n,t,e[t]);if(SR)for(var t of SR(e))OV.call(e,t)&&b_(n,t,e[t]);return n},xV=(n,e)=>SV(n,NV(e)),TR=(n,e,t)=>b_(n,typeof e!="symbol"?e+"":e,t);const IV="ReactNative",Fs={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},RV="js";function Mb(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function vl(){return!Lo.getDocument()&&!!Lo.getNavigator()&&navigator.product===IV}function PV(){return vl()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function DV(){return vl()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function hp(){return!Mb()&&!!Lo.getNavigator()&&!!Lo.getDocument()}function zy(){return vl()?Fs.reactNative:Mb()?Fs.node:hp()?Fs.browser:Fs.unknown}function OR(){var n;try{return vl()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(n=global.Application)==null?void 0:n.applicationId:void 0}catch{return}}function UV(n,e){const t=new URLSearchParams(n);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&t.set(r,s)}return t.toString()}function kV(n){var e,t;const r=j8();try{return n!=null&&n.url&&r.url&&new URL(n.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${n.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),n.url=r.url),(e=n==null?void 0:n.icons)!=null&&e.length&&n.icons.length>0&&(n.icons=n.icons.filter(s=>s!=="")),xV(NR(NR({},r),n),{url:(n==null?void 0:n.url)||r.url,name:(n==null?void 0:n.name)||r.name,description:(n==null?void 0:n.description)||r.description,icons:(t=n==null?void 0:n.icons)!=null&&t.length&&n.icons.length>0?n.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),n||r}}function j8(){return uz.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function BV(){if(zy()===Fs.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:r}=global.Platform;return[t,r].join("-")}const n=rz();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function MV(){var n;const e=zy();return e===Fs.browser?[e,((n=Lo.getLocation())==null?void 0:n.host)||"unknown"].join(":"):e}function z8(n,e,t){const r=BV(),s=MV();return[[n,e].join("-"),[RV,t].join("-"),r,s].join("/")}function LV({protocol:n,version:e,relayUrl:t,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:l,packageName:f}){const h=t.split("?"),p=z8(n,e,r),g={auth:s,ua:p,projectId:i,useOnCloseEvent:o,packageName:f||void 0,bundleId:l||void 0},y=UV(h[1]||"",g);return h[0]+"?"+y}function lu(n,e){return n.filter(t=>e.includes(t)).length===n.length}function E_(n){return Object.fromEntries(n.entries())}function v_(n){return new Map(Object.entries(n))}function Jl(n=Ce.FIVE_MINUTES,e){const t=Ce.toMiliseconds(n||Ce.FIVE_MINUTES);let r,s,i,o;return{resolve:l=>{i&&r&&(clearTimeout(i),r(l),o=Promise.resolve(l))},reject:l=>{i&&s&&(clearTimeout(i),s(l))},done:()=>new Promise((l,f)=>{if(o)return l(o);i=setTimeout(()=>{const h=new Error(e);o=Promise.reject(h),f(h)},t),r=l,s=f})}}function il(n,e,t){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(t)),e);try{const o=await n;r(o)}catch(o){s(o)}clearTimeout(i)})}function q8(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function $V(n){return q8("topic",n)}function FV(n){return q8("id",n)}function V8(n){const[e,t]=n.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")r.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))r.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return r}function kn(n,e){return Ce.fromMiliseconds(Date.now()+Ce.toMiliseconds(n))}function Uc(n){return Date.now()>=Ce.toMiliseconds(n)}function Bt(n,e){return`${n}${e?`:${e}`:""}`}function Da(n=[],e=[]){return[...new Set([...n,...e])]}async function HV({id:n,topic:e,wcDeepLink:t}){var r;try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=jV(i,n,e),l=zy();if(l===Fs.browser){if(!((r=Lo.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}zV(o)}else l===Fs.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function jV(n,e,t){const r=`requestId=${e}&sessionTopic=${t}`;n.endsWith("/")&&(n=n.slice(0,-1));let s=`${n}`;if(n.startsWith("https://t.me")){const i=n.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${KV(r,!0)}`}else s=`${s}/wc?${r}`;return s}function zV(n){let e="_self";GV()?e="_top":(VV()||n.startsWith("https://")||n.startsWith("http://"))&&(e="_blank"),window.open(n,e,"noreferrer noopener")}async function qV(n,e){let t="";try{if(hp()&&(t=localStorage.getItem(e),t))return t;t=await n.getItem(e)}catch(r){console.error(r)}return t}function xR(n,e){if(!n.includes(e))return null;const t=n.split(/([&,?,=])/),r=t.indexOf(e);return t[r+2]}function IR(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}function fS(){return typeof process<"u"&&AV.IS_VITEST==="true"}function VV(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function GV(){try{return window.self!==window.top}catch{return!1}}function KV(n,e=!1){const t=Buffer.from(n).toString("base64");return e?t.replace(/[=]/g,""):t}function G8(n){return Buffer.from(n,"base64").toString("utf-8")}function WV(n){return new Promise(e=>setTimeout(e,n))}let YV=class{constructor({limit:e}){TR(this,"limit"),TR(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const t=this.set.values().next().value;t&&this.set.delete(t)}this.set.add(e)}}has(e){return this.set.has(e)}};const xw=BigInt(2**32-1),RR=BigInt(32);function K8(n,e=!1){return e?{h:Number(n&xw),l:Number(n>>RR&xw)}:{h:Number(n>>RR&xw)|0,l:Number(n&xw)|0}}function W8(n,e=!1){const t=n.length;let r=new Uint32Array(t),s=new Uint32Array(t);for(let i=0;i<t;i++){const{h:o,l}=K8(n[i],e);[r[i],s[i]]=[o,l]}return[r,s]}const PR=(n,e,t)=>n>>>t,DR=(n,e,t)=>n<<32-t|e>>>t,kc=(n,e,t)=>n>>>t|e<<32-t,Bc=(n,e,t)=>n<<32-t|e>>>t,Kg=(n,e,t)=>n<<64-t|e>>>t-32,Wg=(n,e,t)=>n>>>t-32|e<<64-t,QV=(n,e)=>e,ZV=(n,e)=>n,JV=(n,e,t)=>n<<t|e>>>32-t,XV=(n,e,t)=>e<<t|n>>>32-t,eG=(n,e,t)=>e<<t-32|n>>>64-t,tG=(n,e,t)=>n<<t-32|e>>>64-t;function Ii(n,e,t,r){const s=(e>>>0)+(r>>>0);return{h:n+t+(s/2**32|0)|0,l:s|0}}const hS=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),dS=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,nG=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),rG=(n,e,t,r,s)=>e+t+r+s+(n/2**32|0)|0,sG=(n,e,t,r,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),iG=(n,e,t,r,s,i)=>e+t+r+s+i+(n/2**32|0)|0,lh=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function pS(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function $o(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function yi(n,...e){if(!pS(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function gS(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");$o(n.outputLen),$o(n.blockLen)}function pl(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function mS(n,e){yi(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function _m(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function wi(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function eC(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function oa(n,e){return n<<32-e|n>>>e}const Y8=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Q8(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}const uo=Y8?n=>n:n=>Q8(n);function aG(n){for(let e=0;e<n.length;e++)n[e]=Q8(n[e]);return n}const Mc=Y8?n=>n:aG,Z8=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",oG=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Sm(n){if(yi(n),Z8)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=oG[n[t]];return e}const oo={_0:48,_9:57,A:65,F:70,a:97,f:102};function UR(n){if(n>=oo._0&&n<=oo._9)return n-oo._0;if(n>=oo.A&&n<=oo.F)return n-(oo.A-10);if(n>=oo.a&&n<=oo.f)return n-(oo.a-10)}function yS(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(Z8)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=UR(n.charCodeAt(i)),l=UR(n.charCodeAt(i+1));if(o===void 0||l===void 0){const f=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+i)}r[s]=o*16+l}return r}function cG(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Gi(n){return typeof n=="string"&&(n=cG(n)),yi(n),n}function uu(...n){let e=0;for(let r=0;r<n.length;r++){const s=n[r];yi(s),e+=s.length}const t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){const i=n[r];t.set(i,s),s+=i.length}return t}let TE=class{};function qy(n){const e=r=>n().update(Gi(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function lG(n){const e=(r,s)=>n(s).update(Gi(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}function dp(n=32){if(lh&&typeof lh.getRandomValues=="function")return lh.getRandomValues(new Uint8Array(n));if(lh&&typeof lh.randomBytes=="function")return Uint8Array.from(lh.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const uG=BigInt(0),Rg=BigInt(1),fG=BigInt(2),hG=BigInt(7),dG=BigInt(256),pG=BigInt(113),J8=[],X8=[],e5=[];for(let n=0,e=Rg,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],J8.push(2*(5*r+t)),X8.push((n+1)*(n+2)/2%64);let s=uG;for(let i=0;i<7;i++)e=(e<<Rg^(e>>hG)*pG)%dG,e&fG&&(s^=Rg<<(Rg<<BigInt(i))-Rg);e5.push(s)}const t5=W8(e5,!0),gG=t5[0],mG=t5[1],kR=(n,e,t)=>t>32?eG(n,e,t):JV(n,e,t),BR=(n,e,t)=>t>32?tG(n,e,t):XV(n,e,t);function yG(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const l=(o+8)%10,f=(o+2)%10,h=t[f],p=t[f+1],g=kR(h,p,1)^t[l],y=BR(h,p,1)^t[l+1];for(let b=0;b<50;b+=10)n[o+b]^=g,n[o+b+1]^=y}let s=n[2],i=n[3];for(let o=0;o<24;o++){const l=X8[o],f=kR(s,i,l),h=BR(s,i,l),p=J8[o];s=n[p],i=n[p+1],n[p]=f,n[p+1]=h}for(let o=0;o<50;o+=10){for(let l=0;l<10;l++)t[l]=n[o+l];for(let l=0;l<10;l++)n[o+l]^=~t[(l+2)%10]&t[(l+4)%10]}n[0]^=gG[r],n[1]^=mG[r]}wi(t)}let wG=class n5 extends TE{constructor(e,t,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=i,$o(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=_m(this.state)}clone(){return this._cloneInto()}keccak(){Mc(this.state32),yG(this.state32,this.rounds),Mc(this.state32),this.posOut=0,this.pos=0}update(e){pl(this),e=Gi(e),yi(e);const{blockLen:t,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let l=0;l<o;l++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,(t&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){pl(this,!1),yi(e),this.finish();const t=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return $o(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(mS(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,wi(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new n5(t,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const bG=(n,e,t)=>qy(()=>new wG(e,n,t)),EG=bG(1,136,256/8);function vG(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),l=Number(t&i),f=r?4:0,h=r?0:4;n.setUint32(e+f,o,r),n.setUint32(e+h,l,r)}function AG(n,e,t){return n&e^~n&t}function CG(n,e,t){return n&e^n&t^e&t}let r5=class extends TE{constructor(e,t,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=eC(this.buffer)}update(e){pl(this),e=Gi(e),yi(e);const{view:t,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const l=Math.min(s-this.pos,i-o);if(l===s){const f=eC(e);for(;s<=i-o;o+=s)this.process(f,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){pl(this),mS(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,wi(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let g=o;g<s;g++)t[g]=0;vG(r,s-8,BigInt(this.length*8),i),this.process(r,0);const l=eC(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,p=this.get();if(h>p.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<h;g++)l.setUint32(4*g,p[g],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:i,destroyed:o,pos:l}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=l,s%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Ac=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),vr=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Ar=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),_G=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cc=new Uint32Array(64);let SG=class extends r5{constructor(e=32){super(64,e,8,!1),this.A=Ac[0]|0,this.B=Ac[1]|0,this.C=Ac[2]|0,this.D=Ac[3]|0,this.E=Ac[4]|0,this.F=Ac[5]|0,this.G=Ac[6]|0,this.H=Ac[7]|0}get(){const{A:e,B:t,C:r,D:s,E:i,F:o,G:l,H:f}=this;return[e,t,r,s,i,o,l,f]}set(e,t,r,s,i,o,l,f){this.A=e|0,this.B=t|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=l|0,this.H=f|0}process(e,t){for(let g=0;g<16;g++,t+=4)Cc[g]=e.getUint32(t,!1);for(let g=16;g<64;g++){const y=Cc[g-15],b=Cc[g-2],v=oa(y,7)^oa(y,18)^y>>>3,E=oa(b,17)^oa(b,19)^b>>>10;Cc[g]=E+Cc[g-7]+v+Cc[g-16]|0}let{A:r,B:s,C:i,D:o,E:l,F:f,G:h,H:p}=this;for(let g=0;g<64;g++){const y=oa(l,6)^oa(l,11)^oa(l,25),b=p+y+AG(l,f,h)+_G[g]+Cc[g]|0,v=(oa(r,2)^oa(r,13)^oa(r,22))+CG(r,s,i)|0;p=h,h=f,f=l,l=o+b|0,o=i,i=s,s=r,r=b+v|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,l=l+this.E|0,f=f+this.F|0,h=h+this.G|0,p=p+this.H|0,this.set(r,s,i,o,l,f,h,p)}roundClean(){wi(Cc)}destroy(){this.set(0,0,0,0,0,0,0,0),wi(this.buffer)}};const s5=W8(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),NG=s5[0],TG=s5[1],_c=new Uint32Array(80),Sc=new Uint32Array(80);let wS=class extends r5{constructor(e=64){super(128,e,16,!1),this.Ah=Ar[0]|0,this.Al=Ar[1]|0,this.Bh=Ar[2]|0,this.Bl=Ar[3]|0,this.Ch=Ar[4]|0,this.Cl=Ar[5]|0,this.Dh=Ar[6]|0,this.Dl=Ar[7]|0,this.Eh=Ar[8]|0,this.El=Ar[9]|0,this.Fh=Ar[10]|0,this.Fl=Ar[11]|0,this.Gh=Ar[12]|0,this.Gl=Ar[13]|0,this.Hh=Ar[14]|0,this.Hl=Ar[15]|0}get(){const{Ah:e,Al:t,Bh:r,Bl:s,Ch:i,Cl:o,Dh:l,Dl:f,Eh:h,El:p,Fh:g,Fl:y,Gh:b,Gl:v,Hh:E,Hl:A}=this;return[e,t,r,s,i,o,l,f,h,p,g,y,b,v,E,A]}set(e,t,r,s,i,o,l,f,h,p,g,y,b,v,E,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=l|0,this.Dl=f|0,this.Eh=h|0,this.El=p|0,this.Fh=g|0,this.Fl=y|0,this.Gh=b|0,this.Gl=v|0,this.Hh=E|0,this.Hl=A|0}process(e,t){for(let T=0;T<16;T++,t+=4)_c[T]=e.getUint32(t),Sc[T]=e.getUint32(t+=4);for(let T=16;T<80;T++){const k=_c[T-15]|0,R=Sc[T-15]|0,D=kc(k,R,1)^kc(k,R,8)^PR(k,R,7),F=Bc(k,R,1)^Bc(k,R,8)^DR(k,R,7),$=_c[T-2]|0,B=Sc[T-2]|0,q=kc($,B,19)^Kg($,B,61)^PR($,B,6),j=Bc($,B,19)^Wg($,B,61)^DR($,B,6),W=nG(F,j,Sc[T-7],Sc[T-16]),ie=rG(W,D,q,_c[T-7],_c[T-16]);_c[T]=ie|0,Sc[T]=W|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:l,Cl:f,Dh:h,Dl:p,Eh:g,El:y,Fh:b,Fl:v,Gh:E,Gl:A,Hh:S,Hl:O}=this;for(let T=0;T<80;T++){const k=kc(g,y,14)^kc(g,y,18)^Kg(g,y,41),R=Bc(g,y,14)^Bc(g,y,18)^Wg(g,y,41),D=g&b^~g&E,F=y&v^~y&A,$=sG(O,R,F,TG[T],Sc[T]),B=iG($,S,k,D,NG[T],_c[T]),q=$|0,j=kc(r,s,28)^Kg(r,s,34)^Kg(r,s,39),W=Bc(r,s,28)^Wg(r,s,34)^Wg(r,s,39),ie=r&i^r&l^i&l,ee=s&o^s&f^o&f;S=E|0,O=A|0,E=b|0,A=v|0,b=g|0,v=y|0,{h:g,l:y}=Ii(h|0,p|0,B|0,q|0),h=l|0,p=f|0,l=i|0,f=o|0,i=r|0,o=s|0;const x=hS(q,W,ee);r=dS(x,B,j,ie),s=x|0}({h:r,l:s}=Ii(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ii(this.Bh|0,this.Bl|0,i|0,o|0),{h:l,l:f}=Ii(this.Ch|0,this.Cl|0,l|0,f|0),{h,l:p}=Ii(this.Dh|0,this.Dl|0,h|0,p|0),{h:g,l:y}=Ii(this.Eh|0,this.El|0,g|0,y|0),{h:b,l:v}=Ii(this.Fh|0,this.Fl|0,b|0,v|0),{h:E,l:A}=Ii(this.Gh|0,this.Gl|0,E|0,A|0),{h:S,l:O}=Ii(this.Hh|0,this.Hl|0,S|0,O|0),this.set(r,s,i,o,l,f,h,p,g,y,b,v,E,A,S,O)}roundClean(){wi(_c,Sc)}destroy(){wi(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},OG=class extends wS{constructor(){super(48),this.Ah=vr[0]|0,this.Al=vr[1]|0,this.Bh=vr[2]|0,this.Bl=vr[3]|0,this.Ch=vr[4]|0,this.Cl=vr[5]|0,this.Dh=vr[6]|0,this.Dl=vr[7]|0,this.Eh=vr[8]|0,this.El=vr[9]|0,this.Fh=vr[10]|0,this.Fl=vr[11]|0,this.Gh=vr[12]|0,this.Gl=vr[13]|0,this.Hh=vr[14]|0,this.Hl=vr[15]|0}};const Cr=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class xG extends wS{constructor(){super(32),this.Ah=Cr[0]|0,this.Al=Cr[1]|0,this.Bh=Cr[2]|0,this.Bl=Cr[3]|0,this.Ch=Cr[4]|0,this.Cl=Cr[5]|0,this.Dh=Cr[6]|0,this.Dl=Cr[7]|0,this.Eh=Cr[8]|0,this.El=Cr[9]|0,this.Fh=Cr[10]|0,this.Fl=Cr[11]|0,this.Gh=Cr[12]|0,this.Gl=Cr[13]|0,this.Hh=Cr[14]|0,this.Hl=Cr[15]|0}}const OE=qy(()=>new SG),IG=qy(()=>new wS),RG=qy(()=>new OG),PG=qy(()=>new xG),DG=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Dn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Te=new Uint32Array(32);function Nc(n,e,t,r,s,i){const o=s[i],l=s[i+1];let f=Te[2*n],h=Te[2*n+1],p=Te[2*e],g=Te[2*e+1],y=Te[2*t],b=Te[2*t+1],v=Te[2*r],E=Te[2*r+1],A=hS(f,p,o);h=dS(A,h,g,l),f=A|0,{Dh:E,Dl:v}={Dh:E^h,Dl:v^f},{Dh:E,Dl:v}={Dh:QV(E,v),Dl:ZV(E)},{h:b,l:y}=Ii(b,y,E,v),{Bh:g,Bl:p}={Bh:g^b,Bl:p^y},{Bh:g,Bl:p}={Bh:kc(g,p,24),Bl:Bc(g,p,24)},Te[2*n]=f,Te[2*n+1]=h,Te[2*e]=p,Te[2*e+1]=g,Te[2*t]=y,Te[2*t+1]=b,Te[2*r]=v,Te[2*r+1]=E}function Tc(n,e,t,r,s,i){const o=s[i],l=s[i+1];let f=Te[2*n],h=Te[2*n+1],p=Te[2*e],g=Te[2*e+1],y=Te[2*t],b=Te[2*t+1],v=Te[2*r],E=Te[2*r+1],A=hS(f,p,o);h=dS(A,h,g,l),f=A|0,{Dh:E,Dl:v}={Dh:E^h,Dl:v^f},{Dh:E,Dl:v}={Dh:kc(E,v,16),Dl:Bc(E,v,16)},{h:b,l:y}=Ii(b,y,E,v),{Bh:g,Bl:p}={Bh:g^b,Bl:p^y},{Bh:g,Bl:p}={Bh:Kg(g,p,63),Bl:Wg(g,p,63)},Te[2*n]=f,Te[2*n+1]=h,Te[2*e]=p,Te[2*e+1]=g,Te[2*t]=y,Te[2*t+1]=b,Te[2*r]=v,Te[2*r+1]=E}function UG(n,e={},t,r,s){if($o(t),n<0||n>t)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:l}=e;if(i!==void 0&&(i.length<1||i.length>t))throw new Error("key length must be undefined or 1.."+t);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(l!==void 0&&l.length!==s)throw new Error("personalization must be undefined or "+s)}class kG extends TE{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,$o(e),$o(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=_m(this.buffer)}update(e){pl(this),e=Gi(e),yi(e);const{blockLen:t,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,l=e.buffer;for(let f=0;f<i;){this.pos===t&&(Mc(s),this.compress(s,0,!1),Mc(s),this.pos=0);const h=Math.min(t-this.pos,i-f),p=o+f;if(h===t&&!(p%4)&&f+h<i){const g=new Uint32Array(l,p,Math.floor((i-f)/4));Mc(g);for(let y=0;f+t<i;y+=s.length,f+=t)this.length+=t,this.compress(g,y,!1);Mc(g);continue}r.set(e.subarray(f,f+h),this.pos),this.pos+=h,this.length+=h,f+=h}return this}digestInto(e){pl(this),mS(e,this);const{pos:t,buffer32:r}=this;this.finished=!0,wi(this.buffer.subarray(t)),Mc(r),this.compress(r,0,!0),Mc(r);const s=_m(e);this.get().forEach((i,o)=>s[o]=uo(i))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){const{buffer:t,length:r,finished:s,destroyed:i,outputLen:o,pos:l}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(t),e.destroyed=i,e.finished=s,e.length=r,e.pos=l,e.outputLen=o,e}clone(){return this._cloneInto()}}class BG extends kG{constructor(e={}){const t=e.dkLen===void 0?64:e.dkLen;super(128,t),this.v0l=Dn[0]|0,this.v0h=Dn[1]|0,this.v1l=Dn[2]|0,this.v1h=Dn[3]|0,this.v2l=Dn[4]|0,this.v2h=Dn[5]|0,this.v3l=Dn[6]|0,this.v3h=Dn[7]|0,this.v4l=Dn[8]|0,this.v4h=Dn[9]|0,this.v5l=Dn[10]|0,this.v5h=Dn[11]|0,this.v6l=Dn[12]|0,this.v6h=Dn[13]|0,this.v7l=Dn[14]|0,this.v7h=Dn[15]|0,UG(t,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Gi(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Gi(i);const l=_m(i);this.v4l^=uo(l[0]),this.v4h^=uo(l[1]),this.v5l^=uo(l[2]),this.v5h^=uo(l[3])}if(s!==void 0){s=Gi(s);const l=_m(s);this.v6l^=uo(l[0]),this.v6h^=uo(l[1]),this.v7l^=uo(l[2]),this.v7h^=uo(l[3])}if(r!==void 0){const l=new Uint8Array(this.blockLen);l.set(r),this.update(l)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:s,v2l:i,v2h:o,v3l:l,v3h:f,v4l:h,v4h:p,v5l:g,v5h:y,v6l:b,v6h:v,v7l:E,v7h:A}=this;return[e,t,r,s,i,o,l,f,h,p,g,y,b,v,E,A]}set(e,t,r,s,i,o,l,f,h,p,g,y,b,v,E,A){this.v0l=e|0,this.v0h=t|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=l|0,this.v3h=f|0,this.v4l=h|0,this.v4h=p|0,this.v5l=g|0,this.v5h=y|0,this.v6l=b|0,this.v6h=v|0,this.v7l=E|0,this.v7h=A|0}compress(e,t,r){this.get().forEach((f,h)=>Te[h]=f),Te.set(Dn,16);let{h:s,l:i}=K8(BigInt(this.length));Te[24]=Dn[8]^i,Te[25]=Dn[9]^s,r&&(Te[28]=~Te[28],Te[29]=~Te[29]);let o=0;const l=DG;for(let f=0;f<12;f++)Nc(0,4,8,12,e,t+2*l[o++]),Tc(0,4,8,12,e,t+2*l[o++]),Nc(1,5,9,13,e,t+2*l[o++]),Tc(1,5,9,13,e,t+2*l[o++]),Nc(2,6,10,14,e,t+2*l[o++]),Tc(2,6,10,14,e,t+2*l[o++]),Nc(3,7,11,15,e,t+2*l[o++]),Tc(3,7,11,15,e,t+2*l[o++]),Nc(0,5,10,15,e,t+2*l[o++]),Tc(0,5,10,15,e,t+2*l[o++]),Nc(1,6,11,12,e,t+2*l[o++]),Tc(1,6,11,12,e,t+2*l[o++]),Nc(2,7,8,13,e,t+2*l[o++]),Tc(2,7,8,13,e,t+2*l[o++]),Nc(3,4,9,14,e,t+2*l[o++]),Tc(3,4,9,14,e,t+2*l[o++]);this.v0l^=Te[0]^Te[16],this.v0h^=Te[1]^Te[17],this.v1l^=Te[2]^Te[18],this.v1h^=Te[3]^Te[19],this.v2l^=Te[4]^Te[20],this.v2h^=Te[5]^Te[21],this.v3l^=Te[6]^Te[22],this.v3h^=Te[7]^Te[23],this.v4l^=Te[8]^Te[24],this.v4h^=Te[9]^Te[25],this.v5l^=Te[10]^Te[26],this.v5h^=Te[11]^Te[27],this.v6l^=Te[12]^Te[28],this.v6h^=Te[13]^Te[29],this.v7l^=Te[14]^Te[30],this.v7h^=Te[15]^Te[31],wi(Te)}destroy(){this.destroyed=!0,wi(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const MG=lG(n=>new BG(n)),LG="https://rpc.walletconnect.org/v1";function i5(n){const e=`Ethereum Signed Message:
${n.length}`,t=new TextEncoder().encode(e+n);return"0x"+Buffer.from(EG(t)).toString("hex")}async function $G(n,e,t,r,s,i){switch(t.t){case"eip191":return await FG(n,e,t.s);case"eip1271":return await HG(n,e,t.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}}async function FG(n,e,t){return(await Oz({hash:i5(e),signature:t})).toLowerCase()===n.toLowerCase()}async function HG(n,e,t,r,s,i){const o=qh(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const l="0x1626ba7e",f="0000000000000000000000000000000000000000000000000000000000000040",h=t.substring(2),p=(h.length/2).toString(16).padStart(64,"0"),g=(e.startsWith("0x")?e:i5(e)).substring(2),y=l+g+f+p+h,b=await fetch(`${i||LG}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:jG(),jsonrpc:"2.0",method:"eth_call",params:[{to:n,data:y},"latest"]})}),{result:v}=await b.json();return v?v.slice(0,l.length).toLowerCase()===l.toLowerCase():!1}catch(l){return console.error("isValidEip1271Signature: ",l),!1}}function jG(){return Date.now()+Math.floor(Math.random()*1e3)}function zG(n){const e=atob(n),t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);const r=t[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(t.length<s)throw new Error("Transaction data too short for claimed signature count");if(t.length<100)throw new Error("Transaction too short");const i=Buffer.from(n,"base64").slice(1,65);return Hy.encode(i)}function qG(n){const e=new Uint8Array(Buffer.from(n,"base64")),t=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(t.length+e.length);r.set(t),r.set(e,t.length);const s=MG(r,{dkLen:32});return Hy.encode(s)}function MR(n){const e=new Uint8Array(OE(VG(n)));return Hy.encode(e)}function VG(n){if(n instanceof Uint8Array)return n;if(Array.isArray(n))return new Uint8Array(n);if(typeof n=="object"&&n!=null&&n.data)return new Uint8Array(Object.values(n.data));if(typeof n=="object"&&n)return new Uint8Array(Object.values(n));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function LR(n){const e=Buffer.from(n,"base64"),t=hq(e).txn;if(!t)throw new Error("Invalid signed transaction: missing 'txn' field");const r=rq(t),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=PG(i);return Eq.encode(o).replace(/=+$/,"")}function tC(n){const e=[];let t=BigInt(n);for(;t>=BigInt(128);)e.push(Number(t&BigInt(127)|BigInt(128))),t>>=BigInt(7);return e.push(Number(t)),Buffer.from(e)}function GG(n){const e=Buffer.from(n.signed.bodyBytes,"base64"),t=Buffer.from(n.signed.authInfoBytes,"base64"),r=Buffer.from(n.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(tC(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(tC(t.length)),s.push(t),s.push(Buffer.from([26])),s.push(tC(r.length)),s.push(r);const i=Buffer.concat(s),o=OE(i);return Buffer.from(o).toString("hex").toUpperCase()}var KG=Object.defineProperty,WG=Object.defineProperties,YG=Object.getOwnPropertyDescriptors,$R=Object.getOwnPropertySymbols,QG=Object.prototype.hasOwnProperty,ZG=Object.prototype.propertyIsEnumerable,FR=(n,e,t)=>e in n?KG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,JG=(n,e)=>{for(var t in e||(e={}))QG.call(e,t)&&FR(n,t,e[t]);if($R)for(var t of $R(e))ZG.call(e,t)&&FR(n,t,e[t]);return n},XG=(n,e)=>WG(n,YG(e));const eK="did:pkh:",bS=n=>n==null?void 0:n.split(":"),tK=n=>{const e=n&&bS(n);if(e)return n.includes(eK)?e[3]:e[1]},A_=n=>{const e=n&&bS(n);if(e)return e[2]+":"+e[3]},Lb=n=>{const e=n&&bS(n);if(e)return e.pop()};async function HR(n){const{cacao:e,projectId:t}=n,{s:r,p:s}=e,i=a5(s,s.iss),o=Lb(s.iss);return await $G(o,i,r,A_(s.iss),t)}const a5=(n,e)=>{const t=`${n.domain} wants you to sign in with your Ethereum account:`,r=Lb(e);if(!n.aud&&!n.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=n.statement||void 0;const i=`URI: ${n.aud||n.uri}`,o=`Version: ${n.version}`,l=`Chain ID: ${tK(e)}`,f=`Nonce: ${n.nonce}`,h=`Issued At: ${n.iat}`,p=n.exp?`Expiration Time: ${n.exp}`:void 0,g=n.nbf?`Not Before: ${n.nbf}`:void 0,y=n.requestId?`Request ID: ${n.requestId}`:void 0,b=n.resources?`Resources:${n.resources.map(E=>`
- ${E}`).join("")}`:void 0,v=ob(n.resources);if(v){const E=Nm(v);s=uK(s,E)}return[t,r,"",s,"",i,o,l,f,h,p,g,y,b].filter(E=>E!=null).join(`
`)};function nK(n){return Buffer.from(JSON.stringify(n)).toString("base64")}function rK(n){return JSON.parse(Buffer.from(n,"base64").toString("utf-8"))}function Zu(n){if(!n)throw new Error("No recap provided, value is undefined");if(!n.att)throw new Error("No `att` property found");const e=Object.keys(n.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{const r=n.att[t];if(Array.isArray(r))throw new Error(`Resource must be an object: ${t}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function sK(n,e,t,r={}){return t==null||t.sort((s,i)=>s.localeCompare(i)),{att:{[n]:iK(e,t,r)}}}function iK(n,e,t={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${n}/${s}`]:[t]}));return Object.assign({},...r)}function o5(n){return Zu(n),`urn:recap:${nK(n).replace(/=/g,"")}`}function Nm(n){const e=rK(n.replace("urn:recap:",""));return Zu(e),e}function aK(n,e,t){const r=sK(n,e,t);return o5(r)}function oK(n){return n&&n.includes("urn:recap:")}function cK(n,e){const t=Nm(n),r=Nm(e),s=lK(t,r);return o5(s)}function lK(n,e){Zu(n),Zu(e);const t=Object.keys(n.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return t.forEach(s=>{var i,o;Object.keys(((i=n.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((l,f)=>l.localeCompare(f)).forEach(l=>{var f,h;r.att[s]=XG(JG({},r.att[s]),{[l]:((f=n.att[s])==null?void 0:f[l])||((h=e.att[s])==null?void 0:h[l])})})}),r}function uK(n="",e){Zu(e);const t="I further authorize the stated URI to perform the following actions on my behalf: ";if(n.includes(t))return n;const r=[];let s=0;Object.keys(e.att).forEach(l=>{const f=Object.keys(e.att[l]).map(g=>({ability:g.split("/")[0],action:g.split("/")[1]}));f.sort((g,y)=>g.action.localeCompare(y.action));const h={};f.forEach(g=>{h[g.ability]||(h[g.ability]=[]),h[g.ability].push(g.action)});const p=Object.keys(h).map(g=>(s++,`(${s}) '${g}': '${h[g].join("', '")}' for '${l}'.`));r.push(p.join(", ").replace(".,","."))});const i=r.join(" "),o=`${t}${i}`;return`${n?n+" ":""}${o}`}function jR(n){var e;const t=Nm(n);Zu(t);const r=(e=t.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function zR(n){const e=Nm(n);Zu(e);const t=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&t.push(s[0].chains)})}),[...new Set(t.flat())]}function ob(n){if(!n)return;const e=n==null?void 0:n[n.length-1];return oK(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function c5(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function C_(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function nC(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function hs(n,...e){if(!c5(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function qR(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function fK(n,e){hs(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function ol(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function qd(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function hK(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}const dK=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function pK(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function __(n){if(typeof n=="string")n=pK(n);else if(c5(n))n=S_(n);else throw new Error("Uint8Array expected, got "+typeof n);return n}function gK(n,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(n,e)}function mK(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}const yK=(n,e)=>{function t(r,...s){if(hs(r),!dK)throw new Error("Non little-endian hardware is not yet supported");if(n.nonceLength!==void 0){const h=s[0];if(!h)throw new Error("nonce / iv required");n.varSizeNonce?hs(h):hs(h,n.nonceLength)}const i=n.tagLength;i&&s[1]!==void 0&&hs(s[1]);const o=e(r,...s),l=(h,p)=>{if(p!==void 0){if(h!==2)throw new Error("cipher output not supported");hs(p)}};let f=!1;return{encrypt(h,p){if(f)throw new Error("cannot encrypt() twice with same key + nonce");return f=!0,hs(h),l(o.encrypt.length,p),o.encrypt(h,p)},decrypt(h,p){if(hs(h),i&&h.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return l(o.decrypt.length,p),o.decrypt(h,p)}}}return Object.assign(t,n),t};function VR(n,e,t=!0){if(e===void 0)return new Uint8Array(n);if(e.length!==n)throw new Error("invalid output length, expected "+n+", got: "+e.length);if(t&&!bK(e))throw new Error("invalid output, must be aligned");return e}function GR(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),l=Number(t&i);n.setUint32(e+4,o,r),n.setUint32(e+0,l,r)}function wK(n,e,t){C_(t);const r=new Uint8Array(16),s=hK(r);return GR(s,0,BigInt(e),t),GR(s,8,BigInt(n),t),r}function bK(n){return n.byteOffset%4===0}function S_(n){return Uint8Array.from(n)}const l5=n=>Uint8Array.from(n.split("").map(e=>e.charCodeAt(0))),EK=l5("expand 16-byte k"),vK=l5("expand 32-byte k"),AK=ol(EK),CK=ol(vK);function Nt(n,e){return n<<e|n>>>32-e}function N_(n){return n.byteOffset%4===0}const Iw=64,_K=16,u5=2**32-1,KR=new Uint32Array;function SK(n,e,t,r,s,i,o,l){const f=s.length,h=new Uint8Array(Iw),p=ol(h),g=N_(s)&&N_(i),y=g?ol(s):KR,b=g?ol(i):KR;for(let v=0;v<f;o++){if(n(e,t,r,p,o,l),o>=u5)throw new Error("arx: counter overflow");const E=Math.min(Iw,f-v);if(g&&E===Iw){const A=v/4;if(v%4!==0)throw new Error("arx: invalid block position");for(let S=0,O;S<_K;S++)O=A+S,b[O]=y[O]^p[S];v+=Iw;continue}for(let A=0,S;A<E;A++)S=v+A,i[S]=s[S]^h[A];v+=E}}function NK(n,e){const{allowShortKeys:t,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=gK({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof n!="function")throw new Error("core must be a function");return nC(s),nC(o),C_(i),C_(t),(l,f,h,p,g=0)=>{hs(l),hs(f),hs(h);const y=h.length;if(p===void 0&&(p=new Uint8Array(y)),hs(p),nC(g),g<0||g>=u5)throw new Error("arx: counter overflow");if(p.length<y)throw new Error(`arx: output (${p.length}) is shorter than data (${y})`);const b=[];let v=l.length,E,A;if(v===32)b.push(E=S_(l)),A=CK;else if(v===16&&t)E=new Uint8Array(32),E.set(l),E.set(l,16),A=AK,b.push(E);else throw new Error(`arx: invalid 32-byte key, got length=${v}`);N_(f)||b.push(f=S_(f));const S=ol(E);if(r){if(f.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(A,S,ol(f.subarray(0,16)),S),f=f.subarray(16)}const O=16-s;if(O!==f.length)throw new Error(`arx: nonce must be ${O} or 16 bytes`);if(O!==12){const k=new Uint8Array(12);k.set(f,i?0:12-f.length),f=k,b.push(f)}const T=ol(f);return SK(n,A,S,T,h,p,g,o),qd(...b),p}}const ar=(n,e)=>n[e++]&255|(n[e++]&255)<<8;class TK{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=__(e),hs(e,32);const t=ar(e,0),r=ar(e,2),s=ar(e,4),i=ar(e,6),o=ar(e,8),l=ar(e,10),f=ar(e,12),h=ar(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|l<<2)&8191,this.r[7]=(l>>>11|f<<5)&8065,this.r[8]=(f>>>8|h<<8)&8191,this.r[9]=h>>>5&127;for(let p=0;p<8;p++)this.pad[p]=ar(e,16+2*p)}process(e,t,r=!1){const s=r?0:2048,{h:i,r:o}=this,l=o[0],f=o[1],h=o[2],p=o[3],g=o[4],y=o[5],b=o[6],v=o[7],E=o[8],A=o[9],S=ar(e,t+0),O=ar(e,t+2),T=ar(e,t+4),k=ar(e,t+6),R=ar(e,t+8),D=ar(e,t+10),F=ar(e,t+12),$=ar(e,t+14);let B=i[0]+(S&8191),q=i[1]+((S>>>13|O<<3)&8191),j=i[2]+((O>>>10|T<<6)&8191),W=i[3]+((T>>>7|k<<9)&8191),ie=i[4]+((k>>>4|R<<12)&8191),ee=i[5]+(R>>>1&8191),x=i[6]+((R>>>14|D<<2)&8191),_=i[7]+((D>>>11|F<<5)&8191),M=i[8]+((F>>>8|$<<8)&8191),V=i[9]+($>>>5|s),K=0,I=K+B*l+q*(5*A)+j*(5*E)+W*(5*v)+ie*(5*b);K=I>>>13,I&=8191,I+=ee*(5*y)+x*(5*g)+_*(5*p)+M*(5*h)+V*(5*f),K+=I>>>13,I&=8191;let G=K+B*f+q*l+j*(5*A)+W*(5*E)+ie*(5*v);K=G>>>13,G&=8191,G+=ee*(5*b)+x*(5*y)+_*(5*g)+M*(5*p)+V*(5*h),K+=G>>>13,G&=8191;let X=K+B*h+q*f+j*l+W*(5*A)+ie*(5*E);K=X>>>13,X&=8191,X+=ee*(5*v)+x*(5*b)+_*(5*y)+M*(5*g)+V*(5*p),K+=X>>>13,X&=8191;let re=K+B*p+q*h+j*f+W*l+ie*(5*A);K=re>>>13,re&=8191,re+=ee*(5*E)+x*(5*v)+_*(5*b)+M*(5*y)+V*(5*g),K+=re>>>13,re&=8191;let le=K+B*g+q*p+j*h+W*f+ie*l;K=le>>>13,le&=8191,le+=ee*(5*A)+x*(5*E)+_*(5*v)+M*(5*b)+V*(5*y),K+=le>>>13,le&=8191;let ge=K+B*y+q*g+j*p+W*h+ie*f;K=ge>>>13,ge&=8191,ge+=ee*l+x*(5*A)+_*(5*E)+M*(5*v)+V*(5*b),K+=ge>>>13,ge&=8191;let me=K+B*b+q*y+j*g+W*p+ie*h;K=me>>>13,me&=8191,me+=ee*f+x*l+_*(5*A)+M*(5*E)+V*(5*v),K+=me>>>13,me&=8191;let ze=K+B*v+q*b+j*y+W*g+ie*p;K=ze>>>13,ze&=8191,ze+=ee*h+x*f+_*l+M*(5*A)+V*(5*E),K+=ze>>>13,ze&=8191;let $e=K+B*E+q*v+j*b+W*y+ie*g;K=$e>>>13,$e&=8191,$e+=ee*p+x*h+_*f+M*l+V*(5*A),K+=$e>>>13,$e&=8191;let qe=K+B*A+q*E+j*v+W*b+ie*y;K=qe>>>13,qe&=8191,qe+=ee*g+x*p+_*h+M*f+V*l,K+=qe>>>13,qe&=8191,K=(K<<2)+K|0,K=K+I|0,I=K&8191,K=K>>>13,G+=K,i[0]=I,i[1]=G,i[2]=X,i[3]=re,i[4]=le,i[5]=ge,i[6]=me,i[7]=ze,i[8]=$e,i[9]=qe}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let l=2;l<10;l++)e[l]+=s,s=e[l]>>>13,e[l]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let l=1;l<10;l++)r[l]=e[l]+s,s=r[l]>>>13,r[l]&=8191;r[9]-=8192;let i=(s^1)-1;for(let l=0;l<10;l++)r[l]&=i;i=~i;for(let l=0;l<10;l++)e[l]=e[l]&i|r[l];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+t[0];e[0]=o&65535;for(let l=1;l<8;l++)o=(e[l]+t[l]|0)+(o>>>16)|0,e[l]=o&65535;qd(r)}update(e){qR(this),e=__(e),hs(e);const{buffer:t,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}t.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){qd(this.h,this.r,this.buffer,this.pad)}digestInto(e){qR(this),fK(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:s}=this;if(s){for(t[s++]=1;s<16;s++)t[s]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}function OK(n){const e=(r,s)=>n(s).update(__(r)).digest(),t=n(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}const xK=OK(n=>new TK(n));function IK(n,e,t,r,s,i=20){let o=n[0],l=n[1],f=n[2],h=n[3],p=e[0],g=e[1],y=e[2],b=e[3],v=e[4],E=e[5],A=e[6],S=e[7],O=s,T=t[0],k=t[1],R=t[2],D=o,F=l,$=f,B=h,q=p,j=g,W=y,ie=b,ee=v,x=E,_=A,M=S,V=O,K=T,I=k,G=R;for(let re=0;re<i;re+=2)D=D+q|0,V=Nt(V^D,16),ee=ee+V|0,q=Nt(q^ee,12),D=D+q|0,V=Nt(V^D,8),ee=ee+V|0,q=Nt(q^ee,7),F=F+j|0,K=Nt(K^F,16),x=x+K|0,j=Nt(j^x,12),F=F+j|0,K=Nt(K^F,8),x=x+K|0,j=Nt(j^x,7),$=$+W|0,I=Nt(I^$,16),_=_+I|0,W=Nt(W^_,12),$=$+W|0,I=Nt(I^$,8),_=_+I|0,W=Nt(W^_,7),B=B+ie|0,G=Nt(G^B,16),M=M+G|0,ie=Nt(ie^M,12),B=B+ie|0,G=Nt(G^B,8),M=M+G|0,ie=Nt(ie^M,7),D=D+j|0,G=Nt(G^D,16),_=_+G|0,j=Nt(j^_,12),D=D+j|0,G=Nt(G^D,8),_=_+G|0,j=Nt(j^_,7),F=F+W|0,V=Nt(V^F,16),M=M+V|0,W=Nt(W^M,12),F=F+W|0,V=Nt(V^F,8),M=M+V|0,W=Nt(W^M,7),$=$+ie|0,K=Nt(K^$,16),ee=ee+K|0,ie=Nt(ie^ee,12),$=$+ie|0,K=Nt(K^$,8),ee=ee+K|0,ie=Nt(ie^ee,7),B=B+q|0,I=Nt(I^B,16),x=x+I|0,q=Nt(q^x,12),B=B+q|0,I=Nt(I^B,8),x=x+I|0,q=Nt(q^x,7);let X=0;r[X++]=o+D|0,r[X++]=l+F|0,r[X++]=f+$|0,r[X++]=h+B|0,r[X++]=p+q|0,r[X++]=g+j|0,r[X++]=y+W|0,r[X++]=b+ie|0,r[X++]=v+ee|0,r[X++]=E+x|0,r[X++]=A+_|0,r[X++]=S+M|0,r[X++]=O+V|0,r[X++]=T+K|0,r[X++]=k+I|0,r[X++]=R+G|0}const RK=NK(IK,{counterRight:!1,counterLength:4,allowShortKeys:!1}),PK=new Uint8Array(16),WR=(n,e)=>{n.update(e);const t=e.length%16;t&&n.update(PK.subarray(t))},DK=new Uint8Array(32);function YR(n,e,t,r,s){const i=n(e,t,DK),o=xK.create(i);s&&WR(o,s),WR(o,r);const l=wK(r.length,s?s.length:0,!0);o.update(l);const f=o.digest();return qd(i,l),f}const UK=n=>(e,t,r)=>({encrypt(s,i){const o=s.length;i=VR(o+16,i,!1),i.set(s);const l=i.subarray(0,-16);n(e,t,l,l,1);const f=YR(n,e,t,l,r);return i.set(f,o),qd(f),i},decrypt(s,i){i=VR(s.length-16,i,!1);const o=s.subarray(0,-16),l=s.subarray(-16),f=YR(n,e,t,o,r);if(!mK(l,f))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),n(e,t,i,i,1),qd(f),i}}),f5=yK({blockSize:64,nonceLength:12,tagLength:16},UK(RK));let h5=class extends TE{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,gS(e);const r=Gi(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),wi(i)}update(e){return pl(this),this.iHash.update(e),this}digestInto(e){pl(this),yi(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:l}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const xE=(n,e,t)=>new h5(n,e).update(t).digest();xE.create=(n,e)=>new h5(n,e);function kK(n,e,t){return gS(n),t===void 0&&(t=new Uint8Array(n.outputLen)),xE(n,Gi(t),Gi(e))}const rC=Uint8Array.from([0]),QR=Uint8Array.of();function BK(n,e,t,r=32){gS(n),$o(r);const s=n.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);t===void 0&&(t=QR);const o=new Uint8Array(i*s),l=xE.create(n,e),f=l._cloneInto(),h=new Uint8Array(l.outputLen);for(let p=0;p<i;p++)rC[0]=p+1,f.update(p===0?QR:h).update(t).update(rC).digestInto(h),o.set(h,s*p),l._cloneInto(f);return l.destroy(),f.destroy(),wi(h,rC),o.slice(0,r)}const MK=(n,e,t,r,s)=>BK(n,kK(n,e,t),r,s),IE=OE,ES=BigInt(0),T_=BigInt(1);function $b(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}function Rw(n){const e=n.toString(16);return e.length&1?"0"+e:e}function d5(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?ES:BigInt("0x"+n)}function RE(n){return d5(Sm(n))}function Fb(n){return yi(n),d5(Sm(Uint8Array.from(n).reverse()))}function vS(n,e){return yS(n.toString(16).padStart(e*2,"0"))}function AS(n,e){return vS(n,e).reverse()}function fs(n,e,t){let r;if(typeof e=="string")try{r=yS(e)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(pS(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof t=="number"&&s!==t)throw new Error(n+" of length "+t+" expected, got "+s);return r}const sC=n=>typeof n=="bigint"&&ES<=n;function LK(n,e,t){return sC(n)&&sC(e)&&sC(t)&&e<=n&&n<t}function O_(n,e,t,r){if(!LK(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function $K(n){let e;for(e=0;n>ES;n>>=T_,e+=1);return e}const PE=n=>(T_<<BigInt(n))-T_;function FK(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const r=y=>new Uint8Array(y),s=y=>Uint8Array.of(y);let i=r(n),o=r(n),l=0;const f=()=>{i.fill(1),o.fill(0),l=0},h=(...y)=>t(o,i,...y),p=(y=r(0))=>{o=h(s(0),y),i=h(),y.length!==0&&(o=h(s(1),y),i=h())},g=()=>{if(l++>=1e3)throw new Error("drbg: tried 1000 values");let y=0;const b=[];for(;y<e;){i=h();const v=i.slice();b.push(v),y+=i.length}return uu(...b)};return(y,b)=>{f(),p(y);let v;for(;!(v=b(g()));)p();return f(),v}}function DE(n,e,t={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(s,i,o){const l=n[s];if(o&&l===void 0)return;const f=typeof l;if(f!==i||l===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${f}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(t).forEach(([s,i])=>r(s,i,!0))}function ZR(n){const e=new WeakMap;return(t,...r)=>{const s=e.get(t);if(s!==void 0)return s;const i=n(t,...r);return e.set(t,i),i}}const gs=BigInt(0),Vr=BigInt(1),fu=BigInt(2),HK=BigInt(3),p5=BigInt(4),g5=BigInt(5),m5=BigInt(8);function gi(n,e){const t=n%e;return t>=gs?t:e+t}function xi(n,e,t){let r=n;for(;e-- >gs;)r*=r,r%=t;return r}function JR(n,e){if(n===gs)throw new Error("invert: expected non-zero number");if(e<=gs)throw new Error("invert: expected positive modulus, got "+e);let t=gi(n,e),r=e,s=gs,i=Vr;for(;t!==gs;){const o=r/t,l=r%t,f=s-i*o;r=t,t=l,s=i,i=f}if(r!==Vr)throw new Error("invert: does not exist");return gi(s,e)}function y5(n,e){const t=(n.ORDER+Vr)/p5,r=n.pow(e,t);if(!n.eql(n.sqr(r),e))throw new Error("Cannot find square root");return r}function jK(n,e){const t=(n.ORDER-g5)/m5,r=n.mul(e,fu),s=n.pow(r,t),i=n.mul(e,s),o=n.mul(n.mul(i,fu),s),l=n.mul(i,n.sub(o,n.ONE));if(!n.eql(n.sqr(l),e))throw new Error("Cannot find square root");return l}function zK(n){if(n<BigInt(3))throw new Error("sqrt is not defined for small field");let e=n-Vr,t=0;for(;e%fu===gs;)e/=fu,t++;let r=fu;const s=pp(n);for(;XR(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return y5;let i=s.pow(r,e);const o=(e+Vr)/fu;return function(l,f){if(l.is0(f))return f;if(XR(l,f)!==1)throw new Error("Cannot find square root");let h=t,p=l.mul(l.ONE,i),g=l.pow(f,e),y=l.pow(f,o);for(;!l.eql(g,l.ONE);){if(l.is0(g))return l.ZERO;let b=1,v=l.sqr(g);for(;!l.eql(v,l.ONE);)if(b++,v=l.sqr(v),b===h)throw new Error("Cannot find square root");const E=Vr<<BigInt(h-b-1),A=l.pow(p,E);h=b,p=l.sqr(A),g=l.mul(g,p),y=l.mul(y,A)}return y}}function qK(n){return n%p5===HK?y5:n%m5===g5?jK:zK(n)}const VK=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function GK(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=VK.reduce((r,s)=>(r[s]="function",r),e);return DE(n,t),n}function KK(n,e,t){if(t<gs)throw new Error("invalid exponent, negatives unsupported");if(t===gs)return n.ONE;if(t===Vr)return e;let r=n.ONE,s=e;for(;t>gs;)t&Vr&&(r=n.mul(r,s)),s=n.sqr(s),t>>=Vr;return r}function w5(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),s=e.reduce((o,l,f)=>n.is0(l)?o:(r[f]=o,n.mul(o,l)),n.ONE),i=n.inv(s);return e.reduceRight((o,l,f)=>n.is0(l)?o:(r[f]=n.mul(o,r[f]),n.mul(o,l)),i),r}function XR(n,e){const t=(n.ORDER-Vr)/fu,r=n.pow(e,t),s=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function WK(n,e){e!==void 0&&$o(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function pp(n,e,t=!1,r={}){if(n<=gs)throw new Error("invalid field: expected ORDER > 0, got "+n);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");const p=e;p.BITS&&(s=p.BITS),p.sqrt&&(i=p.sqrt),typeof p.isLE=="boolean"&&(t=p.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:l}=WK(n,s);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let f;const h=Object.freeze({ORDER:n,isLE:t,BITS:o,BYTES:l,MASK:PE(o),ZERO:gs,ONE:Vr,create:p=>gi(p,n),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return gs<=p&&p<n},is0:p=>p===gs,isValidNot0:p=>!h.is0(p)&&h.isValid(p),isOdd:p=>(p&Vr)===Vr,neg:p=>gi(-p,n),eql:(p,g)=>p===g,sqr:p=>gi(p*p,n),add:(p,g)=>gi(p+g,n),sub:(p,g)=>gi(p-g,n),mul:(p,g)=>gi(p*g,n),pow:(p,g)=>KK(h,p,g),div:(p,g)=>gi(p*JR(g,n),n),sqrN:p=>p*p,addN:(p,g)=>p+g,subN:(p,g)=>p-g,mulN:(p,g)=>p*g,inv:p=>JR(p,n),sqrt:i||(p=>(f||(f=qK(n)),f(h,p))),toBytes:p=>t?AS(p,l):vS(p,l),fromBytes:p=>{if(p.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+p.length);return t?Fb(p):RE(p)},invertBatch:p=>w5(h,p),cmov:(p,g,y)=>y?g:p});return Object.freeze(h)}function b5(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function E5(n){const e=b5(n);return e+Math.ceil(e/2)}function YK(n,e,t=!1){const r=n.length,s=b5(e),i=E5(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=t?Fb(n):RE(n),l=gi(o,e-Vr)+Vr;return t?AS(l,s):vS(l,s)}const Vd=BigInt(0),hu=BigInt(1);function om(n,e){const t=e.negate();return n?t:e}function QK(n,e,t){const r=i=>i.pz,s=w5(n.Fp,t.map(r));return t.map((i,o)=>i.toAffine(s[o])).map(n.fromAffine)}function v5(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function iC(n,e){v5(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),s=2**n,i=PE(n),o=BigInt(n);return{windows:t,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function e3(n,e,t){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=t;let l=Number(n&s),f=n>>o;l>r&&(l-=i,f+=hu);const h=e*r,p=h+Math.abs(l)-1,g=l===0,y=l<0,b=e%2!==0;return{nextN:f,offset:p,isZero:g,isNeg:y,isNegF:b,offsetF:h}}function ZK(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function JK(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const aC=new WeakMap,A5=new WeakMap;function oC(n){return A5.get(n)||1}function t3(n){if(n!==Vd)throw new Error("invalid wNAF")}function XK(n,e){return{constTimeNegate:om,hasPrecomputes(t){return oC(t)!==1},unsafeLadder(t,r,s=n.ZERO){let i=t;for(;r>Vd;)r&hu&&(s=s.add(i)),i=i.double(),r>>=hu;return s},precomputeWindow(t,r){const{windows:s,windowSize:i}=iC(r,e),o=[];let l=t,f=l;for(let h=0;h<s;h++){f=l,o.push(f);for(let p=1;p<i;p++)f=f.add(l),o.push(f);l=f.double()}return o},wNAF(t,r,s){let i=n.ZERO,o=n.BASE;const l=iC(t,e);for(let f=0;f<l.windows;f++){const{nextN:h,offset:p,isZero:g,isNeg:y,isNegF:b,offsetF:v}=e3(s,f,l);s=h,g?o=o.add(om(b,r[v])):i=i.add(om(y,r[p]))}return t3(s),{p:i,f:o}},wNAFUnsafe(t,r,s,i=n.ZERO){const o=iC(t,e);for(let l=0;l<o.windows&&s!==Vd;l++){const{nextN:f,offset:h,isZero:p,isNeg:g}=e3(s,l,o);if(s=f,!p){const y=r[h];i=i.add(g?y.negate():y)}}return t3(s),i},getPrecomputes(t,r,s){let i=aC.get(r);return i||(i=this.precomputeWindow(r,t),t!==1&&(typeof s=="function"&&(i=s(i)),aC.set(r,i))),i},wNAFCached(t,r,s){const i=oC(t);return this.wNAF(i,this.getPrecomputes(i,t,s),r)},wNAFCachedUnsafe(t,r,s,i){const o=oC(t);return o===1?this.unsafeLadder(t,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,s),r,i)},setWindowSize(t,r){v5(r,e),A5.set(t,r),aC.delete(t)}}}function eW(n,e,t,r){let s=e,i=n.ZERO,o=n.ZERO;for(;t>Vd||r>Vd;)t&hu&&(i=i.add(s)),r&hu&&(o=o.add(s)),s=s.double(),t>>=hu,r>>=hu;return{p1:i,p2:o}}function tW(n,e,t,r){ZK(t,n),JK(r,e);const s=t.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,l=$K(BigInt(s));let f=1;l>12?f=l-3:l>4?f=l-2:l>0&&(f=2);const h=PE(f),p=new Array(Number(h)+1).fill(o),g=Math.floor((e.BITS-1)/f)*f;let y=o;for(let b=g;b>=0;b-=f){p.fill(o);for(let E=0;E<i;E++){const A=r[E],S=Number(A>>BigInt(b)&h);p[S]=p[S].add(t[E])}let v=o;for(let E=p.length-1,A=o;E>0;E--)A=A.add(p[E]),v=v.add(A);if(y=y.add(v),b!==0)for(let E=0;E<f;E++)y=y.double()}return y}function n3(n,e){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return GK(e),e}else return pp(n)}function nW(n,e,t={}){if(!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const o of["p","n","h"]){const l=e[o];if(!(typeof l=="bigint"&&l>Vd))throw new Error(`CURVE.${o} must be positive bigint`)}const r=n3(e.p,t.Fp),s=n3(e.n,t.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Pg=BigInt(0),uh=BigInt(1),Pw=BigInt(2);function rW(n){return DE(n,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...n})}function sW(n){const e=rW(n),{P:t,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,l=r==="x25519";if(!l&&r!=="x448")throw new Error("invalid type");const f=o||dp,h=l?255:448,p=l?32:56,g=BigInt(l?9:5),y=BigInt(l?121665:39081),b=l?Pw**BigInt(254):Pw**BigInt(447),v=l?BigInt(8)*Pw**BigInt(251)-uh:BigInt(4)*Pw**BigInt(445)-uh,E=b+v+uh,A=B=>gi(B,t),S=O(g);function O(B){return AS(A(B),p)}function T(B){const q=fs("u coordinate",B,p);return l&&(q[31]&=127),A(Fb(q))}function k(B){return Fb(s(fs("scalar",B,p)))}function R(B,q){const j=$(T(q),k(B));if(j===Pg)throw new Error("invalid private or public key received");return O(j)}function D(B){return R(B,S)}function F(B,q,j){const W=A(B*(q-j));return q=A(q-W),j=A(j+W),{x_2:q,x_3:j}}function $(B,q){O_("u",B,Pg,t),O_("scalar",q,b,E);const j=q,W=B;let ie=uh,ee=Pg,x=B,_=uh,M=Pg;for(let K=BigInt(h-1);K>=Pg;K--){const I=j>>K&uh;M^=I,{x_2:ie,x_3:x}=F(M,ie,x),{x_2:ee,x_3:_}=F(M,ee,_),M=I;const G=ie+ee,X=A(G*G),re=ie-ee,le=A(re*re),ge=X-le,me=x+_,ze=x-_,$e=A(ze*G),qe=A(me*re),Ct=$e+qe,rn=$e-qe;x=A(Ct*Ct),_=A(W*A(rn*rn)),ie=A(X*le),ee=A(ge*(X+A(y*ge)))}({x_2:ie,x_3:x}=F(M,ie,x)),{x_2:ee,x_3:_}=F(M,ee,_);const V=i(ee);return A(ie*V)}return{scalarMult:R,scalarMultBase:D,getSharedSecret:(B,q)=>R(B,q),getPublicKey:B=>D(B),utils:{randomPrivateKey:()=>f(p)},GuBytes:S.slice()}}BigInt(0);const iW=BigInt(1),r3=BigInt(2),aW=BigInt(3),oW=BigInt(5);BigInt(8);const C5={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function cW(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),s=BigInt(80),i=C5.p,o=n*n%i*n%i,l=xi(o,r3,i)*o%i,f=xi(l,iW,i)*n%i,h=xi(f,oW,i)*f%i,p=xi(h,e,i)*h%i,g=xi(p,t,i)*p%i,y=xi(g,r,i)*g%i,b=xi(y,s,i)*y%i,v=xi(b,s,i)*y%i,E=xi(v,e,i)*h%i;return{pow_p_5_8:xi(E,r3,i)*n%i,b2:o}}function lW(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const x_=(()=>{const n=C5.p;return sW({P:n,type:"x25519",powPminus2:e=>{const{pow_p_5_8:t,b2:r}=cW(e);return gi(xi(t,aW,n)*r,n)},adjustScalarBytes:lW})})();function s3(n){n.lowS!==void 0&&$b("lowS",n.lowS),n.prehash!==void 0&&$b("prehash",n.prehash)}class uW extends Error{constructor(e=""){super(e)}}const mo={Err:uW,_tlv:{encode:(n,e)=>{const{Err:t}=mo;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,s=Rw(r);if(s.length/2&128)throw new t("tlv.encode: long form length too big");const i=r>127?Rw(s.length/2|128):"";return Rw(n)+i+s+e},decode(n,e){const{Err:t}=mo;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const f=s&127;if(!f)throw new t("tlv.decode(long): indefinite length not supported");if(f>4)throw new t("tlv.decode(long): byte length is too big");const h=e.subarray(r,r+f);if(h.length!==f)throw new t("tlv.decode: length bytes not complete");if(h[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const p of h)o=o<<8|p;if(r+=f,o<128)throw new t("tlv.decode(long): not minimal encoding")}const l=e.subarray(r,r+o);if(l.length!==o)throw new t("tlv.decode: wrong value length");return{v:l,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=mo;if(n<cm)throw new e("integer: negative integers are not allowed");let t=Rw(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=mo;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return RE(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=mo,s=fs("signature",n),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:l,l:f}=r.decode(2,i),{v:h,l:p}=r.decode(2,f);if(p.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(l),s:t.decode(h)}},hexFromSig(n){const{_tlv:e,_int:t}=mo,r=e.encode(2,t.encode(n.r)),s=e.encode(2,t.encode(n.s)),i=r+s;return e.encode(48,i)}},cm=BigInt(0),lm=BigInt(1),fW=BigInt(2),Dw=BigInt(3),hW=BigInt(4);function dW(n,e,t){function r(s){const i=n.sqr(s),o=n.mul(i,s);return n.add(n.add(o,n.mul(s,e)),t)}return r}function _5(n,e,t){const{BYTES:r}=n;function s(i){let o;if(typeof i=="bigint")o=i;else{let l=fs("private key",i);if(e){if(!e.includes(l.length*2))throw new Error("invalid private key");const f=new Uint8Array(r);f.set(l,f.length-l.length),l=f}try{o=n.fromBytes(l)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(t&&(o=n.create(o)),!n.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function pW(n,e={}){const{Fp:t,Fn:r}=nW("weierstrass",n,e),{h:s,n:i}=n;DE(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!t.is0(n.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function l(){if(!t.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function f($,B,q){const{x:j,y:W}=B.toAffine(),ie=t.toBytes(j);if($b("isCompressed",q),q){l();const ee=!t.isOdd(W);return uu(S5(ee),ie)}else return uu(Uint8Array.of(4),ie,t.toBytes(W))}function h($){yi($);const B=t.BYTES,q=B+1,j=2*B+1,W=$.length,ie=$[0],ee=$.subarray(1);if(W===q&&(ie===2||ie===3)){const x=t.fromBytes(ee);if(!t.isValid(x))throw new Error("bad point: is not on curve, wrong x");const _=y(x);let M;try{M=t.sqrt(_)}catch(K){const I=K instanceof Error?": "+K.message:"";throw new Error("bad point: is not on curve, sqrt error"+I)}l();const V=t.isOdd(M);return(ie&1)===1!==V&&(M=t.neg(M)),{x,y:M}}else if(W===j&&ie===4){const x=t.fromBytes(ee.subarray(B*0,B*1)),_=t.fromBytes(ee.subarray(B*1,B*2));if(!b(x,_))throw new Error("bad point: is not on curve");return{x,y:_}}else throw new Error(`bad point: got length ${W}, expected compressed=${q} or uncompressed=${j}`)}const p=e.toBytes||f,g=e.fromBytes||h,y=dW(t,n.a,n.b);function b($,B){const q=t.sqr(B),j=y($);return t.eql(q,j)}if(!b(n.Gx,n.Gy))throw new Error("bad curve params: generator point");const v=t.mul(t.pow(n.a,Dw),hW),E=t.mul(t.sqr(n.b),BigInt(27));if(t.is0(t.add(v,E)))throw new Error("bad curve params: a or b");function A($,B,q=!1){if(!t.isValid(B)||q&&t.is0(B))throw new Error(`bad point coordinate ${$}`);return B}function S($){if(!($ instanceof R))throw new Error("ProjectivePoint expected")}const O=ZR(($,B)=>{const{px:q,py:j,pz:W}=$;if(t.eql(W,t.ONE))return{x:q,y:j};const ie=$.is0();B==null&&(B=ie?t.ONE:t.inv(W));const ee=t.mul(q,B),x=t.mul(j,B),_=t.mul(W,B);if(ie)return{x:t.ZERO,y:t.ZERO};if(!t.eql(_,t.ONE))throw new Error("invZ was invalid");return{x:ee,y:x}}),T=ZR($=>{if($.is0()){if(e.allowInfinityPoint&&!t.is0($.py))return;throw new Error("bad point: ZERO")}const{x:B,y:q}=$.toAffine();if(!t.isValid(B)||!t.isValid(q))throw new Error("bad point: x or y not field elements");if(!b(B,q))throw new Error("bad point: equation left != right");if(!$.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function k($,B,q,j,W){return q=new R(t.mul(q.px,$),q.py,q.pz),B=om(j,B),q=om(W,q),B.add(q)}class R{constructor(B,q,j){this.px=A("x",B),this.py=A("y",q,!0),this.pz=A("z",j),Object.freeze(this)}static fromAffine(B){const{x:q,y:j}=B||{};if(!B||!t.isValid(q)||!t.isValid(j))throw new Error("invalid affine point");if(B instanceof R)throw new Error("projective point not allowed");return t.is0(q)&&t.is0(j)?R.ZERO:new R(q,j,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(B){return QK(R,"pz",B)}static fromBytes(B){return yi(B),R.fromHex(B)}static fromHex(B){const q=R.fromAffine(g(fs("pointHex",B)));return q.assertValidity(),q}static fromPrivateKey(B){const q=_5(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return R.BASE.multiply(q(B))}static msm(B,q){return tW(R,r,B,q)}precompute(B=8,q=!0){return F.setWindowSize(this,B),q||this.multiply(Dw),this}_setWindowSize(B){this.precompute(B)}assertValidity(){T(this)}hasEvenY(){const{y:B}=this.toAffine();if(!t.isOdd)throw new Error("Field doesn't support isOdd");return!t.isOdd(B)}equals(B){S(B);const{px:q,py:j,pz:W}=this,{px:ie,py:ee,pz:x}=B,_=t.eql(t.mul(q,x),t.mul(ie,W)),M=t.eql(t.mul(j,x),t.mul(ee,W));return _&&M}negate(){return new R(this.px,t.neg(this.py),this.pz)}double(){const{a:B,b:q}=n,j=t.mul(q,Dw),{px:W,py:ie,pz:ee}=this;let x=t.ZERO,_=t.ZERO,M=t.ZERO,V=t.mul(W,W),K=t.mul(ie,ie),I=t.mul(ee,ee),G=t.mul(W,ie);return G=t.add(G,G),M=t.mul(W,ee),M=t.add(M,M),x=t.mul(B,M),_=t.mul(j,I),_=t.add(x,_),x=t.sub(K,_),_=t.add(K,_),_=t.mul(x,_),x=t.mul(G,x),M=t.mul(j,M),I=t.mul(B,I),G=t.sub(V,I),G=t.mul(B,G),G=t.add(G,M),M=t.add(V,V),V=t.add(M,V),V=t.add(V,I),V=t.mul(V,G),_=t.add(_,V),I=t.mul(ie,ee),I=t.add(I,I),V=t.mul(I,G),x=t.sub(x,V),M=t.mul(I,K),M=t.add(M,M),M=t.add(M,M),new R(x,_,M)}add(B){S(B);const{px:q,py:j,pz:W}=this,{px:ie,py:ee,pz:x}=B;let _=t.ZERO,M=t.ZERO,V=t.ZERO;const K=n.a,I=t.mul(n.b,Dw);let G=t.mul(q,ie),X=t.mul(j,ee),re=t.mul(W,x),le=t.add(q,j),ge=t.add(ie,ee);le=t.mul(le,ge),ge=t.add(G,X),le=t.sub(le,ge),ge=t.add(q,W);let me=t.add(ie,x);return ge=t.mul(ge,me),me=t.add(G,re),ge=t.sub(ge,me),me=t.add(j,W),_=t.add(ee,x),me=t.mul(me,_),_=t.add(X,re),me=t.sub(me,_),V=t.mul(K,ge),_=t.mul(I,re),V=t.add(_,V),_=t.sub(X,V),V=t.add(X,V),M=t.mul(_,V),X=t.add(G,G),X=t.add(X,G),re=t.mul(K,re),ge=t.mul(I,ge),X=t.add(X,re),re=t.sub(G,re),re=t.mul(K,re),ge=t.add(ge,re),G=t.mul(X,ge),M=t.add(M,G),G=t.mul(me,ge),_=t.mul(le,_),_=t.sub(_,G),G=t.mul(le,X),V=t.mul(me,V),V=t.add(V,G),new R(_,M,V)}subtract(B){return this.add(B.negate())}is0(){return this.equals(R.ZERO)}multiply(B){const{endo:q}=e;if(!r.isValidNot0(B))throw new Error("invalid scalar: out of range");let j,W;const ie=ee=>F.wNAFCached(this,ee,R.normalizeZ);if(q){const{k1neg:ee,k1:x,k2neg:_,k2:M}=q.splitScalar(B),{p:V,f:K}=ie(x),{p:I,f:G}=ie(M);W=K.add(G),j=k(q.beta,V,I,ee,_)}else{const{p:ee,f:x}=ie(B);j=ee,W=x}return R.normalizeZ([j,W])[0]}multiplyUnsafe(B){const{endo:q}=e,j=this;if(!r.isValid(B))throw new Error("invalid scalar: out of range");if(B===cm||j.is0())return R.ZERO;if(B===lm)return j;if(F.hasPrecomputes(this))return this.multiply(B);if(q){const{k1neg:W,k1:ie,k2neg:ee,k2:x}=q.splitScalar(B),{p1:_,p2:M}=eW(R,j,ie,x);return k(q.beta,_,M,W,ee)}else return F.wNAFCachedUnsafe(j,B)}multiplyAndAddUnsafe(B,q,j){const W=this.multiplyUnsafe(q).add(B.multiplyUnsafe(j));return W.is0()?void 0:W}toAffine(B){return O(this,B)}isTorsionFree(){const{isTorsionFree:B}=e;return s===lm?!0:B?B(R,this):F.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:B}=e;return s===lm?this:B?B(R,this):this.multiplyUnsafe(s)}toBytes(B=!0){return $b("isCompressed",B),this.assertValidity(),p(R,this,B)}toRawBytes(B=!0){return this.toBytes(B)}toHex(B=!0){return Sm(this.toBytes(B))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}R.BASE=new R(n.Gx,n.Gy,t.ONE),R.ZERO=new R(t.ZERO,t.ONE,t.ZERO),R.Fp=t,R.Fn=r;const D=r.BITS,F=XK(R,e.endo?Math.ceil(D/2):D);return R}function S5(n){return Uint8Array.of(n?2:3)}function gW(n,e,t={}){DE(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||dp,s=e.hmac||((j,...W)=>xE(e.hash,j,uu(...W))),{Fp:i,Fn:o}=n,{ORDER:l,BITS:f}=o;function h(j){const W=l>>lm;return j>W}function p(j){return h(j)?o.neg(j):j}function g(j,W){if(!o.isValidNot0(W))throw new Error(`invalid signature ${j}: out of range 1..CURVE.n`)}class y{constructor(W,ie,ee){g("r",W),g("s",ie),this.r=W,this.s=ie,ee!=null&&(this.recovery=ee),Object.freeze(this)}static fromCompact(W){const ie=o.BYTES,ee=fs("compactSignature",W,ie*2);return new y(o.fromBytes(ee.subarray(0,ie)),o.fromBytes(ee.subarray(ie,ie*2)))}static fromDER(W){const{r:ie,s:ee}=mo.toSig(fs("DER",W));return new y(ie,ee)}assertValidity(){}addRecoveryBit(W){return new y(this.r,this.s,W)}recoverPublicKey(W){const ie=i.ORDER,{r:ee,s:x,recovery:_}=this;if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");if(l*fW<ie&&_>1)throw new Error("recovery id is ambiguous for h>1 curve");const M=_===2||_===3?ee+l:ee;if(!i.isValid(M))throw new Error("recovery id 2 or 3 invalid");const V=i.toBytes(M),K=n.fromHex(uu(S5((_&1)===0),V)),I=o.inv(M),G=T(fs("msgHash",W)),X=o.create(-G*I),re=o.create(x*I),le=n.BASE.multiplyUnsafe(X).add(K.multiplyUnsafe(re));if(le.is0())throw new Error("point at infinify");return le.assertValidity(),le}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o.neg(this.s),this.recovery):this}toBytes(W){if(W==="compact")return uu(o.toBytes(this.r),o.toBytes(this.s));if(W==="der")return yS(mo.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Sm(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Sm(this.toBytes("compact"))}}const b=_5(o,t.allowedPrivateKeyLengths,t.wrapPrivateKey),v={isValidPrivateKey(j){try{return b(j),!0}catch{return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{const j=l;return YK(r(E5(j)),j)},precompute(j=8,W=n.BASE){return W.precompute(j,!1)}};function E(j,W=!0){return n.fromPrivateKey(j).toBytes(W)}function A(j){if(typeof j=="bigint")return!1;if(j instanceof n)return!0;const W=fs("key",j).length,ie=i.BYTES,ee=ie+1,x=2*ie+1;if(!(t.allowedPrivateKeyLengths||o.BYTES===ee))return W===ee||W===x}function S(j,W,ie=!0){if(A(j)===!0)throw new Error("first arg must be private key");if(A(W)===!1)throw new Error("second arg must be public key");return n.fromHex(W).multiply(b(j)).toBytes(ie)}const O=e.bits2int||function(j){if(j.length>8192)throw new Error("input is too large");const W=RE(j),ie=j.length*8-f;return ie>0?W>>BigInt(ie):W},T=e.bits2int_modN||function(j){return o.create(O(j))},k=PE(f);function R(j){return O_("num < 2^"+f,j,cm,k),o.toBytes(j)}function D(j,W,ie=F){if(["recovered","canonical"].some(le=>le in ie))throw new Error("sign() legacy options not supported");const{hash:ee}=e;let{lowS:x,prehash:_,extraEntropy:M}=ie;x==null&&(x=!0),j=fs("msgHash",j),s3(ie),_&&(j=fs("prehashed msgHash",ee(j)));const V=T(j),K=b(W),I=[R(K),R(V)];if(M!=null&&M!==!1){const le=M===!0?r(i.BYTES):M;I.push(fs("extraEntropy",le))}const G=uu(...I),X=V;function re(le){const ge=O(le);if(!o.isValidNot0(ge))return;const me=o.inv(ge),ze=n.BASE.multiply(ge).toAffine(),$e=o.create(ze.x);if($e===cm)return;const qe=o.create(me*o.create(X+$e*K));if(qe===cm)return;let Ct=(ze.x===$e?0:2)|Number(ze.y&lm),rn=qe;return x&&h(qe)&&(rn=p(qe),Ct^=1),new y($e,rn,Ct)}return{seed:G,k2sig:re}}const F={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function B(j,W,ie=F){const{seed:ee,k2sig:x}=D(j,W,ie);return FK(e.hash.outputLen,o.BYTES,s)(ee,x)}n.BASE.precompute(8);function q(j,W,ie,ee=$){const x=j;W=fs("msgHash",W),ie=fs("publicKey",ie),s3(ee);const{lowS:_,prehash:M,format:V}=ee;if("strict"in ee)throw new Error("options.strict was renamed to lowS");if(V!==void 0&&!["compact","der","js"].includes(V))throw new Error('format must be "compact", "der" or "js"');const K=typeof x=="string"||pS(x),I=!K&&!V&&typeof x=="object"&&x!==null&&typeof x.r=="bigint"&&typeof x.s=="bigint";if(!K&&!I)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let G,X;try{if(I)if(V===void 0||V==="js")G=new y(x.r,x.s);else throw new Error("invalid format");if(K){try{V!=="compact"&&(G=y.fromDER(x))}catch(Ct){if(!(Ct instanceof mo.Err))throw Ct}!G&&V!=="der"&&(G=y.fromCompact(x))}X=n.fromHex(ie)}catch{return!1}if(!G||_&&G.hasHighS())return!1;M&&(W=e.hash(W));const{r:re,s:le}=G,ge=T(W),me=o.inv(le),ze=o.create(ge*me),$e=o.create(re*me),qe=n.BASE.multiplyUnsafe(ze).add(X.multiplyUnsafe($e));return qe.is0()?!1:o.create(qe.x)===re}return Object.freeze({getPublicKey:E,getSharedSecret:S,sign:B,verify:q,utils:v,Point:n,Signature:y})}function mW(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp,r=pp(e.n,n.nBitLength),s={Fp:t,Fn:r,allowedPrivateKeyLengths:n.allowedPrivateKeyLengths,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,wrapPrivateKey:n.wrapPrivateKey,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:s}}function yW(n){const{CURVE:e,curveOpts:t}=mW(n),r={hash:n.hash,hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:t,ecdsaOpts:r}}function wW(n,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:n})}function bW(n){const{CURVE:e,curveOpts:t,ecdsaOpts:r}=yW(n),s=pW(e,t),i=gW(s,r,t);return wW(n,i)}function I_(n,e){const t=r=>bW({...n,hash:r});return{...t(e),create:t}}const N5={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},T5={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},O5={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},EW=pp(N5.p),vW=pp(T5.p),AW=pp(O5.p),CW=I_({...N5,Fp:EW,lowS:!1},OE);I_({...T5,Fp:vW,lowS:!1},RG),I_({...O5,Fp:AW,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},IG);const _W=CW,x5="base10",Gr="base16",qi="base64pad",$c="base64url",Vy="utf8",I5=0,Do=1,Gy=2,SW=0,i3=1,um=12,CS=32;function NW(){const n=x_.utils.randomPrivateKey(),e=x_.getPublicKey(n);return{privateKey:ms(n,Gr),publicKey:ms(e,Gr)}}function R_(){const n=dp(CS);return ms(n,Gr)}function TW(n,e){const t=x_.getSharedSecret(mi(n,Gr),mi(e,Gr)),r=MK(IE,t,void 0,void 0,CS);return ms(r,Gr)}function cb(n){const e=IE(mi(n,Gr));return ms(e,Gr)}function Na(n){const e=IE(mi(n,Vy));return ms(e,Gr)}function R5(n){return mi(`${n}`,x5)}function Ju(n){return Number(ms(n,x5))}function P5(n){return n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function D5(n){const e=n.replace(/-/g,"+").replace(/_/g,"/"),t=(4-e.length%4)%4;return e+"=".repeat(t)}function OW(n){const e=R5(typeof n.type<"u"?n.type:I5);if(Ju(e)===Do&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof n.senderPublicKey<"u"?mi(n.senderPublicKey,Gr):void 0,r=typeof n.iv<"u"?mi(n.iv,Gr):dp(um),s=mi(n.symKey,Gr),i=f5(s,r).encrypt(mi(n.message,Vy)),o=U5({type:e,sealed:i,iv:r,senderPublicKey:t});return n.encoding===$c?P5(o):o}function xW(n){const e=mi(n.symKey,Gr),{sealed:t,iv:r}=Tm({encoded:n.encoded,encoding:n.encoding}),s=f5(e,r).decrypt(t);if(s===null)throw new Error("Failed to decrypt");return ms(s,Vy)}function IW(n,e){const t=R5(Gy),r=dp(um),s=mi(n,Vy),i=U5({type:t,sealed:s,iv:r});return e===$c?P5(i):i}function RW(n,e){const{sealed:t}=Tm({encoded:n,encoding:e});return ms(t,Vy)}function U5(n){if(Ju(n.type)===Gy)return ms(am([n.type,n.sealed]),qi);if(Ju(n.type)===Do){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ms(am([n.type,n.senderPublicKey,n.iv,n.sealed]),qi)}return ms(am([n.type,n.iv,n.sealed]),qi)}function Tm(n){const e=(n.encoding||qi)===$c?D5(n.encoded):n.encoded,t=mi(e,qi),r=t.slice(SW,i3),s=i3;if(Ju(r)===Do){const f=s+CS,h=f+um,p=t.slice(s,f),g=t.slice(f,h),y=t.slice(h);return{type:r,sealed:y,iv:g,senderPublicKey:p}}if(Ju(r)===Gy){const f=t.slice(s),h=dp(um);return{type:r,sealed:f,iv:h}}const i=s+um,o=t.slice(s,i),l=t.slice(i);return{type:r,sealed:l,iv:o}}function PW(n,e){const t=Tm({encoded:n,encoding:e==null?void 0:e.encoding});return k5({type:Ju(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?ms(t.senderPublicKey,Gr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function k5(n){const e=(n==null?void 0:n.type)||I5;if(e===Do){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function a3(n){return n.type===Do&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}function o3(n){return n.type===Gy}function DW(n){const e=Buffer.from(n.x,"base64"),t=Buffer.from(n.y,"base64");return am([new Uint8Array([4]),e,t])}function UW(n,e){const[t,r,s]=n.split("."),i=Buffer.from(D5(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),l=i.slice(32,64),f=`${t}.${r}`,h=IE(f),p=DW(e);if(!_W.verify(am([o,l]),h,p))throw new Error("Invalid signature");return f_(n).payload}const kW="irn";function Hb(n){return(n==null?void 0:n.relay)||{protocol:kW}}function Yg(n){const e=yV[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}function BW(n,e="-"){const t={},r="relay"+e;return Object.keys(n).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=n[s];t[i]=o}}),t}function c3(n){if(!n.includes("wc:")){const h=G8(n);h!=null&&h.includes("wc:")&&(n=h)}n=n.includes("wc://")?n.replace("wc://",""):n,n=n.includes("wc:")?n.replace("wc:",""):n;const e=n.indexOf(":"),t=n.indexOf("?")!==-1?n.indexOf("?"):void 0,r=n.substring(0,e),s=n.substring(e+1,t).split("@"),i=typeof t<"u"?n.substring(t):"",o=new URLSearchParams(i),l={};o.forEach((h,p)=>{l[p]=h});const f=typeof l.methods=="string"?l.methods.split(","):void 0;return{protocol:r,topic:MW(s[0]),version:parseInt(s[1],10),symKey:l.symKey,relay:BW(l),methods:f,expiryTimestamp:l.expiryTimestamp?parseInt(l.expiryTimestamp,10):void 0}}function MW(n){return n.startsWith("//")?n.substring(2):n}function LW(n,e="-"){const t="relay",r={};return Object.keys(n).forEach(s=>{const i=s,o=t+e+i;n[i]&&(r[o]=n[i])}),r}function l3(n){const e=new URLSearchParams,t=LW(n.relay);Object.keys(t).sort().forEach(s=>{e.set(s,t[s])}),e.set("symKey",n.symKey),n.expiryTimestamp&&e.set("expiryTimestamp",n.expiryTimestamp.toString()),n.methods&&e.set("methods",n.methods.join(","));const r=e.toString();return`${n.protocol}:${n.topic}@${n.version}?${r}`}function Uw(n,e,t){return`${n}?wc_ev=${t}&topic=${e}`}var $W=Object.defineProperty,FW=Object.defineProperties,HW=Object.getOwnPropertyDescriptors,u3=Object.getOwnPropertySymbols,jW=Object.prototype.hasOwnProperty,zW=Object.prototype.propertyIsEnumerable,f3=(n,e,t)=>e in n?$W(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qW=(n,e)=>{for(var t in e||(e={}))jW.call(e,t)&&f3(n,t,e[t]);if(u3)for(var t of u3(e))zW.call(e,t)&&f3(n,t,e[t]);return n},VW=(n,e)=>FW(n,HW(e));function gp(n){const e=[];return n.forEach(t=>{const[r,s]=t.split(":");e.push(`${r}:${s}`)}),e}function GW(n){const e=[];return Object.values(n).forEach(t=>{e.push(...gp(t.accounts))}),e}function KW(n,e){const t=[];return Object.values(n).forEach(r=>{gp(r.accounts).includes(e)&&t.push(...r.methods)}),t}function WW(n,e){const t=[];return Object.values(n).forEach(r=>{gp(r.accounts).includes(e)&&t.push(...r.events)}),t}function UE(n){return n.includes(":")}function Bh(n){return UE(n)?n.split(":")[0]:n}function h3(n){var e,t,r;const s={};if(!Ua(n))return s;for(const[i,o]of Object.entries(n)){const l=UE(i)?[i]:o.chains,f=o.methods||[],h=o.events||[],p=Bh(i);s[p]=VW(qW({},s[p]),{chains:Da(l,(e=s[p])==null?void 0:e.chains),methods:Da(f,(t=s[p])==null?void 0:t.methods),events:Da(h,(r=s[p])==null?void 0:r.events)})}return s}function YW(n){const e={};return n==null||n.forEach(t=>{var r;const[s,i]=t.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(t),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function d3(n,e){e=e.map(r=>r.replace("did:pkh:",""));const t=YW(e);for(const[r,s]of Object.entries(t))s.methods?s.methods=Da(s.methods,n):s.methods=n,s.events=["chainChanged","accountsChanged"];return t}function QW(n,e){var t,r,s,i,o,l;const f=h3(n),h=h3(e),p={},g=Object.keys(f).concat(Object.keys(h));for(const y of g)p[y]={chains:Da((t=f[y])==null?void 0:t.chains,(r=h[y])==null?void 0:r.chains),methods:Da((s=f[y])==null?void 0:s.methods,(i=h[y])==null?void 0:i.methods),events:Da((o=f[y])==null?void 0:o.events,(l=h[y])==null?void 0:l.events)};return p}const ZW={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},JW={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ae(n,e){const{message:t,code:r}=JW[n];return{message:e?`${t} ${e}`:t,code:r}}function un(n,e){const{message:t,code:r}=ZW[n];return{message:e?`${t} ${e}`:t,code:r}}function Uo(n,e){return!!Array.isArray(n)}function Ua(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function fr(n){return typeof n>"u"}function On(n,e){return e&&fr(n)?!0:typeof n=="string"&&!!n.trim().length}function _S(n,e){return e&&fr(n)?!0:typeof n=="number"&&!isNaN(n)}function XW(n,e){const{requiredNamespaces:t}=e,r=Object.keys(n.namespaces),s=Object.keys(t);let i=!0;return lu(s,r)?(r.forEach(o=>{const{accounts:l,methods:f,events:h}=n.namespaces[o],p=gp(l),g=t[o];(!lu(H8(o,g),p)||!lu(g.methods,f)||!lu(g.events,h))&&(i=!1)}),i):!1}function jb(n){return On(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function eY(n){if(On(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&jb(t)}}return!1}function tY(n){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(On(n,!1)){if(e(n))return!0;const t=G8(n);return e(t)}}catch{}return!1}function nY(n){var e;return(e=n==null?void 0:n.proposer)==null?void 0:e.publicKey}function rY(n){return n==null?void 0:n.topic}function sY(n,e){let t=null;return On(n==null?void 0:n.publicKey,!1)||(t=Ae("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function p3(n){let e=!0;return Uo(n)?n.length&&(e=n.every(t=>On(t,!1))):e=!1,e}function iY(n,e,t){let r=null;return Uo(e)&&e.length?e.forEach(s=>{r||jb(s)||(r=un("UNSUPPORTED_CHAINS",`${t}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):jb(n)||(r=un("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function aY(n,e,t){let r=null;return Object.entries(n).forEach(([s,i])=>{if(r)return;const o=iY(s,H8(s,i),`${e} ${t}`);o&&(r=o)}),r}function oY(n,e){let t=null;return Uo(n)?n.forEach(r=>{t||eY(r)||(t=un("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):t=un("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function cY(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const s=oY(r==null?void 0:r.accounts,`${e} namespace`);s&&(t=s)}),t}function lY(n,e){let t=null;return p3(n==null?void 0:n.methods)?p3(n==null?void 0:n.events)||(t=un("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=un("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function B5(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const s=lY(r,`${e}, namespace`);s&&(t=s)}),t}function uY(n,e,t){let r=null;if(n&&Ua(n)){const s=B5(n,e);s&&(r=s);const i=aY(n,e,t);i&&(r=i)}else r=Ae("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return r}function cC(n,e){let t=null;if(n&&Ua(n)){const r=B5(n,e);r&&(t=r);const s=cY(n,e);s&&(t=s)}else t=Ae("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function M5(n){return On(n.protocol,!0)}function fY(n,e){let t=!1;return n?n&&Uo(n)&&n.length&&n.forEach(r=>{t=M5(r)}):t=!0,t}function hY(n){return typeof n=="number"}function os(n){return typeof n<"u"&&typeof n!==null}function dY(n){return!(!n||typeof n!="object"||!n.code||!_S(n.code,!1)||!n.message||!On(n.message,!1))}function pY(n){return!(fr(n)||!On(n.method,!1))}function gY(n){return!(fr(n)||fr(n.result)&&fr(n.error)||!_S(n.id,!1)||!On(n.jsonrpc,!1))}function mY(n){return!(fr(n)||!On(n.name,!1))}function g3(n,e){return!(!jb(e)||!GW(n).includes(e))}function yY(n,e,t){return On(t,!1)?KW(n,e).includes(t):!1}function wY(n,e,t){return On(t,!1)?WW(n,e).includes(t):!1}function m3(n,e,t){let r=null;const s=bY(n),i=EY(e),o=Object.keys(s),l=Object.keys(i),f=y3(Object.keys(n)),h=y3(Object.keys(e)),p=f.filter(g=>!h.includes(g));return p.length&&(r=Ae("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${p.toString()}
      Received: ${Object.keys(e).toString()}`)),lu(o,l)||(r=Ae("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(g=>{if(!g.includes(":")||r)return;const y=gp(e[g].accounts);y.includes(g)||(r=Ae("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${g}
        Required: ${g}
        Approved: ${y.toString()}`))}),o.forEach(g=>{r||(lu(s[g].methods,i[g].methods)?lu(s[g].events,i[g].events)||(r=Ae("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${g}`)):r=Ae("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${g}`))}),r}function bY(n){const e={};return Object.keys(n).forEach(t=>{var r;t.includes(":")?e[t]=n[t]:(r=n[t].chains)==null||r.forEach(s=>{e[s]={methods:n[t].methods,events:n[t].events}})}),e}function y3(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function EY(n){const e={};return Object.keys(n).forEach(t=>{if(t.includes(":"))e[t]=n[t];else{const r=gp(n[t].accounts);r==null||r.forEach(s=>{e[s]={accounts:n[t].accounts.filter(i=>i.includes(`${s}:`)),methods:n[t].methods,events:n[t].events}})}}),e}function vY(n,e){return _S(n,!1)&&n<=e.max&&n>=e.min}function w3(){const n=zy();return new Promise(e=>{switch(n){case Fs.browser:e(AY());break;case Fs.reactNative:e(CY());break;case Fs.node:e(_Y());break;default:e(!0)}})}function AY(){return hp()&&(navigator==null?void 0:navigator.onLine)}async function CY(){if(vl()&&typeof global<"u"&&global!=null&&global.NetInfo){const n=await(global==null?void 0:global.NetInfo.fetch());return n==null?void 0:n.isConnected}return!0}function _Y(){return!0}function SY(n){switch(zy()){case Fs.browser:NY(n);break;case Fs.reactNative:TY(n);break}}function NY(n){!vl()&&hp()&&(window.addEventListener("online",()=>n(!0)),window.addEventListener("offline",()=>n(!1)))}function TY(n){vl()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>n(e==null?void 0:e.isConnected)))}function OY(){var n;return hp()&&Lo.getDocument()?((n=Lo.getDocument())==null?void 0:n.visibilityState)==="visible":!0}const lC={};class Dg{static get(e){return lC[e]}static set(e,t){lC[e]=t}static delete(e){delete lC[e]}}function xY(n){const e=Hy.decode(n);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function IY({publicKey:n,signature:e,payload:t}){var r;const s=P_(t.method),i=128|parseInt(((r=t.version)==null?void 0:r.toString())||"4"),o=DY(t.address),l=t.era==="00"?new Uint8Array([0]):P_(t.era);if(l.length!==1&&l.length!==2)throw new Error("Invalid era length");const f=parseInt(t.nonce,16),h=new Uint8Array([f&255,f>>8&255]),p=BigInt(`0x${PY(t.tip)}`),g=kY(p),y=new Uint8Array([0,...n,o,...e,...l,...h,...g,...s]),b=UY(y.length+1);return new Uint8Array([...b,i,...y])}function RY(n){const e=P_(n),t=vV.blake2b(e,void 0,32);return"0x"+Buffer.from(t).toString("hex")}function P_(n){return new Uint8Array(n.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function PY(n){return n.startsWith("0x")?n.slice(2):n}function DY(n){const e=Hy.decode(n)[0];return e===42?0:e===60?2:1}function UY(n){if(n<64)return new Uint8Array([n<<2]);if(n<16384){const e=n<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(n<1<<30){const e=n<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function kY(n){if(n<BigInt(1)<<BigInt(6))return new Uint8Array([Number(n<<BigInt(2))]);if(n<BigInt(1)<<BigInt(14)){const e=n<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(n<BigInt(1)<<BigInt(30)){const e=n<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function BY(n){const e=Uint8Array.from(Buffer.from(n.signature,"hex")),t=xY(n.transaction.address),r=IY({publicKey:t,signature:e,payload:n.transaction}),s=Buffer.from(r).toString("hex");return RY(s)}const MY="PARSE_ERROR",LY="INVALID_REQUEST",$Y="METHOD_NOT_FOUND",FY="INVALID_PARAMS",L5="INTERNAL_ERROR",SS="SERVER_ERROR",HY=[-32700,-32600,-32601,-32602,-32603],fm={[MY]:{code:-32700,message:"Parse error"},[LY]:{code:-32600,message:"Invalid Request"},[$Y]:{code:-32601,message:"Method not found"},[FY]:{code:-32602,message:"Invalid params"},[L5]:{code:-32603,message:"Internal error"},[SS]:{code:-32e3,message:"Server error"}},$5=SS;function jY(n){return HY.includes(n)}function b3(n){return Object.keys(fm).includes(n)?fm[n]:fm[$5]}function zY(n){const e=Object.values(fm).find(t=>t.code===n);return e||fm[$5]}function F5(n,e,t){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):n}var uC={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var D_=function(n,e){return D_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},D_(n,e)};function qY(n,e){D_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var U_=function(){return U_=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},U_.apply(this,arguments)};function VY(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function GY(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var l=n.length-1;l>=0;l--)(o=n[l])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i}function KY(n,e){return function(t,r){e(t,r,n)}}function WY(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function YY(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(p){try{h(r.next(p))}catch(g){o(g)}}function f(p){try{h(r.throw(p))}catch(g){o(g)}}function h(p){p.done?i(p.value):s(p.value).then(l,f)}h((r=r.apply(n,e||[])).next())})}function QY(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(p){return f([h,p])}}function f(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,s=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],s=0}finally{r=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function ZY(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}function JY(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function k_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function H5(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return i}function XY(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(H5(arguments[e]));return n}function eQ(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),s=0,e=0;e<t;e++)for(var i=arguments[e],o=0,l=i.length;o<l;o++,s++)r[s]=i[o];return r}function Om(n){return this instanceof Om?(this.v=n,this):new Om(n)}function tQ(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(y){r[y]&&(s[y]=function(b){return new Promise(function(v,E){i.push([y,b,v,E])>1||l(y,b)})})}function l(y,b){try{f(r[y](b))}catch(v){g(i[0][3],v)}}function f(y){y.value instanceof Om?Promise.resolve(y.value.v).then(h,p):g(i[0][2],y)}function h(y){l("next",y)}function p(y){l("throw",y)}function g(y,b){y(b),i.shift(),i.length&&l(i[0][0],i[0][1])}}function nQ(n){var e,t;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=n[s]?function(o){return(t=!t)?{value:Om(n[s](o)),done:s==="return"}:i?i(o):o}:i}}function rQ(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof k_=="function"?k_(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(o){return new Promise(function(l,f){o=n[i](o),s(l,f,o.done,o.value)})}}function s(i,o,l,f){Promise.resolve(f).then(function(h){i({value:h,done:l})},o)}}function sQ(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function iQ(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function aQ(n){return n&&n.__esModule?n:{default:n}}function oQ(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function cQ(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const lQ=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return U_},__asyncDelegator:nQ,__asyncGenerator:tQ,__asyncValues:rQ,__await:Om,__awaiter:YY,__classPrivateFieldGet:oQ,__classPrivateFieldSet:cQ,__createBinding:ZY,__decorate:GY,__exportStar:JY,__extends:qY,__generator:QY,__importDefault:aQ,__importStar:iQ,__makeTemplateObject:sQ,__metadata:WY,__param:KY,__read:H5,__rest:VY,__spread:XY,__spreadArrays:eQ,__values:k_},Symbol.toStringTag,{value:"Module"})),uQ=gU(lQ);var co={},E3;function fQ(){if(E3)return co;E3=1,Object.defineProperty(co,"__esModule",{value:!0}),co.isBrowserCryptoAvailable=co.getSubtleCrypto=co.getBrowerCrypto=void 0;function n(){return(_a==null?void 0:_a.crypto)||(_a==null?void 0:_a.msCrypto)||{}}co.getBrowerCrypto=n;function e(){const r=n();return r.subtle||r.webkitSubtle}co.getSubtleCrypto=e;function t(){return!!n()&&!!e()}return co.isBrowserCryptoAvailable=t,co}var lo={},v3;function hQ(){if(v3)return lo;v3=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.isBrowser=lo.isNode=lo.isReactNative=void 0;function n(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}lo.isReactNative=n;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}lo.isNode=e;function t(){return!n()&&!e()}return lo.isBrowser=t,lo}var A3;function dQ(){return A3||(A3=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=uQ;e.__exportStar(fQ(),n),e.__exportStar(hQ(),n)}(uC)),uC}var pQ=dQ();function ha(n=3){const e=Date.now()*Math.pow(10,n),t=Math.floor(Math.random()*Math.pow(10,n));return e+t}function du(n=6){return BigInt(ha(n))}function al(n,e,t){return{id:t||ha(),jsonrpc:"2.0",method:n,params:e}}function kE(n,e){return{id:n,jsonrpc:"2.0",result:e}}function BE(n,e,t){return{id:n,jsonrpc:"2.0",error:gQ(e)}}function gQ(n,e){return typeof n>"u"?b3(L5):(typeof n=="string"&&(n=Object.assign(Object.assign({},b3(SS)),{message:n})),jY(n.code)&&(n=zY(n.code)),n)}let mQ=class{},yQ=class extends mQ{constructor(){super()}},wQ=class extends yQ{constructor(e){super()}};const bQ="^https?:",EQ="^wss?:";function vQ(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function j5(n,e){const t=vQ(n);return typeof t>"u"?!1:new RegExp(e).test(t)}function C3(n){return j5(n,bQ)}function _3(n){return j5(n,EQ)}function AQ(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function z5(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function NS(n){return z5(n)&&"method"in n}function ME(n){return z5(n)&&(da(n)||di(n))}function da(n){return"result"in n}function di(n){return"error"in n}let Ei=class extends wQ{constructor(e){super(e),this.events=new bi.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(al(e.method,e.params||[],e.id||du().toString()),t)}async requestStrict(e,t){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{di(i)?s(i.error):r(i.result)});try{await this.connection.send(e,t)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ME(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const CQ=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),_Q=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",S3=n=>n.split("?")[0],N3=10,SQ=CQ();let NQ=class{constructor(e){if(this.url=e,this.events=new bi.EventEmitter,this.registering=!1,!_3(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Mo(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!_3(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{const s=pQ.isReactNative()?void 0:{rejectUnauthorized:!AQ(e)},i=new SQ(e,[],s);_Q()?i.onerror=o=>{const l=o;r(this.emitError(l.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),t(i)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Qu(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),s=r.message||r.toString(),i=BE(e,s);this.events.emit("payload",i)}parseError(e,t=this.url){return F5(e,S3(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>N3&&this.events.setMaxListeners(N3)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${S3(this.url)}`));return this.events.emit("register_error",t),t}};var TQ={};const q5="wc",V5=2,B_="core",La=`${q5}@2:${B_}:`,OQ={logger:"error"},xQ={database:":memory:"},IQ="crypto",T3="client_ed25519_seed",RQ=Ce.ONE_DAY,PQ="keychain",DQ="0.3",UQ="messages",kQ="0.3",O3=Ce.SIX_HOURS,BQ="publisher",G5="irn",MQ="error",K5="wss://relay.walletconnect.org",LQ="relayer",Qn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},$Q="_subscription",ni={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},FQ=.1,M_="2.21.5",an={link_mode:"link_mode",relay:"relay"},lb={inbound:"inbound",outbound:"outbound"},HQ="0.3",jQ="WALLETCONNECT_CLIENT_ID",x3="WALLETCONNECT_LINK_MODE_APPS",Rs={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},zQ="subscription",qQ="0.3",VQ="pairing",GQ="0.3",Ug={wc_pairingDelete:{req:{ttl:Ce.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Ce.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Ce.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Ce.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Ce.ONE_DAY,prompt:!1,tag:0},res:{ttl:Ce.ONE_DAY,prompt:!1,tag:0}}},nu={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Ni={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},KQ="history",WQ="0.3",YQ="expirer",ai={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},QQ="0.3",ZQ="verify-api",JQ="https://verify.walletconnect.com",W5="https://verify.walletconnect.org",hm=W5,XQ=`${hm}/v3`,eZ=[JQ,W5],tZ="echo",nZ="https://echo.walletconnect.com",fa={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},fo={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Ti={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},ql={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Vl={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},kg={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},rZ=.1,sZ="event-client",iZ=86400,aZ="https://pulse.walletconnect.org/batch";function oZ(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var s=0;s<n.length;s++){var i=n.charAt(s),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=s}var l=n.length,f=n.charAt(0),h=Math.log(l)/Math.log(256),p=Math.log(256)/Math.log(l);function g(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var E=0,A=0,S=0,O=v.length;S!==O&&v[S]===0;)S++,E++;for(var T=(O-S)*p+1>>>0,k=new Uint8Array(T);S!==O;){for(var R=v[S],D=0,F=T-1;(R!==0||D<A)&&F!==-1;F--,D++)R+=256*k[F]>>>0,k[F]=R%l>>>0,R=R/l>>>0;if(R!==0)throw new Error("Non-zero carry");A=D,S++}for(var $=T-A;$!==T&&k[$]===0;)$++;for(var B=f.repeat(E);$<T;++$)B+=n.charAt(k[$]);return B}function y(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var E=0;if(v[E]!==" "){for(var A=0,S=0;v[E]===f;)A++,E++;for(var O=(v.length-E)*h+1>>>0,T=new Uint8Array(O);v[E];){var k=t[v.charCodeAt(E)];if(k===255)return;for(var R=0,D=O-1;(k!==0||R<S)&&D!==-1;D--,R++)k+=l*T[D]>>>0,T[D]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");S=R,E++}if(v[E]!==" "){for(var F=O-S;F!==O&&T[F]===0;)F++;for(var $=new Uint8Array(A+(O-F)),B=A;F!==O;)$[B++]=T[F++];return $}}}function b(v){var E=y(v);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:y,decode:b}}var cZ=oZ,lZ=cZ;const Y5=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},uZ=n=>new TextEncoder().encode(n),fZ=n=>new TextDecoder().decode(n);class hZ{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class dZ{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Q5(this,e)}}class pZ{constructor(e){this.decoders=e}or(e){return Q5(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Q5=(n,e)=>new pZ({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class gZ{constructor(e,t,r,s){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=s,this.encoder=new hZ(e,t,r),this.decoder=new dZ(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const LE=({name:n,prefix:e,encode:t,decode:r})=>new gZ(n,e,t,r),Ky=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:s}=lZ(t,e);return LE({prefix:n,name:e,encode:r,decode:i=>Y5(s(i))})},mZ=(n,e,t,r)=>{const s={};for(let p=0;p<e.length;++p)s[e[p]]=p;let i=n.length;for(;n[i-1]==="=";)--i;const o=new Uint8Array(i*t/8|0);let l=0,f=0,h=0;for(let p=0;p<i;++p){const g=s[n[p]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);f=f<<t|g,l+=t,l>=8&&(l-=8,o[h++]=255&f>>l)}if(l>=t||255&f<<8-l)throw new SyntaxError("Unexpected end of data");return o},yZ=(n,e,t)=>{const r=e[e.length-1]==="=",s=(1<<t)-1;let i="",o=0,l=0;for(let f=0;f<n.length;++f)for(l=l<<8|n[f],o+=8;o>t;)o-=t,i+=e[s&l>>o];if(o&&(i+=e[s&l<<t-o]),r)for(;i.length*t&7;)i+="=";return i},yr=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>LE({prefix:e,name:n,encode(s){return yZ(s,r,t)},decode(s){return mZ(s,r,t,n)}}),wZ=LE({prefix:"\0",name:"identity",encode:n=>fZ(n),decode:n=>uZ(n)});var bZ=Object.freeze({__proto__:null,identity:wZ});const EZ=yr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var vZ=Object.freeze({__proto__:null,base2:EZ});const AZ=yr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var CZ=Object.freeze({__proto__:null,base8:AZ});const _Z=Ky({prefix:"9",name:"base10",alphabet:"0123456789"});var SZ=Object.freeze({__proto__:null,base10:_Z});const NZ=yr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),TZ=yr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var OZ=Object.freeze({__proto__:null,base16:NZ,base16upper:TZ});const xZ=yr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),IZ=yr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),RZ=yr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),PZ=yr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),DZ=yr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),UZ=yr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),kZ=yr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),BZ=yr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),MZ=yr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var LZ=Object.freeze({__proto__:null,base32:xZ,base32upper:IZ,base32pad:RZ,base32padupper:PZ,base32hex:DZ,base32hexupper:UZ,base32hexpad:kZ,base32hexpadupper:BZ,base32z:MZ});const $Z=Ky({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),FZ=Ky({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var HZ=Object.freeze({__proto__:null,base36:$Z,base36upper:FZ});const jZ=Ky({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zZ=Ky({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var qZ=Object.freeze({__proto__:null,base58btc:jZ,base58flickr:zZ});const VZ=yr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),GZ=yr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),KZ=yr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),WZ=yr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var YZ=Object.freeze({__proto__:null,base64:VZ,base64pad:GZ,base64url:KZ,base64urlpad:WZ});const Z5=Array.from(""),QZ=Z5.reduce((n,e,t)=>(n[t]=e,n),[]),ZZ=Z5.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function JZ(n){return n.reduce((e,t)=>(e+=QZ[t],e),"")}function XZ(n){const e=[];for(const t of n){const r=ZZ[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const eJ=LE({prefix:"",name:"base256emoji",encode:JZ,decode:XZ});var tJ=Object.freeze({__proto__:null,base256emoji:eJ}),nJ=J5,I3=128,rJ=-128,sJ=Math.pow(2,31);function J5(n,e,t){e=e||[],t=t||0;for(var r=t;n>=sJ;)e[t++]=n&255|I3,n/=128;for(;n&rJ;)e[t++]=n&255|I3,n>>>=7;return e[t]=n|0,J5.bytes=t-r+1,e}var iJ=L_,aJ=128,R3=127;function L_(n,r){var t=0,r=r||0,s=0,i=r,o,l=n.length;do{if(i>=l)throw L_.bytes=0,new RangeError("Could not decode varint");o=n[i++],t+=s<28?(o&R3)<<s:(o&R3)*Math.pow(2,s),s+=7}while(o>=aJ);return L_.bytes=i-r,t}var oJ=Math.pow(2,7),cJ=Math.pow(2,14),lJ=Math.pow(2,21),uJ=Math.pow(2,28),fJ=Math.pow(2,35),hJ=Math.pow(2,42),dJ=Math.pow(2,49),pJ=Math.pow(2,56),gJ=Math.pow(2,63),mJ=function(n){return n<oJ?1:n<cJ?2:n<lJ?3:n<uJ?4:n<fJ?5:n<hJ?6:n<dJ?7:n<pJ?8:n<gJ?9:10},yJ={encode:nJ,decode:iJ,encodingLength:mJ},X5=yJ;const P3=(n,e,t=0)=>(X5.encode(n,e,t),e),D3=n=>X5.encodingLength(n),$_=(n,e)=>{const t=e.byteLength,r=D3(n),s=r+D3(t),i=new Uint8Array(s+t);return P3(n,i,0),P3(t,i,r),i.set(e,s),new wJ(n,t,e,i)};class wJ{constructor(e,t,r,s){this.code=e,this.size=t,this.digest=r,this.bytes=s}}const e4=({name:n,code:e,encode:t})=>new bJ(n,e,t);class bJ{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?$_(this.code,t):t.then(r=>$_(this.code,r))}else throw Error("Unknown type, must be binary type")}}const t4=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),EJ=e4({name:"sha2-256",code:18,encode:t4("SHA-256")}),vJ=e4({name:"sha2-512",code:19,encode:t4("SHA-512")});var AJ=Object.freeze({__proto__:null,sha256:EJ,sha512:vJ});const n4=0,CJ="identity",r4=Y5,_J=n=>$_(n4,r4(n)),SJ={code:n4,name:CJ,encode:r4,digest:_J};var NJ=Object.freeze({__proto__:null,identity:SJ});new TextEncoder,new TextDecoder;const U3={...bZ,...vZ,...CZ,...SZ,...OZ,...LZ,...HZ,...qZ,...YZ,...tJ};({...AJ,...NJ});function s4(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function TJ(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?s4(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function i4(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const k3=i4("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),fC=i4("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=TJ(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),OJ={utf8:k3,"utf-8":k3,hex:U3.base16,latin1:fC,ascii:fC,binary:fC,...U3};function xJ(n,e="utf8"){const t=OJ[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?s4(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}var IJ=Object.defineProperty,RJ=(n,e,t)=>e in n?IJ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ca=(n,e,t)=>RJ(n,typeof e!="symbol"?e+"":e,t);class PJ{constructor(e,t){this.core=e,this.logger=t,ca(this,"keychain",new Map),ca(this,"name",PQ),ca(this,"version",DQ),ca(this,"initialized",!1),ca(this,"storagePrefix",La),ca(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),ca(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),ca(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),ca(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Ae("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),ca(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Rr(t,this.name)}get context(){return bs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,E_(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?v_(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var DJ=Object.defineProperty,UJ=(n,e,t)=>e in n?DJ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,or=(n,e,t)=>UJ(n,typeof e!="symbol"?e+"":e,t);class kJ{constructor(e,t,r){this.core=e,this.logger=t,or(this,"name",IQ),or(this,"keychain"),or(this,"randomSessionIdentifier",R_()),or(this,"initialized",!1),or(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),or(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),or(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=lR(s);return y8(i.publicKey)}),or(this,"generateKeyPair",()=>{this.isInitialized();const s=NW();return this.setPrivateKey(s.publicKey,s.privateKey)}),or(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=lR(i),l=this.randomSessionIdentifier;return await Wj(l,s,RQ,o)}),or(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const l=this.getPrivateKey(s),f=TW(l,i);return this.setSymKey(f,o)}),or(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||cb(s);return await this.keychain.set(o,s),o}),or(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),or(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),or(this,"encode",async(s,i,o)=>{this.isInitialized();const l=k5(o),f=Mo(i);if(o3(l))return IW(f,o==null?void 0:o.encoding);if(a3(l)){const y=l.senderPublicKey,b=l.receiverPublicKey;s=await this.generateSharedKey(y,b)}const h=this.getSymKey(s),{type:p,senderPublicKey:g}=l;return OW({type:p,symKey:h,message:f,senderPublicKey:g,encoding:o==null?void 0:o.encoding})}),or(this,"decode",async(s,i,o)=>{this.isInitialized();const l=PW(i,o);if(o3(l)){const f=RW(i,o==null?void 0:o.encoding);return Qu(f)}if(a3(l)){const f=l.receiverPublicKey,h=l.senderPublicKey;s=await this.generateSharedKey(f,h)}try{const f=this.getSymKey(s),h=xW({symKey:f,encoded:i,encoding:o==null?void 0:o.encoding});return Qu(h)}catch(f){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(f)}}),or(this,"getPayloadType",(s,i=qi)=>{const o=Tm({encoded:s,encoding:i});return Ju(o.type)}),or(this,"getPayloadSenderPublicKey",(s,i=qi)=>{const o=Tm({encoded:s,encoding:i});return o.senderPublicKey?ms(o.senderPublicKey,Gr):void 0}),this.core=e,this.logger=Rr(t,this.name),this.keychain=r||new PJ(this.core,this.logger)}get context(){return bs(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(T3)}catch{e=R_(),await this.keychain.set(T3,e)}return xJ(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var BJ=Object.defineProperty,MJ=Object.defineProperties,LJ=Object.getOwnPropertyDescriptors,B3=Object.getOwnPropertySymbols,$J=Object.prototype.hasOwnProperty,FJ=Object.prototype.propertyIsEnumerable,F_=(n,e,t)=>e in n?BJ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,HJ=(n,e)=>{for(var t in e||(e={}))$J.call(e,t)&&F_(n,t,e[t]);if(B3)for(var t of B3(e))FJ.call(e,t)&&F_(n,t,e[t]);return n},jJ=(n,e)=>MJ(n,LJ(e)),xs=(n,e,t)=>F_(n,typeof e!="symbol"?e+"":e,t);class zJ extends G7{constructor(e,t){super(e,t),this.logger=e,this.core=t,xs(this,"messages",new Map),xs(this,"messagesWithoutClientAck",new Map),xs(this,"name",UQ),xs(this,"version",kQ),xs(this,"initialized",!1),xs(this,"storagePrefix",La),xs(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),xs(this,"set",async(r,s,i)=>{this.isInitialized();const o=Na(s);let l=this.messages.get(r);if(typeof l>"u"&&(l={}),typeof l[o]<"u")return o;if(l[o]=s,this.messages.set(r,l),i===lb.inbound){const f=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,jJ(HJ({},f),{[o]:s}))}return await this.persist(),o}),xs(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),xs(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),xs(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Na(s);return typeof i[o]<"u"}),xs(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Na(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),xs(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Rr(e,this.name),this.core=t}get context(){return bs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,E_(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,E_(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?v_(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?v_(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var qJ=Object.defineProperty,VJ=Object.defineProperties,GJ=Object.getOwnPropertyDescriptors,M3=Object.getOwnPropertySymbols,KJ=Object.prototype.hasOwnProperty,WJ=Object.prototype.propertyIsEnumerable,H_=(n,e,t)=>e in n?qJ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,kw=(n,e)=>{for(var t in e||(e={}))KJ.call(e,t)&&H_(n,t,e[t]);if(M3)for(var t of M3(e))WJ.call(e,t)&&H_(n,t,e[t]);return n},hC=(n,e)=>VJ(n,GJ(e)),Oi=(n,e,t)=>H_(n,typeof e!="symbol"?e+"":e,t);class YJ extends K7{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Oi(this,"events",new bi.EventEmitter),Oi(this,"name",BQ),Oi(this,"queue",new Map),Oi(this,"publishTimeout",Ce.toMiliseconds(Ce.ONE_MINUTE)),Oi(this,"initialPublishTimeout",Ce.toMiliseconds(Ce.ONE_SECOND*15)),Oi(this,"needsTransportRestart",!1),Oi(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const l=(i==null?void 0:i.ttl)||O3,f=Hb(i),h=(i==null?void 0:i.prompt)||!1,p=(i==null?void 0:i.tag)||0,g=(i==null?void 0:i.id)||du().toString(),y={topic:r,message:s,opts:{ttl:l,relay:f,prompt:h,tag:p,id:g,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},b=`Failed to publish payload, please try again. id:${g} tag:${p}`;try{const v=new Promise(async E=>{const A=({id:O})=>{y.opts.id===O&&(this.removeRequestFromQueue(O),this.relayer.events.removeListener(Qn.publish,A),E(y))};this.relayer.events.on(Qn.publish,A);const S=il(new Promise((O,T)=>{this.rpcPublish({topic:r,message:s,ttl:l,prompt:h,tag:p,id:g,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(O).catch(k=>{this.logger.warn(k,k==null?void 0:k.message),T(k)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${g} tag:${p}`);try{await S,this.events.removeListener(Qn.publish,A)}catch(O){this.queue.set(g,hC(kw({},y),{attempt:1})),this.logger.warn(O,O==null?void 0:O.message)}});this.logger.trace({type:"method",method:"publish",params:{id:g,topic:r,message:s,opts:i}}),await il(v,this.publishTimeout,b)}catch(v){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(v),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw v}finally{this.queue.delete(g)}}),Oi(this,"on",(r,s)=>{this.events.on(r,s)}),Oi(this,"once",(r,s)=>{this.events.once(r,s)}),Oi(this,"off",(r,s)=>{this.events.off(r,s)}),Oi(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Rr(t,this.name),this.registerEventListeners()}get context(){return bs(this.logger)}async rpcPublish(e){var t,r,s,i;const{topic:o,message:l,ttl:f=O3,prompt:h,tag:p,id:g,attestation:y,tvf:b}=e,v={method:Yg(Hb().protocol).publish,params:kw({topic:o,message:l,ttl:f,prompt:h,tag:p,attestation:y},b),id:g};fr((t=v.params)==null?void 0:t.prompt)&&((r=v.params)==null||delete r.prompt),fr((s=v.params)==null?void 0:s.tag)&&((i=v.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:v});const E=await this.relayer.request(v);return this.relayer.events.emit(Qn.publish,e),this.logger.debug("Successfully Published Payload"),E}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{const r=e.attempt+1;this.queue.set(t,hC(kw({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:l}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(hC(kw({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:l,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(df.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Qn.connection_stalled);return}this.checkQueue()}),this.relayer.on(Qn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var QJ=Object.defineProperty,ZJ=(n,e,t)=>e in n?QJ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fh=(n,e,t)=>ZJ(n,typeof e!="symbol"?e+"":e,t);class JJ{constructor(){fh(this,"map",new Map),fh(this,"set",(e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])}),fh(this,"get",e=>this.map.get(e)||[]),fh(this,"exists",(e,t)=>this.get(e).includes(t)),fh(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const s=r.filter(i=>i!==t);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),fh(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var XJ=Object.defineProperty,eX=Object.defineProperties,tX=Object.getOwnPropertyDescriptors,L3=Object.getOwnPropertySymbols,nX=Object.prototype.hasOwnProperty,rX=Object.prototype.propertyIsEnumerable,j_=(n,e,t)=>e in n?XJ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Bg=(n,e)=>{for(var t in e||(e={}))nX.call(e,t)&&j_(n,t,e[t]);if(L3)for(var t of L3(e))rX.call(e,t)&&j_(n,t,e[t]);return n},dC=(n,e)=>eX(n,tX(e)),Jt=(n,e,t)=>j_(n,typeof e!="symbol"?e+"":e,t);class sX extends Q7{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Jt(this,"subscriptions",new Map),Jt(this,"topicMap",new JJ),Jt(this,"events",new bi.EventEmitter),Jt(this,"name",zQ),Jt(this,"version",qQ),Jt(this,"pending",new Map),Jt(this,"cached",[]),Jt(this,"initialized",!1),Jt(this,"storagePrefix",La),Jt(this,"subscribeTimeout",Ce.toMiliseconds(Ce.ONE_MINUTE)),Jt(this,"initialSubscribeTimeout",Ce.toMiliseconds(Ce.ONE_SECOND*15)),Jt(this,"clientId"),Jt(this,"batchSubscribeTopicsLimit",500),Jt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Jt(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=Hb(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const l=await this.rpcSubscribe(r,i,s);return typeof l=="string"&&(this.onSubscribe(l,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),l}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Jt(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Jt(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Jt(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Jt(this,"on",(r,s)=>{this.events.on(r,s)}),Jt(this,"once",(r,s)=>{this.events.once(r,s)}),Jt(this,"off",(r,s)=>{this.events.off(r,s)}),Jt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Jt(this,"start",async()=>{await this.onConnect()}),Jt(this,"stop",async()=>{await this.onDisconnect()}),Jt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Jt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Jt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(df.pulse,async()=>{await this.checkPending()}),this.events.on(Rs.created,async r=>{const s=Rs.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Rs.deleted,async r=>{const s=Rs.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Rr(t,this.name),this.clientId=""}get context(){return bs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const s=Hb(r);await this.restartToComplete({topic:e,id:t,relay:s}),await this.rpcUnsubscribe(e,t,s);const i=un("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,t,r){var s;(!r||(r==null?void 0:r.transportType)===an.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const i={method:Yg(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const l=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===an.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(p=>this.logger.warn(p))},Ce.toMiliseconds(Ce.ONE_SECOND)),l;const f=new Promise(async p=>{const g=y=>{y.topic===e&&(this.events.removeListener(Rs.created,g),p(y.id))};this.events.on(Rs.created,g);try{const y=await il(new Promise((b,v)=>{this.relayer.request(i).catch(E=>{this.logger.warn(E,E==null?void 0:E.message),v(E)}).then(b)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Rs.created,g),p(y)}catch{}}),h=await il(f,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!h&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return h?l:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Qn.connection_stalled),o)throw l}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,r={method:Yg(t.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await il(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Qn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,r={method:Yg(t.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await il(new Promise((i,o)=>{this.relayer.request(r).catch(l=>{this.logger.warn(l),o(l)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Qn.connection_stalled)}return s}rpcUnsubscribe(e,t,r){const s={method:Yg(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,dC(Bg({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,Bg({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,Bg({},t)),this.topicMap.set(t.topic,e),this.events.emit(Rs.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:r}=Ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Rs.deleted,dC(Bg({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Rs.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Rs.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=Ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async t=>dC(Bg({},t),{id:await this.getSubscriptionId(t.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await WV(Ce.toMiliseconds(Ce.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Na(e+await this.getClientId())}}var iX=Object.defineProperty,$3=Object.getOwnPropertySymbols,aX=Object.prototype.hasOwnProperty,oX=Object.prototype.propertyIsEnumerable,z_=(n,e,t)=>e in n?iX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,F3=(n,e)=>{for(var t in e||(e={}))aX.call(e,t)&&z_(n,t,e[t]);if($3)for(var t of $3(e))oX.call(e,t)&&z_(n,t,e[t]);return n},Tt=(n,e,t)=>z_(n,typeof e!="symbol"?e+"":e,t);class cX extends W7{constructor(e){super(e),Tt(this,"protocol","wc"),Tt(this,"version",2),Tt(this,"core"),Tt(this,"logger"),Tt(this,"events",new bi.EventEmitter),Tt(this,"provider"),Tt(this,"messages"),Tt(this,"subscriber"),Tt(this,"publisher"),Tt(this,"name",LQ),Tt(this,"transportExplicitlyClosed",!1),Tt(this,"initialized",!1),Tt(this,"connectionAttemptInProgress",!1),Tt(this,"relayUrl"),Tt(this,"projectId"),Tt(this,"packageName"),Tt(this,"bundleId"),Tt(this,"hasExperiencedNetworkDisruption",!1),Tt(this,"pingTimeout"),Tt(this,"heartBeatTimeout",Ce.toMiliseconds(Ce.THIRTY_SECONDS+Ce.FIVE_SECONDS)),Tt(this,"reconnectTimeout"),Tt(this,"connectPromise"),Tt(this,"reconnectInProgress",!1),Tt(this,"requestsInFlight",[]),Tt(this,"connectTimeout",Ce.toMiliseconds(Ce.ONE_SECOND*15)),Tt(this,"request",async t=>{var r,s;this.logger.debug("Publishing Request Payload");const i=t.id||du().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:t.method,topic:(r=t.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=t.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const l=await this.provider.request(t);return this.requestsInFlight=this.requestsInFlight.filter(f=>f!==o),l}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Tt(this,"resetPingTimeout",()=>{Mb()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var t,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Tt(this,"onPayloadHandler",t=>{this.onProviderPayload(t),this.resetPingTimeout()}),Tt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Qn.connect)}),Tt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Tt(this,"onProviderErrorHandler",t=>{this.logger.fatal(`Fatal socket error: ${t.message}`),this.events.emit(Qn.error,t),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Tt(this,"registerProviderListeners",()=>{this.provider.on(ni.payload,this.onPayloadHandler),this.provider.on(ni.connect,this.onConnectHandler),this.provider.on(ni.disconnect,this.onDisconnectHandler),this.provider.on(ni.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Rr(e.logger,this.name):My(cp({level:e.logger||MQ})),this.messages=new zJ(this.logger,e.core),this.subscriber=new sX(this,this.logger),this.publisher=new YJ(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||K5,this.projectId=e.projectId,PV()?this.packageName=OR():DV()&&(this.bundleId=OR()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return bs(this.logger)}get connected(){var e,t,r;return((r=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,t,r;return((r=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:an.relay},lb.outbound)}async subscribe(e,t){var r,s,i;this.isInitialized(),(!(t!=null&&t.transportType)||(t==null?void 0:t.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=t==null?void 0:t.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=t==null?void 0:t.internal)==null?void 0:s.throwOnFailedPublish;let l=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",f;const h=p=>{p.topic===e&&(this.subscriber.off(Rs.created,h),f())};return await Promise.all([new Promise(p=>{f=p,this.subscriber.on(Rs.created,h)}),new Promise(async(p,g)=>{l=await this.subscriber.subscribe(e,F3({internal:{throwOnFailedPublish:o}},t)).catch(y=>{o&&g(y)})||l,p()})]),l}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await il(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,r)=>{await this.connect(e).then(t).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await w3())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const t=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${t.length} message events sorted`);for(const r of t)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:r}=e;if(!t.sessionExists){const s=kn(Ce.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Qn.message,e),await this.recordMessageEvent(e,lb.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(ni.disconnect,i),await il(new Promise((o,l)=>{this.provider.connect().then(o).catch(l)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(ni.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,l)=>{const f=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ni.disconnect,f),await this.subscriber.start().then(o).catch(l).finally(()=>{this.provider.off(ni.disconnect,f)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(r=>setTimeout(r,Ce.toMiliseconds(t*1))),t++}}startPingTimeout(){var e,t,r,s,i;if(Mb())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ei(new NQ(LV({sdkVersion:M_,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:r,message:s}=e;await this.messages.set(r,s,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const s=this.messages.has(t,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),NS(e)){if(!e.method.endsWith($Q))return;const t=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=t.data,l={topic:r,message:s,publishedAt:i,transportType:an.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(F3({type:"event",event:t.id},l)),this.events.emit(t.id,l),await this.acknowledgePayload(e),await this.onMessageEvent(l)}else ME(e)&&this.events.emit(Qn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,lb.inbound),this.events.emit(Qn.message,e))}async acknowledgePayload(e){const t=kE(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(ni.payload,this.onPayloadHandler),this.provider.off(ni.connect,this.onConnectHandler),this.provider.off(ni.disconnect,this.onDisconnectHandler),this.provider.off(ni.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await w3();SY(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(df.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&OY())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(t){this.logger.warn(t,t==null?void 0:t.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Qn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Ce.toMiliseconds(FQ)))))}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function lX(n,e){return n===e||Number.isNaN(n)&&Number.isNaN(e)}function H3(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function j3(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const uX="[object RegExp]",fX="[object String]",hX="[object Number]",dX="[object Boolean]",z3="[object Arguments]",pX="[object Symbol]",gX="[object Date]",mX="[object Map]",yX="[object Set]",wX="[object Array]",bX="[object Function]",EX="[object ArrayBuffer]",pC="[object Object]",vX="[object Error]",AX="[object DataView]",CX="[object Uint8Array]",_X="[object Uint8ClampedArray]",SX="[object Uint16Array]",NX="[object Uint32Array]",TX="[object BigUint64Array]",OX="[object Int8Array]",xX="[object Int16Array]",IX="[object Int32Array]",RX="[object BigInt64Array]",PX="[object Float32Array]",DX="[object Float64Array]";function UX(){}function q3(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(n)==="[object Object]":!1}function kX(n,e,t){return Qg(n,e,void 0,void 0,void 0,void 0,t)}function Qg(n,e,t,r,s,i,o){const l=o(n,e,t,r,s,i);if(l!==void 0)return l;if(typeof n==typeof e)switch(typeof n){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return n===e;case"number":return n===e||Object.is(n,e);case"function":return n===e;case"object":return dm(n,e,i,o)}return dm(n,e,i,o)}function dm(n,e,t,r){if(Object.is(n,e))return!0;let s=j3(n),i=j3(e);if(s===z3&&(s=pC),i===z3&&(i=pC),s!==i)return!1;switch(s){case fX:return n.toString()===e.toString();case hX:{const f=n.valueOf(),h=e.valueOf();return lX(f,h)}case dX:case gX:case pX:return Object.is(n.valueOf(),e.valueOf());case uX:return n.source===e.source&&n.flags===e.flags;case bX:return n===e}t=t??new Map;const o=t.get(n),l=t.get(e);if(o!=null&&l!=null)return o===e;t.set(n,e),t.set(e,n);try{switch(s){case mX:{if(n.size!==e.size)return!1;for(const[f,h]of n.entries())if(!e.has(f)||!Qg(h,e.get(f),f,n,e,t,r))return!1;return!0}case yX:{if(n.size!==e.size)return!1;const f=Array.from(n.values()),h=Array.from(e.values());for(let p=0;p<f.length;p++){const g=f[p],y=h.findIndex(b=>Qg(g,b,void 0,n,e,t,r));if(y===-1)return!1;h.splice(y,1)}return!0}case wX:case CX:case _X:case SX:case NX:case TX:case OX:case xX:case IX:case RX:case PX:case DX:{if(typeof Buffer<"u"&&Buffer.isBuffer(n)!==Buffer.isBuffer(e)||n.length!==e.length)return!1;for(let f=0;f<n.length;f++)if(!Qg(n[f],e[f],f,n,e,t,r))return!1;return!0}case EX:return n.byteLength!==e.byteLength?!1:dm(new Uint8Array(n),new Uint8Array(e),t,r);case AX:return n.byteLength!==e.byteLength||n.byteOffset!==e.byteOffset?!1:dm(new Uint8Array(n),new Uint8Array(e),t,r);case vX:return n.name===e.name&&n.message===e.message;case pC:{if(!(dm(n.constructor,e.constructor,t,r)||q3(n)&&q3(e)))return!1;const f=[...Object.keys(n),...H3(n)],h=[...Object.keys(e),...H3(e)];if(f.length!==h.length)return!1;for(let p=0;p<f.length;p++){const g=f[p],y=n[g];if(!Object.hasOwn(e,g))return!1;const b=e[g];if(!Qg(y,b,g,n,e,t,r))return!1}return!0}default:return!1}}finally{t.delete(n),t.delete(e)}}function BX(n,e){return kX(n,e,UX)}var MX=Object.defineProperty,V3=Object.getOwnPropertySymbols,LX=Object.prototype.hasOwnProperty,$X=Object.prototype.propertyIsEnumerable,q_=(n,e,t)=>e in n?MX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,G3=(n,e)=>{for(var t in e||(e={}))LX.call(e,t)&&q_(n,t,e[t]);if(V3)for(var t of V3(e))$X.call(e,t)&&q_(n,t,e[t]);return n},rs=(n,e,t)=>q_(n,typeof e!="symbol"?e+"":e,t);class gf extends Y7{constructor(e,t,r,s=La,i=void 0){super(e,t,r,s),this.core=e,this.logger=t,this.name=r,rs(this,"map",new Map),rs(this,"version",HQ),rs(this,"cached",[]),rs(this,"initialized",!1),rs(this,"getKey"),rs(this,"storagePrefix",La),rs(this,"recentlyDeleted",[]),rs(this,"recentlyDeletedLimit",200),rs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!fr(o)?this.map.set(this.getKey(o),o):nY(o)?this.map.set(o.id,o):rY(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),rs(this,"set",async(o,l)=>{this.isInitialized(),this.map.has(o)?await this.update(o,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:l}),this.map.set(o,l),await this.persist())}),rs(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),rs(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(l=>Object.keys(o).every(f=>BX(l[f],o[f]))):this.values)),rs(this,"update",async(o,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:l});const f=G3(G3({},this.getData(o)),l);this.map.set(o,f),await this.persist()}),rs(this,"delete",async(o,l)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:l}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Rr(t,this.name),this.storagePrefix=s,this.getKey=i}get context(){return bs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:s}=Ae("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=Ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var FX=Object.defineProperty,HX=(n,e,t)=>e in n?FX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gt=(n,e,t)=>HX(n,typeof e!="symbol"?e+"":e,t);class jX{constructor(e,t){this.core=e,this.logger=t,gt(this,"name",VQ),gt(this,"version",GQ),gt(this,"events",new J2),gt(this,"pairings"),gt(this,"initialized",!1),gt(this,"storagePrefix",La),gt(this,"ignoredPayloadTypes",[Do]),gt(this,"registeredMethods",[]),gt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),gt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),gt(this,"create",async r=>{this.isInitialized();const s=R_(),i=await this.core.crypto.setSymKey(s),o=kn(Ce.FIVE_MINUTES),l={protocol:G5},f={topic:i,expiry:o,relay:l,active:!1,methods:r==null?void 0:r.methods},h=l3({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:l,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(nu.create,f),this.core.expirer.set(i,o),await this.pairings.set(i,f),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:h}}),gt(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[fa.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:l,expiryTimestamp:f,methods:h}=c3(r.uri);s.props.properties.topic=i,s.addTrace(fa.pairing_uri_validation_success),s.addTrace(fa.pairing_uri_not_expired);let p;if(this.pairings.keys.includes(i)){if(p=this.pairings.get(i),s.addTrace(fa.existing_pairing),p.active)throw s.setError(fo.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(fa.pairing_not_expired)}const g=f||kn(Ce.FIVE_MINUTES),y={topic:i,relay:l,expiry:g,active:!1,methods:h};this.core.expirer.set(i,g),await this.pairings.set(i,y),s.addTrace(fa.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(nu.create,y),s.addTrace(fa.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(fa.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(fo.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:l})}catch(b){throw s.setError(fo.subscribe_pairing_topic_failure),b}return s.addTrace(fa.subscribe_pairing_topic_success),y}),gt(this,"activate",async({topic:r})=>{this.isInitialized();const s=kn(Ce.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),gt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:l,reject:f}=Jl();this.events.once(Bt("pairing_ping",i),({error:h})=>{h?f(h):l()}),await o()}}),gt(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),gt(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),gt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),gt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",un("USER_DISCONNECTED")),await this.deletePairing(s))}),gt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:l}=r,f=this.core.crypto.keychain.get(s);return l3({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:f,relay:i,expiryTimestamp:o,methods:l})}),gt(this,"sendRequest",async(r,s,i)=>{const o=al(s,i),l=await this.core.crypto.encode(r,o),f=Ug[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,l,f),o.id}),gt(this,"sendResult",async(r,s,i)=>{const o=kE(r,i),l=await this.core.crypto.encode(s,o),f=(await this.core.history.get(s,r)).request.method,h=Ug[f].res;await this.core.relayer.publish(s,l,h),await this.core.history.resolve(o)}),gt(this,"sendError",async(r,s,i)=>{const o=BE(r,i),l=await this.core.crypto.encode(s,o),f=(await this.core.history.get(s,r)).request.method,h=Ug[f]?Ug[f].res:Ug.unregistered_method.res;await this.core.relayer.publish(s,l,h),await this.core.history.resolve(o)}),gt(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,un("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),gt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Uc(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),gt(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),gt(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),gt(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(nu.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),gt(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{da(s)?this.events.emit(Bt("pairing_ping",i),{}):di(s)&&this.events.emit(Bt("pairing_ping",i),{error:s.error})},500)}),gt(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(nu.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),gt(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const l=un("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,l),this.logger.error(l)}catch(l){await this.sendError(i,r,l),this.logger.error(l)}}),gt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(un("WC_METHOD_UNSUPPORTED",r))}),gt(this,"isValidPair",(r,s)=>{var i;if(!os(r)){const{message:l}=Ae("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(fo.malformed_pairing_uri),new Error(l)}if(!tY(r.uri)){const{message:l}=Ae("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(fo.malformed_pairing_uri),new Error(l)}const o=c3(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:l}=Ae("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(fo.malformed_pairing_uri),new Error(l)}if(!(o!=null&&o.symKey)){const{message:l}=Ae("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(fo.malformed_pairing_uri),new Error(l)}if(o!=null&&o.expiryTimestamp&&Ce.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(fo.pairing_expired);const{message:l}=Ae("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(l)}}),gt(this,"isValidPing",async r=>{if(!os(r)){const{message:i}=Ae("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),gt(this,"isValidDisconnect",async r=>{if(!os(r)){const{message:i}=Ae("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),gt(this,"isValidPairingTopic",async r=>{if(!On(r,!1)){const{message:s}=Ae("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Ae("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Uc(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Ae("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Rr(t,this.name),this.pairings=new gf(this.core,this.logger,this.name,this.storagePrefix)}get context(){return bs(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Qn.message,async e=>{const{topic:t,message:r,transportType:s}=e;if(this.pairings.keys.includes(t)&&s!==an.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(t,r);NS(i)?(this.core.history.set(t,i),await this.onRelayEventRequest({topic:t,payload:i})):ME(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:t,payload:i}),this.core.history.delete(t,i.id)),await this.core.relayer.messages.ack(t,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(ai.expired,async e=>{const{topic:t}=V8(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(nu.expire,{topic:t}))})}}var zX=Object.defineProperty,qX=(n,e,t)=>e in n?zX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,cr=(n,e,t)=>qX(n,typeof e!="symbol"?e+"":e,t);class VX extends V7{constructor(e,t){super(e,t),this.core=e,this.logger=t,cr(this,"records",new Map),cr(this,"events",new bi.EventEmitter),cr(this,"name",KQ),cr(this,"version",WQ),cr(this,"cached",[]),cr(this,"initialized",!1),cr(this,"storagePrefix",La),cr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),cr(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:kn(Ce.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Ni.created,o)}),cr(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=di(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Ni.updated,s))}),cr(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),cr(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Ni.deleted,i)}}),this.persist()}),cr(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),cr(this,"on",(r,s)=>{this.events.on(r,s)}),cr(this,"once",(r,s)=>{this.events.once(r,s)}),cr(this,"off",(r,s)=>{this.events.off(r,s)}),cr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Rr(t,this.name)}get context(){return bs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:al(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:r}=Ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ni.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=Ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Ni.created,e=>{const t=Ni.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Ni.updated,e=>{const t=Ni.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Ni.deleted,e=>{const t=Ni.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(df.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{Ce.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(Ni.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var GX=Object.defineProperty,KX=(n,e,t)=>e in n?GX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_r=(n,e,t)=>KX(n,typeof e!="symbol"?e+"":e,t);class WX extends Z7{constructor(e,t){super(e,t),this.core=e,this.logger=t,_r(this,"expirations",new Map),_r(this,"events",new bi.EventEmitter),_r(this,"name",YQ),_r(this,"version",QQ),_r(this,"cached",[]),_r(this,"initialized",!1),_r(this,"storagePrefix",La),_r(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),_r(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),_r(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(ai.created,{target:i,expiration:o})}),_r(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),_r(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(ai.deleted,{target:s,expiration:i})}}),_r(this,"on",(r,s)=>{this.events.on(r,s)}),_r(this,"once",(r,s)=>{this.events.once(r,s)}),_r(this,"off",(r,s)=>{this.events.off(r,s)}),_r(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Rr(t,this.name)}get context(){return bs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return $V(e);if(typeof e=="number")return FV(e);const{message:t}=Ae("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ai.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=Ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:r}=Ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return t}checkExpiry(e,t){const{expiry:r}=t;Ce.toMiliseconds(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(ai.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(df.pulse,()=>this.checkExpirations()),this.events.on(ai.created,e=>{const t=ai.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(ai.expired,e=>{const t=ai.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(ai.deleted,e=>{const t=ai.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var YX=Object.defineProperty,QX=(n,e,t)=>e in n?YX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Tn=(n,e,t)=>QX(n,typeof e!="symbol"?e+"":e,t);class ZX extends J7{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,Tn(this,"name",ZQ),Tn(this,"abortController"),Tn(this,"isDevEnv"),Tn(this,"verifyUrlV3",XQ),Tn(this,"storagePrefix",La),Tn(this,"version",V5),Tn(this,"publicKey"),Tn(this,"fetchPromise"),Tn(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Ce.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Tn(this,"register",async s=>{if(!hp()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:l}=s,f=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${l}`;try{const h=Lo.getDocument(),p=this.startAbortTimer(Ce.ONE_SECOND*5),g=await new Promise((y,b)=>{const v=()=>{window.removeEventListener("message",A),h.body.removeChild(E),b("attestation aborted")};this.abortController.signal.addEventListener("abort",v);const E=h.createElement("iframe");E.src=f,E.style.display="none",E.addEventListener("error",v,{signal:this.abortController.signal});const A=S=>{if(S.data&&typeof S.data=="string")try{const O=JSON.parse(S.data);if(O.type==="verify_attestation"){if(f_(O.attestation).payload.id!==o)return;clearInterval(p),h.body.removeChild(E),this.abortController.signal.removeEventListener("abort",v),window.removeEventListener("message",A),y(O.attestation===null?"":O.attestation)}}catch(O){this.logger.warn(O)}};h.body.appendChild(E),window.addEventListener("message",A,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",g),g}catch(h){this.logger.warn(h)}return""}),Tn(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:l}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(f_(i).payload.id!==l)return;const h=await this.isValidJwtAttestation(i);if(h){if(!h.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return h}}if(!o)return;const f=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,f)}),Tn(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(Ce.ONE_SECOND*5),l=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),l.status===200?await l.json():void 0}),Tn(this,"getVerifyUrl",s=>{let i=s||hm;return eZ.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${hm}`),i=hm),i}),Tn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Ce.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Tn(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Tn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Tn(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}}),Tn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Tn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Tn(this,"validateAttestation",(s,i)=>{const o=UW(s,i.publicKey),l={hasExpired:Ce.toMiliseconds(o.exp)<Date.now(),payload:o};if(l.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:l.payload.origin,isScam:l.payload.isScam,isVerified:l.payload.isVerified}}),this.logger=Rr(t,this.name),this.abortController=new AbortController,this.isDevEnv=fS(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return bs(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Ce.toMiliseconds(e))}}var JX=Object.defineProperty,XX=(n,e,t)=>e in n?JX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,K3=(n,e,t)=>XX(n,typeof e!="symbol"?e+"":e,t);class eee extends X7{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,K3(this,"context",tZ),K3(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:l=!1}=r,f=`${nZ}/${this.projectId}/clients`;await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:l})})}),this.logger=Rr(t,this.context)}}var tee=Object.defineProperty,W3=Object.getOwnPropertySymbols,nee=Object.prototype.hasOwnProperty,ree=Object.prototype.propertyIsEnumerable,V_=(n,e,t)=>e in n?tee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Mg=(n,e)=>{for(var t in e||(e={}))nee.call(e,t)&&V_(n,t,e[t]);if(W3)for(var t of W3(e))ree.call(e,t)&&V_(n,t,e[t]);return n},qn=(n,e,t)=>V_(n,typeof e!="symbol"?e+"":e,t);class see extends eF{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,qn(this,"context",sZ),qn(this,"storagePrefix",La),qn(this,"storageVersion",rZ),qn(this,"events",new Map),qn(this,"shouldPersist",!1),qn(this,"init",async()=>{if(!fS())try{const s={eventId:IR(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:z8(this.core.relayer.protocol,this.core.relayer.version,M_)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),qn(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:l,trace:f}}=s,h=IR(),p=this.core.projectId||"",g=Date.now(),y=Mg({eventId:h,timestamp:g,props:{event:i,type:o,properties:{topic:l,trace:f}},bundleId:p,domain:this.getAppDomain()},this.setMethods(h));return this.telemetryEnabled&&(this.events.set(h,y),this.shouldPersist=!0),y}),qn(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const l=Array.from(this.events.values()).find(f=>f.props.properties.topic===o);if(l)return Mg(Mg({},l),this.setMethods(l.eventId))}),qn(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),qn(this,"setEventListeners",()=>{this.core.heartbeat.on(df.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Ce.fromMiliseconds(Date.now())-Ce.fromMiliseconds(s.timestamp)>iZ&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),qn(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),qn(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),qn(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),qn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),qn(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Mg(Mg({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),qn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),qn(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${aZ}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${M_}${i}`,{method:"POST",body:JSON.stringify(s)})}),qn(this,"getAppDomain",()=>j8().url),this.logger=Rr(t,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var iee=Object.defineProperty,Y3=Object.getOwnPropertySymbols,aee=Object.prototype.hasOwnProperty,oee=Object.prototype.propertyIsEnumerable,G_=(n,e,t)=>e in n?iee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Q3=(n,e)=>{for(var t in e||(e={}))aee.call(e,t)&&G_(n,t,e[t]);if(Y3)for(var t of Y3(e))oee.call(e,t)&&G_(n,t,e[t]);return n},tn=(n,e,t)=>G_(n,typeof e!="symbol"?e+"":e,t);let cee=class a4 extends H7{constructor(e){var t;super(e),tn(this,"protocol",q5),tn(this,"version",V5),tn(this,"name",B_),tn(this,"relayUrl"),tn(this,"projectId"),tn(this,"customStoragePrefix"),tn(this,"events",new bi.EventEmitter),tn(this,"logger"),tn(this,"heartbeat"),tn(this,"relayer"),tn(this,"crypto"),tn(this,"storage"),tn(this,"history"),tn(this,"expirer"),tn(this,"pairing"),tn(this,"verify"),tn(this,"echoClient"),tn(this,"linkModeSupportedApps"),tn(this,"eventClient"),tn(this,"initialized",!1),tn(this,"logChunkController"),tn(this,"on",(l,f)=>this.events.on(l,f)),tn(this,"once",(l,f)=>this.events.once(l,f)),tn(this,"off",(l,f)=>this.events.off(l,f)),tn(this,"removeListener",(l,f)=>this.events.removeListener(l,f)),tn(this,"dispatchEnvelope",({topic:l,message:f,sessionExists:h})=>{if(!l||!f)return;const p={topic:l,message:f,publishedAt:Date.now(),transportType:an.link_mode};this.relayer.onLinkMessageEvent(p,{sessionExists:h})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(l){console.warn("Failed to copy global core",l)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||K5,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=cp({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:OQ.logger,name:B_}),{logger:i,chunkLoggerController:o}=eS({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var l,f;(l=this.logChunkController)!=null&&l.downloadLogsBlobInBrowser&&((f=this.logChunkController)==null||f.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Rr(i,this.name),this.heartbeat=new F$,this.crypto=new kJ(this,this.logger,e==null?void 0:e.keychain),this.history=new VX(this,this.logger),this.expirer=new WX(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new A7(Q3(Q3({},xQ),e==null?void 0:e.storageOptions)),this.relayer=new cX({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new jX(this,this.logger),this.verify=new ZX(this,this.logger,this.storage),this.echoClient=new eee(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new see(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const t=new a4(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem(jQ,r),t}get context(){return bs(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(x3,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(x3)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(t){console.warn("Failed to get global WalletConnect core",t);return}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((t=e.opts)==null?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&TQ.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const lee=cee,o4="wc",c4=2,l4="client",TS=`${o4}@${c4}:${l4}:`,gC={name:l4,logger:"error"},Z3="WALLETCONNECT_DEEPLINK_CHOICE",uee="proposal",J3="Proposal expired",fee="session",hh=Ce.SEVEN_DAYS,hee="engine",Vn={wc_sessionPropose:{req:{ttl:Ce.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Ce.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Ce.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Ce.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Ce.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Ce.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Ce.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Ce.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Ce.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Ce.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Ce.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Ce.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Ce.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1119}}},mC={min:Ce.FIVE_MINUTES,max:Ce.SEVEN_DAYS},la={idle:"IDLE",active:"ACTIVE"},dee={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},pee="request",gee=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],mee="wc",yee="auth",wee="authKeys",bee="pairingTopics",Eee="requests",$E=`${mee}@${1.5}:${yee}:`,ub=`${$E}:PUB_KEY`;var vee=Object.defineProperty,Aee=Object.defineProperties,Cee=Object.getOwnPropertyDescriptors,X3=Object.getOwnPropertySymbols,_ee=Object.prototype.hasOwnProperty,See=Object.prototype.propertyIsEnumerable,K_=(n,e,t)=>e in n?vee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sn=(n,e)=>{for(var t in e||(e={}))_ee.call(e,t)&&K_(n,t,e[t]);if(X3)for(var t of X3(e))See.call(e,t)&&K_(n,t,e[t]);return n},ss=(n,e)=>Aee(n,Cee(e)),ye=(n,e,t)=>K_(n,typeof e!="symbol"?e+"":e,t);class Nee extends sF{constructor(e){super(e),ye(this,"name",hee),ye(this,"events",new J2),ye(this,"initialized",!1),ye(this,"requestQueue",{state:la.idle,queue:[]}),ye(this,"sessionRequestQueue",{state:la.idle,queue:[]}),ye(this,"emittedSessionRequests",new YV({limit:500})),ye(this,"requestQueueDelay",Ce.ONE_SECOND),ye(this,"expectedPairingMethodMap",new Map),ye(this,"recentlyDeletedMap",new Map),ye(this,"recentlyDeletedLimit",200),ye(this,"relayMessageCache",[]),ye(this,"pendingSessions",new Map),ye(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Vn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Ce.toMiliseconds(this.requestQueueDelay)))}),ye(this,"connect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=ss(sn({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=QW(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:l,scopedProperties:f,relays:h}=r;let p=s,g,y=!1;try{if(p){const D=this.client.core.pairing.pairings.get(p);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),y=D.active}}catch(D){throw this.client.logger.error(`connect() -> pairing.get(${p}) failed`),D}if(!p||!y){const{topic:D,uri:F}=await this.client.core.pairing.create();p=D,g=F}if(!p){const{message:D}=Ae("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(D)}const b=await this.client.core.crypto.generateKeyPair(),v=Vn.wc_sessionPropose.req.ttl||Ce.FIVE_MINUTES,E=kn(v),A=ss(sn(sn({requiredNamespaces:i,optionalNamespaces:o,relays:h??[{protocol:G5}],proposer:{publicKey:b,metadata:this.client.metadata},expiryTimestamp:E,pairingTopic:p},l&&{sessionProperties:l}),f&&{scopedProperties:f}),{id:ha()}),S=Bt("session_connect",A.id),{reject:O,resolve:T,done:k}=Jl(v,J3),R=({id:D})=>{D===A.id&&(this.client.events.off("proposal_expire",R),this.pendingSessions.delete(A.id),this.events.emit(S,{error:{message:J3,code:0}}))};return this.client.events.on("proposal_expire",R),this.events.once(S,({error:D,session:F})=>{this.client.events.off("proposal_expire",R),D?O(D):F&&T(F)}),await this.sendRequest({topic:p,method:"wc_sessionPropose",params:A,throwOnFailedPublish:!0,clientRpcId:A.id}),await this.setProposal(A.id,A),{uri:g,approval:k}}),ye(this,"pair",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(t)}catch(r){throw this.client.logger.error("pair() failed"),r}}),ye(this,"approve",async t=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=t==null?void 0:t.id)==null?void 0:r.toString(),trace:[Ti.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(B){throw o.setError(ql.no_internet_connection),B}try{await this.isValidProposalId(t==null?void 0:t.id)}catch(B){throw this.client.logger.error(`approve() -> proposal.get(${t==null?void 0:t.id}) failed`),o.setError(ql.proposal_not_found),B}try{await this.isValidApprove(t)}catch(B){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(ql.session_approve_namespace_validation_failure),B}const{id:l,relayProtocol:f,namespaces:h,sessionProperties:p,scopedProperties:g,sessionConfig:y}=t,b=this.client.proposal.get(l);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:v,proposer:E,requiredNamespaces:A,optionalNamespaces:S}=b;let O=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:v});O||(O=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Ti.session_approve_started,properties:{topic:v,trace:[Ti.session_approve_started,Ti.session_namespaces_validation_success]}}));const T=await this.client.core.crypto.generateKeyPair(),k=E.publicKey,R=await this.client.core.crypto.generateSharedKey(T,k),D=sn(sn(sn({relay:{protocol:f??"irn"},namespaces:h,controller:{publicKey:T,metadata:this.client.metadata},expiry:kn(hh)},p&&{sessionProperties:p}),g&&{scopedProperties:g}),y&&{sessionConfig:y}),F=an.relay;O.addTrace(Ti.subscribing_session_topic);try{await this.client.core.relayer.subscribe(R,{transportType:F})}catch(B){throw O.setError(ql.subscribe_session_topic_failure),B}O.addTrace(Ti.subscribe_session_topic_success);const $=ss(sn({},D),{topic:R,requiredNamespaces:A,optionalNamespaces:S,pairingTopic:v,acknowledged:!1,self:D.controller,peer:{publicKey:E.publicKey,metadata:E.metadata},controller:T,transportType:an.relay});await this.client.session.set(R,$),O.addTrace(Ti.store_session);try{O.addTrace(Ti.publishing_session_settle),await this.sendRequest({topic:R,method:"wc_sessionSettle",params:D,throwOnFailedPublish:!0}).catch(B=>{throw O==null||O.setError(ql.session_settle_publish_failure),B}),O.addTrace(Ti.session_settle_publish_success),O.addTrace(Ti.publishing_session_approve),await this.sendResult({id:l,topic:v,result:{relay:{protocol:f??"irn"},responderPublicKey:T},throwOnFailedPublish:!0}).catch(B=>{throw O==null||O.setError(ql.session_approve_publish_failure),B}),O.addTrace(Ti.session_approve_publish_success)}catch(B){throw this.client.logger.error(B),this.client.session.delete(R,un("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(R),B}return this.client.core.eventClient.deleteEvent({eventId:O.eventId}),await this.client.core.pairing.updateMetadata({topic:v,metadata:E.metadata}),await this.deleteProposal(l),await this.client.core.pairing.activate({topic:v}),await this.setExpiry(R,kn(hh)),{topic:R,acknowledged:()=>Promise.resolve(this.client.session.get(R))}}),ye(this,"reject",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(t)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=t;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:Vn.wc_sessionPropose.reject}),await this.deleteProposal(r)}),ye(this,"update",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(t)}catch(g){throw this.client.logger.error("update() -> isValidUpdate() failed"),g}const{topic:r,namespaces:s}=t,{done:i,resolve:o,reject:l}=Jl(),f=ha(),h=du().toString(),p=this.client.session.get(r).namespaces;return this.events.once(Bt("session_update",f),({error:g})=>{g?l(g):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:f,relayRpcId:h}).catch(g=>{this.client.logger.error(g),this.client.session.update(r,{namespaces:p}),l(g)}),{acknowledged:i}}),ye(this,"extend",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(t)}catch(f){throw this.client.logger.error("extend() -> isValidExtend() failed"),f}const{topic:r}=t,s=ha(),{done:i,resolve:o,reject:l}=Jl();return this.events.once(Bt("session_extend",s),({error:f})=>{f?l(f):o()}),await this.setExpiry(r,kn(hh)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(f=>{l(f)}),{acknowledged:i}}),ye(this,"request",async t=>{this.isInitialized();try{await this.isValidRequest(t)}catch(A){throw this.client.logger.error("request() -> isValidRequest() failed"),A}const{chainId:r,request:s,topic:i,expiry:o=Vn.wc_sessionRequest.req.ttl}=t,l=this.client.session.get(i);(l==null?void 0:l.transportType)===an.relay&&await this.confirmOnlineStateOrThrow();const f=ha(),h=du().toString(),{done:p,resolve:g,reject:y}=Jl(o,"Request expired. Please try again.");this.events.once(Bt("session_request",f),({error:A,result:S})=>{A?y(A):g(S)});const b="wc_sessionRequest",v=this.getAppLinkIfEnabled(l.peer.metadata,l.transportType);if(v)return await this.sendRequest({clientRpcId:f,relayRpcId:h,topic:i,method:b,params:{request:ss(sn({},s),{expiryTimestamp:kn(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:v}).catch(A=>y(A)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:f}),await p();const E={request:ss(sn({},s),{expiryTimestamp:kn(o)}),chainId:r};return await Promise.all([new Promise(async A=>{await this.sendRequest({clientRpcId:f,relayRpcId:h,topic:i,method:b,params:E,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(f,E)}).catch(S=>y(S)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:f}),A()}),new Promise(async A=>{var S;if(!((S=l.sessionConfig)!=null&&S.disableDeepLink)){const O=await qV(this.client.core.storage,Z3);await HV({id:f,topic:i,wcDeepLink:O})}A()}),p()]).then(A=>A[2])}),ye(this,"respond",async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:r,response:s}=t,{id:i}=s,o=this.client.session.get(r);o.transportType===an.relay&&await this.confirmOnlineStateOrThrow();const l=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);da(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:l}):di(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:l}),this.cleanupAfterResponse(t)}),ye(this,"ping",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(t)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=t;if(this.client.session.keys.includes(r)){const s=ha(),i=du().toString(),{done:o,resolve:l,reject:f}=Jl();this.events.once(Bt("session_ping",s),({error:h})=>{h?f(h):l()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),ye(this,"emit",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(t);const{topic:r,event:s,chainId:i}=t,o=du().toString(),l=ha();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:l})}),ye(this,"disconnect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(t);const{topic:r}=t;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:un("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Ae("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),ye(this,"find",t=>(this.isInitialized(),this.client.session.getAll().filter(r=>XW(r,t)))),ye(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ye(this,"authenticate",async(t,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(t);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?an.link_mode:an.relay;o===an.relay&&await this.confirmOnlineStateOrThrow();const{chains:l,statement:f="",uri:h,domain:p,nonce:g,type:y,exp:b,nbf:v,methods:E=[],expiry:A}=t,S=[...t.resources||[]],{topic:O,uri:T}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:O,uri:T}});const k=await this.client.core.crypto.generateKeyPair(),R=cb(k);if(await Promise.all([this.client.auth.authKeys.set(ub,{responseTopic:R,publicKey:k}),this.client.auth.pairingTopics.set(R,{topic:R,pairingTopic:O})]),await this.client.core.relayer.subscribe(R,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${O}`),E.length>0){const{namespace:K}=qh(l[0]);let I=aK(K,"request",E);ob(S)&&(I=cK(I,S.pop())),S.push(I)}const D=A&&A>Vn.wc_sessionAuthenticate.req.ttl?A:Vn.wc_sessionAuthenticate.req.ttl,F={authPayload:{type:y??"caip122",chains:l,statement:f,aud:h,domain:p,version:"1",nonce:g,iat:new Date().toISOString(),exp:b,nbf:v,resources:S},requester:{publicKey:k,metadata:this.client.metadata},expiryTimestamp:kn(D)},$={eip155:{chains:l,methods:[...new Set(["personal_sign",...E])],events:["chainChanged","accountsChanged"]}},B={requiredNamespaces:{},optionalNamespaces:$,relays:[{protocol:"irn"}],pairingTopic:O,proposer:{publicKey:k,metadata:this.client.metadata},expiryTimestamp:kn(Vn.wc_sessionPropose.req.ttl),id:ha()},{done:q,resolve:j,reject:W}=Jl(D,"Request expired"),ie=ha(),ee=Bt("session_connect",B.id),x=Bt("session_request",ie),_=async({error:K,session:I})=>{this.events.off(x,M),K?W(K):I&&j({session:I})},M=async K=>{var I,G,X;if(await this.deletePendingAuthRequest(ie,{message:"fulfilled",code:0}),K.error){const qe=un("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return K.error.code===qe.code?void 0:(this.events.off(ee,_),W(K.error.message))}await this.deleteProposal(B.id),this.events.off(ee,_);const{cacaos:re,responder:le}=K.result,ge=[],me=[];for(const qe of re){await HR({cacao:qe,projectId:this.client.core.projectId})||(this.client.logger.error(qe,"Signature verification failed"),W(un("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Ct}=qe,rn=ob(Ct.resources),$n=[A_(Ct.iss)],_n=Lb(Ct.iss);if(rn){const nr=jR(rn),Go=zR(rn);ge.push(...nr),$n.push(...Go)}for(const nr of $n)me.push(`${nr}:${_n}`)}const ze=await this.client.core.crypto.generateSharedKey(k,le.publicKey);let $e;ge.length>0&&($e={topic:ze,acknowledged:!0,self:{publicKey:k,metadata:this.client.metadata},peer:le,controller:le.publicKey,expiry:kn(hh),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:O,namespaces:d3([...new Set(ge)],[...new Set(me)]),transportType:o},await this.client.core.relayer.subscribe(ze,{transportType:o}),await this.client.session.set(ze,$e),O&&await this.client.core.pairing.updateMetadata({topic:O,metadata:le.metadata}),$e=this.client.session.get(ze)),(I=this.client.metadata.redirect)!=null&&I.linkMode&&(G=le.metadata.redirect)!=null&&G.linkMode&&(X=le.metadata.redirect)!=null&&X.universal&&r&&(this.client.core.addLinkModeSupportedApp(le.metadata.redirect.universal),this.client.session.update(ze,{transportType:an.link_mode})),j({auths:re,session:$e})};this.events.once(ee,_),this.events.once(x,M);let V;try{if(i){const K=al("wc_sessionAuthenticate",F,ie);this.client.core.history.set(O,K);const I=await this.client.core.crypto.encode("",K,{type:Gy,encoding:$c});V=Uw(r,O,I)}else await Promise.all([this.sendRequest({topic:O,method:"wc_sessionAuthenticate",params:F,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:ie}),this.sendRequest({topic:O,method:"wc_sessionPropose",params:B,expiry:Vn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:B.id})])}catch(K){throw this.events.off(ee,_),this.events.off(x,M),K}return await this.setProposal(B.id,B),await this.setAuthRequest(ie,{request:ss(sn({},F),{verifyContext:{}}),pairingTopic:O,transportType:o}),{uri:V??T,response:q}}),ye(this,"approveSessionAuthenticate",async t=>{const{id:r,auths:s}=t,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Vl.authenticated_session_approve_started]}});try{this.isInitialized()}catch(A){throw i.setError(kg.no_internet_connection),A}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(kg.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const l=o.transportType||an.relay;l===an.relay&&await this.confirmOnlineStateOrThrow();const f=o.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),p=cb(f),g={type:Do,receiverPublicKey:f,senderPublicKey:h},y=[],b=[];for(const A of s){if(!await HR({cacao:A,projectId:this.client.core.projectId})){i.setError(kg.invalid_cacao);const R=un("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:p,error:R,encodeOpts:g}),new Error(R.message)}i.addTrace(Vl.cacaos_verified);const{p:S}=A,O=ob(S.resources),T=[A_(S.iss)],k=Lb(S.iss);if(O){const R=jR(O),D=zR(O);y.push(...R),T.push(...D)}for(const R of T)b.push(`${R}:${k}`)}const v=await this.client.core.crypto.generateSharedKey(h,f);i.addTrace(Vl.create_authenticated_session_topic);let E;if((y==null?void 0:y.length)>0){E={topic:v,acknowledged:!0,self:{publicKey:h,metadata:this.client.metadata},peer:{publicKey:f,metadata:o.requester.metadata},controller:f,expiry:kn(hh),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:d3([...new Set(y)],[...new Set(b)]),transportType:l},i.addTrace(Vl.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(v,{transportType:l})}catch(A){throw i.setError(kg.subscribe_authenticated_session_topic_failure),A}i.addTrace(Vl.subscribe_authenticated_session_topic_success),await this.client.session.set(v,E),i.addTrace(Vl.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Vl.publishing_authenticated_session_approve);try{await this.sendResult({topic:p,id:r,result:{cacaos:s,responder:{publicKey:h,metadata:this.client.metadata}},encodeOpts:g,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,l)})}catch(A){throw i.setError(kg.authenticated_session_approve_publish_failure),A}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:E}}),ye(this,"rejectSessionAuthenticate",async t=>{this.isInitialized();const{id:r,reason:s}=t,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===an.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),f=cb(o),h={type:Do,receiverPublicKey:o,senderPublicKey:l};await this.sendError({id:r,topic:f,error:s,encodeOpts:h,rpcOpts:Vn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),ye(this,"formatAuthMessage",t=>{this.isInitialized();const{request:r,iss:s}=t;return a5(r,s)}),ye(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)}),ye(this,"cleanupDuplicatePairings",async t=>{if(t.pairingTopic)try{const r=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,l;return((o=i.peerMetadata)==null?void 0:o.url)&&((l=i.peerMetadata)==null?void 0:l.url)===t.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),ye(this,"deleteSession",async t=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:l=0}=t,{self:f}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,un("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(f.publicKey)&&await this.client.core.crypto.deleteKeyPair(f.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Z3).catch(h=>this.client.logger.warn(h)),this.getPendingSessionRequests().forEach(h=>{h.topic===s&&this.deletePendingSessionRequest(h.id,un("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=la.idle),o&&this.client.events.emit("session_delete",{id:l,topic:s})}),ye(this,"deleteProposal",async(t,r)=>{if(r)try{const s=this.client.proposal.get(t),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(ql.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,un("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")}),ye(this,"deletePendingSessionRequest",async(t,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,r),s?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==t),s&&(this.sessionRequestQueue.state=la.idle,this.client.events.emit("session_request_expire",{id:t}))}),ye(this,"deletePendingAuthRequest",async(t,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(t,r),s?Promise.resolve():this.client.core.expirer.del(t)])}),ye(this,"setExpiry",async(t,r)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,r),await this.client.session.update(t,{expiry:r}))}),ye(this,"setProposal",async(t,r)=>{this.client.core.expirer.set(t,kn(Vn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,r)}),ye(this,"setAuthRequest",async(t,r)=>{const{request:s,pairingTopic:i,transportType:o=an.relay}=r;this.client.core.expirer.set(t,s.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:t,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),ye(this,"setPendingSessionRequest",async t=>{const{id:r,topic:s,params:i,verifyContext:o}=t,l=i.request.expiryTimestamp||kn(Vn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,l),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),ye(this,"sendRequest",async t=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:l,clientRpcId:f,throwOnFailedPublish:h,appLink:p,tvf:g}=t,y=al(s,i,f);let b;const v=!!p;try{const S=v?$c:qi;b=await this.client.core.crypto.encode(r,y,{encoding:S})}catch(S){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),S}let E;if(gee.includes(s)){const S=Na(JSON.stringify(y)),O=Na(b);E=await this.client.core.verify.register({id:O,decryptedId:S})}const A=Vn[s].req;if(A.attestation=E,o&&(A.ttl=o),l&&(A.id=l),this.client.core.history.set(r,y),v){const S=Uw(p,r,b);await global.Linking.openURL(S,this.client.name)}else{const S=Vn[s].req;o&&(S.ttl=o),l&&(S.id=l),S.tvf=ss(sn({},g),{correlationId:y.id}),h?(S.internal=ss(sn({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,b,S)):this.client.core.relayer.publish(r,b,S).catch(O=>this.client.logger.error(O))}return y.id}),ye(this,"sendResult",async t=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:l,appLink:f}=t,h=kE(r,i);let p;const g=f&&typeof(global==null?void 0:global.Linking)<"u";try{const v=g?$c:qi;p=await this.client.core.crypto.encode(s,h,ss(sn({},l||{}),{encoding:v}))}catch(v){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),v}let y,b;try{y=await this.client.core.history.get(s,r);const v=y.request;try{b=this.getTVFParams(r,v.params,i)}catch(E){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${E==null?void 0:E.message}`)}}catch(v){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),v}if(g){const v=Uw(f,s,p);await global.Linking.openURL(v,this.client.name)}else{const v=y.request.method,E=Vn[v].res;E.tvf=ss(sn({},b),{correlationId:r}),o?(E.internal=ss(sn({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,p,E)):this.client.core.relayer.publish(s,p,E).catch(A=>this.client.logger.error(A))}await this.client.core.history.resolve(h)}),ye(this,"sendError",async t=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:l,appLink:f}=t,h=BE(r,i);let p;const g=f&&typeof(global==null?void 0:global.Linking)<"u";try{const b=g?$c:qi;p=await this.client.core.crypto.encode(s,h,ss(sn({},o||{}),{encoding:b}))}catch(b){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),b}let y;try{y=await this.client.core.history.get(s,r)}catch(b){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),b}if(g){const b=Uw(f,s,p);await global.Linking.openURL(b,this.client.name)}else{const b=y.request.method,v=l||Vn[b].res;this.client.core.relayer.publish(s,p,v)}await this.client.core.history.resolve(h)}),ye(this,"cleanup",async()=>{const t=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Uc(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Uc(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),ye(this,"onProviderMessageEvent",async t=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(t):await this.onRelayMessage(t)}),ye(this,"onRelayEventRequest",async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()}),ye(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===la.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=la.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=la.idle}),ye(this,"processRequest",async t=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:l}=t,f=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:f}))switch(f){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:l});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:l,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:l,transportType:o});default:return this.client.logger.info(`Unsupported request method ${f}`)}}),ye(this,"onRelayEventResponse",async t=>{const{topic:r,payload:s,transportType:i}=t,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),ye(this,"onRelayEventUnknownPayload",t=>{const{topic:r}=t,{message:s}=Ae("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),ye(this,"shouldIgnorePairingRequest",t=>{const{topic:r,requestMethod:s}=t,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ye(this,"onSessionProposeRequest",async t=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=t,{params:l,id:f}=s;try{const h=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),h==null||h.setError(fo.proposal_listener_not_found)),this.isValidConnect(sn({},s.params));const p=l.expiryTimestamp||kn(Vn.wc_sessionPropose.req.ttl),g=sn({id:f,pairingTopic:r,expiryTimestamp:p,attestation:i,encryptedId:o},l);await this.setProposal(f,g);const y=await this.getVerifyContext({attestationId:i,hash:Na(JSON.stringify(s)),encryptedId:o,metadata:g.proposer.metadata});h==null||h.addTrace(fa.emit_session_proposal),this.client.events.emit("session_proposal",{id:f,params:g,verifyContext:y})}catch(h){await this.sendError({id:f,topic:r,error:h,rpcOpts:Vn.wc_sessionPropose.autoReject}),this.client.logger.error(h)}}),ye(this,"onSessionProposeResponse",async(t,r,s)=>{const{id:i}=r;if(da(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const l=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const f=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const h=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:h});const p=await this.client.core.crypto.generateSharedKey(f,h);this.pendingSessions.set(i,{sessionTopic:p,pairingTopic:t,proposalId:i,publicKey:f});const g=await this.client.core.relayer.subscribe(p,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:g}),await this.client.core.pairing.activate({topic:t})}else if(di(r)){await this.deleteProposal(i);const o=Bt("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),ye(this,"onSessionSettleRequest",async(t,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:l,expiry:f,namespaces:h,sessionProperties:p,scopedProperties:g,sessionConfig:y}=r.params,b=[...this.pendingSessions.values()].find(A=>A.sessionTopic===t);if(!b)return this.client.logger.error(`Pending session not found for topic ${t}`);const v=this.client.proposal.get(b.proposalId),E=ss(sn(sn(sn({topic:t,relay:o,expiry:f,namespaces:h,acknowledged:!0,pairingTopic:b.pairingTopic,requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces,controller:l.publicKey,self:{publicKey:b.publicKey,metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},p&&{sessionProperties:p}),g&&{scopedProperties:g}),y&&{sessionConfig:y}),{transportType:an.relay});await this.client.session.set(E.topic,E),await this.setExpiry(E.topic,E.expiry),await this.client.core.pairing.updateMetadata({topic:b.pairingTopic,metadata:E.peer.metadata}),this.client.events.emit("session_connect",{session:E}),this.events.emit(Bt("session_connect",b.proposalId),{session:E}),this.pendingSessions.delete(b.proposalId),this.deleteProposal(b.proposalId,!1),this.cleanupDuplicatePairings(E),await this.sendResult({id:r.id,topic:t,result:!0})}catch(o){await this.sendError({id:s,topic:t,error:o}),this.client.logger.error(o)}}),ye(this,"onSessionSettleResponse",async(t,r)=>{const{id:s}=r;da(r)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Bt("session_approve",s),{})):di(r)&&(await this.client.session.delete(t,un("USER_DISCONNECTED")),this.events.emit(Bt("session_approve",s),{error:r.error}))}),ye(this,"onSessionUpdateRequest",async(t,r)=>{const{params:s,id:i}=r;try{const o=`${t}_session_update`,l=Dg.get(o);if(l&&this.isRequestOutOfSync(l,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:t,error:un("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(sn({topic:t},s));try{Dg.set(o,i),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:t,result:!0})}catch(f){throw Dg.delete(o),f}this.client.events.emit("session_update",{id:i,topic:t,params:s})}catch(o){await this.sendError({id:i,topic:t,error:o}),this.client.logger.error(o)}}),ye(this,"isRequestOutOfSync",(t,r)=>r.toString().slice(0,-3)<t.toString().slice(0,-3)),ye(this,"onSessionUpdateResponse",(t,r)=>{const{id:s}=r,i=Bt("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);da(r)?this.events.emit(Bt("session_update",s),{}):di(r)&&this.events.emit(Bt("session_update",s),{error:r.error})}),ye(this,"onSessionExtendRequest",async(t,r)=>{const{id:s}=r;try{this.isValidExtend({topic:t}),await this.setExpiry(t,kn(hh)),await this.sendResult({id:s,topic:t,result:!0}),this.client.events.emit("session_extend",{id:s,topic:t})}catch(i){await this.sendError({id:s,topic:t,error:i}),this.client.logger.error(i)}}),ye(this,"onSessionExtendResponse",(t,r)=>{const{id:s}=r,i=Bt("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);da(r)?this.events.emit(Bt("session_extend",s),{}):di(r)&&this.events.emit(Bt("session_extend",s),{error:r.error})}),ye(this,"onSessionPingRequest",async(t,r)=>{const{id:s}=r;try{this.isValidPing({topic:t}),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:t})}catch(i){await this.sendError({id:s,topic:t,error:i}),this.client.logger.error(i)}}),ye(this,"onSessionPingResponse",(t,r)=>{const{id:s}=r,i=Bt("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);da(r)?this.events.emit(Bt("session_ping",s),{}):di(r)&&this.events.emit(Bt("session_ping",s),{error:r.error})},500)}),ye(this,"onSessionDeleteRequest",async(t,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:t,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Qn.publish,async()=>{i(await this.deleteSession({topic:t,id:s}))})}),this.sendResult({id:s,topic:t,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:un("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),ye(this,"onSessionRequest",async t=>{var r,s,i;const{topic:o,payload:l,attestation:f,encryptedId:h,transportType:p}=t,{id:g,params:y}=l;try{await this.isValidRequest(sn({topic:o},y));const b=this.client.session.get(o),v=await this.getVerifyContext({attestationId:f,hash:Na(JSON.stringify(al("wc_sessionRequest",y,g))),encryptedId:h,metadata:b.peer.metadata,transportType:p}),E={id:g,topic:o,params:y,verifyContext:v};await this.setPendingSessionRequest(E),p===an.link_mode&&(r=b.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=b.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(E):(this.addSessionRequestToSessionRequestQueue(E),this.processSessionRequestQueue())}catch(b){await this.sendError({id:g,topic:o,error:b}),this.client.logger.error(b)}}),ye(this,"onSessionRequestResponse",(t,r)=>{const{id:s}=r,i=Bt("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);da(r)?this.events.emit(Bt("session_request",s),{result:r.result}):di(r)&&this.events.emit(Bt("session_request",s),{error:r.error})}),ye(this,"onSessionEventRequest",async(t,r)=>{const{id:s,params:i}=r;try{const o=`${t}_session_event_${i.event.name}`,l=Dg.get(o);if(l&&this.isRequestOutOfSync(l,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(sn({topic:t},i)),this.client.events.emit("session_event",{id:s,topic:t,params:i}),Dg.set(o,s)}catch(o){await this.sendError({id:s,topic:t,error:o}),this.client.logger.error(o)}}),ye(this,"onSessionAuthenticateResponse",(t,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:r}),da(r)?this.events.emit(Bt("session_request",s),{result:r.result}):di(r)&&this.events.emit(Bt("session_request",s),{error:r.error})}),ye(this,"onSessionAuthenticateRequest",async t=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:l,transportType:f}=t;try{const{requester:h,authPayload:p,expiryTimestamp:g}=i.params,y=await this.getVerifyContext({attestationId:o,hash:Na(JSON.stringify(i)),encryptedId:l,metadata:h.metadata,transportType:f}),b={requester:h,pairingTopic:s,id:i.id,authPayload:p,verifyContext:y,expiryTimestamp:g};await this.setAuthRequest(i.id,{request:b,pairingTopic:s,transportType:f}),f===an.link_mode&&(r=h.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(h.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:y})}catch(h){this.client.logger.error(h);const p=i.params.requester.publicKey,g=await this.client.core.crypto.generateKeyPair(),y=this.getAppLinkIfEnabled(i.params.requester.metadata,f),b={type:Do,receiverPublicKey:p,senderPublicKey:g};await this.sendError({id:i.id,topic:s,error:h,encodeOpts:b,rpcOpts:Vn.wc_sessionAuthenticate.autoReject,appLink:y})}}),ye(this,"addSessionRequestToSessionRequestQueue",t=>{this.sessionRequestQueue.queue.push(t)}),ye(this,"cleanupAfterResponse",t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=la.idle,this.processSessionRequestQueue()},Ce.toMiliseconds(this.requestQueueDelay))}),ye(this,"cleanupPendingSentRequestsForTopic",({topic:t,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===t&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,l=Bt("session_request",o);if(this.events.listenerCount(l)===0)throw new Error(`emitting ${l} without any listeners`);this.events.emit(Bt("session_request",i.request.id),{error:r})})}),ye(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===la.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(t)}catch(r){this.client.logger.error(r)}}),ye(this,"emitSessionRequest",t=>{if(this.emittedSessionRequests.has(t.id)){this.client.logger.warn({id:t.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${t.id}`);return}this.sessionRequestQueue.state=la.active,this.emittedSessionRequests.add(t.id),this.client.events.emit("session_request",t)}),ye(this,"onPairingCreated",t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===t.topic);r&&this.onSessionProposeRequest({topic:t.topic,payload:al("wc_sessionPropose",ss(sn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),ye(this,"isValidConnect",async t=>{if(!os(t)){const{message:h}=Ae("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(h)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:l,relays:f}=t;if(fr(r)||await this.isValidPairingTopic(r),!fY(f)){const{message:h}=Ae("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(h)}if(!fr(s)&&Ua(s)!==0){const h="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(h):this.client.logger.warn(h),this.validateNamespaces(s,"requiredNamespaces")}if(!fr(i)&&Ua(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),fr(o)||this.validateSessionProps(o,"sessionProperties"),!fr(l)){this.validateSessionProps(l,"scopedProperties");const h=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(l).every(p=>h.includes(p.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(l)}, required/optional namespaces: ${JSON.stringify(h)}`)}}),ye(this,"validateNamespaces",(t,r)=>{const s=uY(t,"connect()",r);if(s)throw new Error(s.message)}),ye(this,"isValidApprove",async t=>{if(!os(t))throw new Error(Ae("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:l}=t;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const f=this.client.proposal.get(r),h=cC(s,"approve()");if(h)throw new Error(h.message);const p=m3(f.requiredNamespaces,s,"approve()");if(p)throw new Error(p.message);if(!On(i,!0)){const{message:g}=Ae("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(g)}if(fr(o)||this.validateSessionProps(o,"sessionProperties"),!fr(l)){this.validateSessionProps(l,"scopedProperties");const g=new Set(Object.keys(s));if(!Object.keys(l).every(y=>g.has(y.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(l)}, approved namespaces: ${Array.from(g).join(", ")}`)}}),ye(this,"isValidReject",async t=>{if(!os(t)){const{message:i}=Ae("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(i)}const{id:r,reason:s}=t;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!dY(s)){const{message:i}=Ae("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),ye(this,"isValidSessionSettleRequest",t=>{if(!os(t)){const{message:h}=Ae("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(h)}const{relay:r,controller:s,namespaces:i,expiry:o}=t;if(!M5(r)){const{message:h}=Ae("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(h)}const l=sY(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);const f=cC(i,"onSessionSettleRequest()");if(f)throw new Error(f.message);if(Uc(o)){const{message:h}=Ae("EXPIRED","onSessionSettleRequest()");throw new Error(h)}}),ye(this,"isValidUpdate",async t=>{if(!os(t)){const{message:f}=Ae("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(f)}const{topic:r,namespaces:s}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=cC(s,"update()");if(o)throw new Error(o.message);const l=m3(i.requiredNamespaces,s,"update()");if(l)throw new Error(l.message)}),ye(this,"isValidExtend",async t=>{if(!os(t)){const{message:s}=Ae("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(s)}const{topic:r}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),ye(this,"isValidRequest",async t=>{if(!os(t)){const{message:f}=Ae("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(f)}const{topic:r,request:s,chainId:i,expiry:o}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:l}=this.client.session.get(r);if(!g3(l,i)){const{message:f}=Ae("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(f)}if(!pY(s)){const{message:f}=Ae("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(f)}if(!yY(l,i,s.method)){const{message:f}=Ae("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(f)}if(o&&!vY(o,mC)){const{message:f}=Ae("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${mC.min} and ${mC.max}`);throw new Error(f)}}),ye(this,"isValidRespond",async t=>{var r;if(!os(t)){const{message:o}=Ae("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(o)}const{topic:s,response:i}=t;try{await this.isValidSessionTopic(s)}catch(o){throw(r=t==null?void 0:t.response)!=null&&r.id&&this.cleanupAfterResponse(t),o}if(!gY(i)){const{message:o}=Ae("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),ye(this,"isValidPing",async t=>{if(!os(t)){const{message:s}=Ae("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(s)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)}),ye(this,"isValidEmit",async t=>{if(!os(t)){const{message:l}=Ae("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(l)}const{topic:r,event:s,chainId:i}=t;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!g3(o,i)){const{message:l}=Ae("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(l)}if(!mY(s)){const{message:l}=Ae("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}if(!wY(o,i,s.name)){const{message:l}=Ae("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}}),ye(this,"isValidDisconnect",async t=>{if(!os(t)){const{message:s}=Ae("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(s)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)}),ye(this,"isValidAuthenticate",t=>{const{chains:r,uri:s,domain:i,nonce:o}=t;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!On(s,!1))throw new Error("uri is required parameter");if(!On(i,!1))throw new Error("domain is required parameter");if(!On(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(f=>qh(f).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:l}=qh(r[0]);if(l!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ye(this,"getVerifyContext",async t=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:l}=t,f={verified:{verifyUrl:o.verifyUrl||hm,validation:"UNKNOWN",origin:o.url||""}};try{if(l===an.link_mode){const p=this.getAppLinkIfEnabled(o,l);return f.verified.validation=p&&new URL(p).origin===new URL(o.url).origin?"VALID":"INVALID",f}const h=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});h&&(f.verified.origin=h.origin,f.verified.isScam=h.isScam,f.verified.validation=h.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(h){this.client.logger.warn(h)}return this.client.logger.debug(`Verify context: ${JSON.stringify(f)}`),f}),ye(this,"validateSessionProps",(t,r)=>{Object.values(t).forEach((s,i)=>{if(s==null){const{message:o}=Ae("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(t)[i]}`);throw new Error(o)}})}),ye(this,"getPendingAuthRequest",t=>{const r=this.client.auth.requests.get(t);return typeof r=="object"?r:void 0}),ye(this,"addToRecentlyDeleted",(t,r)=>{if(this.recentlyDeletedMap.set(t,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),ye(this,"checkRecentlyDeleted",t=>{const r=this.recentlyDeletedMap.get(t);if(r){const{message:s}=Ae("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${t}`);throw new Error(s)}}),ye(this,"isLinkModeEnabled",(t,r)=>{var s,i,o,l,f,h,p,g,y;return!t||r!==an.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((l=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:l.universal)!==void 0&&((h=(f=this.client.metadata)==null?void 0:f.redirect)==null?void 0:h.universal)!==""&&((p=t==null?void 0:t.redirect)==null?void 0:p.universal)!==void 0&&((g=t==null?void 0:t.redirect)==null?void 0:g.universal)!==""&&((y=t==null?void 0:t.redirect)==null?void 0:y.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),ye(this,"getAppLinkIfEnabled",(t,r)=>{var s;return this.isLinkModeEnabled(t,r)?(s=t==null?void 0:t.redirect)==null?void 0:s.universal:void 0}),ye(this,"handleLinkModeMessage",({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;const r=xR(t,"topic")||"",s=decodeURIComponent(xR(t,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:an.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),ye(this,"registerLinkModeListeners",async()=>{var t;if(fS()||vl()&&(t=this.client.metadata.redirect)!=null&&t.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),ye(this,"getTVFParams",(t,r,s)=>{var i,o,l;if(!((i=r.request)!=null&&i.method))return{};const f={correlationId:t,rpcMethods:[r.request.method],chainId:r.chainId};try{const h=this.extractTxHashesFromResult(r.request,s);f.txHashes=h,f.contractAddresses=this.isValidContractData(r.request.params)?[(l=(o=r.request.params)==null?void 0:o[0])==null?void 0:l.to]:[]}catch(h){this.client.logger.warn("Error getting TVF params",h)}return f}),ye(this,"isValidContractData",t=>{var r;if(!t)return!1;try{const s=(t==null?void 0:t.data)||((r=t==null?void 0:t[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),ye(this,"extractTxHashesFromResult",(t,r)=>{var s;try{if(!r)return[];const i=t.method,o=dee[i];if(i==="sui_signTransaction")return[qG(r.transactionBytes)];if(i==="near_signTransaction")return[MR(r)];if(i==="near_signTransactions")return r.map(f=>MR(f));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[BY({transaction:t.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return Uo(r)?r.map(f=>LR(f)):[LR(r)];if(i==="cosmos_signDirect")return[GG(r)];if(typeof r=="string")return[r];const l=r[o.key];if(Uo(l))return i==="solana_signAllTransactions"?l.map(f=>zG(f)):l;if(typeof l=="string")return[l]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(t))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Qn.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:t,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(ub)?this.client.auth.authKeys.get(ub):{publicKey:void 0};try{const l=await this.client.core.crypto.decode(t,r,{receiverPublicKey:o,encoding:i===an.link_mode?$c:qi});NS(l)?(this.client.core.history.set(t,l),await this.onRelayEventRequest({topic:t,payload:l,attestation:s,transportType:i,encryptedId:Na(r)})):ME(l)?(await this.client.core.history.resolve(l),await this.onRelayEventResponse({topic:t,payload:l,transportType:i}),this.client.core.history.delete(t,l.id)):await this.onRelayEventUnknownPayload({topic:t,payload:l,transportType:i}),await this.client.core.relayer.messages.ack(t,r)}catch(l){this.client.logger.error(l)}}registerExpirerEvents(){this.client.core.expirer.on(ai.expired,async e=>{const{topic:t,id:r}=V8(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Ae("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Ae("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(nu.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(nu.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!On(e,!1)){const{message:t}=Ae("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=Ae("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Uc(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=Ae("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!On(e,!1)){const{message:t}=Ae("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=Ae("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Uc(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=Ae("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=Ae("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(On(e,!1)){const{message:t}=Ae("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=Ae("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!hY(e)){const{message:t}=Ae("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=Ae("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Uc(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=Ae("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class Tee extends gf{constructor(e,t){super(e,t,uee,TS),this.core=e,this.logger=t}}let Oee=class extends gf{constructor(e,t){super(e,t,fee,TS),this.core=e,this.logger=t}};class xee extends gf{constructor(e,t){super(e,t,pee,TS,r=>r.id),this.core=e,this.logger=t}}class Iee extends gf{constructor(e,t){super(e,t,wee,$E,()=>ub),this.core=e,this.logger=t}}class Ree extends gf{constructor(e,t){super(e,t,bee,$E),this.core=e,this.logger=t}}class Pee extends gf{constructor(e,t){super(e,t,Eee,$E,r=>r.id),this.core=e,this.logger=t}}var Dee=Object.defineProperty,Uee=(n,e,t)=>e in n?Dee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yC=(n,e,t)=>Uee(n,typeof e!="symbol"?e+"":e,t);class kee{constructor(e,t){this.core=e,this.logger=t,yC(this,"authKeys"),yC(this,"pairingTopics"),yC(this,"requests"),this.authKeys=new Iee(this.core,this.logger),this.pairingTopics=new Ree(this.core,this.logger),this.requests=new Pee(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Bee=Object.defineProperty,Mee=(n,e,t)=>e in n?Bee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,mt=(n,e,t)=>Mee(n,typeof e!="symbol"?e+"":e,t);let Lee=class u4 extends rF{constructor(e){super(e),mt(this,"protocol",o4),mt(this,"version",c4),mt(this,"name",gC.name),mt(this,"metadata"),mt(this,"core"),mt(this,"logger"),mt(this,"events",new bi.EventEmitter),mt(this,"engine"),mt(this,"session"),mt(this,"proposal"),mt(this,"pendingRequest"),mt(this,"auth"),mt(this,"signConfig"),mt(this,"on",(r,s)=>this.events.on(r,s)),mt(this,"once",(r,s)=>this.events.once(r,s)),mt(this,"off",(r,s)=>this.events.off(r,s)),mt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),mt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),mt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),mt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),mt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),mt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),mt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),mt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),mt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),mt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),mt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),mt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),mt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),mt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),mt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),mt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),mt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),mt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),mt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||gC.name,this.metadata=kV(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:My(cp({level:(e==null?void 0:e.logger)||gC.logger}));this.core=(e==null?void 0:e.core)||new lee(e),this.logger=Rr(t,this.name),this.session=new Oee(this.core,this.logger),this.proposal=new Tee(this.core,this.logger),this.pendingRequest=new xee(this.core,this.logger),this.engine=new Nee(this),this.auth=new kee(this.core,this.logger)}static async init(e){const t=new u4(e);return await t.initialize(),t}get context(){return bs(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Bw={exports:{}},eP;function $ee(){return eP||(eP=1,function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof _a<"u"&&_a,r=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(o){var l=typeof i<"u"&&i||typeof self<"u"&&self||typeof _a<"u"&&_a||{},f={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function h(x){return x&&DataView.prototype.isPrototypeOf(x)}if(f.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(x){return x&&p.indexOf(Object.prototype.toString.call(x))>-1};function y(x){if(typeof x!="string"&&(x=String(x)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(x)||x==="")throw new TypeError('Invalid character in header field name: "'+x+'"');return x.toLowerCase()}function b(x){return typeof x!="string"&&(x=String(x)),x}function v(x){var _={next:function(){var M=x.shift();return{done:M===void 0,value:M}}};return f.iterable&&(_[Symbol.iterator]=function(){return _}),_}function E(x){this.map={},x instanceof E?x.forEach(function(_,M){this.append(M,_)},this):Array.isArray(x)?x.forEach(function(_){if(_.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+_.length);this.append(_[0],_[1])},this):x&&Object.getOwnPropertyNames(x).forEach(function(_){this.append(_,x[_])},this)}E.prototype.append=function(x,_){x=y(x),_=b(_);var M=this.map[x];this.map[x]=M?M+", "+_:_},E.prototype.delete=function(x){delete this.map[y(x)]},E.prototype.get=function(x){return x=y(x),this.has(x)?this.map[x]:null},E.prototype.has=function(x){return this.map.hasOwnProperty(y(x))},E.prototype.set=function(x,_){this.map[y(x)]=b(_)},E.prototype.forEach=function(x,_){for(var M in this.map)this.map.hasOwnProperty(M)&&x.call(_,this.map[M],M,this)},E.prototype.keys=function(){var x=[];return this.forEach(function(_,M){x.push(M)}),v(x)},E.prototype.values=function(){var x=[];return this.forEach(function(_){x.push(_)}),v(x)},E.prototype.entries=function(){var x=[];return this.forEach(function(_,M){x.push([M,_])}),v(x)},f.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);function A(x){if(!x._noBody){if(x.bodyUsed)return Promise.reject(new TypeError("Already read"));x.bodyUsed=!0}}function S(x){return new Promise(function(_,M){x.onload=function(){_(x.result)},x.onerror=function(){M(x.error)}})}function O(x){var _=new FileReader,M=S(_);return _.readAsArrayBuffer(x),M}function T(x){var _=new FileReader,M=S(_),V=/charset=([A-Za-z0-9_-]+)/.exec(x.type),K=V?V[1]:"utf-8";return _.readAsText(x,K),M}function k(x){for(var _=new Uint8Array(x),M=new Array(_.length),V=0;V<_.length;V++)M[V]=String.fromCharCode(_[V]);return M.join("")}function R(x){if(x.slice)return x.slice(0);var _=new Uint8Array(x.byteLength);return _.set(new Uint8Array(x)),_.buffer}function D(){return this.bodyUsed=!1,this._initBody=function(x){this.bodyUsed=this.bodyUsed,this._bodyInit=x,x?typeof x=="string"?this._bodyText=x:f.blob&&Blob.prototype.isPrototypeOf(x)?this._bodyBlob=x:f.formData&&FormData.prototype.isPrototypeOf(x)?this._bodyFormData=x:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(x)?this._bodyText=x.toString():f.arrayBuffer&&f.blob&&h(x)?(this._bodyArrayBuffer=R(x.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(x)||g(x))?this._bodyArrayBuffer=R(x):this._bodyText=x=Object.prototype.toString.call(x):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof x=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(x)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var x=A(this);if(x)return x;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var x=A(this);return x||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(f.blob)return this.blob().then(O);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var x=A(this);if(x)return x;if(this._bodyBlob)return T(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(k(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(q)}),this.json=function(){return this.text().then(JSON.parse)},this}var F=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function $(x){var _=x.toUpperCase();return F.indexOf(_)>-1?_:x}function B(x,_){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');_=_||{};var M=_.body;if(x instanceof B){if(x.bodyUsed)throw new TypeError("Already read");this.url=x.url,this.credentials=x.credentials,_.headers||(this.headers=new E(x.headers)),this.method=x.method,this.mode=x.mode,this.signal=x.signal,!M&&x._bodyInit!=null&&(M=x._bodyInit,x.bodyUsed=!0)}else this.url=String(x);if(this.credentials=_.credentials||this.credentials||"same-origin",(_.headers||!this.headers)&&(this.headers=new E(_.headers)),this.method=$(_.method||this.method||"GET"),this.mode=_.mode||this.mode||null,this.signal=_.signal||this.signal||function(){if("AbortController"in l){var I=new AbortController;return I.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(_.cache==="no-store"||_.cache==="no-cache")){var V=/([?&])_=[^&]*/;if(V.test(this.url))this.url=this.url.replace(V,"$1_="+new Date().getTime());else{var K=/\?/;this.url+=(K.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function q(x){var _=new FormData;return x.trim().split("&").forEach(function(M){if(M){var V=M.split("="),K=V.shift().replace(/\+/g," "),I=V.join("=").replace(/\+/g," ");_.append(decodeURIComponent(K),decodeURIComponent(I))}}),_}function j(x){var _=new E,M=x.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(V){return V.indexOf(`
`)===0?V.substr(1,V.length):V}).forEach(function(V){var K=V.split(":"),I=K.shift().trim();if(I){var G=K.join(":").trim();try{_.append(I,G)}catch(X){console.warn("Response "+X.message)}}}),_}D.call(B.prototype);function W(x,_){if(!(this instanceof W))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(_||(_={}),this.type="default",this.status=_.status===void 0?200:_.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=_.statusText===void 0?"":""+_.statusText,this.headers=new E(_.headers),this.url=_.url||"",this._initBody(x)}D.call(W.prototype),W.prototype.clone=function(){return new W(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},W.error=function(){var x=new W(null,{status:200,statusText:""});return x.ok=!1,x.status=0,x.type="error",x};var ie=[301,302,303,307,308];W.redirect=function(x,_){if(ie.indexOf(_)===-1)throw new RangeError("Invalid status code");return new W(null,{status:_,headers:{location:x}})},o.DOMException=l.DOMException;try{new o.DOMException}catch{o.DOMException=function(_,M){this.message=_,this.name=M;var V=Error(_);this.stack=V.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function ee(x,_){return new Promise(function(M,V){var K=new B(x,_);if(K.signal&&K.signal.aborted)return V(new o.DOMException("Aborted","AbortError"));var I=new XMLHttpRequest;function G(){I.abort()}I.onload=function(){var le={statusText:I.statusText,headers:j(I.getAllResponseHeaders()||"")};K.url.indexOf("file://")===0&&(I.status<200||I.status>599)?le.status=200:le.status=I.status,le.url="responseURL"in I?I.responseURL:le.headers.get("X-Request-URL");var ge="response"in I?I.response:I.responseText;setTimeout(function(){M(new W(ge,le))},0)},I.onerror=function(){setTimeout(function(){V(new TypeError("Network request failed"))},0)},I.ontimeout=function(){setTimeout(function(){V(new TypeError("Network request timed out"))},0)},I.onabort=function(){setTimeout(function(){V(new o.DOMException("Aborted","AbortError"))},0)};function X(le){try{return le===""&&l.location.href?l.location.href:le}catch{return le}}if(I.open(K.method,X(K.url),!0),K.credentials==="include"?I.withCredentials=!0:K.credentials==="omit"&&(I.withCredentials=!1),"responseType"in I&&(f.blob?I.responseType="blob":f.arrayBuffer&&(I.responseType="arraybuffer")),_&&typeof _.headers=="object"&&!(_.headers instanceof E||l.Headers&&_.headers instanceof l.Headers)){var re=[];Object.getOwnPropertyNames(_.headers).forEach(function(le){re.push(y(le)),I.setRequestHeader(le,b(_.headers[le]))}),K.headers.forEach(function(le,ge){re.indexOf(ge)===-1&&I.setRequestHeader(ge,le)})}else K.headers.forEach(function(le,ge){I.setRequestHeader(ge,le)});K.signal&&(K.signal.addEventListener("abort",G),I.onreadystatechange=function(){I.readyState===4&&K.signal.removeEventListener("abort",G)}),I.send(typeof K._bodyInit>"u"?null:K._bodyInit)})}return ee.polyfill=!0,l.fetch||(l.fetch=ee,l.Headers=E,l.Request=B,l.Response=W),o.Headers=E,o.Request=B,o.Response=W,o.fetch=ee,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=t.fetch?t:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,n.exports=e}(Bw,Bw.exports)),Bw.exports}var Fee=$ee();const tP=z2(Fee);var Hee=Object.defineProperty,jee=Object.defineProperties,zee=Object.getOwnPropertyDescriptors,nP=Object.getOwnPropertySymbols,qee=Object.prototype.hasOwnProperty,Vee=Object.prototype.propertyIsEnumerable,rP=(n,e,t)=>e in n?Hee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sP=(n,e)=>{for(var t in e||(e={}))qee.call(e,t)&&rP(n,t,e[t]);if(nP)for(var t of nP(e))Vee.call(e,t)&&rP(n,t,e[t]);return n},iP=(n,e)=>jee(n,zee(e));const Gee={Accept:"application/json","Content-Type":"application/json"},Kee="POST",aP={headers:Gee,method:Kee},oP=10;let Zi=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new bi.EventEmitter,this.isAvailable=!1,this.registering=!1,!C3(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=Mo(e),r=await(await tP(this.url,iP(sP({},aP),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!C3(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Mo({id:1,jsonrpc:"2.0",method:"test",params:[]});await tP(e,iP(sP({},aP),{body:t}))}this.onOpen()}catch(t){const r=this.parseError(t);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Qu(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),s=r.message||r.toString(),i=BE(e,s);this.events.emit("payload",i)}parseError(e,t=this.url){return F5(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>oP&&this.events.setMaxListeners(oP)}},Gl=null;const Ls={getSIWX(){return pe.state.siwx},async initializeIfEnabled(n=L.getActiveCaipAddress()){var i;const e=pe.state.siwx;if(!(e&&n))return;const[t,r,s]=n.split(":");if(L.checkIfSupportedNetwork(t,`${t}:${r}`))try{if(Gl&&await Gl,(await e.getSessions(`${t}:${r}`,s)).length)return;await It.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),jt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=_e._getClient())==null?void 0:i.disconnect().catch(console.error)),Ze.reset("Connect"),Ia.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const n=pe.state.siwx,e=Re.getPlainAddress(L.getActiveCaipAddress()),t=L.getActiveCaipNetwork(),r=_e._getClient();if(!n)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!t)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await n.createMessage({chainId:t.caipNetworkId,accountAddress:e}),i=s.toString();ve.getConnectorId(t.chainNamespace)===oe.CONNECTOR_ID.AUTH&&Ze.pushTransactionStack({});const l=await r.signMessage(i);await n.addSession({data:s,message:i,signature:l}),L.setLastConnectedSIWECaipNetwork(t),It.close(),jt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!It.state.open||Ze.state.view==="ApproveTransaction")&&await It.open({view:"SIWXSignMessage"}),Ia.showError("Error signing message"),jt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var n;try{const e=this.getSIWX();if((n=e==null?void 0:e.getRequired)==null?void 0:n.call(e)){const r=L.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,Re.getPlainAddress(L.getActiveCaipAddress())||""));s&&s.length>0?await L.switchActiveNetwork(r):await _e.disconnect()}else await _e.disconnect()}else It.close();It.close(),jt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const n=this.getSIWX(),e=L.getAllRequestedCaipNetworks(),t=[];return await Promise.all(e.map(async r=>{const s=await(n==null?void 0:n.getSessions(r.caipNetworkId,Re.getPlainAddress(L.getActiveCaipAddress())||""));s&&t.push(...s)})),t},async getSessions(n){const e=pe.state.siwx;let t=n==null?void 0:n.address;if(!t){const s=L.getActiveCaipAddress();t=Re.getPlainAddress(s)}let r=n==null?void 0:n.caipNetworkId;if(!r){const s=L.getActiveCaipNetwork();r=s==null?void 0:s.caipNetworkId}return e&&t&&r?e.getSessions(r,t):[]},async isSIWXCloseDisabled(){var e;const n=this.getSIWX();if(n){const t=Ze.state.view==="ApproveTransaction",r=Ze.state.view==="SIWXSignMessage";if(t||r)return((e=n.getRequired)==null?void 0:e.call(n))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:n,chainId:e,socialUri:t,preferredAccountType:r,chainNamespace:s}){const i=Ls.getSIWX();if(!i||!s.includes(oe.CHAIN.EVM)){const p=await n.connect({chainId:e,socialUri:t,preferredAccountType:r});return{address:p.address,chainId:p.chainId,accounts:p.accounts}}const o=`${s}:${e}`,l=await i.createMessage({chainId:o,accountAddress:"<<AccountAddress>>"}),f={accountAddress:l.accountAddress,chainId:l.chainId,domain:l.domain,uri:l.uri,version:l.version,nonce:l.nonce,notBefore:l.notBefore,statement:l.statement,resources:l.resources,requestId:l.requestId,issuedAt:l.issuedAt,expirationTime:l.expirationTime,serializedMessage:l.toString()},h=await n.connect({chainId:e,socialUri:t,siwxMessage:f,preferredAccountType:r});return f.accountAddress=h.address,f.serializedMessage=h.message||"",h.signature&&h.message&&await Ls.addEmbeddedWalletSession(f,h.message,h.signature),{address:h.address,chainId:h.chainId,accounts:h.accounts}},async addEmbeddedWalletSession(n,e,t){if(Gl)return Gl;const r=Ls.getSIWX();return r?(Gl=r.addSession({data:n,message:e,signature:t}).finally(()=>{Gl=null}),Gl):Promise.resolve()},async universalProviderAuthenticate({universalProvider:n,chains:e,methods:t}){var l,f,h;const r=Ls.getSIWX(),s=new Set(e.map(p=>p.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((l=L.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:""}),o=await n.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:t,chains:[i.chainId,...e.filter(p=>p!==i.chainId)]});if(Ia.showLoading("Authenticating...",{autoClose:!1}),Ue.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(f=o.session.peer.metadata.icons)==null?void 0:f[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(h=o==null?void 0:o.auths)!=null&&h.length){const p=o.auths.map(g=>{const y=n.client.formatAuthMessage({request:g.p,iss:g.p.iss});return{data:{...g.p,accountAddress:g.p.iss.split(":").slice(-1).join(""),chainId:g.p.iss.split(":").slice(2,4).join(":"),uri:g.p.aud,version:g.p.version||i.version,expirationTime:g.p.exp,issuedAt:g.p.iat,notBefore:g.p.nbf},message:y,signature:g.s.s,cacao:g}});try{await r.setSessions(p),jt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Ls.getSIWXEventProperties()})}catch(g){throw console.error("SIWX:universalProviderAuth - failed to set sessions",g),jt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Ls.getSIWXEventProperties()}),await n.disconnect().catch(console.error),g}finally{Ia.hide()}}return!0},getSIWXEventProperties(){var e;const n=L.state.activeChain;if(!n)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=L.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:Hs(n)===Ln.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const n=this.getSIWX();n&&await n.setSessions([])}},Wee={},Yee=(n,e)=>{const t=Wn.useRef(void 0);Wn.useEffect(()=>{t.current=_L(n,e)}),Wn.useDebugValue(t.current)},Qee=Yee,Zee=new WeakMap;function W_(n,e){const r=Wn.useMemo(()=>n&&new WeakMap,[n]),s=Wn.useRef(void 0);let i=!0;const o=Wn.useSyncExternalStore(Wn.useCallback(f=>{const h=tr(n,f);return f(),h},[n,void 0]),()=>{const f=Ku(n);try{if(!i&&s.current&&!vU(s.current,f,r,new WeakMap))return s.current}catch{}return f},()=>Ku(n));i=!1,Wn.useLayoutEffect(()=>{s.current=o}),(Wee?"production":void 0)!=="production"&&Qee(o,r);const l=Wn.useMemo(()=>new WeakMap,[]);return EU(o,r,l,Zee)}function Jee(n){var h;const e=W_(L.state),{activeConnectorIds:t}=W_(ve.state),r=e.activeChain;if(!r)return{allAccounts:[],address:void 0,caipAddress:void 0,status:void 0,isConnected:!1,embeddedWalletInfo:void 0};const s=(h=e.chains.get(r))==null?void 0:h.accountState,i=ve.getAuthConnector(r),o=t[r];return{allAccounts:_e.getConnections(r).flatMap(p=>p.accounts.map(({address:g})=>Re.createAccount(r,g,"eoa"))),caipAddress:s==null?void 0:s.caipAddress,address:Re.getPlainAddress(s==null?void 0:s.caipAddress),isConnected:!!(s!=null&&s.caipAddress),status:s==null?void 0:s.status,embeddedWalletInfo:i&&o===oe.CONNECTOR_ID.AUTH?{user:s!=null&&s.user?{...s.user,username:be.getConnectedSocialUsername()}:void 0,authProvider:(s==null?void 0:s.socialProvider)||"email",accountType:s==null?void 0:s.preferredAccountType,isSmartAccountDeployed:!!(s!=null&&s.smartAccountDeployed)}:void 0}}const xt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:oe.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},Ta={ConnectorExplorerIds:{[oe.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[oe.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[oe.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[oe.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[oe.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[xt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[xt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[xt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[xt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[xt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[xt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[xt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[xt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[xt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[xt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[xt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[oe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[oe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[oe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[oe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[oe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[oe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[oe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[oe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[oe.CONNECTOR_ID.COINBASE]:"Coinbase",[oe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[oe.CONNECTOR_ID.LEDGER]:"Ledger",[oe.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[oe.CONNECTOR_ID.INJECTED]:"INJECTED",[oe.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[oe.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[oe.CONNECTOR_ID.AUTH]:"AUTH",[xt.CONNECTOR_TYPE_AUTH]:"AUTH"}},Jn={getCaipTokens(n){if(!n)return;const e={};return Object.entries(n).forEach(([t,r])=>{e[`${xt.EIP155}:${t}`]=r}),e},isLowerCaseMatch(n,e){return(n==null?void 0:n.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const n=L.state.activeChain;return oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>ve.getConnectorId(e)===oe.CONNECTOR_ID.AUTH&&e===n)},withRetry({conditionFn:n,intervalMs:e,maxRetries:t}){let r=0;return new Promise(s=>{async function i(){return r+=1,await n()?s(!0):r>=t?s(!1):(setTimeout(i,e),null)}i()})}},Xee=new AbortController,Lr={EmbeddedWalletAbortController:Xee,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found. Please make sure it is included in 'networks' array in createAppKit function."},ORIGIN_NOT_ALLOWED:{shortMessage:"Origin Not Allowed",longMessage:()=>` Origin ${ete()?window.origin:"unknown"} not found on allow list. Please update your project configurations on dashboard.reown.com.`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Unverified Domain",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider. Please check your time settings and connect again."},INVALID_PROJECT_ID:{shortMessage:"Invalid Project ID",longMessage:"The project ID is invalid. Visit dashboard.reown.com to get a new one."},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured. Please update your project configurations on dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:n=>`Failed to get App Configuration ${n||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function ete(){return typeof window<"u"}const tte={createLogger(n,e="error"){const t=cp({level:e}),{logger:r}=eS({opts:t});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){n(i,...s);return}n(void 0,...s)},r}};function nte(n,{strict:e=!0}={}){return!n||typeof n!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(n):n.startsWith("0x")}function cP(n){return nte(n,{strict:!1})?Math.ceil((n.length-2)/2):n.length}const f4="2.33.1";let Lg={getDocsUrl:({docsBaseUrl:n,docsPath:e="",docsSlug:t})=>e?`${n??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${f4}`},qo=class Y_ extends Error{constructor(e,t={}){var l;const r=(()=>{var f;return t.cause instanceof Y_?t.cause.details:(f=t.cause)!=null&&f.message?t.cause.message:t.details})(),s=t.cause instanceof Y_&&t.cause.docsPath||t.docsPath,i=(l=Lg.getDocsUrl)==null?void 0:l.call(Lg,{...t,docsPath:s}),o=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Lg.version?[`Version: ${Lg.version}`]:[]].join(`
`);super(o,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=f4}walk(e){return h4(this,e)}};function h4(n,e){return e!=null&&e(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause!==void 0?h4(n.cause,e):e?null:n}let d4=class extends qo{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}};function rte(n,{dir:e,size:t=32}={}){return typeof n=="string"?ste(n,{dir:e,size:t}):ite(n,{dir:e,size:t})}function ste(n,{dir:e,size:t=32}={}){if(t===null)return n;const r=n.replace("0x","");if(r.length>t*2)throw new d4({size:Math.ceil(r.length/2),targetSize:t,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function ite(n,{dir:e,size:t=32}={}){if(t===null)return n;if(n.length>t)throw new d4({size:n.length,targetSize:t,type:"bytes"});const r=new Uint8Array(t);for(let s=0;s<t;s++){const i=e==="right";r[i?s:t-s-1]=n[i?s:n.length-s-1]}return r}let ate=class extends qo{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function ote(n,{size:e}){if(cP(n)>e)throw new ate({givenSize:cP(n),maxSize:e})}const cte=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function lte(n,e={}){let t="";for(let s=0;s<n.length;s++)t+=cte[n[s]];const r=`0x${t}`;return typeof e.size=="number"?(ote(r,{size:e.size}),rte(r,{dir:"right",size:e.size})):r}const ute=new TextEncoder;function fte(n,e={}){const t=ute.encode(n);return lte(t,e)}class hte extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Fu=(n,e,t)=>JSON.stringify(n,(r,s)=>typeof s=="bigint"?s.toString():s,t),OS=n=>n;class pm extends qo{constructor({body:e,cause:t,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:t,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${OS(o)}`,e&&`Request body: ${Fu(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class p4 extends qo{constructor({body:e,error:t,url:r}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${OS(r)}`,`Request body: ${Fu(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}}class lP extends qo{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${OS(t)}`,`Request body: ${Fu(e)}`],name:"TimeoutError"})}}const dte=-1;class Es extends qo{constructor(e,{code:t,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof p4?e.code:t??dte}}class qs extends Es{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class xm extends Es{constructor(e){super(e,{code:xm.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(xm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Im extends Es{constructor(e){super(e,{code:Im.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Im,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Rm extends Es{constructor(e,{method:t}={}){super(e,{code:Rm.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(Rm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Pm extends Es{constructor(e){super(e,{code:Pm.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Pm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Gd extends Es{constructor(e){super(e,{code:Gd.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Gd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Dm extends Es{constructor(e){super(e,{code:Dm.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Dm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Um extends Es{constructor(e){super(e,{code:Um.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Um,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class km extends Es{constructor(e){super(e,{code:km.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(km,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Kd extends Es{constructor(e){super(e,{code:Kd.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Kd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class pu extends Es{constructor(e,{method:t}={}){super(e,{code:pu.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty(pu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Wd extends Es{constructor(e){super(e,{code:Wd.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Wd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Bm extends Es{constructor(e){super(e,{code:Bm.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Bm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Hu extends qs{constructor(e){super(e,{code:Hu.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Hu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Mm extends qs{constructor(e){super(e,{code:Mm.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Mm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Lm extends qs{constructor(e,{method:t}={}){super(e,{code:Lm.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(Lm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class $m extends qs{constructor(e){super(e,{code:$m.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty($m,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Fm extends qs{constructor(e){super(e,{code:Fm.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Fm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Hm extends qs{constructor(e){super(e,{code:Hm.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Hm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class jm extends qs{constructor(e){super(e,{code:jm.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(jm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class zm extends qs{constructor(e){super(e,{code:zm.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(zm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class qm extends qs{constructor(e){super(e,{code:qm.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(qm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Vm extends qs{constructor(e){super(e,{code:Vm.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Vm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Gm extends qs{constructor(e){super(e,{code:Gm.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Gm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Km extends qs{constructor(e){super(e,{code:Km.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Km,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Wm extends qs{constructor(e){super(e,{code:Wm.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Wm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class pte extends Es{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class xS extends qo{constructor({cause:e,message:t}={}){var s;const r=(s=t==null?void 0:t.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(xS,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(xS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});function gte(){let n=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{n=r,e=s}),resolve:n,reject:e}}const wC=new Map;function mte({fn:n,id:e,shouldSplitBatch:t,wait:r=0,sort:s}){const i=async()=>{const p=f();o();const g=p.map(({args:y})=>y);g.length!==0&&n(g).then(y=>{s&&Array.isArray(y)&&y.sort(s);for(let b=0;b<p.length;b++){const{resolve:v}=p[b];v==null||v([y[b],y])}}).catch(y=>{for(let b=0;b<p.length;b++){const{reject:v}=p[b];v==null||v(y)}})},o=()=>wC.delete(e),l=()=>f().map(({args:p})=>p),f=()=>wC.get(e)||[],h=p=>wC.set(e,[...f(),p]);return{flush:o,async schedule(p){const{promise:g,resolve:y,reject:b}=gte();return(t==null?void 0:t([...l(),p]))&&i(),f().length>0?(h({args:p,resolve:y,reject:b}),g):(h({args:p,resolve:y,reject:b}),setTimeout(i,r),g)}}}async function g4(n){return new Promise(e=>setTimeout(e,n))}const Q_=256;let Mw=Q_,Lw;function yte(n=11){if(!Lw||Mw+n>Q_*2){Lw="",Mw=0;for(let e=0;e<Q_;e++)Lw+=(256+Math.random()*256|0).toString(16).substring(1)}return Lw.substring(Mw,Mw+++n)}const $w=new hte(8192);function wte(n,{enabled:e=!0,id:t}){if(!e||!t)return n();if($w.get(t))return $w.get(t);const r=n().finally(()=>$w.delete(t));return $w.set(t,r),r}function bte(n,{delay:e=100,retryCount:t=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:l=0}={})=>{const f=async({error:h})=>{const p=typeof e=="function"?e({count:l,error:h}):e;p&&await g4(p),o({count:l+1})};try{const h=await n();s(h)}catch(h){if(l<t&&await r({count:l,error:h}))return f({error:h});i(h)}};o()})}function Ete(n,e={}){return async(t,r={})=>{var g;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:l=3,uid:f}={...e,...r},{method:h}=t;if((g=i==null?void 0:i.exclude)!=null&&g.includes(h))throw new pu(new Error("method not supported"),{method:h});if(i!=null&&i.include&&!i.include.includes(h))throw new pu(new Error("method not supported"),{method:h});const p=s?fte(`${f}.${Fu(t)}`):void 0;return wte(()=>bte(async()=>{try{return await n(t)}catch(y){const b=y;switch(b.code){case xm.code:throw new xm(b);case Im.code:throw new Im(b);case Rm.code:throw new Rm(b,{method:t.method});case Pm.code:throw new Pm(b);case Gd.code:throw new Gd(b);case Dm.code:throw new Dm(b);case Um.code:throw new Um(b);case km.code:throw new km(b);case Kd.code:throw new Kd(b);case pu.code:throw new pu(b,{method:t.method});case Wd.code:throw new Wd(b);case Bm.code:throw new Bm(b);case Hu.code:throw new Hu(b);case Mm.code:throw new Mm(b);case Lm.code:throw new Lm(b);case $m.code:throw new $m(b);case Fm.code:throw new Fm(b);case Hm.code:throw new Hm(b);case jm.code:throw new jm(b);case zm.code:throw new zm(b);case qm.code:throw new qm(b);case Vm.code:throw new Vm(b);case Gm.code:throw new Gm(b);case Km.code:throw new Km(b);case Wm.code:throw new Wm(b);case 5e3:throw new Hu(b);default:throw y instanceof qo?y:new pte(b)}}},{delay:({count:y,error:b})=>{var v;if(b&&b instanceof pm){const E=(v=b==null?void 0:b.headers)==null?void 0:v.get("Retry-After");if(E!=null&&E.match(/\d/))return Number.parseInt(E)*1e3}return~~(1<<y)*o},retryCount:l,shouldRetry:({error:y})=>vte(y)}),{enabled:s,id:p})}}function vte(n){return"code"in n&&typeof n.code=="number"?n.code===-1||n.code===Wd.code||n.code===Gd.code:n instanceof pm&&n.status?n.status===403||n.status===408||n.status===413||n.status===429||n.status===500||n.status===502||n.status===503||n.status===504:!0}function m4({key:n,methods:e,name:t,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:l},f){const h=yte();return{config:{key:n,methods:e,name:t,request:r,retryCount:s,retryDelay:i,timeout:o,type:l},request:Ete(r,{methods:e,retryCount:s,retryDelay:i,uid:h}),value:f}}function uP(n,e={}){const{key:t="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=Ate,retryCount:o,retryDelay:l}=e;return({chain:f,pollingInterval:h=4e3,timeout:p,...g})=>{let y=n,b=()=>{};const v=m4({key:t,name:r,async request({method:E,params:A}){let S;const O=async(T=0)=>{const k=y[T]({...g,chain:f,retryCount:0,timeout:p});try{const R=await k.request({method:E,params:A});return b({method:E,params:A,response:R,transport:k,status:"success"}),R}catch(R){if(b({error:R,method:E,params:A,transport:k,status:"error"}),i(R)||T===y.length-1||(S??(S=y.slice(T+1).some(D=>{const{include:F,exclude:$}=D({chain:f}).config.methods||{};return F?F.includes(E):$?!$.includes(E):!0})),!S))throw R;return O(T+1)}};return O()},retryCount:o,retryDelay:l,type:"fallback"},{onResponse:E=>b=E,transports:y.map(E=>E({chain:f,retryCount:0}))});if(s){const E=typeof s=="object"?s:{};Cte({chain:f,interval:E.interval??h,onTransports:A=>y=A,ping:E.ping,sampleCount:E.sampleCount,timeout:E.timeout,transports:y,weights:E.weights})}return v}}function Ate(n){return!!("code"in n&&typeof n.code=="number"&&(n.code===Kd.code||n.code===Hu.code||xS.nodeMessage.test(n.message)||n.code===5e3))}function Cte({chain:n,interval:e=4e3,onTransports:t,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:l={}}){const{stability:f=.7,latency:h=.3}=l,p=[],g=async()=>{const y=await Promise.all(o.map(async E=>{const A=E({chain:n,retryCount:0,timeout:i}),S=Date.now();let O,T;try{await(r?r({transport:A}):A.request({method:"net_listening"})),T=1}catch{T=0}finally{O=Date.now()}return{latency:O-S,success:T}}));p.push(y),p.length>s&&p.shift();const b=Math.max(...p.map(E=>Math.max(...E.map(({latency:A})=>A)))),v=o.map((E,A)=>{const S=p.map(D=>D[A].latency),T=1-S.reduce((D,F)=>D+F,0)/S.length/b,k=p.map(D=>D[A].success),R=k.reduce((D,F)=>D+F,0)/k.length;return R===0?[0,A]:[h*T+f*R,A]}).sort((E,A)=>A[0]-E[0]);t(v.map(([,E])=>o[E])),await g4(e),g()};g()}class _te extends qo{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Ste(n,{errorInstance:e=new Error("timed out"),timeout:t,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const l=new AbortController;t>0&&(o=setTimeout(()=>{r&&l.abort()},t)),s(await n({signal:(l==null?void 0:l.signal)||null}))}catch(l){(l==null?void 0:l.name)==="AbortError"&&i(e),i(l)}finally{clearTimeout(o)}})()})}function Nte(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const fP=Nte();function Tte(n,e={}){return{async request(t){var g;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=t,l={...e.fetchOptions??{},...t.fetchOptions??{}},{headers:f,method:h,signal:p}=l;try{const y=await Ste(async({signal:v})=>{const E={...l,body:Array.isArray(r)?Fu(r.map(T=>({jsonrpc:"2.0",id:T.id??fP.take(),...T}))):Fu({jsonrpc:"2.0",id:r.id??fP.take(),...r}),headers:{"Content-Type":"application/json",...f},method:h||"POST",signal:p||(o>0?v:null)},A=new Request(n,E),S=await(s==null?void 0:s(A,E))??{...E,url:n};return await fetch(S.url??n,S)},{errorInstance:new lP({body:r,url:n}),timeout:o,signal:!0});i&&await i(y);let b;if((g=y.headers.get("Content-Type"))!=null&&g.startsWith("application/json"))b=await y.json();else{b=await y.text();try{b=JSON.parse(b||"{}")}catch(v){if(y.ok)throw v;b={error:b}}}if(!y.ok)throw new pm({body:r,details:Fu(b.error)||y.statusText,headers:y.headers,status:y.status,url:n});return b}catch(y){throw y instanceof pm||y instanceof lP?y:new pm({body:r,cause:y,url:n})}}}}function Fw(n,e={}){const{batch:t,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:l,onFetchResponse:f,retryDelay:h,raw:p}=e;return({chain:g,retryCount:y,timeout:b})=>{const{batchSize:v=1e3,wait:E=0}=typeof t=="object"?t:{},A=e.retryCount??y,S=b??e.timeout??1e4,O=n||(g==null?void 0:g.rpcUrls.default.http[0]);if(!O)throw new _te;const T=Tte(O,{fetchOptions:r,onRequest:l,onResponse:f,timeout:S});return m4({key:s,methods:i,name:o,async request({method:k,params:R}){const D={method:k,params:R},{schedule:F}=mte({id:O,wait:E,shouldSplitBatch(j){return j.length>v},fn:j=>T.request({body:j}),sort:(j,W)=>j.id-W.id}),$=async j=>t?F(j):[await T.request({body:j})],[{error:B,result:q}]=await $(D);if(p)return{error:B,result:q};if(B)throw new p4({body:D,error:B,url:O});return q},retryCount:A,retryDelay:h,timeout:S,type:"http"},{fetchOptions:r,url:O})}}const Ote="rpc.walletconnect.org";function hP(n,e){const t=new URL("https://rpc.walletconnect.org/v1/");return t.searchParams.set("chainId",n),t.searchParams.set("projectId",e),t.toString()}const bC=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],xh={extendRpcUrlWithProjectId(n,e){let t=!1;try{t=new URL(n).host===Ote}catch{t=!1}if(t){const r=new URL(n);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return n},isCaipNetwork(n){return"chainNamespace"in n&&"caipNetworkId"in n},getChainNamespace(n){return this.isCaipNetwork(n)?n.chainNamespace:oe.CHAIN.EVM},getCaipNetworkId(n){return this.isCaipNetwork(n)?n.caipNetworkId:`${oe.CHAIN.EVM}:${n.id}`},getDefaultRpcUrl(n,e,t){var s,i,o;const r=(o=(i=(s=n.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return bC.includes(e)?hP(e,t):r||""},extendCaipNetwork(n,{customNetworkImageUrls:e,projectId:t,customRpcUrls:r}){var y,b,v,E,A,S,O;const s=this.getChainNamespace(n),i=this.getCaipNetworkId(n),o=(v=(b=(y=n.rpcUrls)==null?void 0:y.default)==null?void 0:b.http)==null?void 0:v[0],l=this.getDefaultRpcUrl(n,i,t),f=((S=(A=(E=n==null?void 0:n.rpcUrls)==null?void 0:E.chainDefault)==null?void 0:A.http)==null?void 0:S[0])||o,h=((O=r==null?void 0:r[i])==null?void 0:O.map(T=>T.url))||[],p=[...h,...l?[l]:[]],g=[...h];return f&&!g.includes(f)&&g.push(f),{...n,chainNamespace:s,caipNetworkId:i,assets:{imageId:Ta.NetworkImageIds[n.id],imageUrl:e==null?void 0:e[n.id]},rpcUrls:{...n.rpcUrls,default:{http:p},chainDefault:{http:g}}}},extendCaipNetworks(n,{customNetworkImageUrls:e,projectId:t,customRpcUrls:r}){return n.map(s=>xh.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:t}))},getViemTransport(n,e,t){var s,i,o;const r=[];return t==null||t.forEach(l=>{r.push(Fw(l.url,l.config))}),bC.includes(n.caipNetworkId)&&r.push(Fw(hP(n.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=n==null?void 0:n.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(l=>{r.push(Fw(l))}),uP(r)},extendWagmiTransports(n,e,t){if(bC.includes(n.caipNetworkId)){const r=this.getDefaultRpcUrl(n,n.caipNetworkId,e);return uP([t,Fw(r)])}return t},getUnsupportedNetwork(n){return{id:n.split(":")[1],caipNetworkId:n,name:oe.UNSUPPORTED_NETWORK_NAME,chainNamespace:n.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(n){var f;const e=be.getActiveCaipNetworkId(),t=L.getAllRequestedCaipNetworks(),r=Array.from(((f=L.state.chains)==null?void 0:f.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=t==null?void 0:t.find(h=>h.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||n||(t==null?void 0:t[0])}},zb={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},is=nn({providers:{...zb},providerIds:{...zb}}),At={state:is,subscribeKey(n,e){return Ir(is,n,e)},subscribe(n){return tr(is,()=>{n(is)})},subscribeProviders(n){return tr(is.providers,()=>n(is.providers))},setProvider(n,e){n&&e&&(is.providers[n]=Wu(e))},getProvider(n){if(n)return is.providers[n]},setProviderId(n,e){e&&(is.providerIds[n]=e)},getProviderId(n){if(n)return is.providerIds[n]},reset(){is.providers={...zb},is.providerIds={...zb}},resetChain(n){is.providers[n]=void 0,is.providerIds[n]=void 0}},dP={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},lr={set(n,e){$s.isClient&&localStorage.setItem(`${Be.STORAGE_KEY}${n}`,e)},get(n){return $s.isClient?localStorage.getItem(`${Be.STORAGE_KEY}${n}`):null},delete(n,e){$s.isClient&&(e?localStorage.removeItem(n):localStorage.removeItem(`${Be.STORAGE_KEY}${n}`))}},Hw=30*1e3,$s={checkIfAllowedToTriggerEmail(){const n=lr.get(Be.LAST_EMAIL_LOGIN_TIME);if(n){const e=Date.now()-Number(n);if(e<Hw){const t=Math.ceil((Hw-e)/1e3);throw new Error(`Please try again after ${t} seconds`)}}},getTimeToNextEmailLogin(){const n=lr.get(Be.LAST_EMAIL_LOGIN_TIME);if(n){const e=Date.now()-Number(n);if(e<Hw)return Math.ceil((Hw-e)/1e3)}return 0},checkIfRequestExists(n){return Ln.NOT_SAFE_RPC_METHODS.includes(n.method)||Ln.SAFE_RPC_METHODS.includes(n.method)},getResponseType(n){return typeof n=="string"&&((n==null?void 0:n.match(dP.transactionHash))||(n==null?void 0:n.match(dP.signedMessage)))?Be.RPC_RESPONSE_TYPE_TX:Be.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(n){return Ln.SAFE_RPC_METHODS.includes(n.method)},isClient:typeof window<"u"};var Rt;(function(n){n.assertEqual=s=>s;function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},n.getValidEnumValues=s=>{const i=n.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of i)o[l]=s[l];return n.objectValues(o)},n.objectValues=s=>n.objectKeys(s).map(function(i){return s[i]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},n.find=(s,i)=>{for(const o of s)if(i(o))return o},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Rt||(Rt={}));var Z_;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(Z_||(Z_={}));const Oe=Rt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fc=n=>{switch(typeof n){case"undefined":return Oe.undefined;case"string":return Oe.string;case"number":return isNaN(n)?Oe.nan:Oe.number;case"boolean":return Oe.boolean;case"function":return Oe.function;case"bigint":return Oe.bigint;case"symbol":return Oe.symbol;case"object":return Array.isArray(n)?Oe.array:n===null?Oe.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Oe.promise:typeof Map<"u"&&n instanceof Map?Oe.map:typeof Set<"u"&&n instanceof Set?Oe.set:typeof Date<"u"&&n instanceof Date?Oe.date:Oe.object;default:return Oe.unknown}},Ee=Rt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),xte=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Ki extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let l=r,f=0;for(;f<o.path.length;){const h=o.path[f];f===o.path.length-1?(l[h]=l[h]||{_errors:[]},l[h]._errors.push(t(o))):l[h]=l[h]||{_errors:[]},l=l[h],f++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Rt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Ki.create=n=>new Ki(n);const Ym=(n,e)=>{let t;switch(n.code){case Ee.invalid_type:n.received===Oe.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case Ee.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,Rt.jsonStringifyReplacer)}`;break;case Ee.unrecognized_keys:t=`Unrecognized key(s) in object: ${Rt.joinValues(n.keys,", ")}`;break;case Ee.invalid_union:t="Invalid input";break;case Ee.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Rt.joinValues(n.options)}`;break;case Ee.invalid_enum_value:t=`Invalid enum value. Expected ${Rt.joinValues(n.options)}, received '${n.received}'`;break;case Ee.invalid_arguments:t="Invalid function arguments";break;case Ee.invalid_return_type:t="Invalid function return type";break;case Ee.invalid_date:t="Invalid date";break;case Ee.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:Rt.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case Ee.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case Ee.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case Ee.custom:t="Invalid input";break;case Ee.invalid_intersection_types:t="Intersection results could not be merged";break;case Ee.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case Ee.not_finite:t="Number must be finite";break;default:t=e.defaultError,Rt.assertNever(n)}return{message:t}};let y4=Ym;function Ite(n){y4=n}function qb(){return y4}const Vb=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,i=[...t,...s.path||[]],o={...s,path:i};let l="";const f=r.filter(h=>!!h).slice().reverse();for(const h of f)l=h(o,{data:e,defaultError:l}).message;return{...s,path:i,message:s.message||l}},Rte=[];function Pe(n,e){const t=Vb({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,qb(),Ym].filter(r=>!!r)});n.common.issues.push(t)}class xr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return tt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t)r.push({key:await s.key,value:await s.value});return xr.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return tt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const tt=Object.freeze({status:"aborted"}),w4=n=>({status:"dirty",value:n}),Kr=n=>({status:"valid",value:n}),J_=n=>n.status==="aborted",X_=n=>n.status==="dirty",Qm=n=>n.status==="valid",Gb=n=>typeof Promise<"u"&&n instanceof Promise;var Ve;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ve||(Ve={}));class $a{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const pP=(n,e)=>{if(Qm(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ki(n.common.issues);return this._error=t,this._error}}};function rt(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>o.code!=="invalid_type"?{message:l.defaultError}:typeof l.data>"u"?{message:r??l.defaultError}:{message:t??l.defaultError},description:s}}class ct{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Fc(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Fc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new xr,ctx:{common:e.parent.common,data:e.data,parsedType:Fc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Gb(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const s={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fc(e)},i=this._parseSync({data:e,path:s.path,parent:s});return pP(s,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fc(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Gb(s)?s:Promise.resolve(s));return pP(r,i)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),l=()=>i.addIssue({code:Ee.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(f=>f?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new Yi({schema:this,typeName:Je.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ko.create(this,this._def)}nullable(){return tf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Wi.create(this,this._def)}promise(){return Qd.create(this,this._def)}or(e){return ey.create([this,e],this._def)}and(e){return ty.create(this,e,this._def)}transform(e){return new Yi({...rt(this._def),schema:this,typeName:Je.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new ay({...rt(this._def),innerType:this,defaultValue:t,typeName:Je.ZodDefault})}brand(){return new E4({typeName:Je.ZodBranded,type:this,...rt(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Qb({...rt(this._def),innerType:this,catchValue:t,typeName:Je.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Wy.create(this,e)}readonly(){return Jb.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Pte=/^c[^\s-]{8,}$/i,Dte=/^[a-z][a-z0-9]*$/,Ute=/^[0-9A-HJKMNP-TV-Z]{26}$/,kte=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Bte=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Mte="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let EC;const Lte=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,$te=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Fte=n=>n.precision?n.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}Z$`):n.precision===0?n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Hte(n,e){return!!((e==="v4"||!e)&&Lte.test(n)||(e==="v6"||!e)&&$te.test(n))}class Vi extends ct{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Oe.string){const i=this._getOrReturnCtx(e);return Pe(i,{code:Ee.invalid_type,expected:Oe.string,received:i.parsedType}),tt}const r=new xr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Pe(s,{code:Ee.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Pe(s,{code:Ee.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,l=e.data.length<i.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?Pe(s,{code:Ee.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&Pe(s,{code:Ee.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Bte.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"email",code:Ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")EC||(EC=new RegExp(Mte,"u")),EC.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"emoji",code:Ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")kte.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"uuid",code:Ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Pte.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"cuid",code:Ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Dte.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"cuid2",code:Ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Ute.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"ulid",code:Ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Pe(s,{validation:"url",code:Ee.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"regex",code:Ee.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Pe(s,{code:Ee.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Pe(s,{code:Ee.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Pe(s,{code:Ee.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Fte(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{code:Ee.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?Hte(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"ip",code:Ee.invalid_string,message:i.message}),r.dirty()):Rt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:Ee.invalid_string,...Ve.errToObj(r)})}_addCheck(e){return new Vi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ve.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ve.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ve.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ve.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ve.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ve.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ve.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ve.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...Ve.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ve.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Ve.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ve.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ve.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ve.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ve.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ve.errToObj(t)})}nonempty(e){return this.min(1,Ve.errToObj(e))}trim(){return new Vi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Vi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Vi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Vi.create=n=>{var e;return new Vi({checks:[],typeName:Je.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...rt(n)})};function jte(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,i=parseInt(n.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class gl extends ct{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Oe.number){const i=this._getOrReturnCtx(e);return Pe(i,{code:Ee.invalid_type,expected:Oe.number,received:i.parsedType}),tt}let r;const s=new xr;for(const i of this._def.checks)i.kind==="int"?Rt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Pe(r,{code:Ee.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:Ee.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:Ee.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?jte(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:Ee.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Pe(r,{code:Ee.not_finite,message:i.message}),s.dirty()):Rt.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ve.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ve.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ve.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ve.toString(t))}setLimit(e,t,r,s){return new gl({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Ve.toString(s)}]})}_addCheck(e){return new gl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ve.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ve.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ve.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ve.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ve.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ve.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Rt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}gl.create=n=>new gl({checks:[],typeName:Je.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...rt(n)});class ml extends ct{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Oe.bigint){const i=this._getOrReturnCtx(e);return Pe(i,{code:Ee.invalid_type,expected:Oe.bigint,received:i.parsedType}),tt}let r;const s=new xr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:Ee.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:Ee.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:Ee.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Rt.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ve.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ve.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ve.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ve.toString(t))}setLimit(e,t,r,s){return new ml({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Ve.toString(s)}]})}_addCheck(e){return new ml({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ve.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ve.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ml.create=n=>{var e;return new ml({checks:[],typeName:Je.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...rt(n)})};class Zm extends ct{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Oe.boolean){const r=this._getOrReturnCtx(e);return Pe(r,{code:Ee.invalid_type,expected:Oe.boolean,received:r.parsedType}),tt}return Kr(e.data)}}Zm.create=n=>new Zm({typeName:Je.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...rt(n)});class Xu extends ct{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Oe.date){const i=this._getOrReturnCtx(e);return Pe(i,{code:Ee.invalid_type,expected:Oe.date,received:i.parsedType}),tt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Pe(i,{code:Ee.invalid_date}),tt}const r=new xr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Pe(s,{code:Ee.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Pe(s,{code:Ee.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Rt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Xu({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ve.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ve.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Xu.create=n=>new Xu({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:Je.ZodDate,...rt(n)});class Kb extends ct{_parse(e){if(this._getType(e)!==Oe.symbol){const r=this._getOrReturnCtx(e);return Pe(r,{code:Ee.invalid_type,expected:Oe.symbol,received:r.parsedType}),tt}return Kr(e.data)}}Kb.create=n=>new Kb({typeName:Je.ZodSymbol,...rt(n)});class Jm extends ct{_parse(e){if(this._getType(e)!==Oe.undefined){const r=this._getOrReturnCtx(e);return Pe(r,{code:Ee.invalid_type,expected:Oe.undefined,received:r.parsedType}),tt}return Kr(e.data)}}Jm.create=n=>new Jm({typeName:Je.ZodUndefined,...rt(n)});class Xm extends ct{_parse(e){if(this._getType(e)!==Oe.null){const r=this._getOrReturnCtx(e);return Pe(r,{code:Ee.invalid_type,expected:Oe.null,received:r.parsedType}),tt}return Kr(e.data)}}Xm.create=n=>new Xm({typeName:Je.ZodNull,...rt(n)});class Yd extends ct{constructor(){super(...arguments),this._any=!0}_parse(e){return Kr(e.data)}}Yd.create=n=>new Yd({typeName:Je.ZodAny,...rt(n)});class ju extends ct{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Kr(e.data)}}ju.create=n=>new ju({typeName:Je.ZodUnknown,...rt(n)});class Fo extends ct{_parse(e){const t=this._getOrReturnCtx(e);return Pe(t,{code:Ee.invalid_type,expected:Oe.never,received:t.parsedType}),tt}}Fo.create=n=>new Fo({typeName:Je.ZodNever,...rt(n)});class Wb extends ct{_parse(e){if(this._getType(e)!==Oe.undefined){const r=this._getOrReturnCtx(e);return Pe(r,{code:Ee.invalid_type,expected:Oe.void,received:r.parsedType}),tt}return Kr(e.data)}}Wb.create=n=>new Wb({typeName:Je.ZodVoid,...rt(n)});class Wi extends ct{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==Oe.array)return Pe(t,{code:Ee.invalid_type,expected:Oe.array,received:t.parsedType}),tt;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,l=t.data.length<s.exactLength.value;(o||l)&&(Pe(t,{code:o?Ee.too_big:Ee.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(Pe(t,{code:Ee.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(Pe(t,{code:Ee.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,l)=>s.type._parseAsync(new $a(t,o,t.path,l)))).then(o=>xr.mergeArray(r,o));const i=[...t.data].map((o,l)=>s.type._parseSync(new $a(t,o,t.path,l)));return xr.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new Wi({...this._def,minLength:{value:e,message:Ve.toString(t)}})}max(e,t){return new Wi({...this._def,maxLength:{value:e,message:Ve.toString(t)}})}length(e,t){return new Wi({...this._def,exactLength:{value:e,message:Ve.toString(t)}})}nonempty(e){return this.min(1,e)}}Wi.create=(n,e)=>new Wi({type:n,minLength:null,maxLength:null,exactLength:null,typeName:Je.ZodArray,...rt(e)});function Ih(n){if(n instanceof hn){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=ko.create(Ih(r))}return new hn({...n._def,shape:()=>e})}else return n instanceof Wi?new Wi({...n._def,type:Ih(n.element)}):n instanceof ko?ko.create(Ih(n.unwrap())):n instanceof tf?tf.create(Ih(n.unwrap())):n instanceof Fa?Fa.create(n.items.map(e=>Ih(e))):n}class hn extends ct{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Rt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Oe.object){const h=this._getOrReturnCtx(e);return Pe(h,{code:Ee.invalid_type,expected:Oe.object,received:h.parsedType}),tt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Fo&&this._def.unknownKeys==="strip"))for(const h in s.data)o.includes(h)||l.push(h);const f=[];for(const h of o){const p=i[h],g=s.data[h];f.push({key:{status:"valid",value:h},value:p._parse(new $a(s,g,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof Fo){const h=this._def.unknownKeys;if(h==="passthrough")for(const p of l)f.push({key:{status:"valid",value:p},value:{status:"valid",value:s.data[p]}});else if(h==="strict")l.length>0&&(Pe(s,{code:Ee.unrecognized_keys,keys:l}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const p of l){const g=s.data[p];f.push({key:{status:"valid",value:p},value:h._parse(new $a(s,g,s.path,p)),alwaysSet:p in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const h=[];for(const p of f){const g=await p.key;h.push({key:g,value:await p.value,alwaysSet:p.alwaysSet})}return h}).then(h=>xr.mergeObjectSync(r,h)):xr.mergeObjectSync(r,f)}get shape(){return this._def.shape()}strict(e){return Ve.errToObj,new hn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var s,i,o,l;const f=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,r).message)!==null&&o!==void 0?o:r.defaultError;return t.code==="unrecognized_keys"?{message:(l=Ve.errToObj(e).message)!==null&&l!==void 0?l:f}:{message:f}}}:{}})}strip(){return new hn({...this._def,unknownKeys:"strip"})}passthrough(){return new hn({...this._def,unknownKeys:"passthrough"})}extend(e){return new hn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new hn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Je.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new hn({...this._def,catchall:e})}pick(e){const t={};return Rt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new hn({...this._def,shape:()=>t})}omit(e){const t={};return Rt.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new hn({...this._def,shape:()=>t})}deepPartial(){return Ih(this)}partial(e){const t={};return Rt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}),new hn({...this._def,shape:()=>t})}required(e){const t={};return Rt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof ko;)i=i._def.innerType;t[r]=i}}),new hn({...this._def,shape:()=>t})}keyof(){return b4(Rt.objectKeys(this.shape))}}hn.create=(n,e)=>new hn({shape:()=>n,unknownKeys:"strip",catchall:Fo.create(),typeName:Je.ZodObject,...rt(e)});hn.strictCreate=(n,e)=>new hn({shape:()=>n,unknownKeys:"strict",catchall:Fo.create(),typeName:Je.ZodObject,...rt(e)});hn.lazycreate=(n,e)=>new hn({shape:n,unknownKeys:"strip",catchall:Fo.create(),typeName:Je.ZodObject,...rt(e)});class ey extends ct{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new Ki(l.ctx.common.issues));return Pe(t,{code:Ee.invalid_union,unionErrors:o}),tt}if(t.common.async)return Promise.all(r.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const f of r){const h={...t,common:{...t.common,issues:[]},parent:null},p=f._parseSync({data:t.data,path:t.path,parent:h});if(p.status==="valid")return p;p.status==="dirty"&&!i&&(i={result:p,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(f=>new Ki(f));return Pe(t,{code:Ee.invalid_union,unionErrors:l}),tt}}get options(){return this._def.options}}ey.create=(n,e)=>new ey({options:n,typeName:Je.ZodUnion,...rt(e)});const fb=n=>n instanceof ry?fb(n.schema):n instanceof Yi?fb(n.innerType()):n instanceof sy?[n.value]:n instanceof yl?n.options:n instanceof iy?Object.keys(n.enum):n instanceof ay?fb(n._def.innerType):n instanceof Jm?[void 0]:n instanceof Xm?[null]:null;class FE extends ct{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Oe.object)return Pe(t,{code:Ee.invalid_type,expected:Oe.object,received:t.parsedType}),tt;const r=this.discriminator,s=t.data[r],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(Pe(t,{code:Ee.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),tt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const i of t){const o=fb(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,i)}}return new FE({typeName:Je.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...rt(r)})}}function e2(n,e){const t=Fc(n),r=Fc(e);if(n===e)return{valid:!0,data:n};if(t===Oe.object&&r===Oe.object){const s=Rt.objectKeys(e),i=Rt.objectKeys(n).filter(l=>s.indexOf(l)!==-1),o={...n,...e};for(const l of i){const f=e2(n[l],e[l]);if(!f.valid)return{valid:!1};o[l]=f.data}return{valid:!0,data:o}}else if(t===Oe.array&&r===Oe.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<n.length;i++){const o=n[i],l=e[i],f=e2(o,l);if(!f.valid)return{valid:!1};s.push(f.data)}return{valid:!0,data:s}}else return t===Oe.date&&r===Oe.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class ty extends ct{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(J_(i)||J_(o))return tt;const l=e2(i.value,o.value);return l.valid?((X_(i)||X_(o))&&t.dirty(),{status:t.value,value:l.data}):(Pe(r,{code:Ee.invalid_intersection_types}),tt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ty.create=(n,e,t)=>new ty({left:n,right:e,typeName:Je.ZodIntersection,...rt(t)});class Fa extends ct{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Oe.array)return Pe(r,{code:Ee.invalid_type,expected:Oe.array,received:r.parsedType}),tt;if(r.data.length<this._def.items.length)return Pe(r,{code:Ee.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tt;!this._def.rest&&r.data.length>this._def.items.length&&(Pe(r,{code:Ee.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((o,l)=>{const f=this._def.items[l]||this._def.rest;return f?f._parse(new $a(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>xr.mergeArray(t,o)):xr.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new Fa({...this._def,rest:e})}}Fa.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Fa({items:n,typeName:Je.ZodTuple,rest:null,...rt(e)})};class ny extends ct{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Oe.object)return Pe(r,{code:Ee.invalid_type,expected:Oe.object,received:r.parsedType}),tt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const l in r.data)s.push({key:i._parse(new $a(r,l,r.path,l)),value:o._parse(new $a(r,r.data[l],r.path,l))});return r.common.async?xr.mergeObjectAsync(t,s):xr.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof ct?new ny({keyType:e,valueType:t,typeName:Je.ZodRecord,...rt(r)}):new ny({keyType:Vi.create(),valueType:e,typeName:Je.ZodRecord,...rt(t)})}}class Yb extends ct{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Oe.map)return Pe(r,{code:Ee.invalid_type,expected:Oe.map,received:r.parsedType}),tt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([l,f],h)=>({key:s._parse(new $a(r,l,r.path,[h,"key"])),value:i._parse(new $a(r,f,r.path,[h,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const f of o){const h=await f.key,p=await f.value;if(h.status==="aborted"||p.status==="aborted")return tt;(h.status==="dirty"||p.status==="dirty")&&t.dirty(),l.set(h.value,p.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const f of o){const h=f.key,p=f.value;if(h.status==="aborted"||p.status==="aborted")return tt;(h.status==="dirty"||p.status==="dirty")&&t.dirty(),l.set(h.value,p.value)}return{status:t.value,value:l}}}}Yb.create=(n,e,t)=>new Yb({valueType:e,keyType:n,typeName:Je.ZodMap,...rt(t)});class ef extends ct{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Oe.set)return Pe(r,{code:Ee.invalid_type,expected:Oe.set,received:r.parsedType}),tt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Pe(r,{code:Ee.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Pe(r,{code:Ee.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(f){const h=new Set;for(const p of f){if(p.status==="aborted")return tt;p.status==="dirty"&&t.dirty(),h.add(p.value)}return{status:t.value,value:h}}const l=[...r.data.values()].map((f,h)=>i._parse(new $a(r,f,r.path,h)));return r.common.async?Promise.all(l).then(f=>o(f)):o(l)}min(e,t){return new ef({...this._def,minSize:{value:e,message:Ve.toString(t)}})}max(e,t){return new ef({...this._def,maxSize:{value:e,message:Ve.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ef.create=(n,e)=>new ef({valueType:n,minSize:null,maxSize:null,typeName:Je.ZodSet,...rt(e)});class Vh extends ct{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Oe.function)return Pe(t,{code:Ee.invalid_type,expected:Oe.function,received:t.parsedType}),tt;function r(l,f){return Vb({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,qb(),Ym].filter(h=>!!h),issueData:{code:Ee.invalid_arguments,argumentsError:f}})}function s(l,f){return Vb({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,qb(),Ym].filter(h=>!!h),issueData:{code:Ee.invalid_return_type,returnTypeError:f}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof Qd){const l=this;return Kr(async function(...f){const h=new Ki([]),p=await l._def.args.parseAsync(f,i).catch(b=>{throw h.addIssue(r(f,b)),h}),g=await Reflect.apply(o,this,p);return await l._def.returns._def.type.parseAsync(g,i).catch(b=>{throw h.addIssue(s(g,b)),h})})}else{const l=this;return Kr(function(...f){const h=l._def.args.safeParse(f,i);if(!h.success)throw new Ki([r(f,h.error)]);const p=Reflect.apply(o,this,h.data),g=l._def.returns.safeParse(p,i);if(!g.success)throw new Ki([s(p,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Vh({...this._def,args:Fa.create(e).rest(ju.create())})}returns(e){return new Vh({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new Vh({args:e||Fa.create([]).rest(ju.create()),returns:t||ju.create(),typeName:Je.ZodFunction,...rt(r)})}}class ry extends ct{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ry.create=(n,e)=>new ry({getter:n,typeName:Je.ZodLazy,...rt(e)});class sy extends ct{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Pe(t,{received:t.data,code:Ee.invalid_literal,expected:this._def.value}),tt}return{status:"valid",value:e.data}}get value(){return this._def.value}}sy.create=(n,e)=>new sy({value:n,typeName:Je.ZodLiteral,...rt(e)});function b4(n,e){return new yl({values:n,typeName:Je.ZodEnum,...rt(e)})}class yl extends ct{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return Pe(t,{expected:Rt.joinValues(r),received:t.parsedType,code:Ee.invalid_type}),tt}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),r=this._def.values;return Pe(t,{received:t.data,code:Ee.invalid_enum_value,options:r}),tt}return Kr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return yl.create(e)}exclude(e){return yl.create(this.options.filter(t=>!e.includes(t)))}}yl.create=b4;class iy extends ct{_parse(e){const t=Rt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Oe.string&&r.parsedType!==Oe.number){const s=Rt.objectValues(t);return Pe(r,{expected:Rt.joinValues(s),received:r.parsedType,code:Ee.invalid_type}),tt}if(t.indexOf(e.data)===-1){const s=Rt.objectValues(t);return Pe(r,{received:r.data,code:Ee.invalid_enum_value,options:s}),tt}return Kr(e.data)}get enum(){return this._def.values}}iy.create=(n,e)=>new iy({values:n,typeName:Je.ZodNativeEnum,...rt(e)});class Qd extends ct{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Oe.promise&&t.common.async===!1)return Pe(t,{code:Ee.invalid_type,expected:Oe.promise,received:t.parsedType}),tt;const r=t.parsedType===Oe.promise?t.data:Promise.resolve(t.data);return Kr(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Qd.create=(n,e)=>new Qd({type:n,typeName:Je.ZodPromise,...rt(e)});class Yi extends ct{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Je.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Pe(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(l=>this._def.schema._parseAsync({data:l,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=l=>{const f=s.refinement(l,i);if(r.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?tt:(l.status==="dirty"&&t.dirty(),o(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?tt:(l.status==="dirty"&&t.dirty(),o(l.value).then(()=>({status:t.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Qm(o))return o;const l=s.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Qm(o)?Promise.resolve(s.transform(o.value,i)).then(l=>({status:t.value,value:l})):o);Rt.assertNever(s)}}Yi.create=(n,e,t)=>new Yi({schema:n,typeName:Je.ZodEffects,effect:e,...rt(t)});Yi.createWithPreprocess=(n,e,t)=>new Yi({schema:e,effect:{type:"preprocess",transform:n},typeName:Je.ZodEffects,...rt(t)});class ko extends ct{_parse(e){return this._getType(e)===Oe.undefined?Kr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ko.create=(n,e)=>new ko({innerType:n,typeName:Je.ZodOptional,...rt(e)});class tf extends ct{_parse(e){return this._getType(e)===Oe.null?Kr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tf.create=(n,e)=>new tf({innerType:n,typeName:Je.ZodNullable,...rt(e)});class ay extends ct{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===Oe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ay.create=(n,e)=>new ay({innerType:n,typeName:Je.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...rt(e)});class Qb extends ct{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Gb(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ki(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ki(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Qb.create=(n,e)=>new Qb({innerType:n,typeName:Je.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...rt(e)});class Zb extends ct{_parse(e){if(this._getType(e)!==Oe.nan){const r=this._getOrReturnCtx(e);return Pe(r,{code:Ee.invalid_type,expected:Oe.nan,received:r.parsedType}),tt}return{status:"valid",value:e.data}}}Zb.create=n=>new Zb({typeName:Je.ZodNaN,...rt(n)});const zte=Symbol("zod_brand");class E4 extends ct{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Wy extends ct{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?tt:i.status==="dirty"?(t.dirty(),w4(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?tt:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new Wy({in:e,out:t,typeName:Je.ZodPipeline})}}class Jb extends ct{_parse(e){const t=this._def.innerType._parse(e);return Qm(t)&&(t.value=Object.freeze(t.value)),t}}Jb.create=(n,e)=>new Jb({innerType:n,typeName:Je.ZodReadonly,...rt(e)});const v4=(n,e={},t)=>n?Yd.create().superRefine((r,s)=>{var i,o;if(!n(r)){const l=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,f=(o=(i=l.fatal)!==null&&i!==void 0?i:t)!==null&&o!==void 0?o:!0,h=typeof l=="string"?{message:l}:l;s.addIssue({code:"custom",...h,fatal:f})}}):Yd.create(),qte={object:hn.lazycreate};var Je;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(Je||(Je={}));const Vte=(n,e={message:`Input not instance of ${n.name}`})=>v4(t=>t instanceof n,e),A4=Vi.create,C4=gl.create,Gte=Zb.create,Kte=ml.create,_4=Zm.create,Wte=Xu.create,Yte=Kb.create,Qte=Jm.create,Zte=Xm.create,Jte=Yd.create,Xte=ju.create,ene=Fo.create,tne=Wb.create,nne=Wi.create,rne=hn.create,sne=hn.strictCreate,ine=ey.create,ane=FE.create,one=ty.create,cne=Fa.create,lne=ny.create,une=Yb.create,fne=ef.create,hne=Vh.create,dne=ry.create,pne=sy.create,gne=yl.create,mne=iy.create,yne=Qd.create,gP=Yi.create,wne=ko.create,bne=tf.create,Ene=Yi.createWithPreprocess,vne=Wy.create,Ane=()=>A4().optional(),Cne=()=>C4().optional(),_ne=()=>_4().optional(),Sne={string:n=>Vi.create({...n,coerce:!0}),number:n=>gl.create({...n,coerce:!0}),boolean:n=>Zm.create({...n,coerce:!0}),bigint:n=>ml.create({...n,coerce:!0}),date:n=>Xu.create({...n,coerce:!0})},Nne=tt;var P=Object.freeze({__proto__:null,defaultErrorMap:Ym,setErrorMap:Ite,getErrorMap:qb,makeIssue:Vb,EMPTY_PATH:Rte,addIssueToContext:Pe,ParseStatus:xr,INVALID:tt,DIRTY:w4,OK:Kr,isAborted:J_,isDirty:X_,isValid:Qm,isAsync:Gb,get util(){return Rt},get objectUtil(){return Z_},ZodParsedType:Oe,getParsedType:Fc,ZodType:ct,ZodString:Vi,ZodNumber:gl,ZodBigInt:ml,ZodBoolean:Zm,ZodDate:Xu,ZodSymbol:Kb,ZodUndefined:Jm,ZodNull:Xm,ZodAny:Yd,ZodUnknown:ju,ZodNever:Fo,ZodVoid:Wb,ZodArray:Wi,ZodObject:hn,ZodUnion:ey,ZodDiscriminatedUnion:FE,ZodIntersection:ty,ZodTuple:Fa,ZodRecord:ny,ZodMap:Yb,ZodSet:ef,ZodFunction:Vh,ZodLazy:ry,ZodLiteral:sy,ZodEnum:yl,ZodNativeEnum:iy,ZodPromise:Qd,ZodEffects:Yi,ZodTransformer:Yi,ZodOptional:ko,ZodNullable:tf,ZodDefault:ay,ZodCatch:Qb,ZodNaN:Zb,BRAND:zte,ZodBranded:E4,ZodPipeline:Wy,ZodReadonly:Jb,custom:v4,Schema:ct,ZodSchema:ct,late:qte,get ZodFirstPartyTypeKind(){return Je},coerce:Sne,any:Jte,array:nne,bigint:Kte,boolean:_4,date:Wte,discriminatedUnion:ane,effect:gP,enum:gne,function:hne,instanceof:Vte,intersection:one,lazy:dne,literal:pne,map:une,nan:Gte,nativeEnum:mne,never:ene,null:Zte,nullable:bne,number:C4,object:rne,oboolean:_ne,onumber:Cne,optional:wne,ostring:Ane,pipeline:vne,preprocess:Ene,promise:yne,record:lne,set:fne,strictObject:sne,string:A4,symbol:Yte,transformer:gP,tuple:cne,undefined:Qte,union:ine,unknown:Xte,void:tne,NEVER:Nne,ZodIssueCode:Ee,quotelessJson:xte,ZodError:Ki});const mn=P.object({message:P.string()});function xe(n){return P.literal(Be[n])}const HE=P.object({serializedMessage:P.string().optional(),accountAddress:P.string(),chainId:P.string(),notBefore:P.string().optional(),domain:P.string(),uri:P.string(),version:P.string(),nonce:P.string(),statement:P.string().optional(),resources:P.array(P.string()).optional(),requestId:P.string().optional(),issuedAt:P.string().optional(),expirationTime:P.string().optional()});P.object({accessList:P.array(P.string()),blockHash:P.string().nullable(),blockNumber:P.string().nullable(),chainId:P.string().or(P.number()),from:P.string(),gas:P.string(),hash:P.string(),input:P.string().nullable(),maxFeePerGas:P.string(),maxPriorityFeePerGas:P.string(),nonce:P.string(),r:P.string(),s:P.string(),to:P.string(),transactionIndex:P.string().nullable(),type:P.string(),v:P.string(),value:P.string()});const Tne=P.object({chainId:P.string().or(P.number()),rpcUrl:P.optional(P.string())}),One=P.object({email:P.string().email()}),xne=P.object({otp:P.string()}),Ine=P.object({uri:P.string(),preferredAccountType:P.optional(P.string()),chainId:P.optional(P.string().or(P.number())),siwxMessage:P.optional(HE),rpcUrl:P.optional(P.string())}),Rne=P.object({chainId:P.optional(P.string().or(P.number())),preferredAccountType:P.optional(P.string()),socialUri:P.optional(P.string()),siwxMessage:P.optional(HE),rpcUrl:P.optional(P.string())}),Pne=P.object({provider:P.enum(["google","github","apple","facebook","x","discord"])}),Dne=P.object({email:P.string().email()}),Une=P.object({otp:P.string()}),kne=P.object({otp:P.string()}),Bne=P.object({themeMode:P.optional(P.enum(["light","dark"])),themeVariables:P.optional(P.record(P.string(),P.string().or(P.number()))),w3mThemeVariables:P.optional(P.record(P.string(),P.string()))}),Mne=P.object({metadata:P.object({name:P.string(),description:P.string(),url:P.string(),icons:P.array(P.string())}).optional(),sdkVersion:P.string().optional(),sdkType:P.string().optional(),projectId:P.string()}),Lne=P.object({type:P.string()}),$ne=P.object({action:P.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),Fne=P.object({url:P.string()}),Hne=P.object({userName:P.string()}),jne=P.object({email:P.string().optional().nullable(),address:P.string(),chainId:P.string().or(P.number()),accounts:P.array(P.object({address:P.string(),type:P.enum([Ln.ACCOUNT_TYPES.EOA,Ln.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:P.string().optional().nullable(),preferredAccountType:P.optional(P.string()),signature:P.string().optional(),message:P.string().optional(),siwxMessage:P.optional(HE)}),zne=P.object({action:P.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),qne=P.object({email:P.string().email().optional().nullable(),address:P.string(),chainId:P.string().or(P.number()),smartAccountDeployed:P.optional(P.boolean()),accounts:P.array(P.object({address:P.string(),type:P.enum([Ln.ACCOUNT_TYPES.EOA,Ln.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:P.optional(P.string()),signature:P.string().optional(),message:P.string().optional(),siwxMessage:P.optional(HE)}),Vne=P.object({uri:P.string()}),Gne=P.object({isConnected:P.boolean()}),Kne=P.object({chainId:P.string().or(P.number())}),Wne=P.object({chainId:P.string().or(P.number())}),Yne=P.object({newEmail:P.string().email()}),Qne=P.object({smartAccountEnabledNetworks:P.array(P.number())});P.object({address:P.string(),isDeployed:P.boolean()});const Zne=P.object({version:P.string().optional()}),Jne=P.object({type:P.string(),address:P.string()}),Xne=P.any(),ere=P.object({method:P.literal("eth_accounts")}),tre=P.object({method:P.literal("eth_blockNumber")}),nre=P.object({method:P.literal("eth_call"),params:P.array(P.any())}),rre=P.object({method:P.literal("eth_chainId")}),sre=P.object({method:P.literal("eth_estimateGas"),params:P.array(P.any())}),ire=P.object({method:P.literal("eth_feeHistory"),params:P.array(P.any())}),are=P.object({method:P.literal("eth_gasPrice")}),ore=P.object({method:P.literal("eth_getAccount"),params:P.array(P.any())}),cre=P.object({method:P.literal("eth_getBalance"),params:P.array(P.any())}),lre=P.object({method:P.literal("eth_getBlockByHash"),params:P.array(P.any())}),ure=P.object({method:P.literal("eth_getBlockByNumber"),params:P.array(P.any())}),fre=P.object({method:P.literal("eth_getBlockReceipts"),params:P.array(P.any())}),hre=P.object({method:P.literal("eth_getBlockTransactionCountByHash"),params:P.array(P.any())}),dre=P.object({method:P.literal("eth_getBlockTransactionCountByNumber"),params:P.array(P.any())}),pre=P.object({method:P.literal("eth_getCode"),params:P.array(P.any())}),gre=P.object({method:P.literal("eth_getFilterChanges"),params:P.array(P.any())}),mre=P.object({method:P.literal("eth_getFilterLogs"),params:P.array(P.any())}),yre=P.object({method:P.literal("eth_getLogs"),params:P.array(P.any())}),wre=P.object({method:P.literal("eth_getProof"),params:P.array(P.any())}),bre=P.object({method:P.literal("eth_getStorageAt"),params:P.array(P.any())}),Ere=P.object({method:P.literal("eth_getTransactionByBlockHashAndIndex"),params:P.array(P.any())}),vre=P.object({method:P.literal("eth_getTransactionByBlockNumberAndIndex"),params:P.array(P.any())}),Are=P.object({method:P.literal("eth_getTransactionByHash"),params:P.array(P.any())}),Cre=P.object({method:P.literal("eth_getTransactionCount"),params:P.array(P.any())}),_re=P.object({method:P.literal("eth_getTransactionReceipt"),params:P.array(P.any())}),Sre=P.object({method:P.literal("eth_getUncleCountByBlockHash"),params:P.array(P.any())}),Nre=P.object({method:P.literal("eth_getUncleCountByBlockNumber"),params:P.array(P.any())}),Tre=P.object({method:P.literal("eth_maxPriorityFeePerGas")}),Ore=P.object({method:P.literal("eth_newBlockFilter")}),xre=P.object({method:P.literal("eth_newFilter"),params:P.array(P.any())}),Ire=P.object({method:P.literal("eth_newPendingTransactionFilter")}),Rre=P.object({method:P.literal("eth_sendRawTransaction"),params:P.array(P.any())}),Pre=P.object({method:P.literal("eth_syncing"),params:P.array(P.any())}),Dre=P.object({method:P.literal("eth_uninstallFilter"),params:P.array(P.any())}),mP=P.object({method:P.literal("personal_sign"),params:P.array(P.any())}),Ure=P.object({method:P.literal("eth_signTypedData_v4"),params:P.array(P.any())}),kre=P.object({method:P.literal("eth_sendTransaction"),params:P.array(P.any())}),Bre=P.object({method:P.literal("solana_signMessage"),params:P.object({message:P.string(),pubkey:P.string()})}),Mre=P.object({method:P.literal("solana_signTransaction"),params:P.object({transaction:P.string()})}),Lre=P.object({method:P.literal("solana_signAllTransactions"),params:P.object({transactions:P.array(P.string())})}),$re=P.object({method:P.literal("solana_signAndSendTransaction"),params:P.object({transaction:P.string(),options:P.object({skipPreflight:P.boolean().optional(),preflightCommitment:P.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:P.number().optional(),minContextSlot:P.number().optional()}).optional()})}),Fre=P.object({method:P.literal("wallet_sendCalls"),params:P.array(P.object({chainId:P.string().or(P.number()).optional(),from:P.string().optional(),version:P.string().optional(),capabilities:P.any().optional(),calls:P.array(P.object({to:P.string().startsWith("0x"),data:P.string().startsWith("0x").optional(),value:P.string().optional()}))}))}),Hre=P.object({method:P.literal("wallet_getCallsStatus"),params:P.array(P.string())}),jre=P.object({method:P.literal("wallet_getCapabilities"),params:P.array(P.string().or(P.number()).optional()).optional()}),zre=P.object({method:P.literal("wallet_grantPermissions"),params:P.array(P.any())}),qre=P.object({method:P.literal("wallet_revokePermissions"),params:P.any()}),Vre=P.object({method:P.literal("wallet_getAssets"),params:P.any()}),yP=P.object({token:P.string()}),Ie=P.object({id:P.string().optional()}),vC={appEvent:Ie.extend({type:xe("APP_SWITCH_NETWORK"),payload:Tne}).or(Ie.extend({type:xe("APP_CONNECT_EMAIL"),payload:One})).or(Ie.extend({type:xe("APP_CONNECT_DEVICE")})).or(Ie.extend({type:xe("APP_CONNECT_OTP"),payload:xne})).or(Ie.extend({type:xe("APP_CONNECT_SOCIAL"),payload:Ine})).or(Ie.extend({type:xe("APP_GET_FARCASTER_URI")})).or(Ie.extend({type:xe("APP_CONNECT_FARCASTER")})).or(Ie.extend({type:xe("APP_GET_USER"),payload:P.optional(Rne)})).or(Ie.extend({type:xe("APP_GET_SOCIAL_REDIRECT_URI"),payload:Pne})).or(Ie.extend({type:xe("APP_SIGN_OUT")})).or(Ie.extend({type:xe("APP_IS_CONNECTED"),payload:P.optional(yP)})).or(Ie.extend({type:xe("APP_GET_CHAIN_ID")})).or(Ie.extend({type:xe("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Ie.extend({type:xe("APP_INIT_SMART_ACCOUNT")})).or(Ie.extend({type:xe("APP_SET_PREFERRED_ACCOUNT"),payload:Lne})).or(Ie.extend({type:xe("APP_RPC_REQUEST"),payload:mP.or(Vre).or(ere).or(tre).or(nre).or(rre).or(sre).or(ire).or(are).or(ore).or(cre).or(lre).or(ure).or(fre).or(hre).or(dre).or(pre).or(gre).or(mre).or(yre).or(wre).or(bre).or(Ere).or(vre).or(Are).or(Cre).or(_re).or(Sre).or(Nre).or(Tre).or(Ore).or(xre).or(Ire).or(Rre).or(Pre).or(Dre).or(mP).or(Ure).or(kre).or(Bre).or(Mre).or(Lre).or($re).or(Hre).or(Fre).or(jre).or(zre).or(qre).and(P.object({chainId:P.string().or(P.number()).optional(),chainNamespace:P.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:P.string().optional()}))})).or(Ie.extend({type:xe("APP_UPDATE_EMAIL"),payload:Dne})).or(Ie.extend({type:xe("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:Une})).or(Ie.extend({type:xe("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:kne})).or(Ie.extend({type:xe("APP_SYNC_THEME"),payload:Bne})).or(Ie.extend({type:xe("APP_SYNC_DAPP_DATA"),payload:Mne})).or(Ie.extend({type:xe("APP_RELOAD")})).or(Ie.extend({type:xe("APP_RPC_ABORT")})),frameEvent:Ie.extend({type:xe("FRAME_SWITCH_NETWORK_ERROR"),payload:mn}).or(Ie.extend({type:xe("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Wne})).or(Ie.extend({type:xe("FRAME_CONNECT_EMAIL_SUCCESS"),payload:$ne})).or(Ie.extend({type:xe("FRAME_CONNECT_EMAIL_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:Fne})).or(Ie.extend({type:xe("FRAME_GET_FARCASTER_URI_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:Hne})).or(Ie.extend({type:xe("FRAME_CONNECT_FARCASTER_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_CONNECT_OTP_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_CONNECT_OTP_SUCCESS")})).or(Ie.extend({type:xe("FRAME_CONNECT_DEVICE_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Ie.extend({type:xe("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:jne})).or(Ie.extend({type:xe("FRAME_CONNECT_SOCIAL_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_GET_USER_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_GET_USER_SUCCESS"),payload:qne})).or(Ie.extend({type:xe("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Vne})).or(Ie.extend({type:xe("FRAME_SIGN_OUT_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_SIGN_OUT_SUCCESS")})).or(Ie.extend({type:xe("FRAME_IS_CONNECTED_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_IS_CONNECTED_SUCCESS"),payload:Gne})).or(Ie.extend({type:xe("FRAME_GET_CHAIN_ID_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Kne})).or(Ie.extend({type:xe("FRAME_RPC_REQUEST_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_RPC_REQUEST_SUCCESS"),payload:Xne})).or(Ie.extend({type:xe("FRAME_SESSION_UPDATE"),payload:yP})).or(Ie.extend({type:xe("FRAME_UPDATE_EMAIL_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_UPDATE_EMAIL_SUCCESS"),payload:zne})).or(Ie.extend({type:xe("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Ie.extend({type:xe("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Yne})).or(Ie.extend({type:xe("FRAME_SYNC_THEME_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_SYNC_THEME_SUCCESS")})).or(Ie.extend({type:xe("FRAME_SYNC_DAPP_DATA_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Ie.extend({type:xe("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:Qne})).or(Ie.extend({type:xe("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:Jne})).or(Ie.extend({type:xe("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_READY"),payload:Zne})).or(Ie.extend({type:xe("FRAME_RELOAD_ERROR"),payload:mn})).or(Ie.extend({type:xe("FRAME_RELOAD_SUCCESS")}))};function AC(n,e={}){var t;return typeof(e==null?void 0:e.type)=="string"&&((t=e==null?void 0:e.type)==null?void 0:t.includes(n))}function Gre({projectId:n,chainId:e,version:t,enableLogger:r,rpcUrl:s=oe.BLOCKCHAIN_API_RPC_URL}){const i=new URL(n9);return i.searchParams.set("projectId",n),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",t),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class Kre{constructor({projectId:e,isAppClient:t=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=oe.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,l,f)=>{function h({data:p}){var y;if(!AC(Be.FRAME_EVENT_KEY,p))return;const g=vC.frameEvent.safeParse(p);if(!g.success){console.warn("W3mFrame: invalid frame event",g.error.message);return}((y=g.data)==null?void 0:y.id)===o&&(l(g.data),window.removeEventListener("message",h))}$s.isClient&&(window.addEventListener("message",h),f.addEventListener("abort",()=>{window.removeEventListener("message",h)}))},onFrameEvent:o=>{$s.isClient&&window.addEventListener("message",({data:l})=>{if(!AC(Be.FRAME_EVENT_KEY,l))return;const f=vC.frameEvent.safeParse(l);f.success?o(f.data):console.warn("W3mFrame: invalid frame event",f.error.message)})},onAppEvent:o=>{$s.isClient&&window.addEventListener("message",({data:l})=>{if(!AC(Be.APP_EVENT_KEY,l))return;const f=vC.appEvent.safeParse(l);f.success||console.warn("W3mFrame: invalid app event",f.error.message),o(l)})},postAppEvent:o=>{var l;if($s.isClient){if(!((l=this.iframe)!=null&&l.contentWindow))throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if($s.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,l)=>{this.frameLoadPromiseResolver={resolve:o,reject:l}}),this.rpcUrl=i,t&&(this.frameLoadPromise=new Promise((o,l)=>{this.frameLoadPromiseResolver={resolve:o,reject:l}}),$s.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=Gre({projectId:e,chainId:r,version:s9,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var l;(l=this.frameLoadPromiseResolver)==null||l.reject("Unable to load email login dependency")},this.events.onFrameEvent(l=>{var f;l.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(f=this.frameLoadPromiseResolver)==null||f.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(t=>({[t]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${t}&projectId=${this.projectId}`,chainId:t}}));return Object.assign({},...e)}}class Wre{constructor(e){var i;const t=cp({level:r9}),{logger:r,chunkLoggerController:s}=eS({opts:t});this.logger=Rr(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Yre{constructor({projectId:e,chainId:t,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new Wre(e)),this.abortController=i,this.getActiveCaipNetwork=o;const l=this.getRpcUrl(t);this.w3mFrame=new Kre({projectId:e,isAppClient:!0,chainId:t,enableLogger:r,rpcUrl:l}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(t=>{t.type===Be.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!lr.get(Be.EMAIL_LOGIN_USED_KEY)}getEmail(){return lr.get(Be.EMAIL)}getUsername(){return lr.get(Be.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Be.APP_RELOAD})}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error reloading iframe"),t}}async connectEmail(e){var t;try{$s.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Be.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Be.APP_CONNECT_DEVICE})}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error connecting device"),t}}async connectOtp(e){var t;try{return this.appEvent({type:Be.APP_CONNECT_OTP,payload:e})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const t=await this.appEvent({type:Be.APP_IS_CONNECTED});return t!=null&&t.isConnected||this.deleteAuthLoginCache(),t}catch(t){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:t},"Error checking connection"),t}}async getChainId(){var e;try{const t=await this.appEvent({type:Be.APP_GET_CHAIN_ID});return this.setLastUsedChainId(t.chainId),t}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error getting chain id"),t}}async getSocialRedirectUri(e){var t;try{return await this.init(),this.appEvent({type:Be.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var t;try{const r=await this.appEvent({type:Be.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var t;try{return this.appEvent({type:Be.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var t;try{const r=await this.appEvent({type:Be.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var t;try{return this.appEvent({type:Be.APP_SYNC_THEME,payload:e})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var t;try{return this.appEvent({type:Be.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const t=await this.appEvent({type:Be.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(t.smartAccountEnabledNetworks),t}catch(t){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:t},"Error getting smart account enabled networks"),t}}async setPreferredAccount(e){var t;try{return this.appEvent({type:Be.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var t,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Be.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(t=this.w3mLogger)==null||t.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var t;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Be.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:t,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(t),o=await this.appEvent({type:Be.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:t,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Be.APP_GET_FARCASTER_URI})}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error getting farcaster uri"),t}}async connectFarcaster(){var e;try{const t=await this.appEvent({type:Be.APP_CONNECT_FARCASTER});return t.userName&&this.setSocialLoginSuccess(t.userName),t}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error connecting farcaster"),t}}async switchNetwork({chainId:e}){var t;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Be.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(t=this.w3mLogger)==null||t.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Be.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(t){throw(e=this.w3mLogger)==null||e.logger.error({error:t},"Error disconnecting"),t}}async request(e){var r,s,i,o,l;const t=e;try{if(Ln.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const f=e.chainNamespace||"eip155",h=(r=this.getActiveCaipNetwork(f))==null?void 0:r.id;t.chainNamespace=f,t.chainId=h,t.rpcUrl=this.getRpcUrl(h),(s=this.rpcRequestHandler)==null||s.call(this,e);const p=await this.appEvent({type:Be.APP_RPC_REQUEST,payload:t});return(i=this.rpcSuccessHandler)==null||i.call(this,p,t),p}catch(f){throw(o=this.rpcErrorHandler)==null||o.call(this,f,t),(l=this.w3mLogger)==null||l.logger.error({error:f},"Error requesting"),f}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===Be.FRAME_IS_CONNECTED_SUCCESS&&t.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===Be.FRAME_IS_CONNECTED_ERROR&&e(),t.type===Be.FRAME_IS_CONNECTED_SUCCESS&&!t.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===Be.FRAME_GET_USER_SUCCESS&&e(t.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===Be.FRAME_CONNECT_SOCIAL_SUCCESS&&e(t.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===Be.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(t.payload):t.type===Be.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ln.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:t,method:r})=>{Ln.SAFE_RPC_METHODS.includes(r)||t.abort(),await this.appEvent({type:Be.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(t){(e=this.w3mLogger)==null||e.logger.error({error:t},"Error aborting RPC request")}}async appEvent(e){let t,r;function s(f){return f.replace("@w3m-app/","")}const i=[Be.APP_SYNC_DAPP_DATA,Be.APP_SYNC_THEME,Be.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var f;(f=this.onTimeout)==null||f.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Be.APP_CONNECT_EMAIL,Be.APP_CONNECT_DEVICE,Be.APP_CONNECT_OTP,Be.APP_CONNECT_SOCIAL,Be.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(t=setTimeout(()=>{var f;(f=this.onTimeout)==null||f.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((f,h)=>{var b,v,E;const p=Math.random().toString(36).substring(7);(E=(b=this.w3mLogger)==null?void 0:(v=b.logger).info)==null||E.call(v,{event:e,id:p},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:p});const g=new AbortController;if(o==="RPC_REQUEST"){const A=e;this.openRpcRequests=[...this.openRpcRequests,{...A.payload,abortController:g}]}g.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?h(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&h(new Error("Something went wrong"))});function y(A,S){var O,T,k;A.id===p&&((T=S==null?void 0:(O=S.logger).info)==null||T.call(O,{framEvent:A,id:p},"Received frame response"),A.type===`@w3m-frame/${o}_SUCCESS`?(t&&clearTimeout(t),r&&clearTimeout(r),"payload"in A&&f(A.payload),f(void 0)):A.type===`@w3m-frame/${o}_ERROR`&&(t&&clearTimeout(t),r&&clearTimeout(r),"payload"in A&&h(new Error(((k=A.payload)==null?void 0:k.message)||"An error occurred")),h(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(p,A=>y(A,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){lr.set(Be.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){lr.set(Be.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&lr.set(Be.EMAIL,e),lr.set(Be.EMAIL_LOGIN_USED_KEY,"true"),lr.delete(Be.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){lr.delete(Be.EMAIL_LOGIN_USED_KEY),lr.delete(Be.EMAIL),lr.delete(Be.LAST_USED_CHAIN_KEY),lr.delete(Be.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&lr.set(Be.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=lr.get(Be.LAST_USED_CHAIN_KEY)??void 0,t=Number(e);return isNaN(t)?e:t}persistSmartAccountEnabledNetworks(e){lr.set(Be.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let t=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?t=(s=Fr.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?t="eip155":t="solana");const r=this.getActiveCaipNetwork(t);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class gm{constructor(){}static getInstance({projectId:e,chainId:t,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return gm.instance||(gm.instance=new Yre({projectId:e,chainId:t,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),gm.instance}}const wP="error",Qre="wss://relay.walletconnect.org",Zre="wc",Jre="universal_provider",jw=`${Zre}@2:${Jre}:`,S4="https://rpc.walletconnect.org/v1/",Rh="generic",Xre=`${S4}bundler`,vi={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function IS(n){return n==null||typeof n!="object"&&typeof n!="function"}function N4(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function T4(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const ese="[object RegExp]",O4="[object String]",x4="[object Number]",I4="[object Boolean]",R4="[object Arguments]",tse="[object Symbol]",nse="[object Date]",rse="[object Map]",sse="[object Set]",ise="[object Array]",ase="[object ArrayBuffer]",ose="[object Object]",cse="[object DataView]",lse="[object Uint8Array]",use="[object Uint8ClampedArray]",fse="[object Uint16Array]",hse="[object Uint32Array]",dse="[object Int8Array]",pse="[object Int16Array]",gse="[object Int32Array]",mse="[object Float32Array]",yse="[object Float64Array]";function RS(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function wse(n,e){return Mh(n,void 0,n,new Map,e)}function Mh(n,e,t,r=new Map,s=void 0){const i=s==null?void 0:s(n,e,t,r);if(i!=null)return i;if(IS(n))return n;if(r.has(n))return r.get(n);if(Array.isArray(n)){const o=new Array(n.length);r.set(n,o);for(let l=0;l<n.length;l++)o[l]=Mh(n[l],l,t,r,s);return Object.hasOwn(n,"index")&&(o.index=n.index),Object.hasOwn(n,"input")&&(o.input=n.input),o}if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp){const o=new RegExp(n.source,n.flags);return o.lastIndex=n.lastIndex,o}if(n instanceof Map){const o=new Map;r.set(n,o);for(const[l,f]of n)o.set(l,Mh(f,l,t,r,s));return o}if(n instanceof Set){const o=new Set;r.set(n,o);for(const l of n)o.add(Mh(l,void 0,t,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(n))return n.subarray();if(RS(n)){const o=new(Object.getPrototypeOf(n)).constructor(n.length);r.set(n,o);for(let l=0;l<n.length;l++)o[l]=Mh(n[l],l,t,r,s);return o}if(n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);if(n instanceof DataView){const o=new DataView(n.buffer.slice(0),n.byteOffset,n.byteLength);return r.set(n,o),ru(o,n,t,r,s),o}if(typeof File<"u"&&n instanceof File){const o=new File([n],n.name,{type:n.type});return r.set(n,o),ru(o,n,t,r,s),o}if(n instanceof Blob){const o=new Blob([n],{type:n.type});return r.set(n,o),ru(o,n,t,r,s),o}if(n instanceof Error){const o=new n.constructor;return r.set(n,o),o.message=n.message,o.name=n.name,o.stack=n.stack,o.cause=n.cause,ru(o,n,t,r,s),o}if(typeof n=="object"&&bse(n)){const o=Object.create(Object.getPrototypeOf(n));return r.set(n,o),ru(o,n,t,r,s),o}return n}function ru(n,e,t=n,r,s){const i=[...Object.keys(e),...N4(e)];for(let o=0;o<i.length;o++){const l=i[o],f=Object.getOwnPropertyDescriptor(n,l);(f==null||f.writable)&&(n[l]=Mh(e[l],l,t,r,s))}}function bse(n){switch(T4(n)){case R4:case ise:case ase:case cse:case I4:case nse:case mse:case yse:case dse:case pse:case gse:case rse:case x4:case ose:case ese:case sse:case O4:case tse:case lse:case use:case fse:case hse:return!0;default:return!1}}function Ese(n,e){return wse(n,(t,r,s,i)=>{if(typeof n=="object")switch(Object.prototype.toString.call(n)){case x4:case O4:case I4:{const o=new n.constructor(n==null?void 0:n.valueOf());return ru(o,n),o}case R4:{const o={};return ru(o,n),o.length=n.length,o[Symbol.iterator]=n[Symbol.iterator],o}default:return}})}function bP(n){return Ese(n)}function EP(n){return n!==null&&typeof n=="object"&&T4(n)==="[object Arguments]"}function vP(n){return typeof n=="object"&&n!==null}function vse(){}function Ase(n){return RS(n)}function Cse(n){var t;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const r=n[Symbol.toStringTag];return r==null||!((t=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&t.writable)?!1:n.toString()===`[object ${r}]`}let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function _se(n){if(IS(n))return n;if(Array.isArray(n)||RS(n)||n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);const e=Object.getPrototypeOf(n),t=e.constructor;if(n instanceof Date||n instanceof Map||n instanceof Set)return new t(n);if(n instanceof RegExp){const r=new t(n);return r.lastIndex=n.lastIndex,r}if(n instanceof DataView)return new t(n.buffer.slice(0));if(n instanceof Error){const r=new t(n.message);return r.stack=n.stack,r.name=n.name,r.cause=n.cause,r}if(typeof File<"u"&&n instanceof File)return new t([n],n.name,{type:n.type,lastModified:n.lastModified});if(typeof n=="object"){const r=Object.create(e);return Object.assign(r,n)}return n}function Sse(n,...e){const t=e.slice(0,-1),r=e[e.length-1];let s=n;for(let i=0;i<t.length;i++){const o=t[i];s=t2(s,o,r,new Map)}return s}function t2(n,e,t,r){if(IS(n)&&(n=Object(n)),e==null||typeof e!="object")return n;if(r.has(e))return _se(r.get(e));if(r.set(e,n),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...N4(e)];for(let i=0;i<s.length;i++){const o=s[i];let l=e[o],f=n[o];if(EP(l)&&(l={...l}),EP(f)&&(f={...f}),typeof Buffer<"u"&&Buffer.isBuffer(l)&&(l=bP(l)),Array.isArray(l))if(typeof f=="object"&&f!=null){const p=[],g=Reflect.ownKeys(f);for(let y=0;y<g.length;y++){const b=g[y];p[b]=f[b]}f=p}else f=[];const h=t(f,l,o,n,e,r);h!=null?n[o]=h:Array.isArray(l)||vP(f)&&vP(l)?n[o]=t2(f,l,t,r):f==null&&Cse(l)?n[o]=t2({},l,t,r):f==null&&Ase(l)?n[o]=bP(l):(f===void 0||l!==void 0)&&(n[o]=l)}return n}function Nse(n,...e){return Sse(n,...e,vse)}var Tse=Object.defineProperty,Ose=Object.defineProperties,xse=Object.getOwnPropertyDescriptors,AP=Object.getOwnPropertySymbols,Ise=Object.prototype.hasOwnProperty,Rse=Object.prototype.propertyIsEnumerable,CP=(n,e,t)=>e in n?Tse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,zw=(n,e)=>{for(var t in e||(e={}))Ise.call(e,t)&&CP(n,t,e[t]);if(AP)for(var t of AP(e))Rse.call(e,t)&&CP(n,t,e[t]);return n},Pse=(n,e)=>Ose(n,xse(e));function js(n,e,t){var r;const s=qh(n);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${S4}?chainId=${s.namespace}:${s.reference}&projectId=${t}`}function mf(n){return n.includes(":")?n.split(":")[1]:n}function P4(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Dse(n,e){const t=Object.keys(e.namespaces).filter(s=>s.includes(n));if(!t.length)return[];const r=[];return t.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function _P(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>{var r,s;return((r=t==null?void 0:t.chains)==null?void 0:r.length)&&((s=t==null?void 0:t.chains)==null?void 0:s.length)>0}))}function qw(n={},e={}){const t=_P(SP(n)),r=_P(SP(e));return Nse(t,r)}function SP(n){var e,t,r,s,i;const o={};if(!Ua(n))return o;for(const[l,f]of Object.entries(n)){const h=UE(l)?[l]:f.chains,p=f.methods||[],g=f.events||[],y=f.rpcMap||{},b=Bh(l);o[b]=Pse(zw(zw({},o[b]),f),{chains:Da(h,(e=o[b])==null?void 0:e.chains),methods:Da(p,(t=o[b])==null?void 0:t.methods),events:Da(g,(r=o[b])==null?void 0:r.events)}),(Ua(y)||Ua(((s=o[b])==null?void 0:s.rpcMap)||{}))&&(o[b].rpcMap=zw(zw({},y),(i=o[b])==null?void 0:i.rpcMap))}return o}function NP(n){return n.includes(":")?n.split(":")[2]:n}function TP(n){const e={};for(const[t,r]of Object.entries(n)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],l=UE(t)?[t]:r.chains?r.chains:P4(r.accounts);e[t]={chains:l,methods:s,events:i,accounts:o}}return e}function CC(n){return typeof n=="number"?n:n.includes("0x")?parseInt(n,16):(n=n.includes(":")?n.split(":")[1]:n,isNaN(Number(n))?n:Number(n))}const D4={},Pt=n=>D4[n],_C=(n,e)=>{D4[n]=e};var Use=Object.defineProperty,OP=Object.getOwnPropertySymbols,kse=Object.prototype.hasOwnProperty,Bse=Object.prototype.propertyIsEnumerable,xP=(n,e,t)=>e in n?Use(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,IP=(n,e)=>{for(var t in e||(e={}))kse.call(e,t)&&xP(n,t,e[t]);if(OP)for(var t of OP(e))Bse.call(e,t)&&xP(n,t,e[t]);return n};const RP="eip155",Mse=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],Lse=n=>n&&n.startsWith("0x")?BigInt(n).toString(10):n,SC=n=>n&&n.startsWith("0x")?n:`0x${BigInt(n).toString(16)}`,PP=n=>Object.keys(n).filter(e=>Mse.includes(e)).reduce((e,t)=>(e[t]=n[t],e),{}),$se=(n,e,t)=>{const{sessionProperties:r={},scopedProperties:s={}}=n,i={};if(!Ua(s)&&!Ua(r))return;const o=PP(r);for(const l of t){const f=Lse(l);if(!f)continue;i[SC(f)]=o;const h=s==null?void 0:s[`${RP}:${f}`];if(h){const p=h==null?void 0:h[`${RP}:${f}:${e}`];i[SC(f)]=IP(IP({},i[SC(f)]),PP(p||h))}}for(const[l,f]of Object.entries(i))Object.keys(f).length===0&&delete i[l];return Object.keys(i).length>0?i:void 0};var Fse=Object.defineProperty,Hse=(n,e,t)=>e in n?Fse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,dh=(n,e,t)=>Hse(n,typeof e!="symbol"?e+"":e,t);class jse{constructor(e){dh(this,"name","polkadot"),dh(this,"client"),dh(this,"httpProviders"),dh(this,"events"),dh(this,"namespace"),dh(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(vi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=mf(t);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||js(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ei(new Zi(r,Pt("disableProviderPing")))}}var zse=Object.defineProperty,qse=Object.defineProperties,Vse=Object.getOwnPropertyDescriptors,DP=Object.getOwnPropertySymbols,Gse=Object.prototype.hasOwnProperty,Kse=Object.prototype.propertyIsEnumerable,n2=(n,e,t)=>e in n?zse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,UP=(n,e)=>{for(var t in e||(e={}))Gse.call(e,t)&&n2(n,t,e[t]);if(DP)for(var t of DP(e))Kse.call(e,t)&&n2(n,t,e[t]);return n},kP=(n,e)=>qse(n,Vse(e)),ph=(n,e,t)=>n2(n,typeof e!="symbol"?e+"":e,t);class Wse{constructor(e){ph(this,"name","eip155"),ph(this,"client"),ph(this,"chainId"),ph(this,"namespace"),ph(this,"httpProviders"),ph(this,"events"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(vi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const r=t||js(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ei(new Zi(r,Pt("disableProviderPing")))}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=parseInt(mf(t));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let s=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,s,i,o;const l=(r=(t=e.request)==null?void 0:t.params)==null?void 0:r[0],f=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!l)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const h=this.client.session.get(e.topic),p=((o=h==null?void 0:h.sessionProperties)==null?void 0:o.capabilities)||{},g=`${l}${f.join(",")}`,y=p==null?void 0:p[g];if(y)return y;let b;try{b=$se(h,l,f)}catch(E){console.warn("Failed to extract capabilities from session",E)}if(b)return b;const v=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:kP(UP({},h.sessionProperties||{}),{capabilities:kP(UP({},p||{}),{[g]:v})})})}catch(E){console.warn("Failed to update session with capabilities",E)}return v}async getCallStatus(e){var t,r;const s=this.client.session.get(e.topic),i=(t=s.sessionProperties)==null?void 0:t.bundler_name;if(i){const l=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(l,e)}catch(f){console.warn("Failed to fetch call status from bundler",f,l)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(l){console.warn("Failed to fetch call status from custom bundler",l,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(al("eth_getUserOperationReceipt",[(r=t.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,t){return`${Xre}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var Yse=Object.defineProperty,Qse=(n,e,t)=>e in n?Yse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gh=(n,e,t)=>Qse(n,typeof e!="symbol"?e+"":e,t);class Zse{constructor(e){gh(this,"name","solana"),gh(this,"client"),gh(this,"httpProviders"),gh(this,"events"),gh(this,"namespace"),gh(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(vi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=mf(t);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||js(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ei(new Zi(r,Pt("disableProviderPing")))}}var Jse=Object.defineProperty,Xse=(n,e,t)=>e in n?Jse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,mh=(n,e,t)=>Xse(n,typeof e!="symbol"?e+"":e,t);class eie{constructor(e){mh(this,"name","cosmos"),mh(this,"client"),mh(this,"httpProviders"),mh(this,"events"),mh(this,"namespace"),mh(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(vi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=mf(t);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||js(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ei(new Zi(r,Pt("disableProviderPing")))}}var tie=Object.defineProperty,nie=(n,e,t)=>e in n?tie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yh=(n,e,t)=>nie(n,typeof e!="symbol"?e+"":e,t);class rie{constructor(e){yh(this,"name","algorand"),yh(this,"client"),yh(this,"httpProviders"),yh(this,"events"),yh(this,"namespace"),yh(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const r=t||js(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(vi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||js(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Ei(new Zi(r,Pt("disableProviderPing")))}}var sie=Object.defineProperty,iie=(n,e,t)=>e in n?sie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,wh=(n,e,t)=>iie(n,typeof e!="symbol"?e+"":e,t);class aie{constructor(e){wh(this,"name","cip34"),wh(this,"client"),wh(this,"httpProviders"),wh(this,"events"),wh(this,"namespace"),wh(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(vi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const r=this.getCardanoRPCUrl(t),s=mf(t);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ei(new Zi(r,Pt("disableProviderPing")))}}var oie=Object.defineProperty,cie=(n,e,t)=>e in n?oie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bh=(n,e,t)=>cie(n,typeof e!="symbol"?e+"":e,t);class lie{constructor(e){bh(this,"name","elrond"),bh(this,"client"),bh(this,"httpProviders"),bh(this,"events"),bh(this,"namespace"),bh(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(vi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=mf(t);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||js(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ei(new Zi(r,Pt("disableProviderPing")))}}var uie=Object.defineProperty,fie=(n,e,t)=>e in n?uie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Eh=(n,e,t)=>fie(n,typeof e!="symbol"?e+"":e,t);class hie{constructor(e){Eh(this,"name","multiversx"),Eh(this,"client"),Eh(this,"httpProviders"),Eh(this,"events"),Eh(this,"namespace"),Eh(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(vi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const s=mf(t);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||js(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ei(new Zi(r,Pt("disableProviderPing")))}}var die=Object.defineProperty,pie=(n,e,t)=>e in n?die(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vh=(n,e,t)=>pie(n,typeof e!="symbol"?e+"":e,t);class gie{constructor(e){vh(this,"name","near"),vh(this,"client"),vh(this,"httpProviders"),vh(this,"events"),vh(this,"namespace"),vh(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||js(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(vi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||js(e,this.namespace);return typeof r>"u"?void 0:new Ei(new Zi(r,Pt("disableProviderPing")))}}var mie=Object.defineProperty,yie=(n,e,t)=>e in n?mie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ah=(n,e,t)=>yie(n,typeof e!="symbol"?e+"":e,t);class wie{constructor(e){Ah(this,"name","tezos"),Ah(this,"client"),Ah(this,"httpProviders"),Ah(this,"events"),Ah(this,"namespace"),Ah(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||js(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(vi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||js(e,this.namespace);return typeof r>"u"?void 0:new Ei(new Zi(r))}}var bie=Object.defineProperty,Eie=(n,e,t)=>e in n?bie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ch=(n,e,t)=>Eie(n,typeof e!="symbol"?e+"":e,t);class vie{constructor(e){Ch(this,"name",Rh),Ch(this,"client"),Ch(this,"httpProviders"),Ch(this,"events"),Ch(this,"namespace"),Ch(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(vi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;const r={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(s=>{const i=qh(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||js(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ei(new Zi(r,Pt("disableProviderPing")))}}var Aie=Object.defineProperty,Cie=Object.defineProperties,_ie=Object.getOwnPropertyDescriptors,BP=Object.getOwnPropertySymbols,Sie=Object.prototype.hasOwnProperty,Nie=Object.prototype.propertyIsEnumerable,r2=(n,e,t)=>e in n?Aie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Vw=(n,e)=>{for(var t in e||(e={}))Sie.call(e,t)&&r2(n,t,e[t]);if(BP)for(var t of BP(e))Nie.call(e,t)&&r2(n,t,e[t]);return n},NC=(n,e)=>Cie(n,_ie(e)),ri=(n,e,t)=>r2(n,typeof e!="symbol"?e+"":e,t);class PS{constructor(e){ri(this,"client"),ri(this,"namespaces"),ri(this,"optionalNamespaces"),ri(this,"sessionProperties"),ri(this,"scopedProperties"),ri(this,"events",new J2),ri(this,"rpcProviders",{}),ri(this,"session"),ri(this,"providerOpts"),ri(this,"logger"),ri(this,"uri"),ri(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:My(cp({level:(e==null?void 0:e.logger)||wP})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new PS(e);return await t.initialize(),t}async request(e,t,r){const[s,i]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Vw({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>t(null,kE(i,o))).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:un("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=TP(this.session.namespaces);this.namespaces=qw(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));const s=await r();this.session=s;const i=TP(s.namespaces);return this.namespaces=qw(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Rh?i.setDefaultChain(`${r}:${s}`,t):i.setDefaultChain(s,t)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Uo(t)){for(const r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await Lee.init({core:this.providerOpts.core,logger:this.providerOpts.logger||wP,relayUrl:this.providerOpts.relayUrl||Qre,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(t=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:t.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Bh(t)))];_C("client",this.client),_C("events",this.events),_C("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const r=Dse(t,this.session);if((r==null?void 0:r.length)===0)return;const s=P4(r),i=qw(this.namespaces,this.optionalNamespaces),o=NC(Vw({},i[t]),{accounts:r,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new Wse({namespace:o});break;case"algorand":this.rpcProviders[t]=new rie({namespace:o});break;case"solana":this.rpcProviders[t]=new Zse({namespace:o});break;case"cosmos":this.rpcProviders[t]=new eie({namespace:o});break;case"polkadot":this.rpcProviders[t]=new jse({namespace:o});break;case"cip34":this.rpcProviders[t]=new aie({namespace:o});break;case"elrond":this.rpcProviders[t]=new lie({namespace:o});break;case"multiversx":this.rpcProviders[t]=new hie({namespace:o});break;case"near":this.rpcProviders[t]=new gie({namespace:o});break;case"tezos":this.rpcProviders[t]=new wie({namespace:o});break;default:this.rpcProviders[Rh]?this.rpcProviders[Rh].updateNamespace(o):this.rpcProviders[Rh]=new vie({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;const{topic:r}=e;r===((t=this.session)==null?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;const{params:r,topic:s}=e;if(s!==((t=this.session)==null?void 0:t.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Uo(o)&&this.events.emit("accountsChanged",o.map(NP))}else if(i.name==="chainChanged"){const o=r.chainId,l=r.event.data,f=Bh(o),h=CC(o)!==CC(l)?`${f}:${CC(l)}`:o;this.onChainChanged(h)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=t,o=(s=this.client)==null?void 0:s.session.get(e);this.session=NC(Vw({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{var t;e.topic===((t=this.session)==null?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",NC(Vw({},un("USER_DISCONNECTED")),{data:e.topic})))}),this.on(vi.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Rh]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=qw(t,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[t,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map(o=>Bh(o)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];const s=Bh(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();t||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:t,newChainId:r}){var s,i;try{if(t===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const l=o.filter(f=>f.includes(`${r}:`)).map(NP);if(!Uo(l))return;this.events.emit("accountsChanged",l)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,t){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${t}`,s={chains:[],methods:[],events:[],defaultChain:t};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=t):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${jw}/${e}${s}`,t)}async getFromStore(e){var t;const r=((t=this.session)==null?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${jw}/${e}${r}`)}async deleteFromStore(e){var t;const r=((t=this.session)==null?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${jw}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const t=await this.client.core.storage.getKeys();for(const r of t)r.startsWith(jw)&&await this.client.core.storage.removeItem(r)}catch(t){this.logger.warn("Failed to cleanup storage",t)}}}var MP={};const Tie={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof MP<"u"?MP.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},s2={filterOutDuplicatesByRDNS(n){const e=pe.state.enableEIP6963?ve.state.connectors:[],t=be.getRecentWallets(),r=e.map(l=>{var f;return(f=l.info)==null?void 0:f.rdns}).filter(Boolean),s=t.map(l=>l.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Re.isMobile()){const l=i.indexOf("io.metamask.mobile");i[l]="io.metamask"}return n.filter(l=>!(l!=null&&l.rdns&&i.includes(String(l.rdns))||!(l!=null&&l.rdns)&&e.some(h=>h.name===l.name)))},filterOutDuplicatesByIds(n){const e=ve.state.connectors.filter(l=>l.type==="ANNOUNCED"||l.type==="INJECTED"),t=be.getRecentWallets(),r=e.map(l=>l.explorerId),s=t.map(l=>l.id),i=r.concat(s);return n.filter(l=>!i.includes(l==null?void 0:l.id))},filterOutDuplicateWallets(n){const e=this.filterOutDuplicatesByRDNS(n);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(n){const{connectors:e}=ve.state,{featuredWalletIds:t}=pe.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,l)=>{var f;return(f=l.info)!=null&&f.rdns&&(o[l.info.rdns]=!0),o},{});return n.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,l)=>{const f=Number(l.installed)-Number(o.installed);if(f!==0)return f;if(t!=null&&t.length){const h=t.indexOf(o.id),p=t.indexOf(l.id);if(h!==-1&&p!==-1)return h-p;if(h!==-1)return-1;if(p!==-1)return 1}return 0})},getConnectOrderMethod(n,e){var f;const t=(n==null?void 0:n.connectMethodsOrder)||((f=pe.state.features)==null?void 0:f.connectMethodsOrder),r=e||ve.state.connectors;if(t)return t;const{injected:s,announced:i}=hb.getConnectorsByType(r,je.state.recommended,je.state.featured),o=s.filter(hb.showConnector),l=i.filter(hb.showConnector);return o.length||l.length?["wallet","email","social"]:Tie.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(n){const e=!!n.rdns&&je.state.excludedWallets.some(r=>r.rdns===n.rdns),t=!!n.name&&je.state.excludedWallets.some(r=>Jn.isLowerCaseMatch(r.name,n.name));return e||t},markWalletsWithDisplayIndex(n){return n.map((e,t)=>({...e,display_index:t}))}},hb={getConnectorsByType(n,e,t){const{customWallets:r}=pe.state,s=be.getRecentWallets(),i=s2.filterOutDuplicateWallets(e),o=s2.filterOutDuplicateWallets(t),l=n.filter(g=>g.type==="MULTI_CHAIN"),f=n.filter(g=>g.type==="ANNOUNCED"),h=n.filter(g=>g.type==="INJECTED"),p=n.filter(g=>g.type==="EXTERNAL");return{custom:r,recent:s,external:p,multiChain:l,announced:f,injected:h,recommended:i,featured:o}},showConnector(n){var s;const e=(s=n.info)==null?void 0:s.rdns,t=!!e&&je.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!n.name&&je.state.excludedWallets.some(i=>Jn.isLowerCaseMatch(i.name,n.name));return!(n.type==="INJECTED"&&(n.name==="Browser Wallet"&&(!Re.isMobile()||Re.isMobile()&&!e&&!_e.checkInstalled())||t||r)||(n.type==="ANNOUNCED"||n.type==="EXTERNAL")&&(t||r))},getIsConnectedWithWC(){return Array.from(L.state.chains.values()).some(t=>ve.getConnectorId(t.namespace)===oe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:n,featured:e,custom:t,recent:r,announced:s,injected:i,multiChain:o,external:l,overriddenConnectors:f=(h=>(h=pe.state.features)==null?void 0:h.connectorTypeOrder)()??[]}){const y=[{type:"walletConnect",isEnabled:pe.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:t&&t.length>0},{type:"external",isEnabled:l.length>0},{type:"recommended",isEnabled:n.length>0}].filter(A=>A.isEnabled),b=new Set(y.map(A=>A.type)),v=f.filter(A=>b.has(A)).map(A=>({type:A,isEnabled:!0})),E=y.filter(({type:A})=>!v.some(({type:O})=>O===A));return Array.from(new Set([...v,...E].map(({type:A})=>A)))},getAuthName({email:n,socialUsername:e,socialProvider:t}){return e?t&&t==="discord"&&e.endsWith("0")?e.slice(0,-1):e:n.length>30?`${n.slice(0,-3)}...`:n},async fetchProviderData(n){var e,t;try{if(n.name==="Browser Wallet"&&!Re.isMobile())return{accounts:[],chainId:void 0};if(n.id===oe.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=n.provider)==null?void 0:e.request({method:"eth_accounts"}),(t=n.provider)==null?void 0:t.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${n.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const db=globalThis,DS=db.ShadowRoot&&(db.ShadyCSS===void 0||db.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,US=Symbol(),LP=new WeakMap;let U4=class{constructor(e,t,r){if(this._$cssResult$=!0,r!==US)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(DS&&e===void 0){const r=t!==void 0&&t.length===1;r&&(e=LP.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&LP.set(t,e))}return e}toString(){return this.cssText}};const ii=n=>new U4(typeof n=="string"?n:n+"",void 0,US),Gh=(n,...e)=>{const t=n.length===1?n[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+n[i+1],n[0]);return new U4(t,n,US)},Oie=(n,e)=>{if(DS)n.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const r=document.createElement("style"),s=db.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=t.cssText,n.appendChild(r)}},$P=DS?n=>n:n=>n instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return ii(t)})(n):n;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:xie,defineProperty:Iie,getOwnPropertyDescriptor:Rie,getOwnPropertyNames:Pie,getOwnPropertySymbols:Die,getPrototypeOf:Uie}=Object,cl=globalThis,FP=cl.trustedTypes,kie=FP?FP.emptyScript:"",TC=cl.reactiveElementPolyfillSupport,mm=(n,e)=>n,i2={toAttribute(n,e){switch(e){case Boolean:n=n?kie:null;break;case Object:case Array:n=n==null?n:JSON.stringify(n)}return n},fromAttribute(n,e){let t=n;switch(e){case Boolean:t=n!==null;break;case Number:t=n===null?null:Number(n);break;case Object:case Array:try{t=JSON.parse(n)}catch{t=null}}return t}},k4=(n,e)=>!xie(n,e),HP={attribute:!0,type:String,converter:i2,reflect:!1,useDefault:!1,hasChanged:k4};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),cl.litPropertyMetadata??(cl.litPropertyMetadata=new WeakMap);let Ph=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=HP){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,t);s!==void 0&&Iie(this.prototype,e,s)}}static getPropertyDescriptor(e,t,r){const{get:s,set:i}=Rie(this.prototype,e)??{get(){return this[t]},set(o){this[t]=o}};return{get:s,set(o){const l=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,l,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??HP}static _$Ei(){if(this.hasOwnProperty(mm("elementProperties")))return;const e=Uie(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(mm("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(mm("properties"))){const t=this.properties,r=[...Pie(t),...Die(t)];for(const s of r)this.createProperty(s,t[s])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[r,s]of t)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[t,r]of this.elementProperties){const s=this._$Eu(t,r);s!==void 0&&this._$Eh.set(s,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)t.unshift($P(s))}else e!==void 0&&t.push($P(e));return t}static _$Eu(e,t){const r=t.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(t=>t(this))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((t=e.hostConnected)==null||t.call(e))}removeController(e){var t;(t=this._$EO)==null||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Oie(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(t=>{var r;return(r=t.hostConnected)==null?void 0:r.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(t=>{var r;return(r=t.hostDisconnected)==null?void 0:r.call(t)})}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$ET(e,t){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:i2).toAttribute(t,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,t){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const l=r.getPropertyOptions(s),f=typeof l.converter=="function"?{fromAttribute:l.converter}:((i=l.converter)==null?void 0:i.fromAttribute)!==void 0?l.converter:i2;this._$Em=s;const h=f.fromAttribute(t,l.type);this[s]=h??((o=this._$Ej)==null?void 0:o.get(s))??h,this._$Em=null}}requestUpdate(e,t,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??k4)(o,t)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,t,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??t??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(t=void 0),this._$AL.set(e,t)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:l}=o,f=this[i];l!==!0||this._$AL.has(i)||f===void 0||this.C(i,void 0,o,f)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(t)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(t)}willUpdate(e){}_$AE(e){var t;(t=this._$EO)==null||t.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(t=>this._$ET(t,this[t]))),this._$EM()}updated(e){}firstUpdated(e){}};Ph.elementStyles=[],Ph.shadowRootOptions={mode:"open"},Ph[mm("elementProperties")]=new Map,Ph[mm("finalized")]=new Map,TC==null||TC({ReactiveElement:Ph}),(cl.reactiveElementVersions??(cl.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ym=globalThis,Xb=ym.trustedTypes,jP=Xb?Xb.createPolicy("lit-html",{createHTML:n=>n}):void 0,B4="$lit$",Hc=`lit$${Math.random().toFixed(9).slice(2)}$`,M4="?"+Hc,Bie=`<${M4}>`,nf=document,oy=()=>nf.createComment(""),cy=n=>n===null||typeof n!="object"&&typeof n!="function",kS=Array.isArray,Mie=n=>kS(n)||typeof(n==null?void 0:n[Symbol.iterator])=="function",OC=`[ 	
\f\r]`,$g=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,zP=/-->/g,qP=/>/g,Kl=RegExp(`>|${OC}(?:([^\\s"'>=/]+)(${OC}*=${OC}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),VP=/'/g,GP=/"/g,L4=/^(?:script|style|textarea|title)$/i,$4=n=>(e,...t)=>({_$litType$:n,strings:e,values:t}),Ehe=$4(1),vhe=$4(2),Zd=Symbol.for("lit-noChange"),Zn=Symbol.for("lit-nothing"),KP=new WeakMap,gu=nf.createTreeWalker(nf,129);function F4(n,e){if(!kS(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return jP!==void 0?jP.createHTML(e):e}const Lie=(n,e)=>{const t=n.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=$g;for(let l=0;l<t;l++){const f=n[l];let h,p,g=-1,y=0;for(;y<f.length&&(o.lastIndex=y,p=o.exec(f),p!==null);)y=o.lastIndex,o===$g?p[1]==="!--"?o=zP:p[1]!==void 0?o=qP:p[2]!==void 0?(L4.test(p[2])&&(s=RegExp("</"+p[2],"g")),o=Kl):p[3]!==void 0&&(o=Kl):o===Kl?p[0]===">"?(o=s??$g,g=-1):p[1]===void 0?g=-2:(g=o.lastIndex-p[2].length,h=p[1],o=p[3]===void 0?Kl:p[3]==='"'?GP:VP):o===GP||o===VP?o=Kl:o===zP||o===qP?o=$g:(o=Kl,s=void 0);const b=o===Kl&&n[l+1].startsWith("/>")?" ":"";i+=o===$g?f+Bie:g>=0?(r.push(h),f.slice(0,g)+B4+f.slice(g)+Hc+b):f+Hc+(g===-2?l:b)}return[F4(n,i+(n[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class ly{constructor({strings:e,_$litType$:t},r){let s;this.parts=[];let i=0,o=0;const l=e.length-1,f=this.parts,[h,p]=Lie(e,t);if(this.el=ly.createElement(h,r),gu.currentNode=this.el.content,t===2||t===3){const g=this.el.content.firstChild;g.replaceWith(...g.childNodes)}for(;(s=gu.nextNode())!==null&&f.length<l;){if(s.nodeType===1){if(s.hasAttributes())for(const g of s.getAttributeNames())if(g.endsWith(B4)){const y=p[o++],b=s.getAttribute(g).split(Hc),v=/([.?@])?(.*)/.exec(y);f.push({type:1,index:i,name:v[2],strings:b,ctor:v[1]==="."?Fie:v[1]==="?"?Hie:v[1]==="@"?jie:jE}),s.removeAttribute(g)}else g.startsWith(Hc)&&(f.push({type:6,index:i}),s.removeAttribute(g));if(L4.test(s.tagName)){const g=s.textContent.split(Hc),y=g.length-1;if(y>0){s.textContent=Xb?Xb.emptyScript:"";for(let b=0;b<y;b++)s.append(g[b],oy()),gu.nextNode(),f.push({type:2,index:++i});s.append(g[y],oy())}}}else if(s.nodeType===8)if(s.data===M4)f.push({type:2,index:i});else{let g=-1;for(;(g=s.data.indexOf(Hc,g+1))!==-1;)f.push({type:7,index:i}),g+=Hc.length-1}i++}}static createElement(e,t){const r=nf.createElement("template");return r.innerHTML=e,r}}function Jd(n,e,t=n,r){var o,l;if(e===Zd)return e;let s=r!==void 0?(o=t._$Co)==null?void 0:o[r]:t._$Cl;const i=cy(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((l=s==null?void 0:s._$AO)==null||l.call(s,!1),i===void 0?s=void 0:(s=new i(n),s._$AT(n,t,r)),r!==void 0?(t._$Co??(t._$Co=[]))[r]=s:t._$Cl=s),s!==void 0&&(e=Jd(n,s._$AS(n,e.values),s,r)),e}class $ie{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??nf).importNode(t,!0);gu.currentNode=s;let i=gu.nextNode(),o=0,l=0,f=r[0];for(;f!==void 0;){if(o===f.index){let h;f.type===2?h=new Yy(i,i.nextSibling,this,e):f.type===1?h=new f.ctor(i,f.name,f.strings,this,e):f.type===6&&(h=new zie(i,this,e)),this._$AV.push(h),f=r[++l]}o!==(f==null?void 0:f.index)&&(i=gu.nextNode(),o++)}return gu.currentNode=nf,s}p(e){let t=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class Yy{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,t,r,s){this.type=2,this._$AH=Zn,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Jd(this,e,t),cy(e)?e===Zn||e==null||e===""?(this._$AH!==Zn&&this._$AR(),this._$AH=Zn):e!==this._$AH&&e!==Zd&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Mie(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Zn&&cy(this._$AH)?this._$AA.nextSibling.data=e:this.T(nf.createTextNode(e)),this._$AH=e}$(e){var i;const{values:t,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=ly.createElement(F4(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(t);else{const o=new $ie(s,this),l=o.u(this.options);o.p(t),this.T(l),this._$AH=o}}_$AC(e){let t=KP.get(e.strings);return t===void 0&&KP.set(e.strings,t=new ly(e)),t}k(e){kS(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let r,s=0;for(const i of e)s===t.length?t.push(r=new Yy(this.O(oy()),this.O(oy()),this,this.options)):r=t[s],r._$AI(i),s++;s<t.length&&(this._$AR(r&&r._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,t);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}}class jE{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,s,i){this.type=1,this._$AH=Zn,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Zn}_$AI(e,t=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=Jd(this,e,t,0),o=!cy(e)||e!==this._$AH&&e!==Zd,o&&(this._$AH=e);else{const l=e;let f,h;for(e=i[0],f=0;f<i.length-1;f++)h=Jd(this,l[r+f],t,f),h===Zd&&(h=this._$AH[f]),o||(o=!cy(h)||h!==this._$AH[f]),h===Zn?e=Zn:e!==Zn&&(e+=(h??"")+i[f+1]),this._$AH[f]=h}o&&!s&&this.j(e)}j(e){e===Zn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Fie extends jE{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Zn?void 0:e}}class Hie extends jE{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Zn)}}class jie extends jE{constructor(e,t,r,s,i){super(e,t,r,s,i),this.type=5}_$AI(e,t=this){if((e=Jd(this,e,t,0)??Zn)===Zd)return;const r=this._$AH,s=e===Zn&&r!==Zn||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==Zn&&(r===Zn||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;typeof this._$AH=="function"?this._$AH.call(((t=this.options)==null?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}}class zie{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Jd(this,e)}}const xC=ym.litHtmlPolyfillSupport;xC==null||xC(ly,Yy),(ym.litHtmlVersions??(ym.litHtmlVersions=[])).push("3.3.1");const qie=(n,e,t)=>{const r=(t==null?void 0:t.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(t==null?void 0:t.renderBefore)??null;r._$litPart$=s=new Yy(e.insertBefore(oy(),i),i,void 0,t??{})}return s._$AI(n),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const zu=globalThis;class pb extends Ph{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t;const e=super.createRenderRoot();return(t=this.renderOptions).renderBefore??(t.renderBefore=e.firstChild),e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=qie(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Zd}}var dU;pb._$litElement$=!0,pb.finalized=!0,(dU=zu.litElementHydrateSupport)==null||dU.call(zu,{LitElement:pb});const IC=zu.litElementPolyfillSupport;IC==null||IC({LitElement:pb});(zu.litElementVersions??(zu.litElementVersions=[])).push("4.2.1");let wm,ll,ul;function Ahe(n,e){wm=document.createElement("style"),ll=document.createElement("style"),ul=document.createElement("style"),wm.textContent=Kh(n).core.cssText,ll.textContent=Kh(n).dark.cssText,ul.textContent=Kh(n).light.cssText,document.head.appendChild(wm),document.head.appendChild(ll),document.head.appendChild(ul),H4(e)}function H4(n){ll&&ul&&(n==="light"?(ll.removeAttribute("media"),ul.media="enabled"):(ul.removeAttribute("media"),ll.media="enabled"))}function Vie(n){wm&&ll&&ul&&(wm.textContent=Kh(n).core.cssText,ll.textContent=Kh(n).dark.cssText,ul.textContent=Kh(n).light.cssText)}function Kh(n){return{core:Gh`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${ii(n!=null&&n["--w3m-color-mix-strength"]?`${n["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${ii((n==null?void 0:n["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${ii((n==null?void 0:n["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${ii((n==null?void 0:n["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${ii((n==null?void 0:n["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Gh`
      :root {
        --w3m-color-mix: ${ii((n==null?void 0:n["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${ii(Io(n,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${ii(Io(n,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Gh`
      :root {
        --w3m-color-mix: ${ii((n==null?void 0:n["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${ii(Io(n,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${ii(Io(n,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const Che=Gh`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,_he=Gh`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,She=Gh`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;function Gie(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let h=0;h<e.length;h++)e[h]=255;for(let h=0;h<n.length;h++){const p=n.charAt(h),g=p.charCodeAt(0);if(e[g]!==255)throw new TypeError(p+" is ambiguous");e[g]=h}const t=n.length,r=n.charAt(0),s=Math.log(t)/Math.log(256),i=Math.log(256)/Math.log(t);function o(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";let p=0,g=0,y=0;const b=h.length;for(;y!==b&&h[y]===0;)y++,p++;const v=(b-y)*i+1>>>0,E=new Uint8Array(v);for(;y!==b;){let O=h[y],T=0;for(let k=v-1;(O!==0||T<g)&&k!==-1;k--,T++)O+=256*E[k]>>>0,E[k]=O%t>>>0,O=O/t>>>0;if(O!==0)throw new Error("Non-zero carry");g=T,y++}let A=v-g;for(;A!==v&&E[A]===0;)A++;let S=r.repeat(p);for(;A<v;++A)S+=n.charAt(E[A]);return S}function l(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;let p=0,g=0,y=0;for(;h[p]===r;)g++,p++;const b=(h.length-p)*s+1>>>0,v=new Uint8Array(b);for(;p<h.length;){const O=h.charCodeAt(p);if(O>255)return;let T=e[O];if(T===255)return;let k=0;for(let R=b-1;(T!==0||k<y)&&R!==-1;R--,k++)T+=t*v[R]>>>0,v[R]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");y=k,p++}let E=b-y;for(;E!==b&&v[E]===0;)E++;const A=new Uint8Array(g+(b-E));let S=g;for(;E!==b;)A[S++]=v[E++];return A}function f(h){const p=l(h);if(p)return p;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:l,decode:f}}var Kie="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Wie=Gie(Kie);function Yie(n,{strict:e=!0}={}){return!n||typeof n!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(n):n.startsWith("0x")}function WP(n){return Yie(n,{strict:!1})?Math.ceil((n.length-2)/2):n.length}const j4="2.33.1";let Fg={getDocsUrl:({docsBaseUrl:n,docsPath:e="",docsSlug:t})=>e?`${n??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${j4}`};class Xd extends Error{constructor(e,t={}){var l;const r=(()=>{var f;return t.cause instanceof Xd?t.cause.details:(f=t.cause)!=null&&f.message?t.cause.message:t.details})(),s=t.cause instanceof Xd&&t.cause.docsPath||t.docsPath,i=(l=Fg.getDocsUrl)==null?void 0:l.call(Fg,{...t,docsPath:s}),o=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Fg.version?[`Version: ${Fg.version}`]:[]].join(`
`);super(o,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=j4}walk(e){return z4(this,e)}}function z4(n,e){return e!=null&&e(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause!==void 0?z4(n.cause,e):e?null:n}class q4 extends Xd{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function BS(n,{dir:e,size:t=32}={}){return typeof n=="string"?Qie(n,{dir:e,size:t}):Zie(n,{dir:e,size:t})}function Qie(n,{dir:e,size:t=32}={}){if(t===null)return n;const r=n.replace("0x","");if(r.length>t*2)throw new q4({size:Math.ceil(r.length/2),targetSize:t,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function Zie(n,{dir:e,size:t=32}={}){if(t===null)return n;if(n.length>t)throw new q4({size:n.length,targetSize:t,type:"bytes"});const r=new Uint8Array(t);for(let s=0;s<t;s++){const i=e==="right";r[i?s:t-s-1]=n[i?s:n.length-s-1]}return r}class Jie extends Xd{constructor({max:e,min:t,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class Xie extends Xd{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function V4(n,{size:e}){if(WP(n)>e)throw new Xie({givenSize:WP(n),maxSize:e})}const eae=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function YP(n,e={}){return typeof n=="number"||typeof n=="bigint"?nae(n,e):typeof n=="string"?sae(n,e):typeof n=="boolean"?tae(n,e):G4(n,e)}function tae(n,e={}){const t=`0x${Number(n)}`;return typeof e.size=="number"?(V4(t,{size:e.size}),BS(t,{size:e.size})):t}function G4(n,e={}){let t="";for(let s=0;s<n.length;s++)t+=eae[n[s]];const r=`0x${t}`;return typeof e.size=="number"?(V4(r,{size:e.size}),BS(r,{dir:"right",size:e.size})):r}function nae(n,e={}){const{signed:t,size:r}=e,s=BigInt(n);let i;r?t?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof n=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&t?-i-1n:0;if(i&&s>i||s<o){const f=typeof n=="bigint"?"n":"";throw new Jie({max:i?`${i}${f}`:void 0,min:`${o}${f}`,signed:t,size:r,value:`${n}${f}`})}const l=`0x${(t&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?BS(l,{size:r}):l}const rae=new TextEncoder;function sae(n,e={}){const t=rae.encode(n);return G4(t,e)}function MS(n){return{formatters:void 0,fees:void 0,serializers:void 0,...n}}const Wh={hexStringToNumber(n){const e=n.startsWith("0x")?n.slice(2):n;return parseInt(e,16)},numberToHexString(n){return`0x${n.toString(16)}`},async getUserInfo(n){const[e,t]=await Promise.all([Wh.getAddresses(n),Wh.getChainId(n)]);return{chainId:t,addresses:e}},async getChainId(n){const e=await n.request({method:"eth_chainId"});return Number(e)},async getAddress(n){const[e]=await n.request({method:"eth_accounts"});return e},async getAddresses(n){return await n.request({method:"eth_accounts"})},async addEthereumChain(n,e){var r,s;const t=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await n.request({method:"wallet_addEthereumChain",params:[{chainId:Wh.numberToHexString(e.id),rpcUrls:[...t],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Ta.NetworkImageIds[e.id]]}]})}},_h={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}},iae=MS({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:250,rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),aae=MS({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),oae=MS({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0});function Qy(n){return{formatters:void 0,fees:void 0,serializers:void 0,...n}}const QP=Qy({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),ZP=Qy({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Qy({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Qy({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Qy({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const cae={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},ka={getMethodsByChainNamespace(n){return cae[n]||[]},createDefaultNamespace(n){return{methods:this.getMethodsByChainNamespace(n),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(n,e){if(!e)return{...n};const t={...n},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{t[s]||(t[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{t[s]&&(t[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{t[s]&&(t[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{t[s]&&(t[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[l,f]=i.split(":");!l||!f||!t[l]||(t[l].rpcMap||(t[l].rpcMap={}),s.has(l)||(t[l].rpcMap={},s.add(l)),t[l].rpcMap[f]=o)})}return t},createNamespaces(n,e){const t=n.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:l}=s,f=l.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const h=`${o}:${i}`,p=r[o];switch(p.chains.push(h),h){case QP.caipNetworkId:p.chains.push(QP.deprecatedCaipNetworkId);break;case ZP.caipNetworkId:p.chains.push(ZP.deprecatedCaipNetworkId);break}return p!=null&&p.rpcMap&&f&&(p.rpcMap[i]=f),r},{});return this.applyNamespaceOverrides(t,e)},resolveReownName:async n=>{var r;const e=await sm.resolveName(n);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(n={}){return Object.values(n).flatMap(e=>{const t=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...t,...r]))})},isSessionEventData(n){return typeof n=="object"&&n!==null&&"id"in n&&"topic"in n&&"params"in n&&typeof n.params=="object"&&n.params!==null&&"chainId"in n.params&&"event"in n.params&&typeof n.params.event=="object"&&n.params.event!==null},isOriginAllowed(n,e,t){for(const r of[...e,...t])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(n))return!0}else try{if(new URL(r).origin===n)return!0}catch{if(r===n)return!0}return!1},listenWcProvider({universalProvider:n,namespace:e,onConnect:t,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){t&&n.on("connect",()=>{const l=ka.getWalletConnectAccounts(n,e);t(l)}),r&&n.on("disconnect",()=>{r()}),s&&n.on("session_event",l=>{if(ka.isSessionEventData(l)){const{name:f,data:h}=l.params.event;if(f==="accountsChanged"&&Array.isArray(h)){const p=h.filter(g=>Re.isCaipAddress(g)).map(g=>Fr.parseCaipAddress(g)).filter(g=>g.chainNamespace===e);s(p)}}}),i&&n.on("chainChanged",l=>{i(l)}),o&&n.on("display_uri",l=>{o(l)})},getWalletConnectAccounts(n,e){var s,i,o,l;const t=new Set,r=(l=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:l.map(f=>Fr.parseCaipAddress(f)).filter(({address:f})=>t.has(f.toLowerCase())?!1:(t.add(f.toLowerCase()),!0));return r&&r.length>0?r:[]}};class lae{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case oe.CHAIN.EVM:await this.syncEVMConnections(e);break;case oe.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case oe.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:t,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(l=>{const{hasDisconnected:f,hasConnected:h}=s(l.id);return!f&&h}).map(async l=>{if(l.id===oe.CONNECTOR_ID.WALLET_CONNECT){const f=ka.getWalletConnectAccounts(r,this.namespace),h=t.find(p=>{var g,y;return p.chainNamespace===this.namespace&&p.id.toString()===((y=(g=f[0])==null?void 0:g.chainId)==null?void 0:y.toString())});f.length>0&&i({connectorId:l.id,accounts:f.map(p=>({address:p.address})),caipNetwork:h})}else{const{accounts:f,chainId:h}=await hb.fetchProviderData(l);if(f.length>0&&h){const p=t.find(g=>g.chainNamespace===this.namespace&&g.id.toString()===h.toString());i({connectorId:l.id,accounts:f.map(g=>({address:g})),caipNetwork:p}),l.provider&&l.id!==oe.CONNECTOR_ID.AUTH&&l.id!==oe.CONNECTOR_ID.WALLET_CONNECT&&o(l.id,l.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:t,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(l=>{const{hasDisconnected:f,hasConnected:h}=s(l.id);return!f&&h}).map(async l=>{if(l.id===oe.CONNECTOR_ID.WALLET_CONNECT){const f=ka.getWalletConnectAccounts(r,this.namespace);f.length>0&&i({connectorId:l.id,accounts:f.map(h=>({address:h.address})),caipNetwork:t})}else{const f=await l.connect({chainId:t==null?void 0:t.id});f&&(i({connectorId:l.id,accounts:[{address:f}],caipNetwork:t}),o(l.id,l.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:t,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(l=>{const{hasDisconnected:f,hasConnected:h}=s(l.id);return!f&&h}).map(async l=>{var y,b,v,E,A,S;if(l.id===oe.CONNECTOR_ID.WALLET_CONNECT){const O=ka.getWalletConnectAccounts(r,this.namespace);O.length>0&&i({connectorId:l.id,accounts:O.map(T=>({address:T.address})),caipNetwork:t});return}const f=await l.connect(),h=await l.getAccountAddresses();let p=h==null?void 0:h.map(O=>Re.createAccount(oe.CHAIN.BITCOIN,O.address,O.purpose||"payment",O.publicKey,O.path));if(p&&p.length>1&&(p=[{namespace:oe.CHAIN.BITCOIN,publicKey:((y=p[_h.ACCOUNT_INDEXES.PAYMENT])==null?void 0:y.publicKey)??"",path:((b=p[_h.ACCOUNT_INDEXES.PAYMENT])==null?void 0:b.path)??"",address:((v=p[_h.ACCOUNT_INDEXES.PAYMENT])==null?void 0:v.address)??"",type:"payment"},{namespace:oe.CHAIN.BITCOIN,publicKey:((E=p[_h.ACCOUNT_INDEXES.ORDINAL])==null?void 0:E.publicKey)??"",path:((A=p[_h.ACCOUNT_INDEXES.ORDINAL])==null?void 0:A.path)??"",address:((S=p[_h.ACCOUNT_INDEXES.ORDINAL])==null?void 0:S.address)??"",type:"ordinal"}]),!(l.chains.find(O=>O.id===(t==null?void 0:t.id))||l.chains[0]))throw new Error("The connector does not support any of the requested chains");f&&(o(l.id,l.provider),i({connectorId:l.id,accounts:p.map(O=>({address:O.address,type:O.type})),caipNetwork:t}))}))}getConnection({address:e,connectorId:t,connections:r,connectors:s}){if(t){const o=r.find(h=>Jn.isLowerCaseMatch(h.connectorId,t));if(!o)return null;const l=s.find(h=>Jn.isLowerCaseMatch(h.id,o.connectorId)),f=e?o.accounts.find(h=>Jn.isLowerCaseMatch(h.address,e)):o.accounts[0];return{...o,account:f,connector:l}}const i=r.find(o=>o.accounts.length>0&&s.some(l=>Jn.isLowerCaseMatch(l.id,o.connectorId)));if(i){const[o]=i.accounts,l=s.find(f=>Jn.isLowerCaseMatch(f.id,i.connectorId));return{...i,account:o,connector:l}}return null}}const Ro={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class LS{constructor({provider:e,namespace:t}){this.id=oe.CONNECTOR_ID.WALLET_CONNECT,this.name=Ta.ConnectorNamesMap[oe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Ta.ConnectorImageIds[oe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=L.getCaipNetworks.bind(L),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=t}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const t=this.getCaipNetworks(),r=pe.state.universalProviderConfigOverride,s=ka.createNamespaces(t,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(t=>t.caipNetworkId);return Ls.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:uae})}}const uae=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],fae=[oe.CONNECTOR_ID.AUTH,oe.CONNECTOR_ID.WALLET_CONNECT];class K4{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=t=>L.getCaipNetworks(t),this.getConnectorId=t=>ve.getConnectorId(t),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new lae({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:t}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(t==null?void 0:t.toString()));e&&r&&this.addConnection({connectorId:oe.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:oe.CONNECTOR_ID.AUTH,type:"AUTH",name:oe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Ta.ConnectorImageIds[oe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>t.has(r.id)?!1:(t.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const t=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>t.has(r.connectorId.toLowerCase())?!1:(t.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(t=>!Jn.isLowerCaseMatch(t.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,t){Ue.setStatus(e,t)}on(e,t){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(t)}off(e,t){const r=this.eventListeners.get(e);r&&r.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(t))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:t,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(t.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=Hs(t.chainNamespace);await i.switchNetwork({chainId:t.caipNetworkId});const l=await i.getUser({chainId:t.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",l)}}getWalletConnectConnector(){const e=this.connectors.find(t=>t instanceof LS);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,t){if(e.length>0){const{address:r,chainId:s}=Re.getAccount(e[0]),i=this.getCaipNetworks().filter(l=>l.chainNamespace===this.namespace).find(l=>l.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(l=>l.id===t);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:t,accounts:e.map(l=>{const{address:f}=Re.getAccount(l);return{address:f}}),caipNetwork:i}))}}onAccountsChanged(e,t,r=!0){var s,i;if(e.length>0){const{address:o}=Re.getAccount(e[0]),l=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:t,connections:this.connections,connectors:this.connectors});o&&Jn.isLowerCaseMatch(this.getConnectorId(oe.CHAIN.EVM),t)&&this.emit("accountChanged",{address:o,chainId:(i=l==null?void 0:l.caipNetwork)==null?void 0:i.id,connector:l==null?void 0:l.connector}),this.addConnection({connectorId:t,accounts:e.map(f=>{const{address:h}=Re.getAccount(f);return{address:h}}),caipNetwork:l==null?void 0:l.caipNetwork})}else r&&this.onDisconnect(t)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Jn.isLowerCaseMatch(this.getConnectorId(oe.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,t){var o;const r=typeof e=="string"&&e.startsWith("0x")?Wh.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:t,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(l=>l.chainNamespace===this.namespace).find(l=>l.id.toString()===r);s&&this.addConnection({connectorId:t,accounts:s.accounts,caipNetwork:i}),Jn.isLowerCaseMatch(this.getConnectorId(oe.CHAIN.EVM),t)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,t){if(fae.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(t.on("disconnect",i),t.on("accountsChanged",r),t.on("chainChanged",s),this.providerHandlers[e]={provider:t,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:t,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];t.removeListener("disconnect",r),t.removeListener("accountsChanged",s),t.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var t,r;const e=(t=this.connectionManager)==null?void 0:t.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}class hae extends K4{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new LS({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){var s,i,o,l;const t=this.provider,r=((l=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:l.map(f=>{const[,,h]=f.split(":");return h}).filter((f,h,p)=>p.indexOf(f)===h))||[];return Promise.resolve({accounts:r.map(f=>Re.createAccount(e,f,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,l,f,h;if(!(e.caipNetwork&&kt.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""};if(Ue.state.balanceLoading&&e.chainId===((f=L.state.activeCaipNetwork)==null?void 0:f.id))return{balance:Ue.state.balance||"0.00",symbol:Ue.state.balanceSymbol||""};const s=(await Ue.fetchTokenBalance()).find(p=>{var g,y;return p.chainId===`${(g=e.caipNetwork)==null?void 0:g.chainNamespace}:${e.chainId}`&&p.symbol===((y=e.caipNetwork)==null?void 0:y.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)||""}}async signMessage(e){var o,l,f;const{provider:t,message:r,address:s}=e;if(!t)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===oe.CHAIN.SOLANA?i=(await t.request({method:"solana_signMessage",params:{message:Wie.encode(new TextEncoder().encode(r)),pubkey:s}},(l=L.state.activeCaipNetwork)==null?void 0:l.caipNetworkId)).signature:i=await t.request({method:"personal_sign",params:[r,s]},(f=L.state.activeCaipNetwork)==null?void 0:f.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,l,f,h;const{caipNetwork:t}=e,r=this.getWalletConnectConnector();if(t.chainNamespace===oe.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:YP(t.id)}]}))}catch(p){if(p.code===Ro.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||p.code===Ro.ERROR_INVALID_CHAIN_ID||p.code===Ro.ERROR_CODE_DEFAULT||((o=(i=p==null?void 0:p.data)==null?void 0:i.originalError)==null?void 0:o.code)===Ro.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((h=r.provider)==null?void 0:h.request({method:"wallet_addEthereumChain",params:[{chainId:YP(t.id),rpcUrls:[(l=t==null?void 0:t.rpcUrls.chainDefault)==null?void 0:l.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[(f=t.blockExplorers)==null?void 0:f.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const dae=["email","socials","swaps","onramp","activity","reownBranding","multiWallet"],Gw={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>{if(!(n!=null&&n.config))return!1;const e=n.config;return!!n.isEnabled&&e.includes("email")},processFallback:n=>n===void 0?kt.DEFAULT_REMOTE_FEATURES.email:!!n},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>{if(!(n!=null&&n.config))return!1;const e=n.config;return n.isEnabled&&e.length>0?e.filter(t=>t!=="email"):!1},processFallback:n=>n===void 0?kt.DEFAULT_REMOTE_FEATURES.socials:typeof n=="boolean"?n?kt.DEFAULT_REMOTE_FEATURES.socials:!1:n},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>{if(!(n!=null&&n.config))return!1;const e=n.config;return n.isEnabled&&e.length>0?e:!1},processFallback:n=>n===void 0?kt.DEFAULT_REMOTE_FEATURES.swaps:typeof n=="boolean"?n?kt.DEFAULT_REMOTE_FEATURES.swaps:!1:n},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>{if(!(n!=null&&n.config))return!1;const e=n.config;return n.isEnabled&&e.length>0?e:!1},processFallback:n=>n===void 0?kt.DEFAULT_REMOTE_FEATURES.onramp:typeof n=="boolean"?n?kt.DEFAULT_REMOTE_FEATURES.onramp:!1:n},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:n=>!!n.isEnabled,processFallback:n=>n===void 0?kt.DEFAULT_REMOTE_FEATURES.activity:!!n},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>!!n.isEnabled,processFallback:n=>n===void 0?kt.DEFAULT_REMOTE_FEATURES.reownBranding:!!n},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>!!n.isEnabled,processFallback:()=>kt.DEFAULT_REMOTE_FEATURES.multiWallet}},pae={localSettingsOverridden:new Set,getApiConfig(n,e){return e==null?void 0:e.find(t=>t.id===n)},addWarning(n,e){if(n!==void 0){const t=Gw[e],r=t.isLegacy?`"features.${t.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(n,e,t,r,s){const i=Gw[n],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const l=this.getApiConfig(i.apiFeatureName,t);return(l==null?void 0:l.config)===null?this.processFallbackFeature(n,o):l!=null&&l.config?(o!==void 0&&this.addWarning(o,n),this.processApiFeature(n,l)):!1}return this.processFallbackFeature(n,o)},processApiFeature(n,e){return Gw[n].processApi(e)},processFallbackFeature(n,e){return Gw[n].processFallback(e)},async fetchRemoteFeatures(n){const e=n.basic??!1,t=n.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await je.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?kt.DEFAULT_REMOTE_FEATURES:kt.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of dae){const l=this.processFeature(o,t,r,s,e);Object.assign(i,{[o]:l})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),kt.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Un.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class gae{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(t,r)=>{var s,i,o;if(t){const l=(s=L.getCaipNetworks(t))==null?void 0:s.find(p=>p.id===r);if(l)return l;const f=(i=L.getNetworkData(t))==null?void 0:i.caipNetwork;return f||((o=L.getRequestedCaipNetworks(t).filter(p=>p.chainNamespace===t))==null?void 0:o[0])}return L.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const t=this.getCaipNetwork();if(t)return t.id},this.getCaipNetworks=t=>L.getCaipNetworks(t),this.getActiveChainNamespace=()=>L.state.activeChain,this.setRequestedCaipNetworks=(t,r)=>{L.setRequestedCaipNetworks(t,r)},this.getApprovedCaipNetworkIds=()=>L.getAllApprovedCaipNetworkIds(),this.getCaipAddress=t=>L.state.activeChain===t||!t?L.state.activeCaipAddress:L.getAccountProp("caipAddress",t),this.setClientId=t=>{Ge.setClientId(t)},this.getProvider=t=>At.getProvider(t),this.getProviderType=t=>At.getProviderId(t),this.getPreferredAccountType=t=>Hs(t),this.setCaipAddress=(t,r)=>{Ue.setCaipAddress(t,r)},this.setBalance=(t,r,s)=>{Ue.setBalance(t,r,s)},this.setProfileName=(t,r)=>{Ue.setProfileName(t,r)},this.setProfileImage=(t,r)=>{Ue.setProfileImage(t,r)},this.setUser=(t,r)=>{Ue.setUser(t,r)},this.resetAccount=t=>{Ue.resetAccount(t)},this.setCaipNetwork=t=>{L.setActiveCaipNetwork(t)},this.setCaipNetworkOfNamespace=(t,r)=>{L.setChainNetworkData(r,{caipNetwork:t})},this.setStatus=(t,r)=>{Ue.setStatus(t,r),ve.isConnected()?be.setConnectionStatus("connected"):be.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=t=>L.getAccountProp("address",t),this.setConnectors=t=>{const r=[...ve.state.allConnectors,...t];ve.setConnectors(r)},this.setConnections=(t,r)=>{be.setConnections(t,r),_e.setConnections(t,r)},this.fetchIdentity=t=>Ge.fetchIdentity(t),this.getReownName=t=>sm.getNamesForAddress(t),this.getConnectors=()=>ve.getConnectors(),this.getConnectorImage=t=>TU.getConnectorImage(t),this.getConnections=t=>this.remoteFeatures.multiWallet?Tb.getConnectionsData(t).connections:(Un.open(oe.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=t=>this.remoteFeatures.multiWallet?Tb.getConnectionsData(t).recentConnections:(Un.open(oe.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async t=>{if(!this.remoteFeatures.multiWallet){Un.open(oe.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await _e.switchConnection(t)},this.deleteConnection=t=>{if(!this.remoteFeatures.multiWallet){Un.open(oe.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}be.deleteAddressFromConnection(t),_e.syncStorageConnections()},this.setConnectedWalletInfo=(t,r)=>{const s=At.getProviderId(r),i=t?{...t,type:s}:void 0;Ue.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!L.state.activeCaipAddress,this.addAddressLabel=(t,r,s)=>{Ue.addAddressLabel(t,r,s)},this.removeAddressLabel=(t,r)=>{Ue.removeAddressLabel(t,r)},this.getAddress=t=>L.state.activeChain===t||!t?Ue.state.address:L.getAccountProp("address",t),this.setApprovedCaipNetworksData=t=>L.setApprovedCaipNetworksData(t),this.resetNetwork=t=>{L.resetNetwork(t)},this.addConnector=t=>{ve.addConnector(t)},this.resetWcConnection=()=>{_e.resetWcConnection()},this.setAddressExplorerUrl=(t,r)=>{Ue.setAddressExplorerUrl(t,r)},this.setSmartAccountDeployed=(t,r)=>{Ue.setSmartAccountDeployed(t,r)},this.setPreferredAccountType=(t,r)=>{L.setAccountProp("preferredAccountType",t,r)},this.setEIP6963Enabled=t=>{pe.setEIP6963Enabled(t)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,t){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=t==null?void 0:t.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var t,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),pe.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await pae.fetchRemoteFeatures(e),pe.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&t_.setOnrampProviders(this.remoteFeatures.onramp),((t=pe.state.remoteFeatures)!=null&&t.email||Array.isArray((r=pe.state.remoteFeatures)==null?void 0:r.socials)&&((s=pe.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await je.fetchAllowedOrigins();if(!e||!Re.isClient()){Un.open(Lr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const t=window.location.origin;ka.isOriginAllowed(t,e,Ro.DEFAULT_ALLOWED_ANCESTORS)||Un.open(Lr.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error)){Un.open(Lr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":Un.open(Lr.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const t=e.cause instanceof Error?e.cause:e;Un.open({shortMessage:Lr.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:Lr.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(t.message)},"error");break}default:Un.open(Lr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...t}=e;delete t.adapters,delete t.universalProvider,jt.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&us.setThemeMode(e.themeMode),e.themeVariables&&us.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");L.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const t=this.getDefaultNetwork();t&&L.setActiveCaipNetwork(t)}initializeConnectionController(e){_e.initialize(e.adapters??[]),_e.setWcBasic(e.basic??!1)}initializeConnectorController(){ve.initialize(this.chainNamespaces)}initializeProjectSettings(e){pe.setProjectId(e.projectId),pe.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var s;pe.setDebug(e.debug!==!1),pe.setEnableWalletConnect(e.enableWalletConnect!==!1),pe.setEnableWalletGuide(e.enableWalletGuide!==!1),pe.setEnableWallets(e.enableWallets!==!1),pe.setEIP6963Enabled(e.enableEIP6963!==!1),pe.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),pe.setEnableReconnect(e.enableReconnect!==!1),pe.setEnableAuthLogger(e.enableAuthLogger!==!1),pe.setCustomRpcUrls(e.customRpcUrls),pe.setEnableEmbedded(e.enableEmbedded),pe.setAllWallets(e.allWallets),pe.setIncludeWalletIds(e.includeWalletIds),pe.setExcludeWalletIds(e.excludeWalletIds),pe.setFeaturedWalletIds(e.featuredWalletIds),pe.setTokens(e.tokens),pe.setTermsConditionsUrl(e.termsConditionsUrl),pe.setPrivacyPolicyUrl(e.privacyPolicyUrl),pe.setCustomWallets(e.customWallets),pe.setFeatures(e.features),pe.setAllowUnsupportedChain(e.allowUnsupportedChain),pe.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),pe.setPreferUniversalLinks(e.experimental_preferUniversalLinks),pe.setDefaultAccountTypes(e.defaultAccountTypes);const t=this.getDefaultMetaData();if(!e.metadata&&t&&(e.metadata=t),pe.setMetadata(e.metadata),pe.setDisableAppend(e.disableAppend),pe.setEnableEmbedded(e.enableEmbedded),pe.setSIWX(e.siwx),!e.projectId){Un.open(Lr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((s=e.adapters)==null?void 0:s.find(i=>i.namespace===oe.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");pe.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,t,r,s;return Re.isClient()?{name:((t=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:t.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const t=this.getActiveChainNamespace();if(t){const r=xh.getUnsupportedNetwork(`${t}:${e}`);L.setActiveCaipNetwork(r)}}getDefaultNetwork(){return xh.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return xh.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return xh.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const t=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return t?xh.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,t){try{this.setLoading(!0,e);let r={connections:[]};const s=this.getAdapter(e),{caipAddress:i}=L.getAccountData(e)||{};return(i||!pe.state.enableReconnect)&&(s!=null&&s.disconnect)&&(r=await s.disconnect({id:t})),this.setLoading(!1,e),r}catch(r){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${r.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var h;const e=L.state.activeChain,t=this.getAdapter(e),r=(h=this.getCaipNetwork(e))==null?void 0:h.id,s=_e.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!t)throw new Error("Adapter not found");const l=await t.connectWalletConnect(r);(!o||!i)&&this.close(),this.setClientId((l==null?void 0:l.clientId)||null),be.setConnectedNamespaces([...L.state.chains.keys()]),await this.syncWalletConnectAccount(),await Ls.initializeIfEnabled()},connectExternal:async({id:e,address:t,info:r,type:s,provider:i,chain:o,caipNetwork:l,socialUri:f})=>{var v,E,A,S,O,T;const h=L.state.activeChain,p=o||h,g=this.getAdapter(p);if(o&&o!==h&&!l){const k=this.getCaipNetworks().find(R=>R.chainNamespace===o);k&&this.setCaipNetwork(k)}if(!p)throw new Error("connectExternal: namespace not found");if(!g)throw new Error("connectExternal: adapter not found");const y=this.getCaipNetwork(p),b=await g.connect({id:e,address:t,info:r,type:s,provider:i,socialUri:f,chainId:(l==null?void 0:l.id)||(y==null?void 0:y.id),rpcUrl:((A=(E=(v=l==null?void 0:l.rpcUrls)==null?void 0:v.default)==null?void 0:E.http)==null?void 0:A[0])||((T=(O=(S=y==null?void 0:y.rpcUrls)==null?void 0:S.default)==null?void 0:O.http)==null?void 0:T[0])});if(b)return be.addConnectedNamespace(p),this.syncProvider({...b,chainNamespace:p}),this.setStatus("connected",p),this.syncConnectedWalletInfo(p),be.removeDisconnectedConnectorId(e,p),{address:b.address}},reconnectExternal:async({id:e,info:t,type:r,provider:s})=>{var l;const i=L.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:t,type:r,provider:s,chainId:(l=this.getCaipNetwork())==null?void 0:l.id})),be.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{var h;const{id:t,chainNamespace:r,initialDisconnect:s}=e||{},i=r||L.state.activeChain,o=ve.getConnectorId(i),l=t===oe.CONNECTOR_ID.AUTH||o===oe.CONNECTOR_ID.AUTH,f=t===oe.CONNECTOR_ID.WALLET_CONNECT||o===oe.CONNECTOR_ID.WALLET_CONNECT;try{const p=Array.from(L.state.chains.keys());let g=r?[r]:p;(f||l)&&(g=p);const y=g.map(async E=>{const A=ve.getConnectorId(E),S=await this.disconnectNamespace(E,t||A);S&&(l&&be.deleteConnectedSocialProvider(),S.connections.forEach(O=>{be.addDisconnectedConnectorId(O.connectorId,E)})),s&&this.onDisconnectNamespace({chainNamespace:E,closeModal:!1})}),b=await Promise.allSettled(y);Ut.resetSend(),_e.resetWcConnection(),(h=Ls.getSIWX())!=null&&h.signOutOnDisconnect&&await Ls.clearSessions(),ve.setFilterByNamespace(void 0),_e.syncStorageConnections();const v=b.filter(E=>E.status==="rejected");if(v.length>0)throw new Error(v.map(E=>E.reason.message).join(", "));jt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(p){throw new Error(`Failed to disconnect chains: ${p.message}`)}},checkInstalled:e=>e?e.some(t=>{var r;return!!((r=window.ethereum)!=null&&r[String(t)])}):!!window.ethereum,signMessage:async e=>{const t=L.state.activeChain,r=this.getAdapter(L.state.activeChain);if(!t)throw new Error("signMessage: namespace not found");if(!r)throw new Error("signMessage: adapter not found");const s=await(r==null?void 0:r.signMessage({message:e,address:Ue.state.address,provider:At.getProvider(t)}));return(s==null?void 0:s.signature)||""},sendTransaction:async e=>{const t=e.chainNamespace;if(!t)throw new Error("sendTransaction: namespace not found");if(kt.SEND_SUPPORTED_NAMESPACES.includes(t)){const r=this.getAdapter(t);if(!r)throw new Error("sendTransaction: adapter not found");const s=At.getProvider(t),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{const t=e.chainNamespace;if(t===oe.CHAIN.EVM){const r=this.getAdapter(t);if(!r)throw new Error("estimateGas: adapter is required but got undefined");const s=At.getProvider(t),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");const o=await(r==null?void 0:r.estimateGas({...e,provider:s,caipNetwork:i}));return(o==null?void 0:o.gas)||0n}return 0n},getEnsAvatar:async()=>{var t;const e=L.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");return await this.syncIdentity({address:Ue.state.address,chainId:Number((t=this.getCaipNetwork())==null?void 0:t.id),chainNamespace:e}),Ue.state.profileImage||!1},getEnsAddress:async e=>await ka.resolveReownName(e),writeContract:async e=>{const t=L.state.activeChain,r=this.getAdapter(t);if(!t)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=At.getProvider(t);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");const l=await(r==null?void 0:r.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}));return l==null?void 0:l.hash},parseUnits:(e,t)=>{const r=this.getAdapter(L.state.activeChain);if(!r)throw new Error("parseUnits: adapter is required but got undefined");return(r==null?void 0:r.parseUnits({value:e,decimals:t}))??0n},formatUnits:(e,t)=>{const r=this.getAdapter(L.state.activeChain);if(!r)throw new Error("formatUnits: adapter is required but got undefined");return(r==null?void 0:r.formatUnits({value:e,decimals:t}))??"0"},getCapabilities:async e=>{const t=this.getAdapter(L.state.activeChain);if(!t)throw new Error("getCapabilities: adapter is required but got undefined");return await(t==null?void 0:t.getCapabilities(e))},grantPermissions:async e=>{const t=this.getAdapter(L.state.activeChain);if(!t)throw new Error("grantPermissions: adapter is required but got undefined");return await(t==null?void 0:t.grantPermissions(e))},revokePermissions:async e=>{const t=this.getAdapter(L.state.activeChain);if(!t)throw new Error("revokePermissions: adapter is required but got undefined");return t!=null&&t.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>{const t=this.getAdapter(L.state.activeChain);if(!t)throw new Error("walletGetAssets: adapter is required but got undefined");return await(t==null?void 0:t.walletGetAssets(e))??{}},updateBalance:e=>{const t=this.getCaipNetwork(e);!t||!Ue.state.address||this.updateNativeBalance(Ue.state.address,t==null?void 0:t.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},_e.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var t,r,s,i,o;if(At.getProviderId(L.state.activeChain)===xt.CONNECTOR_TYPE_WALLET_CONNECT){const l=(r=(t=this.universalProvider)==null?void 0:t.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(l)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=At.getProvider(t),i=At.getProviderId(t);if(e.chainNamespace===L.state.activeChain){const o=this.getAdapter(t);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===xt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(t);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(t=>{const r=t.chains||[],s=t.accounts.map(i=>{const{chainId:o,chainNamespace:l}=Fr.parseCaipAddress(i);return`${l}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),t[r]=s):t[r]=new hae({namespace:r,networks:this.getCaipNetworks()}),t},{})}async initChainAdapter(e){var t;this.onConnectors(e),this.listenAdapter(e),await((t=this.chainAdapters)==null?void 0:t[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const t=this.getAdapter(e);t==null||t.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const t=this.getAdapter(e);if(!t)return;const r=be.getConnectionStatus();pe.state.enableReconnect===!1?this.setStatus("disconnected",e):r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(be.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),t.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(h=>h.id.toString()===i.toString()||h.caipNetworkId.toString()===i.toString()),l=L.state.activeChain===e,f=L.getAccountProp("address",e);if(o){const h=l&&s?s:f;h&&this.syncAccount({address:h,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),t.on("disconnect",()=>{this.onDisconnectNamespace({chainNamespace:e})}),t.on("connections",s=>{this.setConnections(s,e)}),t.on("pendingTransactions",()=>{const s=Ue.state.address,i=L.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),t.on("accountChanged",({address:s,chainId:i,connector:o})=>{var f,h;const l=L.state.activeChain===e;o!=null&&o.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e)),l&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):l&&((f=L.state.activeCaipNetwork)!=null&&f.id)?this.syncAccount({address:s,chainId:(h=L.state.activeCaipNetwork)==null?void 0:h.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),be.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){var t,r,s;await this.getUniversalProvider(),this.universalProvider&&await((s=(r=(t=this.chainAdapters)==null?void 0:t[e])==null?void 0:r.setUniversalProvider)==null?void 0:s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>_e.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async syncNamespaceConnection(e){try{e===oe.CHAIN.EVM&&Re.isSafeApp()&&ve.setConnectorId(oe.CONNECTOR_ID.SAFE,e);const t=ve.getConnectorId(e);switch(this.setStatus("connecting",e),t){case oe.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case oe.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:t,closeModal:r}=e||{};L.resetAccount(t),L.resetNetwork(t),be.removeConnectedNamespace(t);const s=Array.from(L.state.chains.keys());(t?[t]:s).forEach(o=>be.addDisconnectedConnectorId(ve.getConnectorId(o)||"",o)),ve.removeConnectorId(t),At.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t),this.setConnectedWalletInfo(void 0,t),r!==!1&&It.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{var s;const t=this.getCaipAddress(e),r=this.getCaipNetwork(e);return(s=this.chainAdapters)==null?void 0:s[e].syncConnections({connectToFirstConnector:!t,caipNetwork:r,getConnectorStorageInfo(i){const l=be.getConnections()[e]??[];return{hasDisconnected:be.isConnectorDisconnected(i,e),hasConnected:l.some(f=>Jn.isLowerCaseMatch(f.connectorId,i))}}})}))}async syncAdapterConnection(e){var l,f,h;const t=this.getAdapter(e),r=ve.getConnectorId(e),s=this.getCaipNetwork(e),o=ve.getConnectors(e).find(p=>p.id===r);try{if(!t||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const p=await(t==null?void 0:t.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(h=(f=(l=s==null?void 0:s.rpcUrls)==null?void 0:l.default)==null?void 0:f.http)==null?void 0:h[0]}));p?(this.syncProvider({...p,chainNamespace:e}),await this.syncAccount({...p,chainNamespace:e}),this.setStatus("connected",e)):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),t=this.chainNamespaces.map(async i=>{var p,g,y,b,v;const o=this.getAdapter(i);if(!o)return;const l=((b=(y=(g=(p=this.universalProvider)==null?void 0:p.session)==null?void 0:g.namespaces)==null?void 0:y[i])==null?void 0:b.accounts)||[],f=(v=L.state.activeCaipNetwork)==null?void 0:v.id,h=l.find(E=>{const{chainId:A}=Fr.parseCaipAddress(E);return A===(f==null?void 0:f.toString())})||l[0];if(h){const E=Fr.validateCaipAddress(h),{chainId:A,address:S}=Fr.parseCaipAddress(E);if(At.setProviderId(i,xt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&L.state.activeCaipNetwork&&o.namespace!==oe.CHAIN.EVM){const O=o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:L.state.activeCaipNetwork});At.setProvider(i,O)}else At.setProvider(i,this.universalProvider);ve.setConnectorId(oe.CONNECTOR_ID.WALLET_CONNECT,i),be.addConnectedNamespace(i),await this.syncAccount({address:S,chainId:A,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await L.setApprovedCaipNetworksData(i)});await Promise.all(t)}syncProvider({type:e,provider:t,id:r,chainNamespace:s}){At.setProviderId(s,e),At.setProvider(s,t),ve.setConnectorId(r,s)}async syncAccount(e){var g,y;const t=e.chainNamespace===L.state.activeChain,r=L.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:l}=be.getActiveNetworkProps(),f=i||l,h=((g=L.state.activeCaipNetwork)==null?void 0:g.name)===oe.UNSUPPORTED_NETWORK_NAME,p=L.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(h&&!p)&&f){let b=this.getCaipNetworks().find(A=>A.id.toString()===f.toString()),v=this.getCaipNetworks().find(A=>A.chainNamespace===o);if(!p&&!b&&!v){const A=this.getApprovedCaipNetworkIds()||[],S=A.find(T=>{var k;return((k=Fr.parseCaipNetworkId(T))==null?void 0:k.chainId)===f.toString()}),O=A.find(T=>{var k;return((k=Fr.parseCaipNetworkId(T))==null?void 0:k.chainNamespace)===o});b=this.getCaipNetworks().find(T=>T.caipNetworkId===S),v=this.getCaipNetworks().find(T=>T.caipNetworkId===O||"deprecatedCaipNetworkId"in T&&T.deprecatedCaipNetworkId===O)}const E=b||v;(E==null?void 0:E.chainNamespace)===L.state.activeChain?pe.state.enableNetworkSwitch&&!pe.state.allowUnsupportedChain&&((y=L.state.activeCaipNetwork)==null?void 0:y.name)===oe.UNSUPPORTED_NETWORK_NAME?L.showUnsupportedChainUI():this.setCaipNetwork(E):t||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),Jn.isLowerCaseMatch(s,Ue.state.address)||this.syncAccountInfo(s,E==null?void 0:E.id,o),t?await this.syncBalance({address:s,chainId:E==null?void 0:E.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,t,r){const s=this.getCaipAddress(r),i=t||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,t){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){var s;const t=ve.getConnectorId(e),r=At.getProviderId(e);if(r===xt.CONNECTOR_TYPE_ANNOUNCED||r===xt.CONNECTOR_TYPE_INJECTED){if(t){const o=this.getConnectors().find(l=>{var g,y;const f=l.id===t,h=((g=l.info)==null?void 0:g.rdns)===t,p=(y=l.connectors)==null?void 0:y.some(b=>{var v;return b.id===t||((v=b.info)==null?void 0:v.rdns)===t});return f||h||!!p});if(o){const{info:l,name:f,imageUrl:h}=o,p=h||this.getConnectorImage(o);this.setConnectedWalletInfo({name:f,icon:p,...l},e)}}}else if(r===xt.CONNECTOR_TYPE_WALLET_CONNECT){const i=At.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(t&&(t===oe.CONNECTOR_ID.COINBASE_SDK||t===oe.CONNECTOR_ID.COINBASE)){const i=this.getConnectors().find(h=>h.id===t),o=(i==null?void 0:i.name)||"Coinbase Wallet",l=(i==null?void 0:i.imageUrl)||this.getConnectorImage(i),f=i==null?void 0:i.info;this.setConnectedWalletInfo({...f,name:o,icon:l},e)}}async syncBalance(e){!CU.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,t,r){const s=this.getAdapter(r),i=L.getCaipNetworkByNamespace(r,t);if(s){const o=await s.getBalance({address:e,chainId:t,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,l,f,h,p,g,y;const e=tte.createLogger((b,...v)=>{b&&this.handleAlertError(b),console.error(...v)}),t={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(l=this.options)==null?void 0:l.metadata.description:"",url:(f=this.options)!=null&&f.metadata?(h=this.options)==null?void 0:h.metadata.url:"",icons:(p=this.options)!=null&&p.metadata?(g=this.options)==null?void 0:g.metadata.icons:[""]},logger:e};pe.setManualWCControl(!!((y=this.options)!=null&&y.manualWCControl)),this.universalProvider=this.options.universalProvider??await PS.init(t),pe.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{ka.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:t=>{_e.setUri(t)},onConnect:()=>{_e.finalizeWcConnection()},onDisconnect:()=>{L.state.noAdapters&&this.resetAccount(e),_e.resetWcConnection()},onChainChanged:t=>{const r=L.state.activeChain,s=r&&ve.state.activeConnectorIds[r]===oe.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(L.state.noAdapters||s)){const i=this.getCaipNetworks().find(l=>l.id.toString()===t.toString()||l.caipNetworkId.toString()===t.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(t);return}(o==null?void 0:o.id.toString())!==(i==null?void 0:i.id.toString())&&(o==null?void 0:o.chainNamespace)===(i==null?void 0:i.chainNamespace)&&this.setCaipNetwork(i)}},onAccountsChanged:t=>{const r=L.state.activeChain,s=r&&ve.state.activeConnectorIds[r]===oe.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(L.state.noAdapters||s)&&t.length>0){const i=t[0];this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Re.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){jt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const t=Object.entries(Lr.UniversalProviderErrors).find(([,{message:l}])=>e.message.includes(l)),[r,s]=t??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const l=Lr.ALERT_ERRORS[o];l&&(Un.open(l,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var t;if(e)return(t=this.chainAdapters)==null?void 0:t[e]}createAdapter(e){var s;if(!e)return;const t=e.namespace;if(!t)return;this.createClients();const r=e;r.namespace=t,r.construct({namespace:t,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&_e.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return It.open({...e,data:{swap:e.arguments}})}return It.open(e)}async close(){await this.injectModalUi(),It.close()}setLoading(e,t){It.setLoading(e,t)}async disconnect(e){await _e.disconnect({namespace:e})}getSIWX(){return pe.state.siwx}getError(){return""}getChainId(){var e;return(e=L.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const t=this.getCaipNetworks().find(r=>r.id===e.id);if(!t){Un.open(Lr.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await L.switchActiveNetwork(t)}getWalletProvider(){return L.state.activeChain?At.state.providers[L.state.activeChain]:null}getWalletProviderType(){return At.getProviderId(L.state.activeChain)}subscribeProviders(e){return At.subscribeProviders(e)}getThemeMode(){return us.state.themeMode}getThemeVariables(){return us.state.themeVariables}setThemeMode(e){us.setThemeMode(e),H4(us.state.themeMode)}setTermsConditionsUrl(e){pe.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){pe.setPrivacyPolicyUrl(e)}setThemeVariables(e){us.setThemeVariables(e),Vie(us.state.themeVariables)}subscribeTheme(e){return us.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?_e.subscribe(e):(Un.open(oe.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?L.getAccountProp("connectedWalletInfo",e):Ue.state.connectedWalletInfo}getAccount(e){const t=e||L.state.activeChain,r=ve.getAuthConnector(t),s=L.getAccountData(t),i=be.getConnectedConnectorId(L.state.activeChain),o=_e.getConnections(t);if(!t)throw new Error("AppKit:getAccount - namespace is required");const l=o.flatMap(f=>f.accounts.map(({address:h,type:p})=>Re.createAccount(t,h,p||"eoa")));if(s)return{allAccounts:l,caipAddress:s.caipAddress,address:Re.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:r&&i===oe.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:be.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:Hs(t),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,t){const r=()=>{const s=this.getAccount(t);s&&e(s)};t?L.subscribeChainProp("accountState",r,t):L.subscribe(r),ve.subscribe(r)}subscribeNetwork(e){return L.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t==null?void 0:t.id,caipNetworkId:t==null?void 0:t.caipNetworkId})})}subscribeWalletInfo(e,t){return t?Ue.subscribeKey("connectedWalletInfo",e,t):Ue.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Ue.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){L.subscribeKey("activeCaipNetwork",e)}getState(){return zi.state}getRemoteFeatures(){return pe.state.remoteFeatures}subscribeState(e){return zi.subscribe(e)}subscribeRemoteFeatures(e){return pe.subscribeKey("remoteFeatures",e)}showErrorMessage(e){Ia.showError(e)}showSuccessMessage(e){Ia.showSuccess(e)}getEvent(){return{...jt.state}}subscribeEvents(e){return jt.subscribe(e)}replace(e){Ze.replace(e)}redirect(e){Ze.push(e)}popTransactionStack(e){Ze.popTransactionStack(e)}isOpen(){return It.state.open}isTransactionStackEmpty(){return Ze.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){pe.setFeatures(e)}updateRemoteFeatures(e){pe.setRemoteFeatures(e)}updateOptions(e){const r={...pe.state||{},...e};pe.setOptions(r)}setConnectMethodsOrder(e){pe.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){pe.setWalletFeaturesOrder(e)}setCollapseWallets(e){pe.setCollapseWallets(e)}setSocialsOrder(e){pe.setSocialsOrder(e)}getConnectMethodsOrder(){return s2.getConnectOrderMethod(pe.state.features,ve.getConnectors())}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||L.addNetwork(r)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===t)&&L.removeNetwork(e,t)}}let JP=!1;class mae extends gae{async onAuthProviderConnected(e){e.message&&e.signature&&e.siwxMessage&&await Ls.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature);const t=L.state.activeChain;if(!t)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const r=t===oe.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=pe.state.defaultAccountTypes[t],i=Hs(t),o=e.preferredAccountType||i||s;Jn.isLowerCaseMatch(e.address,Ue.state.address)||this.syncIdentity({address:e.address,chainId:e.chainId,chainNamespace:t}),this.setCaipAddress(r,t);const{signature:l,siwxMessage:f,message:h,...p}=e;this.setUser({...Ue.state.user||{},...p},t),this.setSmartAccountDeployed(!!e.smartAccountDeployed,t),this.setPreferredAccountType(o,t),this.setLoading(!1,t)}setupAuthConnectorListeners(e){e.onRpcRequest(t=>{$s.checkIfRequestExists(t)?$s.checkIfRequestIsSafe(t)||this.handleUnsafeRPCRequest():(this.open(),console.error(Ln.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:t.method}),setTimeout(()=>{this.showErrorMessage(Ln.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((t,r)=>{const s=$s.checkIfRequestIsSafe(r),i=Ue.state.address,o=L.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const t=L.state.activeChain;if(!t)throw new Error("AppKit:onNotConnected - namespace is required");ve.getConnectorId(t)===oe.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,t),this.setLoading(!1,t))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:t,type:r})=>{const s=L.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");t&&this.setPreferredAccountType(r,s)})}async syncAuthConnectorTheme(e){if(!e)return;const t=us.getSnapshot(),r=pe.getSnapshot();await Promise.all([e.syncDappData({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e.syncTheme({themeMode:t.themeMode,themeVariables:t.themeVariables,w3mThemeVariables:Io(t.themeVariables,t.themeMode)})])}async syncAuthConnector(e,t){var h,p,g,y;const r=oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t),s=t===L.state.activeChain;if(!r)return;this.setLoading(!0,t);const i=e.getLoginEmailUsed();this.setLoading(i,t),i&&this.setStatus("connecting",t);const o=e.getEmail(),l=e.getUsername();this.setUser({...((h=Ue.state)==null?void 0:h.user)||{},username:l,email:o},t),this.setupAuthConnectorListeners(e);const{isConnected:f}=await e.isConnected();if(await this.syncAuthConnectorTheme(e),t&&r&&s){const b=await e.getSmartAccountEnabledNetworks();L.setSmartAccountEnabledNetworks((b==null?void 0:b.smartAccountEnabledNetworks)||[],t),f&&((p=this.connectionControllerClient)!=null&&p.connectExternal)?(await((y=this.connectionControllerClient)==null?void 0:y.connectExternal({id:oe.CONNECTOR_ID.AUTH,info:{name:oe.CONNECTOR_ID.AUTH},type:xt.CONNECTOR_TYPE_AUTH,provider:e,chainId:(g=L.state.activeCaipNetwork)==null?void 0:g.id,chain:t})),this.setStatus("connected",t)):ve.getConnectorId(t)===oe.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",t),be.removeConnectedNamespace(t))}this.setLoading(!1,t)}async checkExistingTelegramSocialConnection(e){var t,r;try{if(!Re.isTelegram())return;const s=be.getTelegramSocialProvider();if(!s||!Re.isClient())return;const o=new URL(window.location.href).searchParams.get("result_uri");if(!o)return;Ue.setSocialProvider(s,e),await((t=this.authProvider)==null?void 0:t.init());const l=ve.getAuthConnector();s&&l&&(this.setLoading(!0,e),await _e.connectExternal({id:l.id,type:l.type,socialUri:o},l.chain),be.setConnectedSocialProvider(s),be.removeTelegramSocialProvider(),jt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:s,caipNetworkId:(r=L.getActiveCaipNetwork())==null?void 0:r.caipNetworkId}}))}catch(s){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",s)}try{const s=new URL(window.location.href);s.searchParams.delete("result_uri"),window.history.replaceState({},document.title,s.toString())}catch(s){console.error("tma social login failed",s)}}createAuthProvider(e){var h,p,g,y;if(!oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(h=this.remoteFeatures)==null?void 0:h.email,s=Array.isArray((p=this.remoteFeatures)==null?void 0:p.socials)&&this.remoteFeatures.socials.length>0,i=r||s,l=Jn.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((g=this.options)!=null&&g.projectId)&&i&&(this.authProvider=gm.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(y=this.getCaipNetwork(l))==null?void 0:y.caipNetworkId,abortController:Lr.EmbeddedWalletAbortController,onTimeout:b=>{b==="iframe_load_failed"?Un.open(Lr.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):b==="iframe_request_timeout"?Un.open(Lr.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):b==="unverified_domain"&&Un.open(Lr.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:b=>L.getActiveCaipNetwork(b)}),zi.subscribeOpen(b=>{var v;!b&&this.isTransactionStackEmpty()&&((v=this.authProvider)==null||v.rejectRpcRequests())}));const f=e===L.state.activeChain&&pe.state.enableReconnect;pe.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&f&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var t,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(t=this.chainAdapters)==null?void 0:t[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&je.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,l;if(!e)return;const t=L.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===t&&s){const f=this.getAdapter(r),h=At.getProvider(r),p=At.getProviderId(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:h,providerType:p})),this.setCaipNetwork(e)}else{const h=At.getProviderId(t)===xt.CONNECTOR_TYPE_AUTH,p=At.getProviderId(r),g=p===xt.CONNECTOR_TYPE_AUTH,y=oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!r)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((h&&p===void 0||g)&&y)try{if(L.state.activeChain=e.chainNamespace,s){const b=this.getAdapter(r);await(b==null?void 0:b.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:p}))}else await((l=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:l.call(o,{id:oe.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:xt.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const v=this.getAdapter(r);await(v==null?void 0:v.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:p}))}else if(p===xt.CONNECTOR_TYPE_WALLET_CONNECT){if(!L.state.noAdapters){const b=this.getAdapter(r),v=At.getProvider(r),E=At.getProviderId(r);await(b==null?void 0:b.switchNetwork({caipNetwork:e,provider:v,providerType:E}))}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r})}}async initialize(e){var t;await super.initialize(e),(t=this.chainNamespaces)==null||t.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),zi.set({initialized:!0})}async syncIdentity({address:e,chainId:t,chainNamespace:r}){var o;const s=`${r}:${t}`,i=(o=this.caipNetworks)==null?void 0:o.find(l=>l.caipNetworkId===s);if(r!==oe.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:l,avatar:f}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(l,r),this.setProfileImage(f,r)}catch{await this.syncReownName(e,r),t!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const t=At.getProviderId(e);if(t===xt.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=be.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:t,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Re.isClient()&&!JP)try{const e={...kt.DEFAULT_FEATURES,...this.options.features},t=this.remoteFeatures;if(await this.loadModalComponents(e,t),Re.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!pe.state.disableAppend&&!pe.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}JP=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,t){if(!Re.isClient())return;const r=[];(t.email||t.socials&&t.socials.length>0)&&r.push(Mr(()=>import("./embedded-wallet-BAQxn4Pv.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13]))),t.email&&r.push(Mr(()=>import("./email-D8KTH912.js"),__vite__mapDeps([14,3,13,7,12,6,11,15,8]))),t.socials&&r.push(Mr(()=>import("./socials-BdLkHmtm.js"),__vite__mapDeps([16,3,17,6,18,19,12,20,11,7,13,21,5,22]))),t.swaps&&t.swaps.length>0&&r.push(Mr(()=>import("./swaps-CJhQweCn.js"),__vite__mapDeps([23,3,11,7,24,25,26,5,12,22,8,6]))),e.send&&r.push(Mr(()=>import("./send-_jwy08Iy.js"),__vite__mapDeps([27,3,11,7,12,6,18,13,26,5,8,28,29]))),e.receive&&r.push(Mr(()=>import("./receive-DfDShck3.js"),__vite__mapDeps([30,3,31,5,21]))),t.onramp&&t.onramp.length>0&&r.push(Mr(()=>import("./onramp-UoaVSG0q.js"),__vite__mapDeps([32,3,33,5,7,12,17,6,18,34,13,11,20,8]))),t.activity&&r.push(Mr(()=>import("./transactions-kxVKMecF.js"),__vite__mapDeps([35,3,36,12,13,5,22]))),e.pay&&r.push(Mr(()=>import("./index-Bvm-Nnmu.js"),__vite__mapDeps([37,3,11,7,38,5,12,9,33,29,20]))),await Promise.all([...r,Mr(()=>import("./index-Bz6gf2k6.js"),__vite__mapDeps([39,3,5,7,28,12,40,25,9,33,11,10,38,36,13,22,24,29,6,8,15,17,18,19,4,20,31,21,34])),Mr(()=>import("./w3m-modal-DwhbL1eb.js"),__vite__mapDeps([41,3,9,5,12,10,7,25,40]))])}}let Pc;function yae(n){n&&(Pc=n)}function wae(n){const{providers:e,providerIds:t}=W_(At.state),r=e[n],s=t[n];return{walletProvider:r,walletProviderType:s}}function bae(){if(!Pc)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function n(t){await(Pc==null?void 0:Pc.open(t))}async function e(){await(Pc==null?void 0:Pc.close())}return{open:n,close:e}}const Eae="1.7.16";let Kw;function vae(n){return Kw||(Kw=new mae({...n,sdkVersion:Re.generateSdkVersion(n.adapters??[],"react",Eae)}),yae(Kw)),Kw}const Aae="6.15.0";function Cae(n,e,t){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${t}`,s.value=n,s}async function $r(n){const e=Object.keys(n);return(await Promise.all(e.map(r=>Promise.resolve(n[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function We(n,e,t){for(let r in e){let s=e[r];const i=t?t[r]:null;i&&Cae(s,i,r),Object.defineProperty(n,r,{enumerable:!0,value:s,writable:!1})}}function Lh(n,e){if(n==null)return"null";if(e==null&&(e=new Set),typeof n=="object"){if(e.has(n))return"[Circular]";e.add(n)}if(Array.isArray(n))return"[ "+n.map(t=>Lh(t,e)).join(", ")+" ]";if(n instanceof Uint8Array){const t="0123456789abcdef";let r="0x";for(let s=0;s<n.length;s++)r+=t[n[s]>>4],r+=t[n[s]&15];return r}if(typeof n=="object"&&typeof n.toJSON=="function")return Lh(n.toJSON(),e);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const t=Object.keys(n);return t.sort(),"{ "+t.map(r=>`${Lh(r,e)}: ${Lh(n[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function dr(n,e){return n&&n.code===e}function $S(n){return dr(n,"CALL_EXCEPTION")}function ln(n,e,t){let r=n;{const i=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${Lh(t)}`);for(const o in t){if(o==="shortMessage")continue;const l=t[o];i.push(o+"="+Lh(l))}}i.push(`code=${e}`),i.push(`version=${Aae}`),i.length&&(n+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(n);break;default:s=new Error(n)}return We(s,{code:e}),t&&Object.assign(s,t),s.shortMessage==null&&We(s,{shortMessage:r}),s}function de(n,e,t,r){if(!n)throw ln(e,t,r)}function Q(n,e,t,r){de(n,e,"INVALID_ARGUMENT",{argument:t,value:r})}function W4(n,e,t){t==null&&(t=""),t&&(t=": "+t),de(n>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:n,expectedCount:e}),de(n<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");n.push(e)}catch{}return n},[]);function Zy(n,e,t){if(t==null&&(t=""),n!==e){let r=t,s="new";t&&(r+=".",s+=" "+t),de(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function Y4(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((n.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(n.substring(s,s+2),16),s+=2;return r}Q(!1,"invalid BytesLike value",e||"value",n)}function ut(n,e){return Y4(n,e,!1)}function Hr(n,e){return Y4(n,e,!0)}function Xt(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function FS(n){return Xt(n,!0)||n instanceof Uint8Array}const XP="0123456789abcdef";function Ne(n){const e=ut(n);let t="0x";for(let r=0;r<e.length;r++){const s=e[r];t+=XP[(s&240)>>4]+XP[s&15]}return t}function wn(n){return"0x"+n.map(e=>Ne(e).substring(2)).join("")}function Yh(n){return Xt(n,!0)?(n.length-2)/2:ut(n).length}function yn(n,e,t){const r=ut(n);return t!=null&&t>r.length&&de(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:t}),Ne(r.slice(e??0,t??r.length))}function Q4(n,e,t){const r=ut(n);de(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),t?s.set(r,e-r.length):s.set(r,0),Ne(s)}function Ho(n,e){return Q4(n,e,!0)}function _ae(n,e){return Q4(n,e,!1)}const zE=BigInt(0),ji=BigInt(1),$h=9007199254740991;function eE(n,e){const t=qE(n,"value"),r=BigInt(it(e,"width"));if(de(t>>r===zE,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),t>>r-ji){const s=(ji<<r)-ji;return-((~t&s)+ji)}return t}function Z4(n,e){let t=ke(n,"value");const r=BigInt(it(e,"width")),s=ji<<r-ji;if(t<zE){t=-t,de(t<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const i=(ji<<r)-ji;return(~t&i)+ji}else de(t<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return t}function mu(n,e){const t=qE(n,"value"),r=BigInt(it(e,"bits"));return t&(ji<<r)-ji}function ke(n,e){switch(typeof n){case"bigint":return n;case"number":return Q(Number.isInteger(n),"underflow",e||"value",n),Q(n>=-$h&&n<=$h,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){Q(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}Q(!1,"invalid BigNumberish value",e||"value",n)}function qE(n,e){const t=ke(n,e);return de(t>=zE,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}const eD="0123456789abcdef";function VE(n){if(n instanceof Uint8Array){let e="0x0";for(const t of n)e+=eD[t>>4],e+=eD[t&15];return BigInt(e)}return ke(n)}function it(n,e){switch(typeof n){case"bigint":return Q(n>=-$h&&n<=$h,"overflow",e||"value",n),Number(n);case"number":return Q(Number.isInteger(n),"underflow",e||"value",n),Q(n>=-$h&&n<=$h,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return it(BigInt(n),e)}catch(t){Q(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}Q(!1,"invalid numeric value",e||"value",n)}function Sae(n){return it(VE(n))}function wl(n,e){let r=qE(n,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=it(e,"width");for(de(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});r.length<s*2;)r="0"+r}return"0x"+r}function Mn(n){const e=qE(n,"value");if(e===zE)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const r=new Uint8Array(t.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(t.substring(i,i+2),16)}return r}function Hi(n){let e=Ne(FS(n)?n:Mn(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const tD="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const nD=BigInt(58);function Nae(n){const e=ut(n);let t=VE(e),r="";for(;t;)r=tD[Number(t%nD)]+r,t/=nD;for(let s=0;s<e.length&&!e[s];s++)r=tD[0]+r;return r}function Tae(n){n=atob(n);const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return ut(e)}function Oae(n){const e=ut(n);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}var ed;class J4{constructor(e,t,r){ne(this,"filter");ne(this,"emitter");ce(this,ed);H(this,ed,t),We(this,{emitter:e,filter:r})}async removeListener(){N(this,ed)!=null&&await this.emitter.off(this.filter,N(this,ed))}}ed=new WeakMap;function xae(n,e,t,r,s){Q(!1,`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function X4(n,e,t,r,s){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)i++;return i}return n==="OVERRUN"?t.length-e-1:0}function Iae(n,e,t,r,s){return n==="OVERLONG"?(Q(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),X4(n,e,t))}const Rae=Object.freeze({error:xae,ignore:X4,replace:Iae});function Pae(n,e){e==null&&(e=Rae.error);const t=ut(n,"bytes"),r=[];let s=0;for(;s<t.length;){const i=t[s++];if(i>>7===0){r.push(i);continue}let o=null,l=null;if((i&224)===192)o=1,l=127;else if((i&240)===224)o=2,l=2047;else if((i&248)===240)o=3,l=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,t,r):s+=e("BAD_PREFIX",s-1,t,r);continue}if(s-1+o>=t.length){s+=e("OVERRUN",s-1,t,r);continue}let f=i&(1<<8-o-1)-1;for(let h=0;h<o;h++){let p=t[s];if((p&192)!=128){s+=e("MISSING_CONTINUE",s,t,r),f=null;break}f=f<<6|p&63,s++}if(f!==null){if(f>1114111){s+=e("OUT_OF_RANGE",s-1-o,t,r,f);continue}if(f>=55296&&f<=57343){s+=e("UTF16_SURROGATE",s-1-o,t,r,f);continue}if(f<=l){s+=e("OVERLONG",s-1-o,t,r,f);continue}r.push(f)}}return r}function Ba(n,e){Q(typeof n=="string","invalid string value","str",n);let t=[];for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192),t.push(s&63|128);else if((s&64512)==55296){r++;const i=n.charCodeAt(r);Q(r<n.length&&(i&64512)===56320,"invalid surrogate pair","str",n);const o=65536+((s&1023)<<10)+(i&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(s>>12|224),t.push(s>>6&63|128),t.push(s&63|128)}return new Uint8Array(t)}function Dae(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function tE(n,e){return Dae(Pae(n,e))}function ek(n){async function e(t,r){de(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=t.url.split(":")[0].toLowerCase();de(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),de(s==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,l=setTimeout(()=>{i=ln("request timeout","TIMEOUT"),o.abort()},t.timeout);r&&r.addListener(()=>{i=ln("request cancelled","CANCELLED"),o.abort()});const f=Object.assign({},n,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:o.signal});let h;try{h=await fetch(t.url,f)}catch(b){throw clearTimeout(l),i||b}clearTimeout(l);const p={};h.headers.forEach((b,v)=>{p[v.toLowerCase()]=b});const g=await h.arrayBuffer(),y=g==null?null:new Uint8Array(g);return{statusCode:h.status,statusMessage:h.statusText,headers:p,body:y}}return e}const Uae=12,kae=250;let rD=ek();const Bae=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Mae=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let RC=!1;async function tk(n,e){try{const t=n.match(Bae);if(!t)throw new Error("invalid data");return new fl(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?Tae(t[3]):$ae(t[3]))}catch{return new fl(599,"BAD REQUEST (invalid data: URI)",{},null,new jo(n))}}function nk(n){async function e(t,r){try{const s=t.match(Mae);if(!s)throw new Error("invalid link");return new jo(`${n}${s[2]}`)}catch{return new fl(599,"BAD REQUEST (invalid IPFS URI)",{},null,new jo(t))}}return e}const Ww={data:tk,ipfs:nk("https://gateway.ipfs.io/ipfs/")},rk=new WeakMap;var Eu,jc;class Lae{constructor(e){ce(this,Eu);ce(this,jc);H(this,Eu,[]),H(this,jc,!1),rk.set(e,()=>{if(!N(this,jc)){H(this,jc,!0);for(const t of N(this,Eu))setTimeout(()=>{t()},0);H(this,Eu,[])}})}addListener(e){de(!N(this,jc),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),N(this,Eu).push(e)}get cancelled(){return N(this,jc)}checkSignal(){de(!this.cancelled,"cancelled","CANCELLED",{})}}Eu=new WeakMap,jc=new WeakMap;function Yw(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}var td,nd,Ui,wo,rd,sd,Kn,Ds,bo,vu,Au,Cu,ga,ki,zc,_u,Zg;const pE=class pE{constructor(e){ce(this,_u);ce(this,td);ce(this,nd);ce(this,Ui);ce(this,wo);ce(this,rd);ce(this,sd);ce(this,Kn);ce(this,Ds);ce(this,bo);ce(this,vu);ce(this,Au);ce(this,Cu);ce(this,ga);ce(this,ki);ce(this,zc);H(this,sd,String(e)),H(this,td,!1),H(this,nd,!0),H(this,Ui,{}),H(this,wo,""),H(this,rd,3e5),H(this,ki,{slotInterval:kae,maxAttempts:Uae}),H(this,zc,null)}get url(){return N(this,sd)}set url(e){H(this,sd,String(e))}get body(){return N(this,Kn)==null?null:new Uint8Array(N(this,Kn))}set body(e){if(e==null)H(this,Kn,void 0),H(this,Ds,void 0);else if(typeof e=="string")H(this,Kn,Ba(e)),H(this,Ds,"text/plain");else if(e instanceof Uint8Array)H(this,Kn,e),H(this,Ds,"application/octet-stream");else if(typeof e=="object")H(this,Kn,Ba(JSON.stringify(e))),H(this,Ds,"application/json");else throw new Error("invalid body")}hasBody(){return N(this,Kn)!=null}get method(){return N(this,wo)?N(this,wo):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),H(this,wo,String(e).toUpperCase())}get headers(){const e=Object.assign({},N(this,Ui));return N(this,bo)&&(e.authorization=`Basic ${Oae(Ba(N(this,bo)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&N(this,Ds)&&(e["content-type"]=N(this,Ds)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){N(this,Ui)[String(e).toLowerCase()]=String(t)}clearHeaders(){H(this,Ui,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const s=t[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return N(this,bo)||null}setCredentials(e,t){Q(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),H(this,bo,`${e}:${t}`)}get allowGzip(){return N(this,nd)}set allowGzip(e){H(this,nd,!!e)}get allowInsecureAuthentication(){return!!N(this,td)}set allowInsecureAuthentication(e){H(this,td,!!e)}get timeout(){return N(this,rd)}set timeout(e){Q(e>=0,"timeout must be non-zero","timeout",e),H(this,rd,e)}get preflightFunc(){return N(this,vu)||null}set preflightFunc(e){H(this,vu,e)}get processFunc(){return N(this,Au)||null}set processFunc(e){H(this,Au,e)}get retryFunc(){return N(this,Cu)||null}set retryFunc(e){H(this,Cu,e)}get getUrlFunc(){return N(this,zc)||rD}set getUrlFunc(e){H(this,zc,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${N(this,Kn)?Ne(N(this,Kn)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(N(this,ki).slotInterval=e.slotInterval),e.maxAttempts!=null&&(N(this,ki).maxAttempts=e.maxAttempts)}send(){return de(N(this,ga)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),H(this,ga,new Lae(this)),we(this,_u,Zg).call(this,0,sD()+this.timeout,0,this,new fl(0,"",{},null,this))}cancel(){de(N(this,ga)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=rk.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();de(this.method==="GET"&&(t!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new pE(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,H(s,Ui,Object.assign({},N(this,Ui))),N(this,Kn)&&H(s,Kn,new Uint8Array(N(this,Kn))),H(s,Ds,N(this,Ds)),s}clone(){const e=new pE(this.url);return H(e,wo,N(this,wo)),N(this,Kn)&&H(e,Kn,N(this,Kn)),H(e,Ds,N(this,Ds)),H(e,Ui,Object.assign({},N(this,Ui))),H(e,bo,N(this,bo)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),H(e,vu,N(this,vu)),H(e,Au,N(this,Au)),H(e,Cu,N(this,Cu)),H(e,ki,Object.assign({},N(this,ki))),H(e,zc,N(this,zc)),e}static lockConfig(){RC=!0}static getGateway(e){return Ww[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(RC)throw new Error("gateways locked");Ww[e]=t}static registerGetUrl(e){if(RC)throw new Error("gateways locked");rD=e}static createGetUrlFunc(e){return ek(e)}static createDataGateway(){return tk}static createIpfsGatewayFunc(e){return nk(e)}};td=new WeakMap,nd=new WeakMap,Ui=new WeakMap,wo=new WeakMap,rd=new WeakMap,sd=new WeakMap,Kn=new WeakMap,Ds=new WeakMap,bo=new WeakMap,vu=new WeakMap,Au=new WeakMap,Cu=new WeakMap,ga=new WeakMap,ki=new WeakMap,zc=new WeakMap,_u=new WeakSet,Zg=async function(e,t,r,s,i){var p,g,y;if(e>=N(this,ki).maxAttempts)return i.makeServerError("exceeded maximum retry limit");de(sD()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await Fae(r);let o=this.clone();const l=(o.url.split(":")[0]||"").toLowerCase();if(l in Ww){const b=await Ww[l](o.url,Yw(N(s,ga)));if(b instanceof fl){let v=b;if(this.processFunc){Yw(N(s,ga));try{v=await this.processFunc(o,v)}catch(E){(E.throttle==null||typeof E.stall!="number")&&v.makeServerError("error in post-processing function",E).assertOk()}}return v}o=b}this.preflightFunc&&(o=await this.preflightFunc(o));const f=await this.getUrlFunc(o,Yw(N(s,ga)));let h=new fl(f.statusCode,f.statusMessage,f.headers,f.body,s);if(h.statusCode===301||h.statusCode===302){try{const b=h.headers.location||"";return we(p=o.redirect(b),_u,Zg).call(p,e+1,t,0,s,h)}catch{}return h}else if(h.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,h,e))){const b=h.headers["retry-after"];let v=N(this,ki).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof b=="string"&&b.match(/^[1-9][0-9]*$/)&&(v=parseInt(b)),we(g=o.clone(),_u,Zg).call(g,e+1,t,v,s,h)}if(this.processFunc){Yw(N(s,ga));try{h=await this.processFunc(o,h)}catch(b){(b.throttle==null||typeof b.stall!="number")&&h.makeServerError("error in post-processing function",b).assertOk();let v=N(this,ki).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return b.stall>=0&&(v=b.stall),we(y=o.clone(),_u,Zg).call(y,e+1,t,v,s,h)}}return h};let jo=pE;var vy,Ay,Cy,Us,id,Su;const sN=class sN{constructor(e,t,r,s,i){ce(this,vy);ce(this,Ay);ce(this,Cy);ce(this,Us);ce(this,id);ce(this,Su);H(this,vy,e),H(this,Ay,t),H(this,Cy,Object.keys(r).reduce((o,l)=>(o[l.toLowerCase()]=String(r[l]),o),{})),H(this,Us,s==null?null:new Uint8Array(s)),H(this,id,i||null),H(this,Su,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${N(this,Us)?Ne(N(this,Us)):"null"}>`}get statusCode(){return N(this,vy)}get statusMessage(){return N(this,Ay)}get headers(){return Object.assign({},N(this,Cy))}get body(){return N(this,Us)==null?null:new Uint8Array(N(this,Us))}get bodyText(){try{return N(this,Us)==null?"":tE(N(this,Us))}catch{de(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{de(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const s=t[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,t){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new sN(599,r,this.headers,this.body,N(this,id)||void 0);return H(s,Su,{message:e,error:t}),s}throwThrottleError(e,t){t==null?t=-1:Q(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const r=new Error(e||"throttling requests");throw We(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return N(this,Us)!=null}get request(){return N(this,id)}ok(){return N(this,Su).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=N(this,Su);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{N(this,Us)&&(s=tE(N(this,Us)))}catch{}de(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};vy=new WeakMap,Ay=new WeakMap,Cy=new WeakMap,Us=new WeakMap,id=new WeakMap,Su=new WeakMap;let fl=sN;function sD(){return new Date().getTime()}function $ae(n){return Ba(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function Fae(n){return new Promise(e=>setTimeout(e,n))}const Hae=BigInt(-1),Ri=BigInt(0),Fh=BigInt(1),jae=BigInt(5),Sh={};let Qh="0000";for(;Qh.length<80;)Qh+=Qh;function Wl(n){let e=Qh;for(;e.length<n;)e+=e;return BigInt("1"+e.substring(0,n))}function Hg(n,e,t){const r=BigInt(e.width);if(e.signed){const s=Fh<<r-Fh;de(t==null||n>=-s&&n<s,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n>Ri?n=eE(mu(n,r),r):n=-eE(mu(-n,r),r)}else{const s=Fh<<r;de(t==null||n>=0&&n<s,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n=(n%s+s)%s&s-Fh}return n}function PC(n){typeof n=="number"&&(n=`fixed128x${n}`);let e=!0,t=128,r=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")e=!1;else{const i=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);Q(i,"invalid fixed format","format",n),e=i[1]!=="u",t=parseInt(i[2]),r=parseInt(i[3])}}else if(n){const i=n,o=(l,f,h)=>i[l]==null?h:(Q(typeof i[l]===f,"invalid fixed format ("+l+" not "+f+")","format."+l,i[l]),i[l]);e=o("signed","boolean",e),t=o("width","number",t),r=o("decimals","number",r)}Q(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),Q(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const s=(e?"":"u")+"fixed"+String(t)+"x"+String(r);return{signed:e,width:t,decimals:r,name:s}}function zae(n,e){let t="";n<Ri&&(t="-",n*=Hae);let r=n.toString();if(e===0)return t+r;for(;r.length<=e;)r=Qh+r;const s=r.length-e;for(r=r.substring(0,s)+"."+r.substring(s);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return t+r}var Bi,Wt,kr,Mt,Xl,ho,a2,o2,c2,l2;const Lc=class Lc{constructor(e,t,r){ce(this,Mt);ne(this,"format");ce(this,Bi);ce(this,Wt);ce(this,kr);ne(this,"_value");Zy(e,Sh,"FixedNumber"),H(this,Wt,t),H(this,Bi,r);const s=zae(t,r.decimals);We(this,{format:r.name,_value:s}),H(this,kr,Wl(r.decimals))}get signed(){return N(this,Bi).signed}get width(){return N(this,Bi).width}get decimals(){return N(this,Bi).decimals}get value(){return N(this,Wt)}addUnsafe(e){return we(this,Mt,a2).call(this,e)}add(e){return we(this,Mt,a2).call(this,e,"add")}subUnsafe(e){return we(this,Mt,o2).call(this,e)}sub(e){return we(this,Mt,o2).call(this,e,"sub")}mulUnsafe(e){return we(this,Mt,c2).call(this,e)}mul(e){return we(this,Mt,c2).call(this,e,"mul")}mulSignal(e){we(this,Mt,Xl).call(this,e);const t=N(this,Wt)*N(e,Wt);return de(t%N(this,kr)===Ri,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),we(this,Mt,ho).call(this,t/N(this,kr),"mulSignal")}divUnsafe(e){return we(this,Mt,l2).call(this,e)}div(e){return we(this,Mt,l2).call(this,e,"div")}divSignal(e){de(N(e,Wt)!==Ri,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),we(this,Mt,Xl).call(this,e);const t=N(this,Wt)*N(this,kr);return de(t%N(e,Wt)===Ri,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),we(this,Mt,ho).call(this,t/N(e,Wt),"divSignal")}cmp(e){let t=this.value,r=e.value;const s=this.decimals-e.decimals;return s>0?r*=Wl(s):s<0&&(t*=Wl(-s)),t<r?-1:t>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=N(this,Wt);return N(this,Wt)<Ri&&(e-=N(this,kr)-Fh),e=N(this,Wt)/N(this,kr)*N(this,kr),we(this,Mt,ho).call(this,e,"floor")}ceiling(){let e=N(this,Wt);return N(this,Wt)>Ri&&(e+=N(this,kr)-Fh),e=N(this,Wt)/N(this,kr)*N(this,kr),we(this,Mt,ho).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,r=jae*Wl(t-1);let s=this.value+r;const i=Wl(t);return s=s/i*i,Hg(s,N(this,Bi),"round"),new Lc(Sh,s,N(this,Bi))}isZero(){return N(this,Wt)===Ri}isNegative(){return N(this,Wt)<Ri}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Lc.fromString(this.toString(),e)}static fromValue(e,t,r){const s=t==null?0:it(t),i=PC(r);let o=ke(e,"value");const l=s-i.decimals;if(l>0){const f=Wl(l);de(o%f===Ri,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=f}else l<0&&(o*=Wl(-l));return Hg(o,i,"fromValue"),new Lc(Sh,o,i)}static fromString(e,t){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);Q(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const s=PC(t);let i=r[2]||"0",o=r[3]||"";for(;o.length<s.decimals;)o+=Qh;de(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,s.decimals);const l=BigInt(r[1]+i+o);return Hg(l,s,"fromString"),new Lc(Sh,l,s)}static fromBytes(e,t){let r=VE(ut(e,"value"));const s=PC(t);return s.signed&&(r=eE(r,s.width)),Hg(r,s,"fromBytes"),new Lc(Sh,r,s)}};Bi=new WeakMap,Wt=new WeakMap,kr=new WeakMap,Mt=new WeakSet,Xl=function(e){Q(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},ho=function(e,t){return e=Hg(e,N(this,Bi),t),new Lc(Sh,e,N(this,Bi))},a2=function(e,t){return we(this,Mt,Xl).call(this,e),we(this,Mt,ho).call(this,N(this,Wt)+N(e,Wt),t)},o2=function(e,t){return we(this,Mt,Xl).call(this,e),we(this,Mt,ho).call(this,N(this,Wt)-N(e,Wt),t)},c2=function(e,t){return we(this,Mt,Xl).call(this,e),we(this,Mt,ho).call(this,N(this,Wt)*N(e,Wt)/N(this,kr),t)},l2=function(e,t){return de(N(e,Wt)!==Ri,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),we(this,Mt,Xl).call(this,e),we(this,Mt,ho).call(this,N(this,Wt)*N(this,kr)/N(e,Wt),t)};let nE=Lc;function qae(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function iD(n,e,t){let r=0;for(let s=0;s<t;s++)r=r*256+n[e+s];return r}function aD(n,e,t,r){const s=[];for(;t<e+1+r;){const i=sk(n,t);s.push(i.result),t+=i.consumed,de(t<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:n,length:r,offset:e})}return{consumed:1+r,result:s}}function sk(n,e){de(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const t=r=>{de(r<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r})};if(n[e]>=248){const r=n[e]-247;t(e+1+r);const s=iD(n,e+1,r);return t(e+1+r+s),aD(n,e,e+1+r,r+s)}else if(n[e]>=192){const r=n[e]-192;return t(e+1+r),aD(n,e,e+1,r)}else if(n[e]>=184){const r=n[e]-183;t(e+1+r);const s=iD(n,e+1,r);t(e+1+r+s);const i=Ne(n.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(n[e]>=128){const r=n[e]-128;t(e+1+r);const s=Ne(n.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:qae(n[e])}}function Jy(n){const e=ut(n,"data"),t=sk(e,0);return Q(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function oD(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function ik(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(i){r=r.concat(ik(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=oD(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(ut(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=oD(e.length);return t.unshift(183+t.length),t.concat(e)}const cD="0123456789abcdef";function bl(n){let e="0x";for(const t of ik(n))e+=cD[t>>4],e+=cD[t&15];return e}const ak=["wei","kwei","mwei","gwei","szabo","finney","ether"];function ok(n,e){let t=18;if(typeof e=="string"){const r=ak.indexOf(e);Q(r>=0,"invalid unit","unit",e),t=3*r}else e!=null&&(t=it(e,"unit"));return nE.fromValue(n,t,{decimals:t,width:512}).toString()}function ck(n,e){Q(typeof n=="string","value must be a string","value",n);let t=18;if(typeof e=="string"){const r=ak.indexOf(e);Q(r>=0,"invalid unit","unit",e),t=3*r}else e!=null&&(t=it(e,"unit"));return nE.fromString(n,{decimals:t,width:512}).value}function u2(n){return ok(n,18)}function Vae(n){return ck(n,18)}const jr=32,f2=new Uint8Array(jr),Gae=["then"],Qw={},lk=new WeakMap;function su(n){return lk.get(n)}function lD(n,e){lk.set(n,e)}function jg(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw t.error=e,t}function h2(n,e,t){return n.indexOf(null)>=0?e.map((r,s)=>r instanceof ep?h2(su(r),r,t):r):n.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(t&&o instanceof ep&&(o=h2(su(o),o,t)),r[s]=o),r},{})}var ad;const Hh=class Hh extends Array{constructor(...t){const r=t[0];let s=t[1],i=(t[2]||[]).slice(),o=!0;r!==Qw&&(s=t,i=[],o=!1);super(s.length);ce(this,ad);s.forEach((h,p)=>{this[p]=h});const l=i.reduce((h,p)=>(typeof p=="string"&&h.set(p,(h.get(p)||0)+1),h),new Map);if(lD(this,Object.freeze(s.map((h,p)=>{const g=i[p];return g!=null&&l.get(g)===1?g:null}))),H(this,ad,[]),N(this,ad)==null&&N(this,ad),!o)return;Object.freeze(this);const f=new Proxy(this,{get:(h,p,g)=>{if(typeof p=="string"){if(p.match(/^[0-9]+$/)){const b=it(p,"%index");if(b<0||b>=this.length)throw new RangeError("out of result range");const v=h[b];return v instanceof Error&&jg(`index ${b}`,v),v}if(Gae.indexOf(p)>=0)return Reflect.get(h,p,g);const y=h[p];if(y instanceof Function)return function(...b){return y.apply(this===g?h:this,b)};if(!(p in h))return h.getValue.apply(this===g?h:this,[p])}return Reflect.get(h,p,g)}});return lD(f,su(this)),f}toArray(t){const r=[];return this.forEach((s,i)=>{s instanceof Error&&jg(`index ${i}`,s),t&&s instanceof Hh&&(s=s.toArray(t)),r.push(s)}),r}toObject(t){const r=su(this);return r.reduce((s,i,o)=>(de(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),h2(r,this,t)),{})}slice(t,r){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=su(this),i=[],o=[];for(let l=t;l<r;l++)i.push(this[l]),o.push(s[l]);return new Hh(Qw,i,o)}filter(t,r){const s=su(this),i=[],o=[];for(let l=0;l<this.length;l++){const f=this[l];f instanceof Error&&jg(`index ${l}`,f),t.call(r,f,l,this)&&(i.push(f),o.push(s[l]))}return new Hh(Qw,i,o)}map(t,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&jg(`index ${i}`,o),s.push(t.call(r,o,i,this))}return s}getValue(t){const r=su(this).indexOf(t);if(r===-1)return;const s=this[r];return s instanceof Error&&jg(`property ${JSON.stringify(t)}`,s.error),s}static fromItems(t,r){return new Hh(Qw,t,r)}};ad=new WeakMap;let ep=Hh;function uD(n){let e=Mn(n);return de(e.length<=jr,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:jr,offset:e.length}),e.length!==jr&&(e=Hr(wn([f2.slice(e.length%jr),e]))),e}class Vo{constructor(e,t,r,s){ne(this,"name");ne(this,"type");ne(this,"localName");ne(this,"dynamic");We(this,{name:e,type:t,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){Q(!1,e,this.localName,t)}}var Eo,Nu,od,gb;class d2{constructor(){ce(this,od);ce(this,Eo);ce(this,Nu);H(this,Eo,[]),H(this,Nu,0)}get data(){return wn(N(this,Eo))}get length(){return N(this,Nu)}appendWriter(e){return we(this,od,gb).call(this,Hr(e.data))}writeBytes(e){let t=Hr(e);const r=t.length%jr;return r&&(t=Hr(wn([t,f2.slice(r)]))),we(this,od,gb).call(this,t)}writeValue(e){return we(this,od,gb).call(this,uD(e))}writeUpdatableValue(){const e=N(this,Eo).length;return N(this,Eo).push(f2),H(this,Nu,N(this,Nu)+jr),t=>{N(this,Eo)[e]=uD(t)}}}Eo=new WeakMap,Nu=new WeakMap,od=new WeakSet,gb=function(e){return N(this,Eo).push(e),H(this,Nu,N(this,Nu)+e.length),e.length};var cs,ks,Tu,Ou,qc,cf,g2,uk;const iN=class iN{constructor(e,t,r){ce(this,cf);ne(this,"allowLoose");ce(this,cs);ce(this,ks);ce(this,Tu);ce(this,Ou);ce(this,qc);We(this,{allowLoose:!!t}),H(this,cs,Hr(e)),H(this,Tu,0),H(this,Ou,null),H(this,qc,r??1024),H(this,ks,0)}get data(){return Ne(N(this,cs))}get dataLength(){return N(this,cs).length}get consumed(){return N(this,ks)}get bytes(){return new Uint8Array(N(this,cs))}subReader(e){const t=new iN(N(this,cs).slice(N(this,ks)+e),this.allowLoose,N(this,qc));return H(t,Ou,this),t}readBytes(e,t){let r=we(this,cf,uk).call(this,0,e,!!t);return we(this,cf,g2).call(this,e),H(this,ks,N(this,ks)+r.length),r.slice(0,e)}readValue(){return VE(this.readBytes(jr))}readIndex(){return Sae(this.readBytes(jr))}};cs=new WeakMap,ks=new WeakMap,Tu=new WeakMap,Ou=new WeakMap,qc=new WeakMap,cf=new WeakSet,g2=function(e){var t;if(N(this,Ou))return we(t=N(this,Ou),cf,g2).call(t,e);H(this,Tu,N(this,Tu)+e),de(N(this,qc)<1||N(this,Tu)<=N(this,qc)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${N(this,qc)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Hr(N(this,cs)),offset:N(this,ks),length:e,info:{bytesRead:N(this,Tu),dataLength:this.dataLength}})},uk=function(e,t,r){let s=Math.ceil(t/jr)*jr;return N(this,ks)+s>N(this,cs).length&&(this.allowLoose&&r&&N(this,ks)+t<=N(this,cs).length?s=t:de(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Hr(N(this,cs)),length:N(this,cs).length,offset:N(this,ks)+s})),N(this,cs).slice(N(this,ks),N(this,ks)+s)};let p2=iN;function rE(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function HS(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function Kae(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");rE(n.outputLen),rE(n.blockLen)}function tp(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function fk(n,e){HS(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const DC=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hk=n=>n instanceof Uint8Array,Wae=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),UC=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),ua=(n,e)=>n<<32-e|n>>>e,Yae=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Yae)throw new Error("Non little-endian hardware is not supported");function Qae(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function GE(n){if(typeof n=="string"&&(n=Qae(n)),!hk(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function Zae(...n){const e=new Uint8Array(n.reduce((r,s)=>r+s.length,0));let t=0;return n.forEach(r=>{if(!hk(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}class jS{clone(){return this._cloneInto()}}function zS(n){const e=r=>n().update(GE(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Jae(n=32){if(DC&&typeof DC.getRandomValues=="function")return DC.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class dk extends jS{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Kae(e);const r=GE(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return tp(this),this.iHash.update(e),this}digestInto(e){tp(this),HS(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:l}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const pk=(n,e,t)=>new dk(n,e).update(t).digest();pk.create=(n,e)=>new dk(n,e);function Xae(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),l=Number(t&i),f=r?4:0,h=r?0:4;n.setUint32(e+f,o,r),n.setUint32(e+h,l,r)}class gk extends jS{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=UC(this.buffer)}update(e){tp(this);const{view:t,buffer:r,blockLen:s}=this;e=GE(e);const i=e.length;for(let o=0;o<i;){const l=Math.min(s-this.pos,i-o);if(l===s){const f=UC(e);for(;s<=i-o;o+=s)this.process(f,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){tp(this),fk(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let g=o;g<s;g++)t[g]=0;Xae(r,s-8,BigInt(this.length*8),i),this.process(r,0);const l=UC(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,p=this.get();if(h>p.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<h;g++)l.setUint32(4*g,p[g],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:i,destroyed:o,pos:l}=this;return e.length=s,e.pos=l,e.finished=i,e.destroyed=o,s%t&&e.buffer.set(r),e}}const eoe=(n,e,t)=>n&e^~n&t,toe=(n,e,t)=>n&e^n&t^e&t,noe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Oc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),xc=new Uint32Array(64);class roe extends gk{constructor(){super(64,32,8,!1),this.A=Oc[0]|0,this.B=Oc[1]|0,this.C=Oc[2]|0,this.D=Oc[3]|0,this.E=Oc[4]|0,this.F=Oc[5]|0,this.G=Oc[6]|0,this.H=Oc[7]|0}get(){const{A:e,B:t,C:r,D:s,E:i,F:o,G:l,H:f}=this;return[e,t,r,s,i,o,l,f]}set(e,t,r,s,i,o,l,f){this.A=e|0,this.B=t|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=l|0,this.H=f|0}process(e,t){for(let g=0;g<16;g++,t+=4)xc[g]=e.getUint32(t,!1);for(let g=16;g<64;g++){const y=xc[g-15],b=xc[g-2],v=ua(y,7)^ua(y,18)^y>>>3,E=ua(b,17)^ua(b,19)^b>>>10;xc[g]=E+xc[g-7]+v+xc[g-16]|0}let{A:r,B:s,C:i,D:o,E:l,F:f,G:h,H:p}=this;for(let g=0;g<64;g++){const y=ua(l,6)^ua(l,11)^ua(l,25),b=p+y+eoe(l,f,h)+noe[g]+xc[g]|0,E=(ua(r,2)^ua(r,13)^ua(r,22))+toe(r,s,i)|0;p=h,h=f,f=l,l=o+b|0,o=i,i=s,s=r,r=b+E|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,l=l+this.E|0,f=f+this.F|0,h=h+this.G|0,p=p+this.H|0,this.set(r,s,i,o,l,f,h,p)}roundClean(){xc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const mk=zS(()=>new roe),Zw=BigInt(2**32-1),m2=BigInt(32);function yk(n,e=!1){return e?{h:Number(n&Zw),l:Number(n>>m2&Zw)}:{h:Number(n>>m2&Zw)|0,l:Number(n&Zw)|0}}function wk(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:i,l:o}=yk(n[s],e);[t[s],r[s]]=[i,o]}return[t,r]}const soe=(n,e)=>BigInt(n>>>0)<<m2|BigInt(e>>>0),ioe=(n,e,t)=>n>>>t,aoe=(n,e,t)=>n<<32-t|e>>>t,ooe=(n,e,t)=>n>>>t|e<<32-t,coe=(n,e,t)=>n<<32-t|e>>>t,loe=(n,e,t)=>n<<64-t|e>>>t-32,uoe=(n,e,t)=>n>>>t-32|e<<64-t,foe=(n,e)=>e,hoe=(n,e)=>n,bk=(n,e,t)=>n<<t|e>>>32-t,Ek=(n,e,t)=>e<<t|n>>>32-t,vk=(n,e,t)=>e<<t-32|n>>>64-t,Ak=(n,e,t)=>n<<t-32|e>>>64-t;function doe(n,e,t,r){const s=(e>>>0)+(r>>>0);return{h:n+t+(s/2**32|0)|0,l:s|0}}const poe=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),goe=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,moe=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),yoe=(n,e,t,r,s)=>e+t+r+s+(n/2**32|0)|0,woe=(n,e,t,r,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),boe=(n,e,t,r,s,i)=>e+t+r+s+i+(n/2**32|0)|0,ot={fromBig:yk,split:wk,toBig:soe,shrSH:ioe,shrSL:aoe,rotrSH:ooe,rotrSL:coe,rotrBH:loe,rotrBL:uoe,rotr32H:foe,rotr32L:hoe,rotlSH:bk,rotlSL:Ek,rotlBH:vk,rotlBL:Ak,add:doe,add3L:poe,add3H:goe,add4L:moe,add4H:yoe,add5H:boe,add5L:woe},[Eoe,voe]=ot.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Ic=new Uint32Array(80),Rc=new Uint32Array(80);class Aoe extends gk{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:s,Ch:i,Cl:o,Dh:l,Dl:f,Eh:h,El:p,Fh:g,Fl:y,Gh:b,Gl:v,Hh:E,Hl:A}=this;return[e,t,r,s,i,o,l,f,h,p,g,y,b,v,E,A]}set(e,t,r,s,i,o,l,f,h,p,g,y,b,v,E,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=l|0,this.Dl=f|0,this.Eh=h|0,this.El=p|0,this.Fh=g|0,this.Fl=y|0,this.Gh=b|0,this.Gl=v|0,this.Hh=E|0,this.Hl=A|0}process(e,t){for(let T=0;T<16;T++,t+=4)Ic[T]=e.getUint32(t),Rc[T]=e.getUint32(t+=4);for(let T=16;T<80;T++){const k=Ic[T-15]|0,R=Rc[T-15]|0,D=ot.rotrSH(k,R,1)^ot.rotrSH(k,R,8)^ot.shrSH(k,R,7),F=ot.rotrSL(k,R,1)^ot.rotrSL(k,R,8)^ot.shrSL(k,R,7),$=Ic[T-2]|0,B=Rc[T-2]|0,q=ot.rotrSH($,B,19)^ot.rotrBH($,B,61)^ot.shrSH($,B,6),j=ot.rotrSL($,B,19)^ot.rotrBL($,B,61)^ot.shrSL($,B,6),W=ot.add4L(F,j,Rc[T-7],Rc[T-16]),ie=ot.add4H(W,D,q,Ic[T-7],Ic[T-16]);Ic[T]=ie|0,Rc[T]=W|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:l,Cl:f,Dh:h,Dl:p,Eh:g,El:y,Fh:b,Fl:v,Gh:E,Gl:A,Hh:S,Hl:O}=this;for(let T=0;T<80;T++){const k=ot.rotrSH(g,y,14)^ot.rotrSH(g,y,18)^ot.rotrBH(g,y,41),R=ot.rotrSL(g,y,14)^ot.rotrSL(g,y,18)^ot.rotrBL(g,y,41),D=g&b^~g&E,F=y&v^~y&A,$=ot.add5L(O,R,F,voe[T],Rc[T]),B=ot.add5H($,S,k,D,Eoe[T],Ic[T]),q=$|0,j=ot.rotrSH(r,s,28)^ot.rotrBH(r,s,34)^ot.rotrBH(r,s,39),W=ot.rotrSL(r,s,28)^ot.rotrBL(r,s,34)^ot.rotrBL(r,s,39),ie=r&i^r&l^i&l,ee=s&o^s&f^o&f;S=E|0,O=A|0,E=b|0,A=v|0,b=g|0,v=y|0,{h:g,l:y}=ot.add(h|0,p|0,B|0,q|0),h=l|0,p=f|0,l=i|0,f=o|0,i=r|0,o=s|0;const x=ot.add3L(q,W,ee);r=ot.add3H(x,B,j,ie),s=x|0}({h:r,l:s}=ot.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ot.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:l,l:f}=ot.add(this.Ch|0,this.Cl|0,l|0,f|0),{h,l:p}=ot.add(this.Dh|0,this.Dl|0,h|0,p|0),{h:g,l:y}=ot.add(this.Eh|0,this.El|0,g|0,y|0),{h:b,l:v}=ot.add(this.Fh|0,this.Fl|0,b|0,v|0),{h:E,l:A}=ot.add(this.Gh|0,this.Gl|0,E|0,A|0),{h:S,l:O}=ot.add(this.Hh|0,this.Hl|0,S|0,O|0),this.set(r,s,i,o,l,f,h,p,g,y,b,v,E,A,S,O)}roundClean(){Ic.fill(0),Rc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Coe=zS(()=>new Aoe);function _oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const fD=_oe();fD.crypto||fD.msCrypto;function Soe(n){switch(n){case"sha256":return mk.create();case"sha512":return Coe.create()}Q(!1,"invalid hashing algorithm name","algorithm",n)}const[Ck,_k,Sk]=[[],[],[]],Noe=BigInt(0),zg=BigInt(1),Toe=BigInt(2),Ooe=BigInt(7),xoe=BigInt(256),Ioe=BigInt(113);for(let n=0,e=zg,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],Ck.push(2*(5*r+t)),_k.push((n+1)*(n+2)/2%64);let s=Noe;for(let i=0;i<7;i++)e=(e<<zg^(e>>Ooe)*Ioe)%xoe,e&Toe&&(s^=zg<<(zg<<BigInt(i))-zg);Sk.push(s)}const[Roe,Poe]=wk(Sk,!0),hD=(n,e,t)=>t>32?vk(n,e,t):bk(n,e,t),dD=(n,e,t)=>t>32?Ak(n,e,t):Ek(n,e,t);function Doe(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const l=(o+8)%10,f=(o+2)%10,h=t[f],p=t[f+1],g=hD(h,p,1)^t[l],y=dD(h,p,1)^t[l+1];for(let b=0;b<50;b+=10)n[o+b]^=g,n[o+b+1]^=y}let s=n[2],i=n[3];for(let o=0;o<24;o++){const l=_k[o],f=hD(s,i,l),h=dD(s,i,l),p=Ck[o];s=n[p],i=n[p+1],n[p]=f,n[p+1]=h}for(let o=0;o<50;o+=10){for(let l=0;l<10;l++)t[l]=n[o+l];for(let l=0;l<10;l++)n[o+l]^=~t[(l+2)%10]&t[(l+4)%10]}n[0]^=Roe[r],n[1]^=Poe[r]}t.fill(0)}class qS extends jS{constructor(e,t,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,rE(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Wae(this.state)}keccak(){Doe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){tp(this);const{blockLen:t,state:r}=this;e=GE(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let l=0;l<o;l++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,(t&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){tp(this,!1),HS(e),this.finish();const t=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return rE(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(fk(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new qS(t,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Uoe=(n,e,t)=>zS(()=>new qS(e,n,t)),koe=Uoe(1,136,256/8);let Nk=!1;const Tk=function(n){return koe(n)};let Ok=Tk;function xn(n){const e=ut(n,"data");return Ne(Ok(e))}xn._=Tk;xn.lock=function(){Nk=!0};xn.register=function(n){if(Nk)throw new TypeError("keccak256 is locked");Ok=n};Object.freeze(xn);const xk=function(n){return Soe("sha256").update(n).digest()};let Ik=xk,Rk=!1;function mp(n){const e=ut(n,"data");return Ne(Ik(e))}mp._=xk;mp.lock=function(){Rk=!0};mp.register=function(n){if(Rk)throw new Error("sha256 is locked");Ik=n};Object.freeze(mp);Object.freeze(mp);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pk=BigInt(0),KE=BigInt(1),Boe=BigInt(2),WE=n=>n instanceof Uint8Array,Moe=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function np(n){if(!WE(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=Moe[n[t]];return e}function Dk(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function VS(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function rp(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){const s=r*2,i=n.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function qu(n){return VS(np(n))}function GS(n){if(!WE(n))throw new Error("Uint8Array expected");return VS(np(Uint8Array.from(n).reverse()))}function sp(n,e){return rp(n.toString(16).padStart(e*2,"0"))}function KS(n,e){return sp(n,e).reverse()}function Loe(n){return rp(Dk(n))}function Di(n,e,t){let r;if(typeof e=="string")try{r=rp(e)}catch(i){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${i}`)}else if(WE(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const s=r.length;if(typeof t=="number"&&s!==t)throw new Error(`${n} expected ${t} bytes, got ${s}`);return r}function uy(...n){const e=new Uint8Array(n.reduce((r,s)=>r+s.length,0));let t=0;return n.forEach(r=>{if(!WE(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}function $oe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function Foe(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Hoe(n){let e;for(e=0;n>Pk;n>>=KE,e+=1);return e}function joe(n,e){return n>>BigInt(e)&KE}const zoe=(n,e,t)=>n|(t?KE:Pk)<<BigInt(e),WS=n=>(Boe<<BigInt(n-1))-KE,kC=n=>new Uint8Array(n),pD=n=>Uint8Array.from(n);function Uk(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=kC(n),s=kC(n),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},l=(...g)=>t(s,r,...g),f=(g=kC())=>{s=l(pD([0]),g),r=l(),g.length!==0&&(s=l(pD([1]),g),r=l())},h=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const y=[];for(;g<e;){r=l();const b=r.slice();y.push(b),g+=r.length}return uy(...y)};return(g,y)=>{o(),f(g);let b;for(;!(b=y(h()));)f();return o(),b}}const qoe={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Xy(n,e,t={}){const r=(s,i,o)=>{const l=qoe[i];if(typeof l!="function")throw new Error(`Invalid validator "${i}", expected function`);const f=n[s];if(!(o&&f===void 0)&&!l(f,n))throw new Error(`Invalid param ${String(s)}=${f} (${typeof f}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(t))r(s,i,!0);return n}const Voe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:joe,bitLen:Hoe,bitMask:WS,bitSet:zoe,bytesToHex:np,bytesToNumberBE:qu,bytesToNumberLE:GS,concatBytes:uy,createHmacDrbg:Uk,ensureBytes:Di,equalBytes:$oe,hexToBytes:rp,hexToNumber:VS,numberToBytesBE:sp,numberToBytesLE:KS,numberToHexUnpadded:Dk,numberToVarBytesBE:Loe,utf8ToBytes:Foe,validateObject:Xy},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const er=BigInt(0),Cn=BigInt(1),iu=BigInt(2),Goe=BigInt(3),y2=BigInt(4),gD=BigInt(5),mD=BigInt(8);BigInt(9);BigInt(16);function ds(n,e){const t=n%e;return t>=er?t:e+t}function Koe(n,e,t){if(t<=er||e<er)throw new Error("Expected power/modulo > 0");if(t===Cn)return er;let r=Cn;for(;e>er;)e&Cn&&(r=r*n%t),n=n*n%t,e>>=Cn;return r}function si(n,e,t){let r=n;for(;e-- >er;)r*=r,r%=t;return r}function w2(n,e){if(n===er||e<=er)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=ds(n,e),r=e,s=er,i=Cn;for(;t!==er;){const l=r/t,f=r%t,h=s-i*l;r=t,t=f,s=i,i=h}if(r!==Cn)throw new Error("invert: does not exist");return ds(s,e)}function Woe(n){const e=(n-Cn)/iu;let t,r,s;for(t=n-Cn,r=0;t%iu===er;t/=iu,r++);for(s=iu;s<n&&Koe(s,e,n)!==n-Cn;s++);if(r===1){const o=(n+Cn)/y2;return function(f,h){const p=f.pow(h,o);if(!f.eql(f.sqr(p),h))throw new Error("Cannot find square root");return p}}const i=(t+Cn)/iu;return function(l,f){if(l.pow(f,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let h=r,p=l.pow(l.mul(l.ONE,s),t),g=l.pow(f,i),y=l.pow(f,t);for(;!l.eql(y,l.ONE);){if(l.eql(y,l.ZERO))return l.ZERO;let b=1;for(let E=l.sqr(y);b<h&&!l.eql(E,l.ONE);b++)E=l.sqr(E);const v=l.pow(p,Cn<<BigInt(h-b-1));p=l.sqr(v),g=l.mul(g,v),y=l.mul(y,p),h=b}return g}}function Yoe(n){if(n%y2===Goe){const e=(n+Cn)/y2;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(n%mD===gD){const e=(n-gD)/mD;return function(r,s){const i=r.mul(s,iu),o=r.pow(i,e),l=r.mul(s,o),f=r.mul(r.mul(l,iu),o),h=r.mul(l,r.sub(f,r.ONE));if(!r.eql(r.sqr(h),s))throw new Error("Cannot find square root");return h}}return Woe(n)}const Qoe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Zoe(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Qoe.reduce((r,s)=>(r[s]="function",r),e);return Xy(n,t)}function Joe(n,e,t){if(t<er)throw new Error("Expected power > 0");if(t===er)return n.ONE;if(t===Cn)return e;let r=n.ONE,s=e;for(;t>er;)t&Cn&&(r=n.mul(r,s)),s=n.sqr(s),t>>=Cn;return r}function Xoe(n,e){const t=new Array(e.length),r=e.reduce((i,o,l)=>n.is0(o)?i:(t[l]=i,n.mul(i,o)),n.ONE),s=n.inv(r);return e.reduceRight((i,o,l)=>n.is0(o)?i:(t[l]=n.mul(i,t[l]),n.mul(i,o)),s),t}function kk(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function ece(n,e,t=!1,r={}){if(n<=er)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:s,nByteLength:i}=kk(n,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Yoe(n),l=Object.freeze({ORDER:n,BITS:s,BYTES:i,MASK:WS(s),ZERO:er,ONE:Cn,create:f=>ds(f,n),isValid:f=>{if(typeof f!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);return er<=f&&f<n},is0:f=>f===er,isOdd:f=>(f&Cn)===Cn,neg:f=>ds(-f,n),eql:(f,h)=>f===h,sqr:f=>ds(f*f,n),add:(f,h)=>ds(f+h,n),sub:(f,h)=>ds(f-h,n),mul:(f,h)=>ds(f*h,n),pow:(f,h)=>Joe(l,f,h),div:(f,h)=>ds(f*w2(h,n),n),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>w2(f,n),sqrt:r.sqrt||(f=>o(l,f)),invertBatch:f=>Xoe(l,f),cmov:(f,h,p)=>p?h:f,toBytes:f=>t?KS(f,i):sp(f,i),fromBytes:f=>{if(f.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${f.length}`);return t?GS(f):qu(f)}});return Object.freeze(l)}function Bk(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function Mk(n){const e=Bk(n);return e+Math.ceil(e/2)}function tce(n,e,t=!1){const r=n.length,s=Bk(e),i=Mk(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=t?qu(n):GS(n),l=ds(o,e-Cn)+Cn;return t?KS(l,s):sp(l,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nce=BigInt(0),BC=BigInt(1);function rce(n,e){const t=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:t,unsafeLadder(s,i){let o=n.ZERO,l=s;for(;i>nce;)i&BC&&(o=o.add(l)),l=l.double(),i>>=BC;return o},precomputeWindow(s,i){const{windows:o,windowSize:l}=r(i),f=[];let h=s,p=h;for(let g=0;g<o;g++){p=h,f.push(p);for(let y=1;y<l;y++)p=p.add(h),f.push(p);h=p.double()}return f},wNAF(s,i,o){const{windows:l,windowSize:f}=r(s);let h=n.ZERO,p=n.BASE;const g=BigInt(2**s-1),y=2**s,b=BigInt(s);for(let v=0;v<l;v++){const E=v*f;let A=Number(o&g);o>>=b,A>f&&(A-=y,o+=BC);const S=E,O=E+Math.abs(A)-1,T=v%2!==0,k=A<0;A===0?p=p.add(t(T,i[S])):h=h.add(t(k,i[O]))}return{p:h,f:p}},wNAFCached(s,i,o,l){const f=s._WINDOW_SIZE||1;let h=i.get(s);return h||(h=this.precomputeWindow(s,f),f!==1&&i.set(s,l(h))),this.wNAF(f,h,o)}}}function Lk(n){return Zoe(n.Fp),Xy(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...kk(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function sce(n){const e=Lk(n);Xy(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:s}=e;if(t){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:ice,hexToBytes:ace}=Voe,yu={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=yu;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:ice(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=yu,t=typeof n=="string"?ace(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=yu._parseInt(t.subarray(2)),{d:o,l}=yu._parseInt(i);if(l.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(n){const e=h=>Number.parseInt(h[0],16)&8?"00"+h:h,t=h=>{const p=h.toString(16);return p.length&1?`0${p}`:p},r=e(t(n.s)),s=e(t(n.r)),i=r.length/2,o=s.length/2,l=t(i),f=t(o);return`30${t(o+i+4)}02${f}${s}02${l}${r}`}},xo=BigInt(0),pi=BigInt(1);BigInt(2);const yD=BigInt(3);BigInt(4);function oce(n){const e=sce(n),{Fp:t}=e,r=e.toBytes||((v,E,A)=>{const S=E.toAffine();return uy(Uint8Array.from([4]),t.toBytes(S.x),t.toBytes(S.y))}),s=e.fromBytes||(v=>{const E=v.subarray(1),A=t.fromBytes(E.subarray(0,t.BYTES)),S=t.fromBytes(E.subarray(t.BYTES,2*t.BYTES));return{x:A,y:S}});function i(v){const{a:E,b:A}=e,S=t.sqr(v),O=t.mul(S,v);return t.add(t.add(O,t.mul(v,E)),A)}if(!t.eql(t.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(v){return typeof v=="bigint"&&xo<v&&v<e.n}function l(v){if(!o(v))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function f(v){const{allowedPrivateKeyLengths:E,nByteLength:A,wrapPrivateKey:S,n:O}=e;if(E&&typeof v!="bigint"){if(v instanceof Uint8Array&&(v=np(v)),typeof v!="string"||!E.includes(v.length))throw new Error("Invalid key");v=v.padStart(A*2,"0")}let T;try{T=typeof v=="bigint"?v:qu(Di("private key",v,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof v}`)}return S&&(T=ds(T,O)),l(T),T}const h=new Map;function p(v){if(!(v instanceof g))throw new Error("ProjectivePoint expected")}class g{constructor(E,A,S){if(this.px=E,this.py=A,this.pz=S,E==null||!t.isValid(E))throw new Error("x required");if(A==null||!t.isValid(A))throw new Error("y required");if(S==null||!t.isValid(S))throw new Error("z required")}static fromAffine(E){const{x:A,y:S}=E||{};if(!E||!t.isValid(A)||!t.isValid(S))throw new Error("invalid affine point");if(E instanceof g)throw new Error("projective point not allowed");const O=T=>t.eql(T,t.ZERO);return O(A)&&O(S)?g.ZERO:new g(A,S,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){const A=t.invertBatch(E.map(S=>S.pz));return E.map((S,O)=>S.toAffine(A[O])).map(g.fromAffine)}static fromHex(E){const A=g.fromAffine(s(Di("pointHex",E)));return A.assertValidity(),A}static fromPrivateKey(E){return g.BASE.multiply(f(E))}_setWindowSize(E){this._WINDOW_SIZE=E,h.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:E,y:A}=this.toAffine();if(!t.isValid(E)||!t.isValid(A))throw new Error("bad point: x or y not FE");const S=t.sqr(A),O=i(E);if(!t.eql(S,O))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:E}=this.toAffine();if(t.isOdd)return!t.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){p(E);const{px:A,py:S,pz:O}=this,{px:T,py:k,pz:R}=E,D=t.eql(t.mul(A,R),t.mul(T,O)),F=t.eql(t.mul(S,R),t.mul(k,O));return D&&F}negate(){return new g(this.px,t.neg(this.py),this.pz)}double(){const{a:E,b:A}=e,S=t.mul(A,yD),{px:O,py:T,pz:k}=this;let R=t.ZERO,D=t.ZERO,F=t.ZERO,$=t.mul(O,O),B=t.mul(T,T),q=t.mul(k,k),j=t.mul(O,T);return j=t.add(j,j),F=t.mul(O,k),F=t.add(F,F),R=t.mul(E,F),D=t.mul(S,q),D=t.add(R,D),R=t.sub(B,D),D=t.add(B,D),D=t.mul(R,D),R=t.mul(j,R),F=t.mul(S,F),q=t.mul(E,q),j=t.sub($,q),j=t.mul(E,j),j=t.add(j,F),F=t.add($,$),$=t.add(F,$),$=t.add($,q),$=t.mul($,j),D=t.add(D,$),q=t.mul(T,k),q=t.add(q,q),$=t.mul(q,j),R=t.sub(R,$),F=t.mul(q,B),F=t.add(F,F),F=t.add(F,F),new g(R,D,F)}add(E){p(E);const{px:A,py:S,pz:O}=this,{px:T,py:k,pz:R}=E;let D=t.ZERO,F=t.ZERO,$=t.ZERO;const B=e.a,q=t.mul(e.b,yD);let j=t.mul(A,T),W=t.mul(S,k),ie=t.mul(O,R),ee=t.add(A,S),x=t.add(T,k);ee=t.mul(ee,x),x=t.add(j,W),ee=t.sub(ee,x),x=t.add(A,O);let _=t.add(T,R);return x=t.mul(x,_),_=t.add(j,ie),x=t.sub(x,_),_=t.add(S,O),D=t.add(k,R),_=t.mul(_,D),D=t.add(W,ie),_=t.sub(_,D),$=t.mul(B,x),D=t.mul(q,ie),$=t.add(D,$),D=t.sub(W,$),$=t.add(W,$),F=t.mul(D,$),W=t.add(j,j),W=t.add(W,j),ie=t.mul(B,ie),x=t.mul(q,x),W=t.add(W,ie),ie=t.sub(j,ie),ie=t.mul(B,ie),x=t.add(x,ie),j=t.mul(W,x),F=t.add(F,j),j=t.mul(_,x),D=t.mul(ee,D),D=t.sub(D,j),j=t.mul(ee,W),$=t.mul(_,$),$=t.add($,j),new g(D,F,$)}subtract(E){return this.add(E.negate())}is0(){return this.equals(g.ZERO)}wNAF(E){return b.wNAFCached(this,h,E,A=>{const S=t.invertBatch(A.map(O=>O.pz));return A.map((O,T)=>O.toAffine(S[T])).map(g.fromAffine)})}multiplyUnsafe(E){const A=g.ZERO;if(E===xo)return A;if(l(E),E===pi)return this;const{endo:S}=e;if(!S)return b.unsafeLadder(this,E);let{k1neg:O,k1:T,k2neg:k,k2:R}=S.splitScalar(E),D=A,F=A,$=this;for(;T>xo||R>xo;)T&pi&&(D=D.add($)),R&pi&&(F=F.add($)),$=$.double(),T>>=pi,R>>=pi;return O&&(D=D.negate()),k&&(F=F.negate()),F=new g(t.mul(F.px,S.beta),F.py,F.pz),D.add(F)}multiply(E){l(E);let A=E,S,O;const{endo:T}=e;if(T){const{k1neg:k,k1:R,k2neg:D,k2:F}=T.splitScalar(A);let{p:$,f:B}=this.wNAF(R),{p:q,f:j}=this.wNAF(F);$=b.constTimeNegate(k,$),q=b.constTimeNegate(D,q),q=new g(t.mul(q.px,T.beta),q.py,q.pz),S=$.add(q),O=B.add(j)}else{const{p:k,f:R}=this.wNAF(A);S=k,O=R}return g.normalizeZ([S,O])[0]}multiplyAndAddUnsafe(E,A,S){const O=g.BASE,T=(R,D)=>D===xo||D===pi||!R.equals(O)?R.multiplyUnsafe(D):R.multiply(D),k=T(this,A).add(T(E,S));return k.is0()?void 0:k}toAffine(E){const{px:A,py:S,pz:O}=this,T=this.is0();E==null&&(E=T?t.ONE:t.inv(O));const k=t.mul(A,E),R=t.mul(S,E),D=t.mul(O,E);if(T)return{x:t.ZERO,y:t.ZERO};if(!t.eql(D,t.ONE))throw new Error("invZ was invalid");return{x:k,y:R}}isTorsionFree(){const{h:E,isTorsionFree:A}=e;if(E===pi)return!0;if(A)return A(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:E,clearCofactor:A}=e;return E===pi?this:A?A(g,this):this.multiplyUnsafe(e.h)}toRawBytes(E=!0){return this.assertValidity(),r(g,this,E)}toHex(E=!0){return np(this.toRawBytes(E))}}g.BASE=new g(e.Gx,e.Gy,t.ONE),g.ZERO=new g(t.ZERO,t.ONE,t.ZERO);const y=e.nBitLength,b=rce(g,e.endo?Math.ceil(y/2):y);return{CURVE:e,ProjectivePoint:g,normPrivateKeyToScalar:f,weierstrassEquation:i,isWithinCurveOrder:o}}function cce(n){const e=Lk(n);return Xy(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function lce(n){const e=cce(n),{Fp:t,n:r}=e,s=t.BYTES+1,i=2*t.BYTES+1;function o(x){return xo<x&&x<t.ORDER}function l(x){return ds(x,r)}function f(x){return w2(x,r)}const{ProjectivePoint:h,normPrivateKeyToScalar:p,weierstrassEquation:g,isWithinCurveOrder:y}=oce({...e,toBytes(x,_,M){const V=_.toAffine(),K=t.toBytes(V.x),I=uy;return M?I(Uint8Array.from([_.hasEvenY()?2:3]),K):I(Uint8Array.from([4]),K,t.toBytes(V.y))},fromBytes(x){const _=x.length,M=x[0],V=x.subarray(1);if(_===s&&(M===2||M===3)){const K=qu(V);if(!o(K))throw new Error("Point is not on curve");const I=g(K);let G=t.sqrt(I);const X=(G&pi)===pi;return(M&1)===1!==X&&(G=t.neg(G)),{x:K,y:G}}else if(_===i&&M===4){const K=t.fromBytes(V.subarray(0,t.BYTES)),I=t.fromBytes(V.subarray(t.BYTES,2*t.BYTES));return{x:K,y:I}}else throw new Error(`Point of length ${_} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),b=x=>np(sp(x,e.nByteLength));function v(x){const _=r>>pi;return x>_}function E(x){return v(x)?l(-x):x}const A=(x,_,M)=>qu(x.slice(_,M));class S{constructor(_,M,V){this.r=_,this.s=M,this.recovery=V,this.assertValidity()}static fromCompact(_){const M=e.nByteLength;return _=Di("compactSignature",_,M*2),new S(A(_,0,M),A(_,M,2*M))}static fromDER(_){const{r:M,s:V}=yu.toSig(Di("DER",_));return new S(M,V)}assertValidity(){if(!y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(_){return new S(this.r,this.s,_)}recoverPublicKey(_){const{r:M,s:V,recovery:K}=this,I=F(Di("msgHash",_));if(K==null||![0,1,2,3].includes(K))throw new Error("recovery id invalid");const G=K===2||K===3?M+e.n:M;if(G>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const X=(K&1)===0?"02":"03",re=h.fromHex(X+b(G)),le=f(G),ge=l(-I*le),me=l(V*le),ze=h.BASE.multiplyAndAddUnsafe(re,ge,me);if(!ze)throw new Error("point at infinify");return ze.assertValidity(),ze}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return rp(this.toDERHex())}toDERHex(){return yu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return rp(this.toCompactHex())}toCompactHex(){return b(this.r)+b(this.s)}}const O={isValidPrivateKey(x){try{return p(x),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const x=Mk(e.n);return tce(e.randomBytes(x),e.n)},precompute(x=8,_=h.BASE){return _._setWindowSize(x),_.multiply(BigInt(3)),_}};function T(x,_=!0){return h.fromPrivateKey(x).toRawBytes(_)}function k(x){const _=x instanceof Uint8Array,M=typeof x=="string",V=(_||M)&&x.length;return _?V===s||V===i:M?V===2*s||V===2*i:x instanceof h}function R(x,_,M=!0){if(k(x))throw new Error("first arg must be private key");if(!k(_))throw new Error("second arg must be public key");return h.fromHex(_).multiply(p(x)).toRawBytes(M)}const D=e.bits2int||function(x){const _=qu(x),M=x.length*8-e.nBitLength;return M>0?_>>BigInt(M):_},F=e.bits2int_modN||function(x){return l(D(x))},$=WS(e.nBitLength);function B(x){if(typeof x!="bigint")throw new Error("bigint expected");if(!(xo<=x&&x<$))throw new Error(`bigint expected < 2^${e.nBitLength}`);return sp(x,e.nByteLength)}function q(x,_,M=j){if(["recovered","canonical"].some(qe=>qe in M))throw new Error("sign() legacy options not supported");const{hash:V,randomBytes:K}=e;let{lowS:I,prehash:G,extraEntropy:X}=M;I==null&&(I=!0),x=Di("msgHash",x),G&&(x=Di("prehashed msgHash",V(x)));const re=F(x),le=p(_),ge=[B(le),B(re)];if(X!=null){const qe=X===!0?K(t.BYTES):X;ge.push(Di("extraEntropy",qe))}const me=uy(...ge),ze=re;function $e(qe){const Ct=D(qe);if(!y(Ct))return;const rn=f(Ct),$n=h.BASE.multiply(Ct).toAffine(),_n=l($n.x);if(_n===xo)return;const nr=l(rn*l(ze+_n*le));if(nr===xo)return;let Go=($n.x===_n?0:2)|Number($n.y&pi),bf=nr;return I&&v(nr)&&(bf=E(nr),Go^=1),new S(_n,bf,Go)}return{seed:me,k2sig:$e}}const j={lowS:e.lowS,prehash:!1},W={lowS:e.lowS,prehash:!1};function ie(x,_,M=j){const{seed:V,k2sig:K}=q(x,_,M),I=e;return Uk(I.hash.outputLen,I.nByteLength,I.hmac)(V,K)}h.BASE._setWindowSize(8);function ee(x,_,M,V=W){var $n;const K=x;if(_=Di("msgHash",_),M=Di("publicKey",M),"strict"in V)throw new Error("options.strict was renamed to lowS");const{lowS:I,prehash:G}=V;let X,re;try{if(typeof K=="string"||K instanceof Uint8Array)try{X=S.fromDER(K)}catch(_n){if(!(_n instanceof yu.Err))throw _n;X=S.fromCompact(K)}else if(typeof K=="object"&&typeof K.r=="bigint"&&typeof K.s=="bigint"){const{r:_n,s:nr}=K;X=new S(_n,nr)}else throw new Error("PARSE");re=h.fromHex(M)}catch(_n){if(_n.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(I&&X.hasHighS())return!1;G&&(_=e.hash(_));const{r:le,s:ge}=X,me=F(_),ze=f(ge),$e=l(me*ze),qe=l(le*ze),Ct=($n=h.BASE.multiplyAndAddUnsafe(re,$e,qe))==null?void 0:$n.toAffine();return Ct?l(Ct.x)===le:!1}return{CURVE:e,getPublicKey:T,getSharedSecret:R,sign:ie,verify:ee,ProjectivePoint:h,Signature:S,utils:O}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function uce(n){return{hash:n,hmac:(e,...t)=>pk(n,e,Zae(...t)),randomBytes:Jae}}function fce(n,e){const t=r=>lce({...n,...uce(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $k=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),wD=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),hce=BigInt(1),b2=BigInt(2),bD=(n,e)=>(n+e/b2)/e;function dce(n){const e=$k,t=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),l=BigInt(44),f=BigInt(88),h=n*n*n%e,p=h*h*n%e,g=si(p,t,e)*p%e,y=si(g,t,e)*p%e,b=si(y,b2,e)*h%e,v=si(b,s,e)*b%e,E=si(v,i,e)*v%e,A=si(E,l,e)*E%e,S=si(A,f,e)*A%e,O=si(S,l,e)*E%e,T=si(O,t,e)*p%e,k=si(T,o,e)*v%e,R=si(k,r,e)*h%e,D=si(R,b2,e);if(!E2.eql(E2.sqr(D),n))throw new Error("Cannot find square root");return D}const E2=ece($k,void 0,void 0,{sqrt:dce}),Dc=fce({a:BigInt(0),b:BigInt(7),Fp:E2,n:wD,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=wD,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-hce*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),l=bD(i*n,e),f=bD(-r*n,e);let h=ds(n-l*t-f*s,e),p=ds(-l*r-f*i,e);const g=h>o,y=p>o;if(g&&(h=e-h),y&&(p=e-p),h>o||p>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:g,k1:h,k2neg:y,k2:p}}}},mk);BigInt(0);Dc.ProjectivePoint;const fy="0x0000000000000000000000000000000000000000",ED="0x0000000000000000000000000000000000000000000000000000000000000000",vD=BigInt(0),AD=BigInt(1),CD=BigInt(2),_D=BigInt(27),SD=BigInt(28),Jw=BigInt(35),Nh={};function ND(n){return Ho(Mn(n),32)}var cd,ma,ld,xu;const Pi=class Pi{constructor(e,t,r,s){ce(this,cd);ce(this,ma);ce(this,ld);ce(this,xu);Zy(e,Nh,"Signature"),H(this,cd,t),H(this,ma,r),H(this,ld,s),H(this,xu,null)}get r(){return N(this,cd)}set r(e){Q(Yh(e)===32,"invalid r","value",e),H(this,cd,Ne(e))}get s(){return Q(parseInt(N(this,ma).substring(0,3))<8,"non-canonical s; use ._s","s",N(this,ma)),N(this,ma)}set s(e){Q(Yh(e)===32,"invalid s","value",e),H(this,ma,Ne(e))}get _s(){return N(this,ma)}isValid(){return parseInt(N(this,ma).substring(0,3))<8}get v(){return N(this,ld)}set v(e){const t=it(e,"value");Q(t===27||t===28,"invalid v","v",e),H(this,ld,t)}get networkV(){return N(this,xu)}get legacyChainId(){const e=this.networkV;return e==null?null:Pi.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=ut(this.s);return this.yParity&&(e[0]|=128),Ne(e)}get compactSerialized(){return wn([this.r,this.yParityAndS])}get serialized(){return wn([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Pi(Nh,this.r,this._s,this.v);return this.networkV&&H(e,xu,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=ke(e,"v");return t==_D||t==SD?vD:(Q(t>=Jw,"invalid EIP-155 v","v",e),(t-Jw)/CD)}static getChainIdV(e,t){return ke(e)*CD+BigInt(35+t-27)}static getNormalizedV(e){const t=ke(e);return t===vD||t===_D?27:t===AD||t===SD?28:(Q(t>=Jw,"invalid v","v",e),t&AD?27:28)}static from(e){function t(h,p){Q(h,p,"signature",e)}if(e==null)return new Pi(Nh,ED,ED,27);if(typeof e=="string"){const h=ut(e,"signature");if(h.length===64){const p=Ne(h.slice(0,32)),g=h.slice(32,64),y=g[0]&128?28:27;return g[0]&=127,new Pi(Nh,p,Ne(g),y)}if(h.length===65){const p=Ne(h.slice(0,32)),g=Ne(h.slice(32,64)),y=Pi.getNormalizedV(h[64]);return new Pi(Nh,p,g,y)}t(!1,"invalid raw signature length")}if(e instanceof Pi)return e.clone();const r=e.r;t(r!=null,"missing r");const s=ND(r),i=function(h,p){if(h!=null)return ND(h);if(p!=null){t(Xt(p,32),"invalid yParityAndS");const g=ut(p);return g[0]&=127,Ne(g)}t(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:l}=function(h,p,g){if(h!=null){const y=ke(h);return{networkV:y>=Jw?y:void 0,v:Pi.getNormalizedV(y)}}if(p!=null)return t(Xt(p,32),"invalid yParityAndS"),{v:ut(p)[0]&128?28:27};if(g!=null){switch(it(g,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),f=new Pi(Nh,s,i,l);return o&&H(f,xu,o),t(e.yParity==null||it(e.yParity,"sig.yParity")===f.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===f.yParityAndS,"yParityAndS mismatch"),f}};cd=new WeakMap,ma=new WeakMap,ld=new WeakMap,xu=new WeakMap;let ys=Pi;var vo;const au=class au{constructor(e){ce(this,vo);Q(Yh(e)===32,"invalid private key","privateKey","[REDACTED]"),H(this,vo,Ne(e))}get privateKey(){return N(this,vo)}get publicKey(){return au.computePublicKey(N(this,vo))}get compressedPublicKey(){return au.computePublicKey(N(this,vo),!0)}sign(e){Q(Yh(e)===32,"invalid digest length","digest",e);const t=Dc.sign(Hr(e),Hr(N(this,vo)),{lowS:!0});return ys.from({r:wl(t.r,32),s:wl(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=au.computePublicKey(e);return Ne(Dc.getSharedSecret(Hr(N(this,vo)),ut(t),!1))}static computePublicKey(e,t){let r=ut(e,"key");if(r.length===32){const i=Dc.getPublicKey(r,!!t);return Ne(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=Dc.ProjectivePoint.fromHex(r);return Ne(s.toRawBytes(t))}static recoverPublicKey(e,t){Q(Yh(e)===32,"invalid digest length","digest",e);const r=ys.from(t);let s=Dc.Signature.fromCompact(Hr(wn([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(Hr(e));return Q(i!=null,"invalid signature for digest","signature",t),"0x"+i.toHex(!1)}static addPoints(e,t,r){const s=Dc.ProjectivePoint.fromHex(au.computePublicKey(e).substring(2)),i=Dc.ProjectivePoint.fromHex(au.computePublicKey(t).substring(2));return"0x"+s.add(i).toHex(!!r)}};vo=new WeakMap;let hy=au;const pce=BigInt(0),gce=BigInt(36);function TD(n){n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let s=0;s<40;s++)t[s]=e[s].charCodeAt(0);const r=ut(xn(t));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const YS={};for(let n=0;n<10;n++)YS[String(n)]=String(n);for(let n=0;n<26;n++)YS[String.fromCharCode(65+n)]=String(10+n);const OD=15;function mce(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>YS[r]).join("");for(;e.length>=OD;){let r=e.substring(0,OD);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const yce=function(){const n={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[t]=BigInt(e)}return n}();function wce(n){n=n.toLowerCase();let e=pce;for(let t=0;t<n.length;t++)e=e*gce+yce[n[t]];return e}function Lt(n){if(Q(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=TD(n);return Q(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Q(n.substring(2,4)===mce(n),"bad icap checksum","address",n);let e=wce(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return TD("0x"+e)}Q(!1,"invalid address","address",n)}function bce(n){const e=Lt(n.from);let r=ke(n.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,Lt(yn(xn(bl([e,r])),12))}function Fk(n){return n&&typeof n.getAddress=="function"}async function MC(n,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(de(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),Q(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),Lt(t)}function zr(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?Lt(n):(de(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),MC(n,e.resolveName(n)));if(Fk(n))return MC(n,n.getAddress());if(n&&typeof n.then=="function")return MC(n,n);Q(!1,"unsupported addressable value","target",n)}const po={};function De(n,e){let t=!1;return e<0&&(t=!0,e*=-1),new Or(po,`${t?"":"u"}int${e}`,n,{signed:t,width:e})}function Ot(n,e){return new Or(po,`bytes${e||""}`,n,{size:e})}const xD=Symbol.for("_ethers_typed");var Iu;const go=class go{constructor(e,t,r,s){ne(this,"type");ne(this,"value");ce(this,Iu);ne(this,"_typedSymbol");s==null&&(s=null),Zy(po,e,"Typed"),We(this,{_typedSymbol:xD,type:t,value:r}),H(this,Iu,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return N(this,Iu)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return N(this,Iu)===!0?-1:N(this,Iu)===!1?this.value.length:null}static from(e,t){return new go(po,e,t)}static uint8(e){return De(e,8)}static uint16(e){return De(e,16)}static uint24(e){return De(e,24)}static uint32(e){return De(e,32)}static uint40(e){return De(e,40)}static uint48(e){return De(e,48)}static uint56(e){return De(e,56)}static uint64(e){return De(e,64)}static uint72(e){return De(e,72)}static uint80(e){return De(e,80)}static uint88(e){return De(e,88)}static uint96(e){return De(e,96)}static uint104(e){return De(e,104)}static uint112(e){return De(e,112)}static uint120(e){return De(e,120)}static uint128(e){return De(e,128)}static uint136(e){return De(e,136)}static uint144(e){return De(e,144)}static uint152(e){return De(e,152)}static uint160(e){return De(e,160)}static uint168(e){return De(e,168)}static uint176(e){return De(e,176)}static uint184(e){return De(e,184)}static uint192(e){return De(e,192)}static uint200(e){return De(e,200)}static uint208(e){return De(e,208)}static uint216(e){return De(e,216)}static uint224(e){return De(e,224)}static uint232(e){return De(e,232)}static uint240(e){return De(e,240)}static uint248(e){return De(e,248)}static uint256(e){return De(e,256)}static uint(e){return De(e,256)}static int8(e){return De(e,-8)}static int16(e){return De(e,-16)}static int24(e){return De(e,-24)}static int32(e){return De(e,-32)}static int40(e){return De(e,-40)}static int48(e){return De(e,-48)}static int56(e){return De(e,-56)}static int64(e){return De(e,-64)}static int72(e){return De(e,-72)}static int80(e){return De(e,-80)}static int88(e){return De(e,-88)}static int96(e){return De(e,-96)}static int104(e){return De(e,-104)}static int112(e){return De(e,-112)}static int120(e){return De(e,-120)}static int128(e){return De(e,-128)}static int136(e){return De(e,-136)}static int144(e){return De(e,-144)}static int152(e){return De(e,-152)}static int160(e){return De(e,-160)}static int168(e){return De(e,-168)}static int176(e){return De(e,-176)}static int184(e){return De(e,-184)}static int192(e){return De(e,-192)}static int200(e){return De(e,-200)}static int208(e){return De(e,-208)}static int216(e){return De(e,-216)}static int224(e){return De(e,-224)}static int232(e){return De(e,-232)}static int240(e){return De(e,-240)}static int248(e){return De(e,-248)}static int256(e){return De(e,-256)}static int(e){return De(e,-256)}static bytes1(e){return Ot(e,1)}static bytes2(e){return Ot(e,2)}static bytes3(e){return Ot(e,3)}static bytes4(e){return Ot(e,4)}static bytes5(e){return Ot(e,5)}static bytes6(e){return Ot(e,6)}static bytes7(e){return Ot(e,7)}static bytes8(e){return Ot(e,8)}static bytes9(e){return Ot(e,9)}static bytes10(e){return Ot(e,10)}static bytes11(e){return Ot(e,11)}static bytes12(e){return Ot(e,12)}static bytes13(e){return Ot(e,13)}static bytes14(e){return Ot(e,14)}static bytes15(e){return Ot(e,15)}static bytes16(e){return Ot(e,16)}static bytes17(e){return Ot(e,17)}static bytes18(e){return Ot(e,18)}static bytes19(e){return Ot(e,19)}static bytes20(e){return Ot(e,20)}static bytes21(e){return Ot(e,21)}static bytes22(e){return Ot(e,22)}static bytes23(e){return Ot(e,23)}static bytes24(e){return Ot(e,24)}static bytes25(e){return Ot(e,25)}static bytes26(e){return Ot(e,26)}static bytes27(e){return Ot(e,27)}static bytes28(e){return Ot(e,28)}static bytes29(e){return Ot(e,29)}static bytes30(e){return Ot(e,30)}static bytes31(e){return Ot(e,31)}static bytes32(e){return Ot(e,32)}static address(e){return new go(po,"address",e)}static bool(e){return new go(po,"bool",!!e)}static bytes(e){return new go(po,"bytes",e)}static string(e){return new go(po,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new go(po,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===xD}static dereference(e,t){if(go.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};Iu=new WeakMap;let Or=go;class Ece extends Vo{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=Or.dereference(t,"string");try{r=Lt(r)}catch(s){return this._throwError(s.message,t)}return e.writeValue(r)}decode(e){return Lt(wl(e.readValue(),20))}}class vce extends Vo{constructor(t){super(t.name,t.type,"_",t.dynamic);ne(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,r){return this.coder.encode(t,r)}decode(t){return this.coder.decode(t)}}function Hk(n,e,t){let r=[];if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let f={};r=e.map(h=>{const p=h.localName;return de(p,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:h},value:t}),de(!f[p],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:h},value:t}),f[p]=!0,t[p]})}else Q(!1,"invalid tuple value","tuple",t);Q(e.length===r.length,"types/value length mismatch","tuple",t);let s=new d2,i=new d2,o=[];e.forEach((f,h)=>{let p=r[h];if(f.dynamic){let g=i.length;f.encode(i,p);let y=s.writeUpdatableValue();o.push(b=>{y(b+g)})}else f.encode(s,p)}),o.forEach(f=>{f(s.length)});let l=n.appendWriter(s);return l+=n.appendWriter(i),l}function jk(n,e){let t=[],r=[],s=n.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let l=n.readIndex(),f=s.subReader(l);try{o=i.decode(f)}catch(h){if(dr(h,"BUFFER_OVERRUN"))throw h;o=h,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(n)}catch(l){if(dr(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");t.push(o),r.push(i.localName||null)}),ep.fromItems(t,r)}class Ace extends Vo{constructor(t,r,s){const i=t.type+"["+(r>=0?r:"")+"]",o=r===-1||t.dynamic;super("array",i,s,o);ne(this,"coder");ne(this,"length");We(this,{coder:t,length:r})}defaultValue(){const t=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(t);return r}encode(t,r){const s=Or.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,t.writeValue(s.length)),W4(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let l=0;l<s.length;l++)o.push(this.coder);return Hk(t,o,s)}decode(t){let r=this.length;r===-1&&(r=t.readIndex(),de(r*jr<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:r*jr,length:t.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new vce(this.coder));return jk(t,s)}}class Cce extends Vo{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const r=Or.dereference(t,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class zk extends Vo{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=Hr(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class _ce extends zk{constructor(e){super("bytes",e)}decode(e){return Ne(super.decode(e))}}class Sce extends Vo{constructor(t,r){let s="bytes"+String(t);super(s,s,r,!1);ne(this,"size");We(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,r){let s=Hr(Or.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),t.writeBytes(s)}decode(t){return Ne(t.readBytes(this.size))}}const Nce=new Uint8Array([]);class Tce extends Vo{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(Nce)}decode(e){return e.readBytes(0),null}}const Oce=BigInt(0),xce=BigInt(1),Ice=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Rce extends Vo{constructor(t,r,s){const i=(r?"int":"uint")+t*8;super(i,i,s,!1);ne(this,"size");ne(this,"signed");We(this,{size:t,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,r){let s=ke(Or.dereference(r,this.type)),i=mu(Ice,jr*8);if(this.signed){let o=mu(i,this.size*8-1);(s>o||s<-(o+xce))&&this._throwError("value out-of-bounds",r),s=Z4(s,8*jr)}else(s<Oce||s>mu(i,this.size*8))&&this._throwError("value out-of-bounds",r);return t.writeValue(s)}decode(t){let r=mu(t.readValue(),this.size*8);return this.signed&&(r=eE(r,this.size*8)),r}}class Pce extends zk{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Ba(Or.dereference(t,"string")))}decode(e){return tE(super.decode(e))}}class Xw extends Vo{constructor(t,r){let s=!1;const i=[];t.forEach(l=>{l.dynamic&&(s=!0),i.push(l.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);ne(this,"coders");We(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(s=>{t.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),t[o]==null&&(t[o]=t[i]))}),Object.freeze(t)}encode(t,r){const s=Or.dereference(r,"tuple");return Hk(t,this.coders,s)}decode(t){return jk(t,this.coders)}}function LC(n,e){return{address:Lt(n),storageKeys:e.map((t,r)=>(Q(Xt(t,32),"invalid slot",`storageKeys[${r}]`,t),t.toLowerCase()))}}function yf(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(Q(t.length===2,"invalid slot set",`value[${r}]`,t),LC(t[0],t[1])):(Q(t!=null&&typeof t=="object","invalid address-slot set","value",n),LC(t.address,t.storageKeys)));Q(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(t=>{const r=n[t].reduce((s,i)=>(s[i]=!0,s),{});return LC(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function qk(n){return{address:Lt(n.address),nonce:ke(n.nonce!=null?n.nonce:0),chainId:ke(n.chainId!=null?n.chainId:0),signature:ys.from(n.signature)}}function Dce(n){let e;return typeof n=="string"?e=hy.computePublicKey(n,!1):e=n.publicKey,Lt(xn("0x"+e.substring(4)).substring(26))}function Uce(n,e){return Dce(hy.recoverPublicKey(n,e))}const Yn=BigInt(0),kce=BigInt(2),Bce=BigInt(27),Mce=BigInt(28),Lce=BigInt(35),$ce=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),$C=4096*32;function Fce(n){return{blobToKzgCommitment:r=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return ut(n.blobToKzgCommitment(Ne(r)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return ut(n.blobToKzgCommitment(r));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return ut(n.blobToKZGCommitment(Ne(r)));Q(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return ut(n.computeBlobProof(Ne(r),Ne(s)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return ut(n.computeBlobKZGProof(Ne(r),Ne(s)));Q(!1,"unsupported KZG library","kzg",n)}}}function ID(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=mp(e).substring(4),"0x"+t}function yp(n){return n==="0x"?null:Lt(n)}function YE(n,e){try{return yf(n)}catch(t){Q(!1,t.message,e,n)}}function Hce(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const t=[];for(let r=0;r<n.length;r++){const s=n[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);t.push({address:yp(s[1]),nonce:Yt(s[2],"nonce"),chainId:Yt(s[0],"chainId"),signature:ys.from({yParity:wf(s[3],"yParity"),r:Ho(s[4],32),s:Ho(s[5],32)})})}return t}catch(t){Q(!1,t.message,e,n)}}function wf(n,e){return n==="0x"?0:it(n,e)}function Yt(n,e){if(n==="0x")return Yn;const t=ke(n,e);return Q(t<=$ce,"value exceeds uint size",e,t),t}function wt(n,e){const t=ke(n,"value"),r=Mn(t);return Q(r.length<=32,"value too large",`tx.${e}`,t),r}function QE(n){return yf(n).map(e=>[e.address,e.storageKeys])}function jce(n){return n.map(e=>[wt(e.chainId,"chainId"),e.address,wt(e.nonce,"nonce"),wt(e.signature.yParity,"yParity"),Mn(e.signature.r),Mn(e.signature.s)])}function zce(n,e){Q(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)Q(Xt(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function qce(n){const e=Jy(n);Q(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const t={type:0,nonce:wf(e[0],"nonce"),gasPrice:Yt(e[1],"gasPrice"),gasLimit:Yt(e[2],"gasLimit"),to:yp(e[3]),value:Yt(e[4],"value"),data:Ne(e[5]),chainId:Yn};if(e.length===6)return t;const r=Yt(e[6],"v"),s=Yt(e[7],"r"),i=Yt(e[8],"s");if(s===Yn&&i===Yn)t.chainId=r;else{let o=(r-Lce)/kce;o<Yn&&(o=Yn),t.chainId=o,Q(o!==Yn||r===Bce||r===Mce,"non-canonical legacy v","v",e[6]),t.signature=ys.from({r:Ho(e[7],32),s:Ho(e[8],32),v:r})}return t}function Vce(n,e){const t=[wt(n.nonce,"nonce"),wt(n.gasPrice||0,"gasPrice"),wt(n.gasLimit,"gasLimit"),n.to||"0x",wt(n.value,"value"),n.data];let r=Yn;if(n.chainId!=Yn)r=ke(n.chainId,"tx.chainId"),Q(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const i=n.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==Yn&&(t.push(Mn(r)),t.push("0x"),t.push("0x")),bl(t);let s=BigInt(27+e.yParity);return r!==Yn?s=ys.getChainIdV(r,e.v):BigInt(e.v)!==s&&Q(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(Mn(s)),t.push(Mn(e.r)),t.push(Mn(e.s)),bl(t)}function ZE(n,e){let t;try{if(t=wf(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{Q(!1,"invalid yParity","yParity",e[0])}const r=Ho(e[1],32),s=Ho(e[2],32),i=ys.from({r,s,yParity:t});n.signature=i}function Gce(n){const e=Jy(ut(n).slice(1));Q(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Ne(n));const t={type:2,chainId:Yt(e[0],"chainId"),nonce:wf(e[1],"nonce"),maxPriorityFeePerGas:Yt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Yt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Yt(e[4],"gasLimit"),to:yp(e[5]),value:Yt(e[6],"value"),data:Ne(e[7]),accessList:YE(e[8],"accessList")};return e.length===9||ZE(t,e.slice(9)),t}function Kce(n,e){const t=[wt(n.chainId,"chainId"),wt(n.nonce,"nonce"),wt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),wt(n.maxFeePerGas||0,"maxFeePerGas"),wt(n.gasLimit,"gasLimit"),n.to||"0x",wt(n.value,"value"),n.data,QE(n.accessList||[])];return e&&(t.push(wt(e.yParity,"yParity")),t.push(Mn(e.r)),t.push(Mn(e.s))),wn(["0x02",bl(t)])}function Wce(n){const e=Jy(ut(n).slice(1));Q(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Ne(n));const t={type:1,chainId:Yt(e[0],"chainId"),nonce:wf(e[1],"nonce"),gasPrice:Yt(e[2],"gasPrice"),gasLimit:Yt(e[3],"gasLimit"),to:yp(e[4]),value:Yt(e[5],"value"),data:Ne(e[6]),accessList:YE(e[7],"accessList")};return e.length===8||ZE(t,e.slice(8)),t}function Yce(n,e){const t=[wt(n.chainId,"chainId"),wt(n.nonce,"nonce"),wt(n.gasPrice||0,"gasPrice"),wt(n.gasLimit,"gasLimit"),n.to||"0x",wt(n.value,"value"),n.data,QE(n.accessList||[])];return e&&(t.push(wt(e.yParity,"recoveryParam")),t.push(Mn(e.r)),t.push(Mn(e.s))),wn(["0x01",bl(t)])}function Qce(n){let e=Jy(ut(n).slice(1)),t="3",r=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const i=e[1],o=e[2],l=e[3];Q(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),Q(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),Q(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),Q(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),Q(i.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let f=0;f<e[1].length;f++)r.push({data:i[f],commitment:o[f],proof:l[f]});e=e[0]}Q(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",Ne(n));const s={type:3,chainId:Yt(e[0],"chainId"),nonce:wf(e[1],"nonce"),maxPriorityFeePerGas:Yt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Yt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Yt(e[4],"gasLimit"),to:yp(e[5]),value:Yt(e[6],"value"),data:Ne(e[7]),accessList:YE(e[8],"accessList"),maxFeePerBlobGas:Yt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),Q(s.to!=null,`invalid address for transaction type: ${t}`,"data",n),Q(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let i=0;i<s.blobVersionedHashes.length;i++)Q(Xt(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",n);return e.length===11||ZE(s,e.slice(11)),s}function Zce(n,e,t){const r=[wt(n.chainId,"chainId"),wt(n.nonce,"nonce"),wt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),wt(n.maxFeePerGas||0,"maxFeePerGas"),wt(n.gasLimit,"gasLimit"),n.to||fy,wt(n.value,"value"),n.data,QE(n.accessList||[]),wt(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),zce(n.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(wt(e.yParity,"yParity")),r.push(Mn(e.r)),r.push(Mn(e.s)),t)?wn(["0x03",bl([r,t.map(s=>s.data),t.map(s=>s.commitment),t.map(s=>s.proof)])]):wn(["0x03",bl(r)])}function Jce(n){const e=Jy(ut(n).slice(1));Q(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Ne(n));const t={type:4,chainId:Yt(e[0],"chainId"),nonce:wf(e[1],"nonce"),maxPriorityFeePerGas:Yt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Yt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Yt(e[4],"gasLimit"),to:yp(e[5]),value:Yt(e[6],"value"),data:Ne(e[7]),accessList:YE(e[8],"accessList"),authorizationList:Hce(e[9],"authorizationList")};return e.length===10||ZE(t,e.slice(10)),t}function Xce(n,e){const t=[wt(n.chainId,"chainId"),wt(n.nonce,"nonce"),wt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),wt(n.maxFeePerGas||0,"maxFeePerGas"),wt(n.gasLimit,"gasLimit"),n.to||"0x",wt(n.value,"value"),n.data,QE(n.accessList||[]),jce(n.authorizationList||[])];return e&&(t.push(wt(e.yParity,"yParity")),t.push(Mn(e.r)),t.push(Mn(e.s))),wn(["0x04",bl(t)])}var Mi,ud,fd,hd,dd,pd,gd,md,yd,wd,bd,Ed,Ru,Vc,ya,Gc,vd,Ad,mb;const pa=class pa{constructor(){ce(this,Ad);ce(this,Mi);ce(this,ud);ce(this,fd);ce(this,hd);ce(this,dd);ce(this,pd);ce(this,gd);ce(this,md);ce(this,yd);ce(this,wd);ce(this,bd);ce(this,Ed);ce(this,Ru);ce(this,Vc);ce(this,ya);ce(this,Gc);ce(this,vd);H(this,Mi,null),H(this,ud,null),H(this,hd,0),H(this,dd,Yn),H(this,pd,null),H(this,gd,null),H(this,md,null),H(this,fd,"0x"),H(this,yd,Yn),H(this,wd,Yn),H(this,bd,null),H(this,Ed,null),H(this,Ru,null),H(this,Vc,null),H(this,ya,null),H(this,Gc,null),H(this,vd,null)}get type(){return N(this,Mi)}set type(e){switch(e){case null:H(this,Mi,null);break;case 0:case"legacy":H(this,Mi,0);break;case 1:case"berlin":case"eip-2930":H(this,Mi,1);break;case 2:case"london":case"eip-1559":H(this,Mi,2);break;case 3:case"cancun":case"eip-4844":H(this,Mi,3);break;case 4:case"pectra":case"eip-7702":H(this,Mi,4);break;default:Q(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=N(this,ud);return e==null&&this.type===3?fy:e}set to(e){H(this,ud,e==null?null:Lt(e))}get nonce(){return N(this,hd)}set nonce(e){H(this,hd,it(e,"value"))}get gasLimit(){return N(this,dd)}set gasLimit(e){H(this,dd,ke(e))}get gasPrice(){const e=N(this,pd);return e==null&&(this.type===0||this.type===1)?Yn:e}set gasPrice(e){H(this,pd,e==null?null:ke(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=N(this,gd);return e??(this.type===2||this.type===3?Yn:null)}set maxPriorityFeePerGas(e){H(this,gd,e==null?null:ke(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=N(this,md);return e??(this.type===2||this.type===3?Yn:null)}set maxFeePerGas(e){H(this,md,e==null?null:ke(e,"maxFeePerGas"))}get data(){return N(this,fd)}set data(e){H(this,fd,Ne(e))}get value(){return N(this,yd)}set value(e){H(this,yd,ke(e,"value"))}get chainId(){return N(this,wd)}set chainId(e){H(this,wd,ke(e))}get signature(){return N(this,bd)||null}set signature(e){H(this,bd,e==null?null:ys.from(e))}get accessList(){const e=N(this,Ed)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){H(this,Ed,e==null?null:yf(e))}get authorizationList(){const e=N(this,vd)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){H(this,vd,e==null?null:e.map(t=>qk(t)))}get maxFeePerBlobGas(){const e=N(this,Ru);return e==null&&this.type===3?Yn:e}set maxFeePerBlobGas(e){H(this,Ru,e==null?null:ke(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=N(this,Vc);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Q(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)Q(Xt(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}H(this,Vc,e)}get blobs(){return N(this,Gc)==null?null:N(this,Gc).map(e=>Object.assign({},e))}set blobs(e){if(e==null){H(this,Gc,null);return}const t=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(FS(i)){de(N(this,ya),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=ut(i);if(Q(o.length<=$C,"blob is too large",`blobs[${s}]`,i),o.length!==$C){const h=new Uint8Array($C);h.set(o),o=h}const l=N(this,ya).blobToKzgCommitment(o),f=Ne(N(this,ya).computeBlobKzgProof(o,l));t.push({data:Ne(o),commitment:Ne(l),proof:f}),r.push(ID(1,l))}else{const o=Ne(i.commitment);t.push({data:Ne(i.data),commitment:o,proof:Ne(i.proof)}),r.push(ID(1,o))}}H(this,Gc,t),H(this,Vc,r)}get kzg(){return N(this,ya)}set kzg(e){e==null?H(this,ya,null):H(this,ya,Fce(e))}get hash(){return this.signature==null?null:xn(we(this,Ad,mb).call(this,!0,!1))}get unsignedHash(){return xn(this.unsignedSerialized)}get from(){return this.signature==null?null:Uce(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:hy.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return we(this,Ad,mb).call(this,!0,!0)}get unsignedSerialized(){return we(this,Ad,mb).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=N(this,Ru)!=null||N(this,Vc);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&de(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),de(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),de(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):t?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return pa.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new pa;if(typeof e=="string"){const r=ut(e);if(r[0]>=127)return pa.from(qce(r));switch(r[0]){case 1:return pa.from(Wce(r));case 2:return pa.from(Gce(r));case 3:return pa.from(Qce(r));case 4:return pa.from(Jce(r))}de(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new pa;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=ys.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(Q(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Q(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Q(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Q(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};Mi=new WeakMap,ud=new WeakMap,fd=new WeakMap,hd=new WeakMap,dd=new WeakMap,pd=new WeakMap,gd=new WeakMap,md=new WeakMap,yd=new WeakMap,wd=new WeakMap,bd=new WeakMap,Ed=new WeakMap,Ru=new WeakMap,Vc=new WeakMap,ya=new WeakMap,Gc=new WeakMap,vd=new WeakMap,Ad=new WeakSet,mb=function(e,t){de(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return Vce(this,r);case 1:return Yce(this,r);case 2:return Kce(this,r);case 3:return Zce(this,r,t?this.blobs:null);case 4:return Xce(this,r)}de(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let sE=pa;function rf(n){return xn(Ba(n))}var ele="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const RD=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),PD=4;function tle(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),s=1,i=[0,1];for(let R=1;R<r;R++)i.push(s+=t());let o=t(),l=e;e+=o;let f=0,h=0;function p(){return f==0&&(h=h<<8|n[e++],f=8),h>>--f&1}const g=31,y=2**g,b=y>>>1,v=b>>1,E=y-1;let A=0;for(let R=0;R<g;R++)A=A<<1|p();let S=[],O=0,T=y;for(;;){let R=Math.floor(((A-O+1)*s-1)/T),D=0,F=r;for(;F-D>1;){let q=D+F>>>1;R<i[q]?F=q:D=q}if(D==0)break;S.push(D);let $=O+Math.floor(T*i[D]/s),B=O+Math.floor(T*i[D+1]/s)-1;for(;(($^B)&b)==0;)A=A<<1&E|p(),$=$<<1&E,B=B<<1&E|1;for(;$&~B&v;)A=A&b|A<<1&E>>>1|p(),$=$<<1^b,B=(B^b)<<1|b|1;O=$,T=1+B-$}let k=r-4;return S.map(R=>{switch(R-k){case 3:return k+65792+(n[l++]<<16|n[l++]<<8|n[l++]);case 2:return k+256+(n[l++]<<8|n[l++]);case 1:return k+n[l++];default:return R-1}})}function nle(n){let e=0;return()=>n[e++]}function Vk(n){return nle(tle(rle(n)))}function rle(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let t=n.length,r=new Uint8Array(6*t>>3);for(let s=0,i=0,o=0,l=0;s<t;s++)l=l<<6|e[n.charCodeAt(s)],o+=6,o>=8&&(r[i++]=l>>(o-=8));return r}function sle(n){return n&1?~n>>1:n>>1}function ile(n,e){let t=Array(n);for(let r=0,s=0;r<n;r++)t[r]=s+=sle(e());return t}function dy(n,e=0){let t=[];for(;;){let r=n(),s=n();if(!s)break;e+=r;for(let i=0;i<s;i++)t.push(e+i);e+=s+1}return t}function Gk(n){return py(()=>{let e=dy(n);if(e.length)return e})}function Kk(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(ale(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(ole(t,n))}return e.flat()}function py(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function Wk(n,e,t){let r=Array(n).fill().map(()=>[]);for(let s=0;s<e;s++)ile(n,t).forEach((i,o)=>r[o].push(i));return r}function ale(n,e){let t=1+e(),r=e(),s=py(e);return Wk(s.length,1+n,e).flatMap((o,l)=>{let[f,...h]=o;return Array(s[l]).fill().map((p,g)=>{let y=g*r;return[f+g*t,h.map(b=>b+y)]})})}function ole(n,e){let t=1+e();return Wk(t,1+n,e).map(s=>[s[0],s.slice(1)])}function cle(n){let e=[],t=dy(n);return s(r([]),[]),e;function r(i){let o=n(),l=py(()=>{let f=dy(n).map(h=>t[h]);if(f.length)return r(f)});return{S:o,B:l,Q:i}}function s({S:i,B:o},l,f){if(!(i&4&&f===l[l.length-1])){i&2&&(f=l[l.length-1]),i&1&&e.push(l);for(let h of o)for(let p of h.Q)s(h,[...l,p],f)}}}function lle(n){return n.toString(16).toUpperCase().padStart(2,"0")}function Yk(n){return`{${lle(n)}}`}function ule(n){let e=[];for(let t=0,r=n.length;t<r;){let s=n.codePointAt(t);t+=s<65536?1:2,e.push(s)}return e}function ip(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let r=[];for(let s=0;s<t;)r.push(String.fromCodePoint(...n.slice(s,s+=4096)));return r.join("")}function fle(n,e){let t=n.length,r=t-e.length;for(let s=0;r==0&&s<t;s++)r=n[s]-e[s];return r}var hle="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const gy=44032,iE=4352,aE=4449,oE=4519,Qk=19,Zk=21,ap=28,cE=Zk*ap,dle=Qk*cE,ple=gy+dle,gle=iE+Qk,mle=aE+Zk,yle=oE+ap;function Jg(n){return n>>24&255}function Jk(n){return n&16777215}let v2,DD,A2,yb;function wle(){let n=Vk(hle);v2=new Map(Gk(n).flatMap((e,t)=>e.map(r=>[r,t+1<<24]))),DD=new Set(dy(n)),A2=new Map,yb=new Map;for(let[e,t]of Kk(n)){if(!DD.has(e)&&t.length==2){let[r,s]=t,i=yb.get(r);i||(i=new Map,yb.set(r,i)),i.set(s,e)}A2.set(e,t.reverse())}}function Xk(n){return n>=gy&&n<ple}function ble(n,e){if(n>=iE&&n<gle&&e>=aE&&e<mle)return gy+(n-iE)*cE+(e-aE)*ap;if(Xk(n)&&e>oE&&e<yle&&(n-gy)%ap==0)return n+(e-oE);{let t=yb.get(n);return t&&(t=t.get(e),t)?t:-1}}function e6(n){v2||wle();let e=[],t=[],r=!1;function s(i){let o=v2.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of n)for(;;){if(i<128)e.push(i);else if(Xk(i)){let o=i-gy,l=o/cE|0,f=o%cE/ap|0,h=o%ap;s(iE+l),s(aE+f),h>0&&s(oE+h)}else{let o=A2.get(i);o?t.push(...o):s(i)}if(!t.length)break;i=t.pop()}if(r&&e.length>1){let i=Jg(e[0]);for(let o=1;o<e.length;o++){let l=Jg(e[o]);if(l==0||i<=l){i=l;continue}let f=o-1;for(;;){let h=e[f+1];if(e[f+1]=e[f],e[f]=h,!f||(i=Jg(e[--f]),i<=l))break}i=Jg(e[o])}}return e}function Ele(n){let e=[],t=[],r=-1,s=0;for(let i of n){let o=Jg(i),l=Jk(i);if(r==-1)o==0?r=l:e.push(l);else if(s>0&&s>=o)o==0?(e.push(r,...t),t.length=0,r=l):t.push(l),s=o;else{let f=ble(r,l);f>=0?r=f:s==0&&o==0?(e.push(r),r=l):(t.push(l),s=o)}}return r>=0&&e.push(r,...t),e}function t6(n){return e6(n).map(Jk)}function vle(n){return Ele(e6(n))}const UD=45,n6=".",r6=65039,s6=1,lE=n=>Array.from(n);function my(n,e){return n.P.has(e)||n.Q.has(e)}class Ale extends Array{get is_emoji(){return!0}}let C2,i6,wu,_2,a6,Zh,FC,Dh,eu,kD,S2;function QS(){if(C2)return;let n=Vk(ele);const e=()=>dy(n),t=()=>new Set(e()),r=(p,g)=>g.forEach(y=>p.add(y));C2=new Map(Kk(n)),i6=t(),wu=e(),_2=new Set(e().map(p=>wu[p])),wu=new Set(wu),a6=t(),t();let s=Gk(n),i=n();const o=()=>{let p=new Set;return e().forEach(g=>r(p,s[g])),r(p,e()),p};Zh=py(p=>{let g=py(n).map(y=>y+96);if(g.length){let y=p>=i;g[0]-=32,g=ip(g),y&&(g=`Restricted[${g}]`);let b=o(),v=o(),E=!n();return{N:g,P:b,Q:v,M:E,R:y}}}),FC=t(),Dh=new Map;let l=e().concat(lE(FC)).sort((p,g)=>p-g);l.forEach((p,g)=>{let y=n(),b=l[g]=y?l[g-y]:{V:[],M:new Map};b.V.push(p),FC.has(p)||Dh.set(p,b)});for(let{V:p,M:g}of new Set(Dh.values())){let y=[];for(let v of p){let E=Zh.filter(S=>my(S,v)),A=y.find(({G:S})=>E.some(O=>S.has(O)));A||(A={G:new Set,V:[]},y.push(A)),A.V.push(v),r(A.G,E)}let b=y.flatMap(v=>lE(v.G));for(let{G:v,V:E}of y){let A=new Set(b.filter(S=>!v.has(S)));for(let S of E)g.set(S,A)}}eu=new Set;let f=new Set;const h=p=>eu.has(p)?f.add(p):eu.add(p);for(let p of Zh){for(let g of p.P)h(g);for(let g of p.Q)h(g)}for(let p of eu)!Dh.has(p)&&!f.has(p)&&Dh.set(p,s6);r(eu,t6(eu)),kD=cle(n).map(p=>Ale.from(p)).sort(fle),S2=new Map;for(let p of kD){let g=[S2];for(let y of p){let b=g.map(v=>{let E=v.get(y);return E||(E=new Map,v.set(y,E)),E});y===r6?g.push(...b):g=b}for(let y of g)y.V=p}}function ZS(n){return(o6(n)?"":`${JS(JE([n]))} `)+Yk(n)}function JS(n){return`"${n}"`}function Cle(n){if(n.length>=4&&n[2]==UD&&n[3]==UD)throw new Error(`invalid label extension: "${ip(n.slice(0,4))}"`)}function _le(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function Sle(n){let e=n[0],t=RD.get(e);if(t)throw bm(`leading ${t}`);let r=n.length,s=-1;for(let i=1;i<r;i++){e=n[i];let o=RD.get(e);if(o){if(s==i)throw bm(`${t} + ${o}`);s=i+1,t=o}}if(s==r)throw bm(`trailing ${t}`)}function JE(n,e=1/0,t=Yk){let r=[];Nle(n[0])&&r.push(""),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let s=0,i=n.length;for(let o=0;o<i;o++){let l=n[o];o6(l)&&(r.push(ip(n.slice(s,o))),r.push(t(l)),s=o+1)}return r.push(ip(n.slice(s,i))),r.join("")}function Nle(n){return QS(),wu.has(n)}function o6(n){return QS(),a6.has(n)}function Tle(n){return Rle(Ole(n,vle,Ule))}function Ole(n,e,t){if(!n)return[];QS();let r=0;return n.split(n6).map(s=>{let i=ule(s),o={input:i,offset:r};r+=i.length+1;try{let l=o.tokens=Dle(i,e,t),f=l.length,h;if(!f)throw new Error("empty label");let p=o.output=l.flat();if(_le(p),!(o.emoji=f>1||l[0].is_emoji)&&p.every(y=>y<128))Cle(p),h="ASCII";else{let y=l.flatMap(b=>b.is_emoji?[]:b);if(!y.length)h="Emoji";else{if(wu.has(p[0]))throw bm("leading combining mark");for(let E=1;E<f;E++){let A=l[E];if(!A.is_emoji&&wu.has(A[0]))throw bm(`emoji + combining mark: "${ip(l[E-1])} + ${JE([A[0]])}"`)}Sle(p);let b=lE(new Set(y)),[v]=Ile(b);Ple(v,y),xle(v,b),h=v.N}}o.type=h}catch(l){o.error=l}return o})}function xle(n,e){let t,r=[];for(let s of e){let i=Dh.get(s);if(i===s6)return;if(i){let o=i.M.get(s);if(t=t?t.filter(l=>o.has(l)):lE(o),!t.length)return}else r.push(s)}if(t){for(let s of t)if(r.every(i=>my(s,i)))throw new Error(`whole-script confusable: ${n.N}/${s.N}`)}}function Ile(n){let e=Zh;for(let t of n){let r=e.filter(s=>my(s,t));if(!r.length)throw Zh.some(s=>my(s,t))?l6(e[0],t):c6(t);if(e=r,r.length==1)break}return e}function Rle(n){return n.map(({input:e,error:t,output:r})=>{if(t){let s=t.message;throw new Error(n.length==1?s:`Invalid label ${JS(JE(e,63))}: ${s}`)}return ip(r)}).join(n6)}function c6(n){return new Error(`disallowed character: ${ZS(n)}`)}function l6(n,e){let t=ZS(e),r=Zh.find(s=>s.P.has(e));return r&&(t=`${r.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function bm(n){return new Error(`illegal placement: ${n}`)}function Ple(n,e){for(let t of e)if(!my(n,t))throw l6(n,t);if(n.M){let t=t6(e);for(let r=1,s=t.length;r<s;r++)if(_2.has(t[r])){let i=r+1;for(let o;i<s&&_2.has(o=t[i]);i++)for(let l=r;l<i;l++)if(t[l]==o)throw new Error(`duplicate non-spacing marks: ${ZS(o)}`);if(i-r>PD)throw new Error(`excessive non-spacing marks: ${JS(JE(t.slice(r-1,i)))} (${i-r}/${PD})`);r=i}}}function Dle(n,e,t){let r=[],s=[];for(n=n.slice().reverse();n.length;){let i=kle(n);if(i)s.length&&(r.push(e(s)),s=[]),r.push(t(i));else{let o=n.pop();if(eu.has(o))s.push(o);else{let l=C2.get(o);if(l)s.push(...l);else if(!i6.has(o))throw c6(o)}}}return s.length&&r.push(e(s)),r}function Ule(n){return n.filter(e=>e!=r6)}function kle(n,e){let t=S2,r,s=n.length;for(;s&&(t=t.get(n[--s]),!!t);){let{V:i}=t;i&&(r=i,n.length=s)}return r}const u6=new Uint8Array(32);u6.fill(0);function BD(n){return Q(n.length!==0,"invalid ENS name; empty component","comp",n),n}function f6(n){const e=Ba(Ble(n)),t=[];if(n.length===0)return t;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(t.push(BD(e.slice(r,s))),r=s+1);return Q(r<e.length,"invalid ENS name; empty component","name",n),t.push(BD(e.slice(r))),t}function Ble(n){try{if(n.length===0)throw new Error("empty label");return Tle(n)}catch(e){Q(!1,`invalid ENS name (${e.message})`,"name",n)}}function N2(n){Q(typeof n=="string","invalid ENS name; not a string","name",n),Q(n.length,"invalid ENS name (empty label)","name",n);let e=u6;const t=f6(n);for(;t.length;)e=xn(wn([e,xn(t.pop())]));return Ne(e)}function Mle(n,e){const t=e;return Q(t<=255,"DNS encoded label cannot exceed 255","length",t),Ne(wn(f6(n).map(r=>{Q(r.length<=t,`label ${JSON.stringify(n)} exceeds ${t} bytes`,"name",n);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const h6=new Uint8Array(32);h6.fill(0);const Lle=BigInt(-1),d6=BigInt(0),p6=BigInt(1),$le=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Fle(n){const e=ut(n),t=e.length%32;return t?wn([e,h6.slice(t)]):Ne(e)}const Hle=wl(p6,32),jle=wl(d6,32),MD={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},HC=["name","version","chainId","verifyingContract","salt"];function LD(n){return function(e){return Q(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const zle={name:LD("name"),version:LD("version"),chainId:function(n){const e=ke(n,"domain.chainId");return Q(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):Hi(e)},verifyingContract:function(n){try{return Lt(n).toLowerCase()}catch{}Q(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=ut(n,"domain.salt");return Q(e.length===32,'invalid domain value "salt"',"domain.salt",n),Ne(e)}};function jC(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",r=parseInt(e[2]);Q(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",n);const s=mu($le,t?r-1:r),i=t?(s+p6)*Lle:d6;return function(o){const l=ke(o,"value");return Q(l>=i&&l<=s,`value out-of-bounds for ${n}`,"value",l),wl(t?Z4(l,256):l,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return Q(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(r){const s=ut(r);return Q(s.length===t,`invalid length for ${n}`,"value",r),Fle(r)}}}switch(n){case"address":return function(e){return Ho(Lt(e),32)};case"bool":return function(e){return e?Hle:jle};case"bytes":return function(e){return xn(e)};case"string":return function(e){return rf(e)}}return null}function $D(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}function eb(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}var _y,Ao,Cd,gE,g6;const oi=class oi{constructor(e){ce(this,gE);ne(this,"primaryType");ce(this,_y);ce(this,Ao);ce(this,Cd);H(this,Ao,new Map),H(this,Cd,new Map);const t=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(f=>{i[f]=e[f].map(({name:h,type:p})=>{let{base:g,index:y}=eb(p);return g==="int"&&!e.int&&(g="int256"),g==="uint"&&!e.uint&&(g="uint256"),{name:h,type:g+(y||"")}}),t.set(f,new Set),r.set(f,[]),s.set(f,new Set)}),H(this,_y,JSON.stringify(i));for(const f in i){const h=new Set;for(const p of i[f]){Q(!h.has(p.name),`duplicate variable name ${JSON.stringify(p.name)} in ${JSON.stringify(f)}`,"types",e),h.add(p.name);const g=eb(p.type).base;Q(g!==f,`circular type reference to ${JSON.stringify(g)}`,"types",e),!jC(g)&&(Q(r.has(g),`unknown type ${JSON.stringify(g)}`,"types",e),r.get(g).push(f),t.get(f).add(g))}}const o=Array.from(r.keys()).filter(f=>r.get(f).length===0);Q(o.length!==0,"missing primary type","types",e),Q(o.length===1,`ambiguous primary types or unused types: ${o.map(f=>JSON.stringify(f)).join(", ")}`,"types",e),We(this,{primaryType:o[0]});function l(f,h){Q(!h.has(f),`circular type reference to ${JSON.stringify(f)}`,"types",e),h.add(f);for(const p of t.get(f))if(r.has(p)){l(p,h);for(const g of h)s.get(g).add(p)}h.delete(f)}l(this.primaryType,new Set);for(const[f,h]of s){const p=Array.from(h);p.sort(),N(this,Ao).set(f,$D(f,i[f])+p.map(g=>$D(g,i[g])).join(""))}}get types(){return JSON.parse(N(this,_y))}getEncoder(e){let t=N(this,Cd).get(e);return t||(t=we(this,gE,g6).call(this,e),N(this,Cd).set(e,t)),t}encodeType(e){const t=N(this,Ao).get(e);return Q(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return xn(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(jC(e))return r(e,t);const s=eb(e).array;if(s)return Q(s.count===-1||s.count===t.length,`array length mismatch; expected length ${s.count}`,"value",t),t.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:l,type:f})=>(o[l]=this._visit(f,t[l],r),o),{});Q(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new oi(e)}static getPrimaryType(e){return oi.from(e).primaryType}static hashStruct(e,t,r){return oi.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){if(e[r]==null)continue;const s=MD[r];Q(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:s})}return t.sort((r,s)=>HC.indexOf(r.name)-HC.indexOf(s.name)),oi.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return wn(["0x1901",oi.hashDomain(e),oi.from(t).hash(r)])}static hash(e,t,r){return xn(oi.encode(e,t,r))}static async resolveNames(e,t,r,s){e=Object.assign({},e);for(const l in e)e[l]==null&&delete e[l];const i={};e.verifyingContract&&!Xt(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=oi.from(t);o.visit(r,(l,f)=>(l==="address"&&!Xt(f,20)&&(i[f]="0x"),f));for(const l in i)i[l]=await s(l);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(l,f)=>l==="address"&&i[f]?i[f]:f),{domain:e,value:r}}static getPayload(e,t,r){oi.hashDomain(e);const s={},i=[];HC.forEach(f=>{const h=e[f];h!=null&&(s[f]=zle[f](h),i.push({name:f,type:MD[f]}))});const o=oi.from(t);t=o.types;const l=Object.assign({},t);return Q(l.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),l.EIP712Domain=i,o.encode(r),{types:l,domain:s,primaryType:o.primaryType,message:o.visit(r,(f,h)=>{if(f.match(/^bytes(\d*)/))return Ne(ut(h));if(f.match(/^u?int/))return ke(h).toString();switch(f){case"address":return h.toLowerCase();case"bool":return!!h;case"string":return Q(typeof h=="string","invalid string","value",h),h}Q(!1,"unsupported type","type",f)})}}};_y=new WeakMap,Ao=new WeakMap,Cd=new WeakMap,gE=new WeakSet,g6=function(e){{const s=jC(e);if(s)return s}const t=eb(e).array;if(t){const s=t.prefix,i=this.getEncoder(s);return o=>{Q(t.count===-1||t.count===o.length,`array length mismatch; expected length ${t.count}`,"value",o);let l=o.map(i);return N(this,Ao).has(s)&&(l=l.map(xn)),xn(wn(l))}}const r=this.types[e];if(r){const s=rf(N(this,Ao).get(e));return i=>{const o=r.map(({name:l,type:f})=>{const h=this.getEncoder(f)(i[l]);return N(this,Ao).has(f)?xn(h):h});return o.unshift(s),wn(o)}}Q(!1,`unknown type: ${e}`,"type",e)};let uE=oi;function qr(n){const e=new Set;return n.forEach(t=>e.add(t)),Object.freeze(e)}const qle="external public payable override",Vle=qr(qle.split(" ")),m6="constant external internal payable private public pure view override",Gle=qr(m6.split(" ")),y6="constructor error event fallback function receive struct",w6=qr(y6.split(" ")),b6="calldata memory storage payable indexed",Kle=qr(b6.split(" ")),Wle="tuple returns",Yle=[y6,b6,Wle,m6].join(" "),Qle=qr(Yle.split(" ")),Zle={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Jle=new RegExp("^(\\s*)"),Xle=new RegExp("^([0-9]+)"),eue=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),E6=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),v6=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var ur,Li,Sy,T2;const mE=class mE{constructor(e){ce(this,Sy);ce(this,ur);ce(this,Li);H(this,ur,0),H(this,Li,e.slice())}get offset(){return N(this,ur)}get length(){return N(this,Li).length-N(this,ur)}clone(){return new mE(N(this,Li))}reset(){H(this,ur,0)}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=we(this,Sy,T2).call(this,N(this,ur)+1,e.match+1);return H(this,ur,e.match+1),t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;N(this,ur)<e.match-1;){const r=this.peek().linkNext;t.push(we(this,Sy,T2).call(this,N(this,ur)+1,r)),H(this,ur,r)}return H(this,ur,e.match+1),t}peek(){if(N(this,ur)>=N(this,Li).length)throw new Error("out-of-bounds");return N(this,Li)[N(this,ur)]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return yg(this,ur)._++,e}toString(){const e=[];for(let t=N(this,ur);t<N(this,Li).length;t++){const r=N(this,Li)[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};ur=new WeakMap,Li=new WeakMap,Sy=new WeakSet,T2=function(e=0,t=0){return new mE(N(this,Li).slice(e,t).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Qi=mE;function Al(n){const e=[],t=o=>{const l=i<n.length?JSON.stringify(n[i]):"$EOI";throw new Error(`invalid token ${l} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<n.length;){let o=n.substring(i),l=o.match(Jle);l&&(i+=l[1].length,o=n.substring(i));const f={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(f);let h=Zle[o[0]]||"";if(h){if(f.type=h,f.text=o[0],i++,h==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(h=="CLOSE_PAREN")r.length===0&&t("no matching open bracket"),f.match=r.pop(),e[f.match].match=e.length-1,f.depth--,f.linkBack=s.pop(),e[f.linkBack].linkNext=e.length-1;else if(h==="COMMA")f.linkBack=s.pop(),e[f.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(h==="OPEN_BRACKET")f.type="BRACKET";else if(h==="CLOSE_BRACKET"){let p=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const g=e.pop().text;p=g+p,e[e.length-1].value=it(g)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=p}continue}if(l=o.match(eue),l){if(f.text=l[1],i+=f.text.length,Qle.has(f.text)){f.type="KEYWORD";continue}if(f.text.match(v6)){f.type="TYPE";continue}f.type="ID";continue}if(l=o.match(Xle),l){f.text=l[1],f.type="NUMBER",i+=f.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Qi(e.map(o=>Object.freeze(o)))}function FD(n,e){let t=[];for(const r in e.keys())n.has(r)&&t.push(r);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function XE(n,e){if(e.peekKeyword(w6)){const t=e.pop().text;if(t!==n)throw new Error(`expected ${n}, got ${t}`)}return e.popType("ID")}function zo(n,e){const t=new Set;for(;;){const r=n.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(n.pop(),t.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);t.add(r)}return Object.freeze(t)}function A6(n){let e=zo(n,Gle);return FD(e,qr("constant payable nonpayable".split(" "))),FD(e,qr("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Bo(n,e){return n.popParams().map(t=>pr.from(t,e))}function C6(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return ke(n.pop().text);throw new Error("invalid gas")}return null}function sf(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const tue=new RegExp(/^(.*)\[([0-9]*)\]$/);function HD(n){const e=n.match(v6);if(Q(e,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(e[2]){const t=parseInt(e[2]);Q(t!==0&&t<=32,"invalid bytes length","type",n)}else if(e[3]){const t=parseInt(e[3]);Q(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",n)}return n}const dn={},ws=Symbol.for("_ethers_internal"),jD="_ParamTypeInternal",zD="_ErrorInternal",qD="_EventInternal",VD="_ConstructorInternal",GD="_FallbackInternal",KD="_FunctionInternal",WD="_StructInternal";var _d,wb;const ci=class ci{constructor(e,t,r,s,i,o,l,f){ce(this,_d);ne(this,"name");ne(this,"type");ne(this,"baseType");ne(this,"indexed");ne(this,"components");ne(this,"arrayLength");ne(this,"arrayChildren");if(Zy(e,dn,"ParamType"),Object.defineProperty(this,ws,{value:jD}),o&&(o=Object.freeze(o.slice())),s==="array"){if(l==null||f==null)throw new Error("")}else if(l!=null||f!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");We(this,{name:t,type:r,baseType:s,indexed:i,components:o,arrayLength:l,arrayChildren:f})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,t))}return t(this.type,e)}async walkAsync(e,t){const r=[],s=[e];return we(this,_d,wb).call(this,r,e,t,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,t){if(ci.isParamType(e))return e;if(typeof e=="string")try{return ci.from(Al(e),t)}catch{Q(!1,"invalid param type","obj",e)}else if(e instanceof Qi){let l="",f="",h=null;zo(e,qr(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(f="tuple",h=e.popParams().map(E=>ci.from(E)),l=`tuple(${h.map(E=>E.format()).join(",")})`):(l=HD(e.popType("TYPE")),f=l);let p=null,g=null;for(;e.length&&e.peekType("BRACKET");){const E=e.pop();p=new ci(dn,"",l,f,null,h,g,p),g=E.value,l+=E.text,f="array",h=null}let y=null;if(zo(e,Kle).has("indexed")){if(!t)throw new Error("");y=!0}const v=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new ci(dn,v,l,f,y,h,g,p)}const r=e.name;Q(!r||typeof r=="string"&&r.match(E6),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(Q(t,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(tue);if(o){const l=parseInt(o[2]||"-1"),f=ci.from({type:o[1],components:e.components});return new ci(dn,r||"",i,"array",s,null,l,f)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const l=e.components!=null?e.components.map(h=>ci.from(h)):null;return new ci(dn,r||"",i,"tuple",s,l,null,null)}return i=HD(e.type),new ci(dn,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[ws]===jD}};_d=new WeakSet,wb=function(e,t,r,s){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,l=t.slice();l.forEach((f,h)=>{var p;we(p=o,_d,wb).call(p,e,f,r,g=>{l[h]=g})}),s(l);return}if(this.isTuple()){const o=this.components;let l;if(Array.isArray(t))l=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");l=o.map(f=>{if(!f.name)throw new Error("cannot use object value with unnamed components");if(!(f.name in t))throw new Error(`missing value for component ${f.name}`);return t[f.name]})}if(l.length!==this.components.length)throw new Error("array is wrong length");l.forEach((f,h)=>{var p;we(p=o[h],_d,wb).call(p,e,f,r,g=>{l[h]=g})}),s(l);return}const i=r(this.type,t);i.then?e.push(async function(){s(await i)}()):s(i)};let pr=ci;class af{constructor(e,t,r){ne(this,"type");ne(this,"inputs");Zy(e,dn,"Fragment"),r=Object.freeze(r.slice()),We(this,{type:t,inputs:r})}static from(e){if(typeof e=="string"){try{af.from(JSON.parse(e))}catch{}return af.from(Al(e))}if(e instanceof Qi)switch(e.peekKeyword(w6)){case"constructor":return Po.from(e);case"error":return ps.from(e);case"event":return Oa.from(e);case"fallback":case"receive":return yo.from(e);case"function":return xa.from(e);case"struct":return Vu.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Po.from(e);case"error":return ps.from(e);case"event":return Oa.from(e);case"fallback":case"receive":return yo.from(e);case"function":return xa.from(e);case"struct":return Vu.from(e)}de(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Q(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Po.isFragment(e)}static isError(e){return ps.isFragment(e)}static isEvent(e){return Oa.isFragment(e)}static isFunction(e){return xa.isFragment(e)}static isStruct(e){return Vu.isFragment(e)}}class ev extends af{constructor(t,r,s,i){super(t,r,i);ne(this,"name");Q(typeof s=="string"&&s.match(E6),"invalid identifier","name",s),i=Object.freeze(i.slice()),We(this,{name:s})}}function yy(n,e){return"("+e.map(t=>t.format(n)).join(n==="full"?", ":",")+")"}class ps extends ev{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,ws,{value:zD})}get selector(){return rf(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+yy(e,this.inputs)),t.join(" ")}static from(e){if(ps.isFragment(e))return e;if(typeof e=="string")return ps.from(Al(e));if(e instanceof Qi){const t=XE("error",e),r=Bo(e);return sf(e),new ps(dn,t,r)}return new ps(dn,e.name,e.inputs?e.inputs.map(pr.from):[])}static isFragment(e){return e&&e[ws]===zD}}class Oa extends ev{constructor(t,r,s,i){super(t,"event",r,s);ne(this,"anonymous");Object.defineProperty(this,ws,{value:qD}),We(this,{anonymous:i})}get topicHash(){return rf(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(t)))});const r=[];return t!=="sighash"&&r.push("event"),r.push(this.name+yy(t,this.inputs)),t!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(t,r){return r=(r||[]).map(i=>pr.from(i)),new Oa(dn,t,r,!1).topicHash}static from(t){if(Oa.isFragment(t))return t;if(typeof t=="string")try{return Oa.from(Al(t))}catch{Q(!1,"invalid event fragment","obj",t)}else if(t instanceof Qi){const r=XE("event",t),s=Bo(t,!0),i=!!zo(t,qr(["anonymous"])).has("anonymous");return sf(t),new Oa(dn,r,s,i)}return new Oa(dn,t.name,t.inputs?t.inputs.map(r=>pr.from(r,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[ws]===qD}}class Po extends af{constructor(t,r,s,i,o){super(t,r,s);ne(this,"payable");ne(this,"gas");Object.defineProperty(this,ws,{value:VD}),We(this,{payable:i,gas:o})}format(t){if(de(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(t)))});const r=[`constructor${yy(t,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(t){if(Po.isFragment(t))return t;if(typeof t=="string")try{return Po.from(Al(t))}catch{Q(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof Qi){zo(t,qr(["constructor"]));const r=Bo(t),s=!!zo(t,Vle).has("payable"),i=C6(t);return sf(t),new Po(dn,"constructor",r,s,i)}return new Po(dn,"constructor",t.inputs?t.inputs.map(pr.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[ws]===VD}}class yo extends af{constructor(t,r,s){super(t,"fallback",r);ne(this,"payable");Object.defineProperty(this,ws,{value:GD}),We(this,{payable:s})}format(t){const r=this.inputs.length===0?"receive":"fallback";if(t==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(t){if(yo.isFragment(t))return t;if(typeof t=="string")try{return yo.from(Al(t))}catch{Q(!1,"invalid fallback fragment","obj",t)}else if(t instanceof Qi){const r=t.toString(),s=t.peekKeyword(qr(["fallback","receive"]));if(Q(s,"type must be fallback or receive","obj",r),t.popKeyword(qr(["fallback","receive"]))==="receive"){const f=Bo(t);return Q(f.length===0,"receive cannot have arguments","obj.inputs",f),zo(t,qr(["payable"])),sf(t),new yo(dn,[],!0)}let o=Bo(t);o.length?Q(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(f=>f.format("minimal")).join(", ")):o=[pr.from("bytes")];const l=A6(t);if(Q(l==="nonpayable"||l==="payable","fallback cannot be constants","obj.stateMutability",l),zo(t,qr(["returns"])).has("returns")){const f=Bo(t);Q(f.length===1&&f[0].type==="bytes","invalid fallback outputs","obj.outputs",f.map(h=>h.format("minimal")).join(", "))}return sf(t),new yo(dn,o,l==="payable")}if(t.type==="receive")return new yo(dn,[],!0);if(t.type==="fallback"){const r=[pr.from("bytes")],s=t.stateMutability==="payable";return new yo(dn,r,s)}Q(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[ws]===GD}}class xa extends ev{constructor(t,r,s,i,o,l){super(t,"function",r,i);ne(this,"constant");ne(this,"outputs");ne(this,"stateMutability");ne(this,"payable");ne(this,"gas");Object.defineProperty(this,ws,{value:KD}),o=Object.freeze(o.slice()),We(this,{constant:s==="view"||s==="pure",gas:l,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return rf(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(t))),outputs:this.outputs.map(s=>JSON.parse(s.format(t)))});const r=[];return t!=="sighash"&&r.push("function"),r.push(this.name+yy(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(yy(t,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(t,r){return r=(r||[]).map(i=>pr.from(i)),new xa(dn,t,"view",r,[],null).selector}static from(t){if(xa.isFragment(t))return t;if(typeof t=="string")try{return xa.from(Al(t))}catch{Q(!1,"invalid function fragment","obj",t)}else if(t instanceof Qi){const s=XE("function",t),i=Bo(t),o=A6(t);let l=[];zo(t,qr(["returns"])).has("returns")&&(l=Bo(t));const f=C6(t);return sf(t),new xa(dn,s,o,i,l,f)}let r=t.stateMutability;return r==null&&(r="payable",typeof t.constant=="boolean"?(r="view",t.constant||(r="payable",typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable")),new xa(dn,t.name,r,t.inputs?t.inputs.map(pr.from):[],t.outputs?t.outputs.map(pr.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[ws]===KD}}class Vu extends ev{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,ws,{value:WD})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Vu.from(Al(e))}catch{Q(!1,"invalid struct fragment","obj",e)}else if(e instanceof Qi){const t=XE("struct",e),r=Bo(e);return sf(e),new Vu(dn,t,r)}return new Vu(dn,e.name,e.inputs?e.inputs.map(pr.from):[])}static isFragment(e){return e&&e[ws]===WD}}const Ji=new Map;Ji.set(0,"GENERIC_PANIC");Ji.set(1,"ASSERT_FALSE");Ji.set(17,"OVERFLOW");Ji.set(18,"DIVIDE_BY_ZERO");Ji.set(33,"ENUM_RANGE_ERROR");Ji.set(34,"BAD_STORAGE_DATA");Ji.set(49,"STACK_UNDERFLOW");Ji.set(50,"ARRAY_RANGE_ERROR");Ji.set(65,"OUT_OF_MEMORY");Ji.set(81,"UNINITIALIZED_FUNCTION_CALL");const nue=new RegExp(/^bytes([0-9]*)$/),rue=new RegExp(/^(u?int)([0-9]*)$/);let zC=null,YD=1024;function sue(n,e,t,r){let s="missing revert data",i=null;const o=null;let l=null;if(t){s="execution reverted";const h=ut(t);if(t=Ne(t),h.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(h.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Ne(h.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],h.slice(4))[0],l={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Ne(h.slice(0,4))==="0x4e487b71")try{const p=Number(r.decode(["uint256"],h.slice(4))[0]);l={signature:"Panic(uint256)",name:"Panic",args:[p]},i=`Panic due to ${Ji.get(p)||"UNKNOWN"}(${p})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const f={to:e.to?Lt(e.to):null,data:e.data||"0x"};return e.from&&(f.from=Lt(e.from)),ln(s,"CALL_EXCEPTION",{action:n,data:t,reason:i,transaction:f,invocation:o,revert:l})}var Kc,Uh;const yE=class yE{constructor(){ce(this,Kc)}getDefaultValue(e){const t=e.map(s=>we(this,Kc,Uh).call(this,pr.from(s)));return new Xw(t,"_").defaultValue()}encode(e,t){W4(t.length,e.length,"types/values length mismatch");const r=e.map(o=>we(this,Kc,Uh).call(this,pr.from(o))),s=new Xw(r,"_"),i=new d2;return s.encode(i,t),i.data}decode(e,t,r){const s=e.map(o=>we(this,Kc,Uh).call(this,pr.from(o)));return new Xw(s,"_").decode(new p2(t,r,YD))}static _setDefaultMaxInflation(e){Q(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),YD=e}static defaultAbiCoder(){return zC==null&&(zC=new yE),zC}static getBuiltinCallException(e,t,r){return sue(e,t,r,yE.defaultAbiCoder())}};Kc=new WeakSet,Uh=function(e){if(e.isArray())return new Ace(we(this,Kc,Uh).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Xw(e.components.map(r=>we(this,Kc,Uh).call(this,r)),e.name);switch(e.baseType){case"address":return new Ece(e.name);case"bool":return new Cce(e.name);case"string":return new Pce(e.name);case"bytes":return new _ce(e.name);case"":return new Tce(e.name)}let t=e.type.match(rue);if(t){let r=parseInt(t[2]||"256");return Q(r!==0&&r<=256&&r%8===0,"invalid "+t[1]+" bit length","param",e),new Rce(r/8,t[1]==="int",e.name)}if(t=e.type.match(nue),t){let r=parseInt(t[1]);return Q(r!==0&&r<=32,"invalid bytes length","param",e),new Sce(r,e.name)}Q(!1,"invalid type","type",e.type)};let wy=yE;class iue{constructor(e,t,r){ne(this,"fragment");ne(this,"name");ne(this,"signature");ne(this,"topic");ne(this,"args");const s=e.name,i=e.format();We(this,{fragment:e,name:s,signature:i,topic:t,args:r})}}class aue{constructor(e,t,r,s){ne(this,"fragment");ne(this,"name");ne(this,"args");ne(this,"signature");ne(this,"selector");ne(this,"value");const i=e.name,o=e.format();We(this,{fragment:e,name:i,args:r,signature:o,selector:t,value:s})}}class oue{constructor(e,t,r){ne(this,"fragment");ne(this,"name");ne(this,"args");ne(this,"signature");ne(this,"selector");const s=e.name,i=e.format();We(this,{fragment:e,name:s,args:r,signature:i,selector:t})}}class QD{constructor(e){ne(this,"hash");ne(this,"_isIndexed");We(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const ZD={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},JD={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let e="unknown panic code";return n>=0&&n<=255&&ZD[n.toString()]&&(e=ZD[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${e})`}}};var wa,ba,Ea,Sr,Ma,bb,Eb;const ou=class ou{constructor(e){ce(this,Ma);ne(this,"fragments");ne(this,"deploy");ne(this,"fallback");ne(this,"receive");ce(this,wa);ce(this,ba);ce(this,Ea);ce(this,Sr);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,H(this,Ea,new Map),H(this,wa,new Map),H(this,ba,new Map);const r=[];for(const o of t)try{r.push(af.from(o))}catch(l){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,l.message)}We(this,{fragments:Object.freeze(r)});let s=null,i=!1;H(this,Sr,this.getAbiCoder()),this.fragments.forEach((o,l)=>{let f;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}We(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(Q(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${l}]`,o),s=o,i=s.payable);return;case"function":f=N(this,Ea);break;case"event":f=N(this,ba);break;case"error":f=N(this,wa);break;default:return}const h=o.format();f.has(h)||f.set(h,o)}),this.deploy||We(this,{deploy:Po.from("constructor()")}),We(this,{fallback:s,receive:i})}format(e){const t=e?"minimal":"full";return this.fragments.map(s=>s.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return wy.defaultAbiCoder()}getFunctionName(e){const t=we(this,Ma,bb).call(this,e,null,!1);return Q(t,"no matching function","key",e),t.name}hasFunction(e){return!!we(this,Ma,bb).call(this,e,null,!1)}getFunction(e,t){return we(this,Ma,bb).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(N(this,Ea).keys());t.sort((r,s)=>r.localeCompare(s));for(let r=0;r<t.length;r++){const s=t[r];e(N(this,Ea).get(s),r)}}getEventName(e){const t=we(this,Ma,Eb).call(this,e,null,!1);return Q(t,"no matching event","key",e),t.name}hasEvent(e){return!!we(this,Ma,Eb).call(this,e,null,!1)}getEvent(e,t){return we(this,Ma,Eb).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(N(this,ba).keys());t.sort((r,s)=>r.localeCompare(s));for(let r=0;r<t.length;r++){const s=t[r];e(N(this,ba).get(s),r)}}getError(e,t){if(Xt(e)){const s=e.toLowerCase();if(JD[s])return ps.from(JD[s].signature);for(const i of N(this,wa).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of N(this,wa))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?ps.from("error Error(string)"):e==="Panic"?ps.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");Q(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=ps.from(e).format(),e==="Error(string)")return ps.from("error Error(string)");if(e==="Panic(uint256)")return ps.from("error Panic(uint256)");const r=N(this,wa).get(e);return r||null}forEachError(e){const t=Array.from(N(this,wa).keys());t.sort((r,s)=>r.localeCompare(s));for(let r=0;r<t.length;r++){const s=t[r];e(N(this,wa).get(s),r)}}_decodeParams(e,t){return N(this,Sr).decode(e,t)}_encodeParams(e,t){return N(this,Sr).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return Q(yn(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,yn(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return wn([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Q(yn(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,yn(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return wn([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const i=this.getFunction(e);Q(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=Hr(t);if(s.length%32===0)try{return N(this,Sr).decode(e.outputs,s)}catch{r="could not decode result data"}de(!1,r,"BAD_DATA",{value:Ne(s),info:{method:e.name,signature:e.format()}})}makeError(e,t){const r=ut(e,"data"),s=wy.getBuiltinCallException("call",t,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const l=Ne(r.slice(0,4)),f=this.getError(l);if(f)try{const h=N(this,Sr).decode(f.inputs,r.slice(4));s.revert={name:f.name,signature:f.format(),args:h},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(t);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,t){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Ne(N(this,Sr).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const i=this.getEvent(e);Q(i,"unknown event","eventFragment",e),e=i}de(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?rf(o):i.type==="bytes"?xn(Ne(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=wl(o):i.type.match(/^bytes/)?o=_ae(o,32):i.type==="address"&&N(this,Sr).encode(["address"],[o]),Ho(Ne(o),32));for(t.forEach((i,o)=>{const l=e.inputs[o];if(!l.indexed){Q(i==null,"cannot filter non-indexed parameters; must be null","contract."+l.name,i);return}i==null?r.push(null):l.baseType==="array"||l.baseType==="tuple"?Q(!1,"filtering with tuples or arrays not supported","contract."+l.name,i):Array.isArray(i)?r.push(i.map(f=>s(l,f))):r.push(s(l,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){if(typeof e=="string"){const o=this.getEvent(e);Q(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),Q(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,l)=>{const f=t[l];if(o.indexed)if(o.type==="string")r.push(rf(f));else if(o.type==="bytes")r.push(xn(f));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(N(this,Sr).encode([o.type],[f]))}else s.push(o),i.push(f)}),{data:N(this,Sr).encode(s,i),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"){const b=this.getEvent(e);Q(b,"unknown event","eventFragment",e),e=b}if(r!=null&&!e.anonymous){const b=e.topicHash;Q(Xt(r[0],32)&&r[0].toLowerCase()===b,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((b,v)=>{b.indexed?b.type==="string"||b.type==="bytes"||b.baseType==="tuple"||b.baseType==="array"?(s.push(pr.from({type:"bytes32",name:b.name})),o.push(!0)):(s.push(b),o.push(!1)):(i.push(b),o.push(!1))});const l=r!=null?N(this,Sr).decode(s,wn(r)):null,f=N(this,Sr).decode(i,t,!0),h=[],p=[];let g=0,y=0;return e.inputs.forEach((b,v)=>{let E=null;if(b.indexed)if(l==null)E=new QD(null);else if(o[v])E=new QD(l[y++]);else try{E=l[y++]}catch(A){E=A}else try{E=f[g++]}catch(A){E=A}h.push(E),p.push(b.name||null)}),ep.fromItems(h,p)}parseTransaction(e){const t=ut(e.data,"tx.data"),r=ke(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Ne(t.slice(0,4)));if(!s)return null;const i=N(this,Sr).decode(s.inputs,t.slice(4));return new aue(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new iue(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=Ne(e),r=this.getError(yn(t,0,4));if(!r)return null;const s=N(this,Sr).decode(r.inputs,yn(t,4));return new oue(r,r.selector,s)}static from(e){return e instanceof ou?e:typeof e=="string"?new ou(JSON.parse(e)):typeof e.formatJson=="function"?new ou(e.formatJson()):typeof e.format=="function"?new ou(e.format("json")):new ou(e)}};wa=new WeakMap,ba=new WeakMap,Ea=new WeakMap,Sr=new WeakMap,Ma=new WeakSet,bb=function(e,t,r){if(Xt(e)){const i=e.toLowerCase();for(const o of N(this,Ea).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,l]of N(this,Ea))o.split("(")[0]===e&&i.push(l);if(t){const o=t.length>0?t[t.length-1]:null;let l=t.length,f=!0;Or.isTyped(o)&&o.type==="overrides"&&(f=!1,l--);for(let h=i.length-1;h>=0;h--){const p=i[h].inputs.length;p!==l&&(!f||p!==l-1)&&i.splice(h,1)}for(let h=i.length-1;h>=0;h--){const p=i[h].inputs;for(let g=0;g<t.length;g++)if(Or.isTyped(t[g])){if(g>=p.length){if(t[g].type==="overrides")continue;i.splice(h,1);break}if(t[g].type!==p[g].baseType){i.splice(h,1);break}}}}if(i.length===1&&t&&t.length!==i[0].inputs.length){const o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(l=>JSON.stringify(l.format())).join(", ");Q(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=N(this,Ea).get(xa.from(e).format());return s||null},Eb=function(e,t,r){if(Xt(e)){const i=e.toLowerCase();for(const o of N(this,ba).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,l]of N(this,ba))o.split("(")[0]===e&&i.push(l);if(t){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<t.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const l=i[o].inputs;for(let f=0;f<t.length;f++)if(Or.isTyped(t[f])&&t[f].type!==l[f].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(l=>JSON.stringify(l.format())).join(", ");Q(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=N(this,ba).get(Oa.from(e).format());return s||null};let O2=ou;const _6=BigInt(0);function Jh(n){return n??null}function vn(n){return n==null?null:n.toString()}class XD{constructor(e,t,r){ne(this,"gasPrice");ne(this,"maxFeePerGas");ne(this,"maxPriorityFeePerGas");We(this,{gasPrice:Jh(e),maxFeePerGas:Jh(t),maxPriorityFeePerGas:Jh(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:vn(e),maxFeePerGas:vn(t),maxPriorityFeePerGas:vn(r)}}}function fE(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=Ne(n.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of t)!(s in n)||n[s]==null||(e[s]=ke(n[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in n)||n[s]==null||(e[s]=it(n[s],`request.${s}`));return n.accessList&&(e.accessList=yf(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(s=>FS(s)?Ne(s):Object.assign({},s))),e}var Co;class cue{constructor(e,t){ne(this,"provider");ne(this,"number");ne(this,"hash");ne(this,"timestamp");ne(this,"parentHash");ne(this,"parentBeaconBlockRoot");ne(this,"nonce");ne(this,"difficulty");ne(this,"gasLimit");ne(this,"gasUsed");ne(this,"stateRoot");ne(this,"receiptsRoot");ne(this,"blobGasUsed");ne(this,"excessBlobGas");ne(this,"miner");ne(this,"prevRandao");ne(this,"extraData");ne(this,"baseFeePerGas");ce(this,Co);H(this,Co,e.transactions.map(r=>typeof r!="string"?new by(r,t):r)),We(this,{provider:t,hash:Jh(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Jh(e.prevRandao),extraData:e.extraData,baseFeePerGas:Jh(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return N(this,Co).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=N(this,Co).slice();return e.length===0?[]:(de(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:l,prevRandao:f,nonce:h,number:p,parentHash:g,parentBeaconBlockRoot:y,stateRoot:b,receiptsRoot:v,timestamp:E,transactions:A}=this;return{_type:"Block",baseFeePerGas:vn(e),difficulty:vn(t),extraData:r,gasLimit:vn(s),gasUsed:vn(i),blobGasUsed:vn(this.blobGasUsed),excessBlobGas:vn(this.excessBlobGas),hash:o,miner:l,prevRandao:f,nonce:h,number:p,parentHash:g,timestamp:E,parentBeaconBlockRoot:y,stateRoot:b,receiptsRoot:v,transactions:A}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return N(this,Co).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=N(this,Co)[e];else{const r=e.toLowerCase();for(const s of N(this,Co))if(typeof s=="string"){if(s!==r)continue;t=s;break}else{if(s.hash!==r)continue;t=s;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const r of t)if(r.hash===e)return r;Q(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return lue(this)}}Co=new WeakMap;class e0{constructor(e,t){ne(this,"provider");ne(this,"transactionHash");ne(this,"blockHash");ne(this,"blockNumber");ne(this,"removed");ne(this,"address");ne(this,"data");ne(this,"topics");ne(this,"index");ne(this,"transactionIndex");this.provider=t;const r=Object.freeze(e.topics.slice());We(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:r,data:s,index:i,removed:o,topics:l,transactionHash:f,transactionIndex:h}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:s,index:i,removed:o,topics:l,transactionHash:f,transactionIndex:h}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return de(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return de(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return de(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return uue(this)}}var Ny;class S6{constructor(e,t){ne(this,"provider");ne(this,"to");ne(this,"from");ne(this,"contractAddress");ne(this,"hash");ne(this,"index");ne(this,"blockHash");ne(this,"blockNumber");ne(this,"logsBloom");ne(this,"gasUsed");ne(this,"blobGasUsed");ne(this,"cumulativeGasUsed");ne(this,"gasPrice");ne(this,"blobGasPrice");ne(this,"type");ne(this,"status");ne(this,"root");ce(this,Ny);H(this,Ny,Object.freeze(e.logs.map(s=>new e0(s,t))));let r=_6;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),We(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return N(this,Ny)}toJSON(){const{to:e,from:t,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:l,logsBloom:f,logs:h,status:p,root:g}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:l,contractAddress:r,cumulativeGasUsed:vn(this.cumulativeGasUsed),from:t,gasPrice:vn(this.gasPrice),blobGasUsed:vn(this.blobGasUsed),blobGasPrice:vn(this.blobGasPrice),gasUsed:vn(this.gasUsed),hash:s,index:i,logs:h,logsBloom:f,root:g,status:p,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return T6(this)}reorderedEvent(e){return de(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),N6(this,e)}}Ny=new WeakMap;var Wc;const aN=class aN{constructor(e,t){ne(this,"provider");ne(this,"blockNumber");ne(this,"blockHash");ne(this,"index");ne(this,"hash");ne(this,"type");ne(this,"to");ne(this,"from");ne(this,"nonce");ne(this,"gasLimit");ne(this,"gasPrice");ne(this,"maxPriorityFeePerGas");ne(this,"maxFeePerGas");ne(this,"maxFeePerBlobGas");ne(this,"data");ne(this,"value");ne(this,"chainId");ne(this,"signature");ne(this,"accessList");ne(this,"blobVersionedHashes");ne(this,"authorizationList");ce(this,Wc);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,H(this,Wc,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:r,hash:s,type:i,to:o,from:l,nonce:f,data:h,signature:p,accessList:g,blobVersionedHashes:y}=this;return{_type:"TransactionResponse",accessList:g,blockNumber:e,blockHash:t,blobVersionedHashes:y,chainId:vn(this.chainId),data:h,from:l,gasLimit:vn(this.gasLimit),gasPrice:vn(this.gasPrice),hash:s,maxFeePerGas:vn(this.maxFeePerGas),maxPriorityFeePerGas:vn(this.maxPriorityFeePerGas),maxFeePerBlobGas:vn(this.maxFeePerBlobGas),nonce:f,signature:p,to:o,index:r,type:i,value:vn(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:r}=await $r({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:r-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const r=e??1,s=t??0;let i=N(this,Wc),o=-1,l=i===-1;const f=async()=>{if(l)return null;const{blockNumber:y,nonce:b}=await $r({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(b<this.nonce){i=y;return}if(l)return null;const v=await this.getTransaction();if(!(v&&v.blockNumber!=null))for(o===-1&&(o=i-3,o<N(this,Wc)&&(o=N(this,Wc)));o<=y;){if(l)return null;const E=await this.provider.getBlock(o,!0);if(E==null)return;for(const A of E)if(A===this.hash)return;for(let A=0;A<E.length;A++){const S=await E.getTransaction(A);if(S.from===this.from&&S.nonce===this.nonce){if(l)return null;const O=await this.provider.getTransactionReceipt(S.hash);if(O==null||y-O.blockNumber+1<r)return;let T="replaced";S.data===this.data&&S.to===this.to&&S.value===this.value?T="repriced":S.data==="0x"&&S.from===S.to&&S.value===_6&&(T="cancelled"),de(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:T==="replaced"||T==="cancelled",reason:T,replacement:S.replaceableTransaction(i),hash:S.hash,receipt:O})}}o++}},h=y=>{if(y==null||y.status!==0)return y;de(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:y.to,from:y.from,data:""},receipt:y})},p=await this.provider.getTransactionReceipt(this.hash);if(r===0)return h(p);if(p){if(r===1||await p.confirmations()>=r)return h(p)}else if(await f(),r===0)return null;return await new Promise((y,b)=>{const v=[],E=()=>{v.forEach(S=>S())};if(v.push(()=>{l=!0}),s>0){const S=setTimeout(()=>{E(),b(ln("wait for transaction timeout","TIMEOUT"))},s);v.push(()=>{clearTimeout(S)})}const A=async S=>{if(await S.confirmations()>=r){E();try{y(h(S))}catch(O){b(O)}}};if(v.push(()=>{this.provider.off(this.hash,A)}),this.provider.on(this.hash,A),i>=0){const S=async()=>{try{await f()}catch(O){if(dr(O,"TRANSACTION_REPLACED")){E(),b(O);return}}l||this.provider.once("block",S)};v.push(()=>{this.provider.off("block",S)}),this.provider.once("block",S)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return de(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),T6(this)}reorderedEvent(e){return de(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),de(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),N6(this,e)}replaceableTransaction(e){Q(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new aN(this,this.provider);return H(t,Wc,e),t}};Wc=new WeakMap;let by=aN;function lue(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function N6(n,e){return{orphan:"reorder-transaction",tx:n,other:e}}function T6(n){return{orphan:"drop-transaction",tx:n}}function uue(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class XS extends e0{constructor(t,r,s){super(t,t.provider);ne(this,"interface");ne(this,"fragment");ne(this,"args");const i=r.decodeEventLog(s,t.data,t.topics);We(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class O6 extends e0{constructor(t,r){super(t,t.provider);ne(this,"error");We(this,{error:r})}}var Sd;class fue extends S6{constructor(t,r,s){super(s,r);ce(this,Sd);H(this,Sd,t)}get logs(){return super.logs.map(t=>{const r=t.topics.length?N(this,Sd).getEvent(t.topics[0]):null;if(r)try{return new XS(t,N(this,Sd),r)}catch(s){return new O6(t,s)}return t})}}Sd=new WeakMap;var Ty;class eN extends by{constructor(t,r,s){super(s,r);ce(this,Ty);H(this,Ty,t)}async wait(t,r){const s=await super.wait(t,r);return s==null?null:new fue(N(this,Ty),this.provider,s)}}Ty=new WeakMap;class x6 extends J4{constructor(t,r,s,i){super(t,r,s);ne(this,"log");We(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class hue extends x6{constructor(e,t,r,s,i){super(e,t,r,new XS(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);We(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const eU=BigInt(0);function I6(n){return n&&typeof n.call=="function"}function R6(n){return n&&typeof n.estimateGas=="function"}function tv(n){return n&&typeof n.resolveName=="function"}function P6(n){return n&&typeof n.sendTransaction=="function"}function D6(n){if(n!=null){if(tv(n))return n;if(n.provider)return n.provider}}var Oy;class due{constructor(e,t,r){ce(this,Oy);ne(this,"fragment");if(We(this,{fragment:t}),t.inputs.length<r.length)throw new Error("too many arguments");const s=of(e.runner,"resolveName"),i=tv(s)?s:null;H(this,Oy,async function(){const o=await Promise.all(t.inputs.map((l,f)=>r[f]==null?null:l.walkAsync(r[f],(p,g)=>p==="address"?Array.isArray(g)?Promise.all(g.map(y=>zr(y,i))):zr(g,i):g)));return e.interface.encodeFilterTopics(t,o)}())}getTopicFilter(){return N(this,Oy)}}Oy=new WeakMap;function of(n,e){return n==null?null:typeof n[e]=="function"?n:n.provider&&typeof n.provider[e]=="function"?n.provider:null}function bu(n){return n==null?null:n.provider||null}async function U6(n,e){const t=Or.dereference(n,"overrides");Q(typeof t=="object","invalid overrides parameter","overrides",n);const r=fE(t);return Q(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Q(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function pue(n,e,t){const r=of(n,"resolveName"),s=tv(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(t[o],(l,f)=>(f=Or.dereference(f,l),l==="address"?zr(f,s):f))))}function gue(n){const e=async function(o){const l=await U6(o,["data"]);l.to=await n.getAddress(),l.from&&(l.from=await zr(l.from,D6(n.runner)));const f=n.interface,h=ke(l.value||eU,"overrides.value")===eU,p=(l.data||"0x")==="0x";f.fallback&&!f.fallback.payable&&f.receive&&!p&&!h&&Q(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),Q(f.fallback||p,"cannot send data to receive-only contract","overrides.data",l.data);const g=f.receive||f.fallback&&f.fallback.payable;return Q(g||h,"cannot send value to non-payable fallback","overrides.value",l.value),Q(f.fallback||p,"cannot send data to receive-only contract","overrides.data",l.data),l},t=async function(o){const l=of(n.runner,"call");de(I6(l),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await e(o);try{return await l.call(f)}catch(h){throw $S(h)&&h.data?n.interface.makeError(h.data,f):h}},r=async function(o){const l=n.runner;de(P6(l),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await l.sendTransaction(await e(o)),h=bu(n.runner);return new eN(n.interface,h,f)},s=async function(o){const l=of(n.runner,"estimateGas");return de(R6(l),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await l.estimateGas(await e(o))},i=async o=>await r(o);return We(i,{_contract:n,estimateGas:s,populateTransaction:e,send:r,staticCall:t}),i}function mue(n,e){const t=function(...h){const p=n.interface.getFunction(e,h);return de(p,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:h}}),p},r=async function(...h){const p=t(...h);let g={};if(p.inputs.length+1===h.length&&(g=await U6(h.pop()),g.from&&(g.from=await zr(g.from,D6(n.runner)))),p.inputs.length!==h.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const y=await pue(n.runner,p.inputs,h);return Object.assign({},g,await $r({to:n.getAddress(),data:n.interface.encodeFunctionData(p,y)}))},s=async function(...h){const p=await l(...h);return p.length===1?p[0]:p},i=async function(...h){const p=n.runner;de(P6(p),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const g=await p.sendTransaction(await r(...h)),y=bu(n.runner);return new eN(n.interface,y,g)},o=async function(...h){const p=of(n.runner,"estimateGas");return de(R6(p),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await p.estimateGas(await r(...h))},l=async function(...h){const p=of(n.runner,"call");de(I6(p),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const g=await r(...h);let y="0x";try{y=await p.call(g)}catch(v){throw $S(v)&&v.data?n.interface.makeError(v.data,g):v}const b=t(...h);return n.interface.decodeFunctionResult(b,y)},f=async(...h)=>t(...h).constant?await s(...h):await i(...h);return We(f,{name:n.interface.getFunctionName(e),_contract:n,_key:e,getFragment:t,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:l}),Object.defineProperty(f,"fragment",{configurable:!1,enumerable:!0,get:()=>{const h=n.interface.getFunction(e);return de(h,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),h}}),f}function yue(n,e){const t=function(...s){const i=n.interface.getEvent(e,s);return de(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new due(n,t(...s),s)};return We(r,{name:n.interface.getEventName(e),_contract:n,_key:e,getFragment:t}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=n.interface.getEvent(e);return de(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const hE=Symbol.for("_ethersInternal_contract"),k6=new WeakMap;function wue(n,e){k6.set(n[hE],e)}function Ps(n){return k6.get(n[hE])}function bue(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function tN(n,e){let t,r=null;if(Array.isArray(e)){const i=function(o){if(Xt(o,32))return o;const l=n.interface.getEvent(o);return Q(l,"unknown fragment","name",o),l.topicHash};t=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?t=[null]:typeof e=="string"?Xt(e,32)?t=[e]:(r=n.interface.getEvent(e),Q(r,"unknown fragment","event",e),t=[r.topicHash]):bue(e)?t=await e.getTopicFilter():"fragment"in e?(r=e.fragment,t=[r.topicHash]):Q(!1,"unknown event name","event",e);t=t.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(l=>l.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=t.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:t}}async function Xg(n,e){const{subs:t}=Ps(n);return t.get((await tN(n,e)).tag)||null}async function tU(n,e,t){const r=bu(n.runner);de(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await tN(n,t),{addr:l,subs:f}=Ps(n);let h=f.get(i);if(!h){const g={address:l||n,topics:o},y=A=>{let S=s;if(S==null)try{S=n.interface.getEvent(A.topics[0])}catch{}if(S){const O=S,T=s?n.interface.decodeEventLog(s,A.data,A.topics):[];I2(n,t,T,k=>new hue(n,k,t,O,A))}else I2(n,t,[],O=>new x6(n,O,t,A))};let b=[];h={tag:i,listeners:[],start:()=>{b.length||b.push(r.on(g,y))},stop:async()=>{if(b.length==0)return;let A=b;b=[],await Promise.all(A),r.off(g,y)}},f.set(i,h)}return h}let x2=Promise.resolve();async function Eue(n,e,t,r){await x2;const s=await Xg(n,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:l})=>{const f=Array.from(t);r&&f.push(r(l?null:o));try{o.call(n,...f)}catch{}return!l}),s.listeners.length===0&&(s.stop(),Ps(n).subs.delete(s.tag)),i>0}async function I2(n,e,t,r){try{await x2}catch{}const s=Eue(n,e,t,r);return x2=s,await s}const tb=["then"];var pU;pU=hE;const Em=class Em{constructor(e,t,r,s){ne(this,"target");ne(this,"interface");ne(this,"runner");ne(this,"filters");ne(this,pU);ne(this,"fallback");Q(typeof e=="string"||Fk(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=O2.from(t);We(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,hE,{value:{}});let o,l=null,f=null;if(s){const g=bu(r);f=new eN(this.interface,g,s)}let h=new Map;if(typeof e=="string")if(Xt(e))l=e,o=Promise.resolve(e);else{const g=of(r,"resolveName");if(!tv(g))throw ln("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=g.resolveName(e).then(y=>{if(y==null)throw ln("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Ps(this).addr=y,y})}else o=e.getAddress().then(g=>{if(g==null)throw new Error("TODO");return Ps(this).addr=g,g});wue(this,{addrPromise:o,addr:l,deployTx:f,subs:h});const p=new Proxy({},{get:(g,y,b)=>{if(typeof y=="symbol"||tb.indexOf(y)>=0)return Reflect.get(g,y,b);try{return this.getEvent(y)}catch(v){if(!dr(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(g,y)=>tb.indexOf(y)>=0?Reflect.has(g,y):Reflect.has(g,y)||this.interface.hasEvent(String(y))});return We(this,{filters:p}),We(this,{fallback:i.receive||i.fallback?gue(this):null}),new Proxy(this,{get:(g,y,b)=>{if(typeof y=="symbol"||y in g||tb.indexOf(y)>=0)return Reflect.get(g,y,b);try{return g.getFunction(y)}catch(v){if(!dr(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(g,y)=>typeof y=="symbol"||y in g||tb.indexOf(y)>=0?Reflect.has(g,y):g.interface.hasFunction(y)})}connect(e){return new Em(this.target,this.interface,e)}attach(e){return new Em(e,this.interface,this.runner)}async getAddress(){return await Ps(this).addrPromise}async getDeployedCode(){const e=bu(this.runner);de(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=bu(this.runner);return de(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(l){i(l)}};o()})}deploymentTransaction(){return Ps(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),mue(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),yue(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,r){t==null&&(t=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Ps(this),o=s||await i,{fragment:l,topics:f}=await tN(this,e),h={address:o,topics:f,fromBlock:t,toBlock:r},p=bu(this.runner);return de(p,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await p.getLogs(h)).map(g=>{let y=l;if(y==null)try{y=this.interface.getEvent(g.topics[0])}catch{}if(y)try{return new XS(g,this.interface,y)}catch(b){return new O6(g,b)}return new e0(g,p)})}async on(e,t){const r=await tU(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){const r=await tU(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await I2(this,e,t,null)}async listenerCount(e){if(e){const s=await Xg(this,e);return s?s.listeners.length:0}const{subs:t}=Ps(this);let r=0;for(const{listeners:s}of t.values())r+=s.length;return r}async listeners(e){if(e){const s=await Xg(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:t}=Ps(this);let r=[];for(const{listeners:s}of t.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,t){const r=await Xg(this,e);if(!r)return this;if(t){const s=r.listeners.map(({listener:i})=>i).indexOf(t);s>=0&&r.listeners.splice(s,1)}return(t==null||r.listeners.length===0)&&(r.stop(),Ps(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const t=await Xg(this,e);if(!t)return this;t.stop(),Ps(this).subs.delete(t.tag)}else{const{subs:t}=Ps(this);for(const{tag:r,stop:s}of t.values())s(),t.delete(r)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends Em{constructor(s,i=null){super(s,e,i)}}return t}static from(e,t,r){return r==null&&(r=null),new this(e,t,r)}};let R2=Em;function vue(){return R2}class hl extends vue(){}function qC(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):Q(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class Aue{constructor(e){ne(this,"name");We(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const B6=new RegExp("^(ipfs)://(.*)$","i"),nU=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),B6,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Yc,Pu,Qc,kh,wE,M6;const jh=class jh{constructor(e,t,r){ce(this,Qc);ne(this,"provider");ne(this,"address");ne(this,"name");ce(this,Yc);ce(this,Pu);We(this,{provider:e,address:t,name:r}),H(this,Yc,null),H(this,Pu,new hl(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return N(this,Yc)==null&&H(this,Yc,(async()=>{try{return await N(this,Pu).supportsInterface("0x9061b923")}catch(e){if(dr(e,"CALL_EXCEPTION"))return!1;throw H(this,Yc,null),e}})()),await N(this,Yc)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await we(this,Qc,kh).call(this,"addr(bytes32)");return i==null||i===fy?null:i}catch(i){if(dr(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await we(this,Qc,kh).call(this,"addr(bytes32,uint)",[i]);if(Xt(o,20))return Lt(o)}let t=null;for(const i of this.provider.plugins)if(i instanceof Aue&&i.supportsCoinType(e)){t=i;break}if(t==null)return null;const r=await we(this,Qc,kh).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await t.decodeAddress(e,r);if(s!=null)return s;de(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const t=await we(this,Qc,kh).call(this,"text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await we(this,Qc,kh).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const s=t[1]==="e3010170"?"ipfs":"ipns",i=parseInt(t[4],16);if(t[5].length===i*2)return`${s}://${Nae("0x"+t[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;de(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<nU.length;r++){const s=t.match(nU[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const o=qC(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:t});const l=await this.getAddress();if(l==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const f=(s[2]||"").split("/");if(f.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const h=f[1],p=new hl(f[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const E=await p.ownerOf(h);if(l!==E)return e.push({type:"!owner",value:E}),{url:null,linkage:e};e.push({type:"owner",value:E})}else if(i==="erc1155"){const E=await p.balanceOf(l,h);if(!E)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:E.toString()})}let g=await p[o](h);if(g==null||g==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:g}),i==="erc1155"&&(g=g.replace("{id}",wl(h,32).substring(2)),e.push({type:"metadata-url-expanded",value:g})),g.match(/^ipfs:/i)&&(g=qC(g)),e.push({type:"metadata-url",value:g});let y={};const b=await new jo(g).send();b.assertOk();try{y=b.bodyJson}catch{try{e.push({type:"!metadata",value:b.bodyText})}catch{const S=b.body;return S&&e.push({type:"!metadata",value:Ne(S)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!y)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(y)});let v=y.image;if(typeof v!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!v.match(/^(https:\/\/|data:)/i)){if(v.match(B6)==null)return e.push({type:"!imageUrl-ipfs",value:v}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:v}),v=qC(v)}return e.push({type:"url",value:v}),{linkage:e,url:v}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return de(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async fromName(e,t){var s;let r=t;for(;;){if(r===""||r==="."||t!=="eth"&&r==="eth")return null;const i=await we(s=jh,wE,M6).call(s,e,r);if(i!=null){const o=new jh(e,i,t);return r!==t&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Yc=new WeakMap,Pu=new WeakMap,Qc=new WeakSet,kh=async function(e,t){t=(t||[]).slice();const r=N(this,Pu).interface;t.unshift(N2(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),de(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[Mle(this.name,255),r.encodeFunctionData(s,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const i=await N(this,Pu)[e](...t);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!dr(i,"CALL_EXCEPTION"))throw i}return null},wE=new WeakSet,M6=async function(e,t){const r=await jh.getEnsAddress(e);try{const i=await new hl(r,["function resolver(bytes32) view returns (address)"],e).resolver(N2(t),{enableCcipRead:!0});return i===fy?null:i}catch(s){throw s}return null},ce(jh,wE);let dE=jh;const rU=BigInt(0);function yt(n,e){return function(t){return t==null?e:n(t)}}function Ey(n,e){return t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(r=>n(r))}}function t0(n,e){return t=>{const r={};for(const s in n){let i=s;if(e&&s in e&&!(i in t)){for(const o of e[s])if(o in t){i=o;break}}try{const o=n[s](t[i]);o!==void 0&&(r[s]=o)}catch(o){const l=o instanceof Error?o.message:"not-an-error";de(!1,`invalid value for value.${s} (${l})`,"BAD_DATA",{value:t})}}return r}}function Cue(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}Q(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function op(n){return Q(Xt(n,!0),"invalid data","value",n),n}function hr(n){return Q(Xt(n,32),"invalid hash","value",n),n}const _ue=t0({address:Lt,blockHash:hr,blockNumber:it,data:op,index:it,removed:yt(Cue,!1),topics:Ey(hr),transactionHash:hr,transactionIndex:it},{index:["logIndex"]});function Sue(n){return _ue(n)}const Nue=t0({hash:yt(hr),parentHash:hr,parentBeaconBlockRoot:yt(hr,null),number:it,timestamp:it,nonce:yt(op),difficulty:ke,gasLimit:ke,gasUsed:ke,stateRoot:yt(hr,null),receiptsRoot:yt(hr,null),blobGasUsed:yt(ke,null),excessBlobGas:yt(ke,null),miner:yt(Lt),prevRandao:yt(hr,null),extraData:op,baseFeePerGas:yt(ke)},{prevRandao:["mixHash"]});function Tue(n){const e=Nue(n);return e.transactions=n.transactions.map(t=>typeof t=="string"?t:L6(t)),e}const Oue=t0({transactionIndex:it,blockNumber:it,transactionHash:hr,address:Lt,topics:Ey(hr),data:op,index:it,blockHash:hr},{index:["logIndex"]});function xue(n){return Oue(n)}const Iue=t0({to:yt(Lt,null),from:yt(Lt,null),contractAddress:yt(Lt,null),index:it,root:yt(Ne),gasUsed:ke,blobGasUsed:yt(ke,null),logsBloom:yt(op),blockHash:hr,hash:hr,logs:Ey(xue),blockNumber:it,cumulativeGasUsed:ke,effectiveGasPrice:yt(ke),blobGasPrice:yt(ke,null),status:yt(it),type:yt(it,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Rue(n){return Iue(n)}function L6(n){n.to&&ke(n.to)===rU&&(n.to="0x0000000000000000000000000000000000000000");const e=t0({hash:hr,index:yt(it,void 0),type:t=>t==="0x"||t==null?0:it(t),accessList:yt(yf,null),blobVersionedHashes:yt(Ey(hr,!0),null),authorizationList:yt(Ey(t=>{let r;if(t.signature)r=t.signature;else{let s=t.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},t,{yParity:s})}return{address:Lt(t.address),chainId:ke(t.chainId),nonce:ke(t.nonce),signature:ys.from(r)}},!1),null),blockHash:yt(hr,null),blockNumber:yt(it,null),transactionIndex:yt(it,null),from:Lt,gasPrice:yt(ke),maxPriorityFeePerGas:yt(ke),maxFeePerGas:yt(ke),maxFeePerBlobGas:yt(ke,null),gasLimit:ke,to:yt(Lt,null),value:ke,nonce:it,data:op,creates:yt(Lt,null),chainId:yt(ke,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(e.to==null&&e.creates==null&&(e.creates=bce(e)),(n.type===1||n.type===2)&&n.accessList==null&&(e.accessList=[]),n.signature?e.signature=ys.from(n.signature):e.signature=ys.from(n),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&ke(e.blockHash)===rU&&(e.blockHash=null),e}const Pue="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class n0{constructor(e){ne(this,"name");We(this,{name:e})}clone(){return new n0(this.name)}}class nv extends n0{constructor(t,r){t==null&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);ne(this,"effectiveBlock");ne(this,"txBase");ne(this,"txCreate");ne(this,"txDataZero");ne(this,"txDataNonzero");ne(this,"txAccessListStorageKey");ne(this,"txAccessListAddress");const s={effectiveBlock:t};function i(o,l){let f=(r||{})[o];f==null&&(f=l),Q(typeof f=="number",`invalud value for ${o}`,"costs",r),s[o]=f}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),We(this,s)}clone(){return new nv(this.effectiveBlock,this)}}class rv extends n0{constructor(t,r){super("org.ethers.plugins.network.Ens");ne(this,"address");ne(this,"targetNetwork");We(this,{address:t||Pue,targetNetwork:r??1})}clone(){return new rv(this.address,this.targetNetwork)}}var xy,Iy;class Due extends n0{constructor(t,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");ce(this,xy);ce(this,Iy);H(this,xy,t),H(this,Iy,r)}get url(){return N(this,xy)}get processFunc(){return N(this,Iy)}clone(){return this}}xy=new WeakMap,Iy=new WeakMap;const VC=new Map;var Nd,Td,Zc;const zh=class zh{constructor(e,t){ce(this,Nd);ce(this,Td);ce(this,Zc);H(this,Nd,e),H(this,Td,ke(t)),H(this,Zc,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return N(this,Nd)}set name(e){H(this,Nd,e)}get chainId(){return N(this,Td)}set chainId(e){H(this,Td,ke(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===ke(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===ke(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===ke(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(N(this,Zc).values())}attachPlugin(e){if(N(this,Zc).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return N(this,Zc).set(e.name,e.clone()),this}getPlugin(e){return N(this,Zc).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new zh(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new nv;let r=t.txBase;if(e.to==null&&(r+=t.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=t.txDataZero:r+=t.txDataNonzero;if(e.accessList){const s=yf(e.accessList);for(const i in s)r+=t.txAccessListAddress+t.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(Uue(),e==null)return zh.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=VC.get(e);if(t)return t();if(typeof e=="bigint")return new zh("unknown",e);Q(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Q(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new zh(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new rv(e.ensAddress,e.ensNetwork)),t}Q(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const r=VC.get(e);r&&Q(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),VC.set(e,t)}};Nd=new WeakMap,Td=new WeakMap,Zc=new WeakMap;let Ra=zh;function sU(n,e){const t=String(n);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const r=t.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function iU(n){return new Due(n,async(e,t,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const l=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:sU(l.maxFee,9),maxPriorityFeePerGas:sU(l.maxPriorityFee,9)}}catch(i){de(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let aU=!1;function Uue(){if(aU)return;aU=!0;function n(e,t,r){const s=function(){const i=new Ra(e,t);return r.ensNetwork!=null&&i.attachPlugin(new rv(null,r.ensNetwork)),i.attachPlugin(new nv),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Ra.register(e,s),Ra.register(t,s),r.altNames&&r.altNames.forEach(i=>{Ra.register(i,s)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[iU("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[iU("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function P2(n){return JSON.parse(JSON.stringify(n))}var _o,li,Jc,va,Od,vb;class kue{constructor(e){ce(this,Od);ce(this,_o);ce(this,li);ce(this,Jc);ce(this,va);H(this,_o,e),H(this,li,null),H(this,Jc,4e3),H(this,va,-2)}get pollingInterval(){return N(this,Jc)}set pollingInterval(e){H(this,Jc,e)}start(){N(this,li)||(H(this,li,N(this,_o)._setTimeout(we(this,Od,vb).bind(this),N(this,Jc))),we(this,Od,vb).call(this))}stop(){N(this,li)&&(N(this,_o)._clearTimeout(N(this,li)),H(this,li,null))}pause(e){this.stop(),e&&H(this,va,-2)}resume(){this.start()}}_o=new WeakMap,li=new WeakMap,Jc=new WeakMap,va=new WeakMap,Od=new WeakSet,vb=async function(){try{const e=await N(this,_o).getBlockNumber();if(N(this,va)===-2){H(this,va,e);return}if(e!==N(this,va)){for(let t=N(this,va)+1;t<=e;t++){if(N(this,li)==null)return;await N(this,_o).emit("block",t)}H(this,va,e)}}catch{}N(this,li)!=null&&H(this,li,N(this,_o)._setTimeout(we(this,Od,vb).bind(this),N(this,Jc)))};var Du,Uu,Xc;class nN{constructor(e){ce(this,Du);ce(this,Uu);ce(this,Xc);H(this,Du,e),H(this,Xc,!1),H(this,Uu,t=>{this._poll(t,N(this,Du))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){N(this,Xc)||(H(this,Xc,!0),N(this,Uu).call(this,-2),N(this,Du).on("block",N(this,Uu)))}stop(){N(this,Xc)&&(H(this,Xc,!1),N(this,Du).off("block",N(this,Uu)))}pause(e){this.stop()}resume(){this.start()}}Du=new WeakMap,Uu=new WeakMap,Xc=new WeakMap;var xd,So;class Bue extends nN{constructor(t,r){super(t);ce(this,xd);ce(this,So);H(this,xd,r),H(this,So,-2)}pause(t){t&&H(this,So,-2),super.pause(t)}async _poll(t,r){const s=await r.getBlock(N(this,xd));s!=null&&(N(this,So)===-2?H(this,So,s.number):s.number>N(this,So)&&(r.emit(N(this,xd),s.number),H(this,So,s.number)))}}xd=new WeakMap,So=new WeakMap;var bE;class Mue extends nN{constructor(t,r){super(t);ce(this,bE);H(this,bE,P2(r))}async _poll(t,r){throw new Error("@TODO")}}bE=new WeakMap;var Id;class Lue extends nN{constructor(t,r){super(t);ce(this,Id);H(this,Id,r)}async _poll(t,r){const s=await r.getTransactionReceipt(N(this,Id));s&&r.emit(N(this,Id),s)}}Id=new WeakMap;var No,Rd,Pd,el,ui,EE,$6;class rN{constructor(e,t){ce(this,EE);ce(this,No);ce(this,Rd);ce(this,Pd);ce(this,el);ce(this,ui);H(this,No,e),H(this,Rd,P2(t)),H(this,Pd,we(this,EE,$6).bind(this)),H(this,el,!1),H(this,ui,-2)}start(){N(this,el)||(H(this,el,!0),N(this,ui)===-2&&N(this,No).getBlockNumber().then(e=>{H(this,ui,e)}),N(this,No).on("block",N(this,Pd)))}stop(){N(this,el)&&(H(this,el,!1),N(this,No).off("block",N(this,Pd)))}pause(e){this.stop(),e&&H(this,ui,-2)}resume(){this.start()}}No=new WeakMap,Rd=new WeakMap,Pd=new WeakMap,el=new WeakMap,ui=new WeakMap,EE=new WeakSet,$6=async function(e){if(N(this,ui)===-2)return;const t=P2(N(this,Rd));t.fromBlock=N(this,ui)+1,t.toBlock=e;const r=await N(this,No).getLogs(t);if(r.length===0){N(this,ui)<e-60&&H(this,ui,e-60);return}for(const s of r)N(this,No).emit(N(this,Rd),s),H(this,ui,s.blockNumber)};const $ue=BigInt(2),Fue=10;function nb(n){return n&&typeof n.then=="function"}function Ab(n,e){return n+":"+JSON.stringify(e,(t,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class F6{constructor(e){ne(this,"name");We(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function Hue(n){return JSON.parse(JSON.stringify(n))}function D2(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function GC(n,e){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(Xt(n,32)){const t=n.toLowerCase();return{type:"transaction",tag:Ab("tx",{hash:t}),hash:t}}if(n.orphan){const t=n;return{type:"orphan",tag:Ab("orphan",t),filter:Hue(t)}}if(n.address||n.topics){const t=n,r={topics:(t.topics||[]).map(s=>s==null?null:Array.isArray(s)?D2(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(t.address){const s=[],i=[],o=l=>{Xt(l)?s.push(l):i.push((async()=>{s.push(await zr(l,e))})())};Array.isArray(t.address)?t.address.forEach(o):o(t.address),i.length&&await Promise.all(i),r.address=D2(s.map(l=>l.toLowerCase()))}return{filter:r,tag:Ab("event",r),type:"event"}}Q(!1,"unknown ProviderEvent","event",n)}function KC(){return new Date().getTime()}const jue={cacheTimeout:250,pollingInterval:4e3};var Nr,tl,Tr,Dd,Bs,ku,nl,To,Ry,fi,Ud,kd,ht,Is,U2,k2,em,B2,tm,Cb;class zue{constructor(e,t){ce(this,ht);ce(this,Nr);ce(this,tl);ce(this,Tr);ce(this,Dd);ce(this,Bs);ce(this,ku);ce(this,nl);ce(this,To);ce(this,Ry);ce(this,fi);ce(this,Ud);ce(this,kd);if(H(this,kd,Object.assign({},jue,t||{})),e==="any")H(this,ku,!0),H(this,Bs,null);else if(e){const r=Ra.from(e);H(this,ku,!1),H(this,Bs,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else H(this,ku,!1),H(this,Bs,null);H(this,To,-1),H(this,nl,new Map),H(this,Nr,new Map),H(this,tl,new Map),H(this,Tr,null),H(this,Dd,!1),H(this,Ry,1),H(this,fi,new Map),H(this,Ud,!1)}get pollingInterval(){return N(this,kd).pollingInterval}get provider(){return this}get plugins(){return Array.from(N(this,tl).values())}attachPlugin(e){if(N(this,tl).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return N(this,tl).set(e.name,e.connect(this)),this}getPlugin(e){return N(this,tl).get(e)||null}get disableCcipRead(){return N(this,Ud)}set disableCcipRead(e){H(this,Ud,!!e)}async ccipReadFetch(e,t,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=t.toLowerCase(),o=[];for(let l=0;l<r.length;l++){const f=r[l],h=f.replace("{sender}",s).replace("{data}",i),p=new jo(h);f.indexOf("{data}")===-1&&(p.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:p,index:l,urls:r});let g="unknown error",y;try{y=await p.send()}catch(b){o.push(b.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:p,result:{error:b}});continue}try{const b=y.bodyJson;if(b.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:p,result:b}),b.data;b.message&&(g=b.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:p,result:b})}catch{}de(y.statusCode<400||y.statusCode>=500,`response not found during CCIP fetch: ${g}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:f,errorMessage:g}}),o.push(g)}de(!1,`error encountered during CCIP fetch: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,t){return new cue(Tue(e),this)}_wrapLog(e,t){return new e0(Sue(e),this)}_wrapTransactionReceipt(e,t){return new S6(Rue(e),this)}_wrapTransactionResponse(e,t){return new by(L6(e),this)}_detectNetwork(){de(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){de(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=it(await we(this,ht,Is).call(this,{method:"getBlockNumber"}),"%response");return N(this,To)>=0&&H(this,To,e),e}_getAddress(e){return zr(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Xt(e))return Xt(e,32)?e:Hi(e);if(typeof e=="bigint"&&(e=it(e,"blockTag")),typeof e=="number")return e>=0?Hi(e):N(this,To)>=0?Hi(N(this,To)+e):this.getBlockNumber().then(t=>Hi(t+e));Q(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(f=>f==null?null:Array.isArray(f)?D2(f.map(h=>h.toLowerCase())):f.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(f,h,p)=>{let g;switch(f.length){case 0:break;case 1:g=f[0];break;default:f.sort(),g=f}if(r&&(h!=null||p!=null))throw new Error("invalid filter");const y={};return g&&(y.address=g),t.length&&(y.topics=t),h&&(y.fromBlock=h),p&&(y.toBlock=p),r&&(y.blockHash=r),y};let i=[];if(e.address)if(Array.isArray(e.address))for(const f of e.address)i.push(this._getAddress(f));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let l;return"toBlock"in e&&(l=this._getBlockTag(e.toBlock)),i.filter(f=>typeof f!="string").length||o!=null&&typeof o!="string"||l!=null&&typeof l!="string"?Promise.all([Promise.all(i),o,l]).then(f=>s(f[0],f[1],f[2])):s(i,o,l)}_getTransactionRequest(e){const t=fE(e),r=[];if(["to","from"].forEach(s=>{if(t[s]==null)return;const i=zr(t[s],this);nb(i)?r.push(async function(){t[s]=await i}()):t[s]=i}),t.blockTag!=null){const s=this._getBlockTag(t.blockTag);nb(s)?r.push(async function(){t.blockTag=await s}()):t.blockTag=s}return r.length?async function(){return await Promise.all(r),t}():t}async getNetwork(){if(N(this,Bs)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw N(this,Bs)===s&&H(this,Bs,null),i}})();return H(this,Bs,s),(await s).clone()}const e=N(this,Bs),[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(N(this,ku)?(this.emit("network",r,t),N(this,Bs)===e&&H(this,Bs,Promise.resolve(r))):de(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await $r({_block:we(this,ht,B2).call(this,"latest",!1),gasPrice:(async()=>{try{const p=await we(this,ht,Is).call(this,{method:"getGasPrice"});return ke(p,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const p=await we(this,ht,Is).call(this,{method:"getPriorityFee"});return ke(p,"%response")}catch{}return null})()});let l=null,f=null;const h=this._wrapBlock(s,e);return h&&h.baseFeePerGas&&(f=o??BigInt("1000000000"),l=h.baseFeePerGas*$ue+f),new XD(i,l,f)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new jo(r.url),i=await r.processFunc(t,this,s);return new XD(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return nb(t)&&(t=await t),ke(await we(this,ht,Is).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:r}=await $r({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await we(this,ht,k2).call(this,we(this,ht,U2).call(this,t,r,e.enableCcipRead?0:-1))}async getBalance(e,t){return ke(await we(this,ht,em).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return it(await we(this,ht,em).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return Ne(await we(this,ht,em).call(this,{method:"getCode"},e,t))}async getStorage(e,t,r){const s=ke(t,"position");return Ne(await we(this,ht,em).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:t,hash:r,network:s}=await $r({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=sE.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(t)}async getBlock(e,t){const{network:r,params:s}=await $r({network:this.getNetwork(),params:we(this,ht,B2).call(this,e,!!t)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:t,params:r}=await $r({network:this.getNetwork(),params:we(this,ht,Is).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){const{network:t,params:r}=await $r({network:this.getNetwork(),params:we(this,ht,Is).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await we(this,ht,Is).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){const{result:t}=await $r({network:this.getNetwork(),result:we(this,ht,Is).call(this,{method:"getTransactionResult",hash:e})});return t==null?null:Ne(t)}async getLogs(e){let t=this._getFilter(e);nb(t)&&(t=await t);const{network:r,params:s}=await $r({network:this.getNetwork(),params:we(this,ht,Is).call(this,{method:"getLogs",filter:t})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){de(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await dE.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=Lt(e);const t=N2(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await dE.getEnsAddress(this),i=await new hl(r,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(i==null||i===fy)return null;const l=await new hl(i,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(l)!==e?null:l}catch(r){if(dr(r,"BAD_DATA")&&r.value==="0x"||dr(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,t,r){const s=t??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let l=null;const f=async h=>{try{const p=await this.getTransactionReceipt(e);if(p!=null&&h-p.blockNumber+1>=s){i(p),l&&(clearTimeout(l),l=null);return}}catch(p){console.log("EEE",p)}this.once("block",f)};r!=null&&(l=setTimeout(()=>{l!=null&&(l=null,this.off("block",f),o(ln("timeout","TIMEOUT",{reason:"timeout"})))},r)),f(await this.getBlockNumber())})}async waitForBlock(e){de(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=N(this,fi).get(e);t&&(t.timer&&clearTimeout(t.timer),N(this,fi).delete(e))}_setTimeout(e,t){t==null&&(t=0);const r=yg(this,Ry)._++,s=()=>{N(this,fi).delete(r),e()};if(this.paused)N(this,fi).set(r,{timer:null,func:s,time:t});else{const i=setTimeout(s,t);N(this,fi).set(r,{timer:i,func:s,time:KC()})}return r}_forEachSubscriber(e){for(const t of N(this,Nr).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new F6(e.type);case"block":{const t=new kue(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new Bue(this,e.type);case"event":return new rN(this,e.filter);case"transaction":return new Lue(this,e.hash);case"orphan":return new Mue(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const r of N(this,Nr).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),N(this,Tr)!=null&&t.pause(N(this,Tr));break}}async on(e,t){const r=await we(this,ht,Cb).call(this,e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,N(this,Tr)!=null&&r.subscriber.pause(N(this,Tr))),this}async once(e,t){const r=await we(this,ht,Cb).call(this,e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,N(this,Tr)!=null&&r.subscriber.pause(N(this,Tr))),this}async emit(e,...t){const r=await we(this,ht,tm).call(this,e,t);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const l=new J4(this,o?null:i,e);try{i.call(this,...t,l)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),N(this,Nr).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await we(this,ht,tm).call(this,e);return r?r.listeners.length:0}let t=0;for(const{listeners:r}of N(this,Nr).values())t+=r.length;return t}async listeners(e){if(e){const r=await we(this,ht,tm).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let t=[];for(const{listeners:r}of N(this,Nr).values())t=t.concat(r.map(({listener:s})=>s));return t}async off(e,t){const r=await we(this,ht,tm).call(this,e);if(!r)return this;if(t){const s=r.listeners.map(({listener:i})=>i).indexOf(t);s>=0&&r.listeners.splice(s,1)}return(!t||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),N(this,Nr).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:r,subscriber:s}=await we(this,ht,Cb).call(this,e);r&&s.stop(),N(this,Nr).delete(t)}else for(const[t,{started:r,subscriber:s}]of N(this,Nr))r&&s.stop(),N(this,Nr).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return N(this,Dd)}destroy(){this.removeAllListeners();for(const e of N(this,fi).keys())this._clearTimeout(e);H(this,Dd,!0)}get paused(){return N(this,Tr)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(H(this,To,-1),N(this,Tr)!=null){if(N(this,Tr)==!!e)return;de(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),H(this,Tr,!!e);for(const t of N(this,fi).values())t.timer&&clearTimeout(t.timer),t.time=KC()-t.time}resume(){if(N(this,Tr)!=null){this._forEachSubscriber(e=>e.resume()),H(this,Tr,null);for(const e of N(this,fi).values()){let t=e.time;t<0&&(t=0),e.time=KC(),setTimeout(e.func,t)}}}}Nr=new WeakMap,tl=new WeakMap,Tr=new WeakMap,Dd=new WeakMap,Bs=new WeakMap,ku=new WeakMap,nl=new WeakMap,To=new WeakMap,Ry=new WeakMap,fi=new WeakMap,Ud=new WeakMap,kd=new WeakMap,ht=new WeakSet,Is=async function(e){const t=N(this,kd).cacheTimeout;if(t<0)return await this._perform(e);const r=Ab(e.method,e);let s=N(this,nl).get(r);return s||(s=this._perform(e),N(this,nl).set(r,s),setTimeout(()=>{N(this,nl).get(r)===s&&N(this,nl).delete(r)},t)),await s},U2=async function(e,t,r){de(r<Fue,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const s=fE(e);try{return Ne(await this._perform({method:"call",transaction:s,blockTag:t}))}catch(i){if(!this.disableCcipRead&&$S(i)&&i.data&&r>=0&&t==="latest"&&s.to!=null&&yn(i.data,0,4)==="0x556f1830"){const o=i.data,l=await zr(s.to,this);let f;try{f=Wue(yn(i.data,4))}catch(g){de(!1,g.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}de(f.sender.toLowerCase()===l.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:f.errorArgs}});const h=await this.ccipReadFetch(s,f.calldata,f.urls);de(h!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:f.errorArgs}});const p={to:l,data:wn([f.selector,Kue([h,f.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:p});try{const g=await we(this,ht,U2).call(this,p,t,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},p),result:g}),g}catch(g){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},p),error:g}),g}}throw i}},k2=async function(e){const{value:t}=await $r({network:this.getNetwork(),value:e});return t},em=async function(e,t,r){let s=this._getAddress(t),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await we(this,ht,k2).call(this,we(this,ht,Is).call(this,Object.assign(e,{address:s,blockTag:i})))},B2=async function(e,t){if(Xt(e,32))return await we(this,ht,Is).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await we(this,ht,Is).call(this,{method:"getBlock",blockTag:r,includeTransactions:t})},tm=async function(e,t){let r=await GC(e,this);return r.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(r=await GC({orphan:"drop-log",log:t[0]},this)),N(this,Nr).get(r.tag)||null},Cb=async function(e){const t=await GC(e,this),r=t.tag;let s=N(this,Nr).get(r);return s||(s={subscriber:this._getSubscriber(t),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},N(this,Nr).set(r,s)),s};function que(n,e){try{const t=M2(n,e);if(t)return tE(t)}catch{}return null}function M2(n,e){if(n==="0x")return null;try{const t=it(yn(n,e,e+32)),r=it(yn(n,t,t+32));return yn(n,t+32,t+32+r)}catch{}return null}function oU(n){const e=Mn(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function Vue(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}const Gue=new Uint8Array([]);function Kue(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(Gue),t+=32;for(let r=0;r<n.length;r++){const s=ut(n[r]);e[r]=oU(t),e.push(oU(s.length)),e.push(Vue(s)),t+=32+Math.ceil(s.length/32)*32}return wn(e)}const cU="0x0000000000000000000000000000000000000000000000000000000000000000";function Wue(n){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};de(Yh(n)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=yn(n,0,32);de(yn(t,0,12)===yn(cU,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=yn(t,12);try{const r=[],s=it(yn(n,32,64)),i=it(yn(n,s,s+32)),o=yn(n,s+32);for(let l=0;l<i;l++){const f=que(o,l*32);if(f==null)throw new Error("abort");r.push(f)}e.urls=r}catch{de(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=M2(n,64);if(r==null)throw new Error("abort");e.calldata=r}catch{de(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}de(yn(n,100,128)===yn(cU,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=yn(n,96,100);try{const r=M2(n,128);if(r==null)throw new Error("abort");e.extraData=r}catch{de(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Yl(n,e){if(n.provider)return n.provider;de(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function lU(n,e){let t=fE(e);if(t.to!=null&&(t.to=zr(t.to,n)),t.from!=null){const r=t.from;t.from=Promise.all([n.getAddress(),zr(r,n)]).then(([s,i])=>(Q(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else t.from=n.getAddress();return await $r(t)}class Yue{constructor(e){ne(this,"provider");We(this,{provider:e||null})}async getNonce(e){return Yl(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await lU(this,e)}async populateTransaction(e){const t=Yl(this,"populateTransaction"),r=await lU(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=ke(r.chainId);Q(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?Q(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&Q(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await t.getFeeData();de(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await t.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const l=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=l,r.maxPriorityFeePerGas=l}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(de(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):de(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await $r(r)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await Yl(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return Yl(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Yl(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Yl(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=Yl(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=sE.from(r);return await t.broadcastTransaction(await this.signTransaction(s))}authorize(e){de(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function Que(n){return JSON.parse(JSON.stringify(n))}var Br,Aa,Bu,rl,Mu,Bd,El,L2,$2;class H6{constructor(e){ce(this,El);ce(this,Br);ce(this,Aa);ce(this,Bu);ce(this,rl);ce(this,Mu);ce(this,Bd);H(this,Br,e),H(this,Aa,null),H(this,Bu,we(this,El,L2).bind(this)),H(this,rl,!1),H(this,Mu,null),H(this,Bd,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){N(this,rl)||(H(this,rl,!0),we(this,El,L2).call(this,-2))}stop(){N(this,rl)&&(H(this,rl,!1),H(this,Bd,!0),we(this,El,$2).call(this),N(this,Br).off("block",N(this,Bu)))}pause(e){e&&we(this,El,$2).call(this),N(this,Br).off("block",N(this,Bu))}resume(){this.start()}}Br=new WeakMap,Aa=new WeakMap,Bu=new WeakMap,rl=new WeakMap,Mu=new WeakMap,Bd=new WeakMap,El=new WeakSet,L2=async function(e){try{N(this,Aa)==null&&H(this,Aa,this._subscribe(N(this,Br)));let t=null;try{t=await N(this,Aa)}catch(i){if(!dr(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(t==null){H(this,Aa,null),N(this,Br)._recoverSubscriber(this,this._recover(N(this,Br)));return}const r=await N(this,Br).getNetwork();if(N(this,Mu)||H(this,Mu,r),N(this,Mu).chainId!==r.chainId)throw new Error("chaid changed");if(N(this,Bd))return;const s=await N(this,Br).send("eth_getFilterChanges",[t]);await this._emitResults(N(this,Br),s)}catch(t){console.log("@TODO",t)}N(this,Br).once("block",N(this,Bu))},$2=function(){const e=N(this,Aa);e&&(H(this,Aa,null),e.then(t=>{N(this,Br).destroyed||N(this,Br).send("eth_uninstallFilter",[t])}))};var Lu;class Zue extends H6{constructor(t,r){super(t);ce(this,Lu);H(this,Lu,Que(r))}_recover(t){return new rN(t,N(this,Lu))}async _subscribe(t){return await t.send("eth_newFilter",[N(this,Lu)])}async _emitResults(t,r){for(const s of r)t.emit(N(this,Lu),t._wrapLog(s,t._network))}}Lu=new WeakMap;class Jue extends H6{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const r of t)e.emit("pending",r)}}const Xue="bigint,boolean,function,number,string,symbol".split(/,/g);function _b(n){if(n==null||Xue.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(_b);if(typeof n=="object")return Object.keys(n).reduce((e,t)=>(e[t]=n[t],e),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function efe(n){return new Promise(e=>{setTimeout(e,n)})}function Th(n){return n&&n.toLowerCase()}function uU(n){return n&&typeof n.pollingInterval=="number"}const j6={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Xh extends Yue{constructor(t,r){super(t);ne(this,"address");r=Lt(r),We(this,{address:r})}connect(t){de(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const r=_b(t),s=[];if(r.from){const o=r.from;s.push((async()=>{const l=await zr(o,this.provider);Q(l!=null&&l.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=l})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await zr(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(t){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(t);return await new Promise((i,o)=>{const l=[1e3,100];let f=0;const h=async()=>{try{const p=await this.provider.getTransaction(s);if(p!=null){i(p.replaceableTransaction(r));return}}catch(p){if(dr(p,"CANCELLED")||dr(p,"BAD_DATA")||dr(p,"NETWORK_ERROR")||dr(p,"UNSUPPORTED_OPERATION")){p.info==null&&(p.info={}),p.info.sendTransactionHash=s,o(p);return}if(dr(p,"INVALID_ARGUMENT")&&(f++,p.info==null&&(p.info={}),p.info.sendTransactionHash=s,f>10)){o(p);return}this.provider.emit("error",ln("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:p}))}this.provider._setTimeout(()=>{h()},l.pop()||4e3)};h()})}async signTransaction(t){const r=_b(t);if(r.from){const i=await zr(r.from,this.provider);Q(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(t){const r=typeof t=="string"?Ba(t):t;return await this.provider.send("personal_sign",[Ne(r),this.address.toLowerCase()])}async signTypedData(t,r,s){const i=_b(s),o=await uE.resolveNames(t,r,i,async l=>{const f=await zr(l);return Q(f!=null,"TypedData does not support null address","value",l),f});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(uE.getPayload(o.domain,r,o.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const r=typeof t=="string"?Ba(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Ne(r)])}}var $u,Md,Oo,Ca,$i,hi,ls,Py,F2;class tfe extends zue{constructor(t,r){super(t,r);ce(this,Py);ce(this,$u);ce(this,Md);ce(this,Oo);ce(this,Ca);ce(this,$i);ce(this,hi);ce(this,ls);H(this,Md,1),H(this,$u,Object.assign({},j6,r||{})),H(this,Oo,[]),H(this,Ca,null),H(this,hi,null),H(this,ls,null);{let i=null;const o=new Promise(l=>{i=l});H(this,$i,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(Q(!s||t!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&t!=null&&H(this,hi,Ra.from(t))):s&&(Q(t==null||s.matches(t),"staticNetwork MUST match network object","options",r),H(this,hi,s))}_getOption(t){return N(this,$u)[t]}get _network(){return de(N(this,hi),"network is not available yet","NETWORK_ERROR"),N(this,hi)}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let s=t.transaction;if(s&&s.type!=null&&ke(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(t);return r!=null?await this.send(r.method,r.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(N(this,hi))return N(this,hi)}else return t;return N(this,ls)?await N(this,ls):this.ready?(H(this,ls,(async()=>{try{const r=Ra.from(ke(await this.send("eth_chainId",[])));return H(this,ls,null),r}catch(r){throw H(this,ls,null),r}})()),await N(this,ls)):(H(this,ls,(async()=>{const r={id:yg(this,Md)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],H(this,ls,null)}catch(i){throw H(this,ls,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Ra.from(ke(s.result));throw this.getRpcError(r,s)})()),await N(this,ls))}_start(){N(this,$i)==null||N(this,$i).resolve==null||(N(this,$i).resolve(),H(this,$i,null),(async()=>{for(;N(this,hi)==null&&!this.destroyed;)try{H(this,hi,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",ln("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await efe(1e3)}we(this,Py,F2).call(this)})())}async _waitUntilReady(){if(N(this,$i)!=null)return await N(this,$i).promise}_getSubscriber(t){return t.type==="pending"?new Jue(this):t.type==="event"?this._getOption("polling")?new rN(this,t.filter):new Zue(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new F6("orphan"):super._getSubscriber(t)}get ready(){return N(this,$i)==null}getRpcTransaction(t){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(t[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=Hi(ke(t[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{t[s]!=null&&(r[s]=Ne(t[s]))}),t.accessList&&(r.accessList=yf(t.accessList)),t.blobVersionedHashes&&(r.blobVersionedHashes=t.blobVersionedHashes.map(s=>s.toLowerCase())),t.authorizationList&&(r.authorizationList=t.authorizationList.map(s=>{const i=qk(s);return{address:i.address,nonce:Hi(i.nonce),chainId:Hi(i.chainId),yParity:Hi(i.signature.yParity),r:Hi(i.signature.r),s:Hi(i.signature.s)}})),r}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Th(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Th(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[Th(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Th(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(Th):t.filter.address=Th(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,r){const{method:s}=t,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const f=i.message;if(!f.match(/revert/i)&&f.match(/insufficient funds/i))return ln("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:i}});if(f.match(/nonce/i)&&f.match(/too low/i))return ln("nonce has already been used","NONCE_EXPIRED",{transaction:t.params[0],info:{payload:t,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const f=H2(i),h=wy.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",t.params[0],f?f.data:null);return h.info={error:i,payload:t},h}const o=JSON.stringify(rfe(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return ln("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:t,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const f=t.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return ln("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:f,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return ln("nonce has already been used","NONCE_EXPIRED",{transaction:f,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return ln("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:f,info:{error:i}});if(o.match(/only replay-protected/i))return ln("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:f,info:{error:i}}})}let l=!!o.match(/the method .* does not exist/i);return l||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(l=!0),l?ln("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:i,payload:t}}):ln("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:t})}send(t,r){if(this.destroyed)return Promise.reject(ln("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const s=yg(this,Md)._++,i=new Promise((o,l)=>{N(this,Oo).push({resolve:o,reject:l,payload:{method:t,params:r,id:s,jsonrpc:"2.0"}})});return we(this,Py,F2).call(this),i}async getSigner(t){t==null&&(t=0);const r=this.send("eth_accounts",[]);if(typeof t=="number"){const i=await r;if(t>=i.length)throw new Error("no such account");return new Xh(this,i[t])}const{accounts:s}=await $r({network:this.getNetwork(),accounts:r});t=Lt(t);for(const i of s)if(Lt(i)===t)return new Xh(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new Xh(this,r))}destroy(){N(this,Ca)&&(clearTimeout(N(this,Ca)),H(this,Ca,null));for(const{payload:t,reject:r}of N(this,Oo))r(ln("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));H(this,Oo,[]),super.destroy()}}$u=new WeakMap,Md=new WeakMap,Oo=new WeakMap,Ca=new WeakMap,$i=new WeakMap,hi=new WeakMap,ls=new WeakMap,Py=new WeakSet,F2=function(){if(N(this,Ca))return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");H(this,Ca,setTimeout(()=>{H(this,Ca,null);const r=N(this,Oo);for(H(this,Oo,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==N(this,$u).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>N(this,$u).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:l,reject:f,payload:h}of s){if(this.destroyed){f(ln("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:h.method}));continue}const p=o.filter(g=>g.id===h.id)[0];if(p==null){const g=ln("missing response for request","BAD_DATA",{value:o,info:{payload:h}});this.emit("error",g),f(g);continue}if("error"in p){f(this.getRpcError(h,p));continue}l(p.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:l}of s)l(o)}})()}},t))};var sl;class z6 extends tfe{constructor(t,r){super(t,r);ce(this,sl);let s=this._getOption("pollingInterval");s==null&&(s=j6.pollingInterval),H(this,sl,s)}_getSubscriber(t){const r=super._getSubscriber(t);return uU(r)&&(r.pollingInterval=N(this,sl)),r}get pollingInterval(){return N(this,sl)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");H(this,sl,t),this._forEachSubscriber(r=>{uU(r)&&(r.pollingInterval=N(this,sl))})}}sl=new WeakMap;var Ld;class nfe extends z6{constructor(t,r,s){t==null&&(t="http://localhost:8545");super(r,s);ce(this,Ld);typeof t=="string"?H(this,Ld,new jo(t)):H(this,Ld,t.clone())}_getConnection(){return N(this,Ld).clone()}async send(t,r){return await this._start(),await super.send(t,r)}async _send(t){const r=this._getConnection();r.body=JSON.stringify(t),r.setHeader("content-type","application/json");const s=await r.send();s.assertOk();let i=s.bodyJson;return Array.isArray(i)||(i=[i]),i}}Ld=new WeakMap;function H2(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&Xt(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const e in n){const t=H2(n[e]);if(t)return t}return null}if(typeof n=="string")try{return H2(JSON.parse(n))}catch{}return null}function j2(n,e){if(n!=null){if(typeof n.message=="string"&&e.push(n.message),typeof n=="object")for(const t in n)j2(n[t],e);if(typeof n=="string")try{return j2(JSON.parse(n),e)}catch{}}}function rfe(n){const e=[];return j2(n,e),e}var $d,Fd;const cu=class cu extends z6{constructor(t,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});Q(t&&t.request,"invalid EIP-1193 provider","ethereum",t);super(r,i);ce(this,$d);ce(this,Fd);H(this,Fd,null),s&&s.providerInfo&&H(this,Fd,s.providerInfo),H(this,$d,async(o,l)=>{const f={method:o,params:l};this.emit("debug",{action:"sendEip1193Request",payload:f});try{const h=await t.request(f);return this.emit("debug",{action:"receiveEip1193Result",result:h}),h}catch(h){const p=new Error(h.message);throw p.code=h.code,p.data=h.data,p.payload=f,this.emit("debug",{action:"receiveEip1193Error",error:p}),p}})}get providerInfo(){return N(this,Fd)}async send(t,r){return await this._start(),await super.send(t,r)}async _send(t){Q(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const r=await N(this,$d).call(this,t.method,t.params||[]);return[{id:t.id,result:r}]}catch(r){return[{id:t.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(t,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(t,r)}async hasSigner(t){t==null&&(t=0);const r=await this.send("eth_accounts",[]);return typeof t=="number"?r.length>t:(t=t.toLowerCase(),r.filter(s=>s.toLowerCase()===t).length!==0)}async getSigner(t){if(t==null&&(t=0),!await this.hasSigner(t))try{await N(this,$d).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(t)}static async discover(t){if(t==null&&(t={}),t.provider)return new cu(t.provider);const r=t.window?t.window:typeof window<"u"?window:null;if(r==null)return null;const s=t.anyProvider;if(s&&r.ethereum)return new cu(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=t.timeout?t.timeout:300;return i===0?null:await new Promise((o,l)=>{let f=[];const h=y=>{f.push(y.detail),s&&p()},p=()=>{if(clearTimeout(g),f.length)if(t&&t.filter){const y=t.filter(f.map(b=>Object.assign({},b.info)));if(y==null)o(null);else if(y instanceof cu)o(y);else{let b=null;if(y.uuid&&(b=f.filter(E=>y.uuid===E.info.uuid)[0]),b){const{provider:v,info:E}=b;o(new cu(v,void 0,{providerInfo:E}))}else l(ln("filter returned unknown info","UNSUPPORTED_OPERATION",{value:y}))}}else{const{provider:y,info:b}=f[0];o(new cu(y,void 0,{providerInfo:b}))}else o(null);r.removeEventListener("eip6963:announceProvider",h)},g=setTimeout(()=>{p()},i);r.addEventListener("eip6963:announceProvider",h),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};$d=new WeakMap,Fd=new WeakMap;let Gu=cu;const Ql={signMessage:async(n,e,t)=>{if(!e)throw new Error("signMessage - provider is undefined");const r=Xt(n)?n:Ne(Ba(n));return await e.request({method:"personal_sign",params:[r,t]})},estimateGas:async(n,e,t,r)=>{if(!e)throw new Error("estimateGas - provider is undefined");if(!t)throw new Error("estimateGas - address is undefined");if(n.chainNamespace&&n.chainNamespace!=="eip155")throw new Error("estimateGas - chainNamespace is not eip155");const s={from:n.address,to:n.to,data:n.data,type:0},i=new Gu(e,r);return await new Xh(i,t).estimateGas(s)},sendTransaction:async(n,e,t,r)=>{if(!e)throw new Error("sendTransaction - provider is undefined");if(!t)throw new Error("sendTransaction - address is undefined");if(n.chainNamespace&&n.chainNamespace!=="eip155")throw new Error("sendTransaction - chainNamespace is not eip155");const s={to:n.to,value:n.value,gasLimit:n.gas,gasPrice:n.gasPrice,data:n.data,type:0},i=new Gu(e,r),f=await(await new Xh(i,t).sendTransaction(s)).wait();return(f==null?void 0:f.hash)||null},writeContract:async(n,e,t,r)=>{if(!e)throw new Error("writeContract - provider is undefined");if(!t)throw new Error("writeContract - address is undefined");const s=new Gu(e,r),i=new Xh(s,t),o=new hl(n.tokenAddress,n.abi,i);if(!o||!n.method)throw new Error("Contract method is undefined");const l=o[n.method];if(l)return await l(...n.args);throw new Error("Contract method is undefined")},parseWalletCapabilities:n=>{try{return JSON.parse(n)}catch{throw new Error("Error parsing wallet capabilities")}},parseUnits:ck,formatUnits:ok};class sfe extends K4{constructor(){super({adapterType:oe.ADAPTER_TYPES.ETHERS,namespace:oe.CHAIN.EVM}),this.balancePromises={}}async createEthersConfig(e){if(!e.metadata)return;let t;function r(){if(t)return t;if(!(typeof window>"u")&&window.ethereum)return t=window.ethereum,t}async function s(){const{SafeProvider:l}=await Mr(async()=>{const{SafeProvider:y}=await import("./SafeProvider-Du9Jwxrl.js");return{SafeProvider:y}},__vite__mapDeps([42,43,44])),{default:f}=await Mr(async()=>{const{default:y}=await import("./index-CMoJMWhZ.js");return{default:y}},__vite__mapDeps([45,43])),h=new f,p=await h.safe.getInfo(),g=new l(p,h);return await g.connect().catch(y=>{console.info("Failed to auto-connect to Safe:",y)}),g}async function i(){var l,f,h;try{const{createCoinbaseWalletSDK:p}=await Mr(async()=>{const{createCoinbaseWalletSDK:y}=await import("./index-DS2MfUqX.js");return{createCoinbaseWalletSDK:y}},__vite__mapDeps([46,44,1]));return typeof window>"u"?void 0:p({appName:(l=e==null?void 0:e.metadata)==null?void 0:l.name,appLogoUrl:(f=e==null?void 0:e.metadata)==null?void 0:f.icons[0],appChainIds:((h=e.networks)==null?void 0:h.map(y=>y.id))||[1,84532],preference:{options:e.coinbasePreference??"all"}}).getProvider()}catch(p){console.error("Failed to import Coinbase Wallet SDK:",p);return}}const o={metadata:e.metadata};if(e.enableInjected!==!1&&(o.injected=r()),e.enableCoinbase!==!1){const l=await i();l&&(o.coinbase=l)}if(Re.isSafeApp()){const l=await s();l&&(o.safe=l)}return o.EIP6963=e.enableEIP6963!==!1,o}async signMessage(e){const{message:t,address:r,provider:s}=e;if(!s)throw new Error("Provider is undefined");try{return{signature:await Ql.signMessage(t,s,r)}}catch{throw new Error("EthersAdapter:signMessage - Sign message failed")}}async sendTransaction(e){var r;if(!e.provider)throw new Error("Provider is undefined");return{hash:await Ql.sendTransaction({value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),to:e.to,data:e.data?e.data:"0x",gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,address:Ue.state.address},e.provider,Ue.state.address,Number((r=e.caipNetwork)==null?void 0:r.id))}}async writeContract(e){var s;if(!e.provider)throw new Error("Provider is undefined");const{address:t}=Fr.parseCaipAddress(e.caipAddress);return{hash:await Ql.writeContract(e,e.provider,t,Number((s=e.caipNetwork)==null?void 0:s.id))}}async estimateGas(e){const{provider:t,caipNetwork:r,address:s}=e;if(!t)throw new Error("Provider is undefined");try{return{gas:await Ql.estimateGas({data:e.data,to:e.to,address:s},t,s,Number(r==null?void 0:r.id))}}catch{throw new Error("EthersAdapter:estimateGas - Estimate gas failed")}}parseUnits(e){return Ql.parseUnits(e.value,e.decimals)}formatUnits(e){return Ql.formatUnits(e.value,e.decimals)}async syncConnection(e){const{id:t,chainId:r}=e,s=this.connectors.find(f=>f.id===t),i=s==null?void 0:s.provider;if(!i)throw new Error("Provider not found");const o=await i.request({method:"eth_requestAccounts"}),l=await i.request({method:"eth_chainId"});if(this.listenProviderEvents(t,i),!o[0])throw new Error("No accounts found");if(!(s!=null&&s.type))throw new Error("Connector type not found");return{address:o[0],chainId:Number(l)||Number(r),provider:i,type:s.type,id:t}}async syncConnectors(e){var r;this.ethersConfig=await this.createEthersConfig(e),(r=this.ethersConfig)!=null&&r.EIP6963&&this.listenInjectedConnector(!0),Object.keys(this.ethersConfig||{}).filter(s=>s!=="metadata"&&s!=="EIP6963").forEach(s=>{var l,f;const i=s==="coinbase"?"coinbaseWalletSDK":s,o=s===oe.CONNECTOR_ID.INJECTED;this.namespace&&this.addConnector({id:i,explorerId:Ta.ConnectorExplorerIds[i],imageUrl:(l=e==null?void 0:e.connectorImages)==null?void 0:l[i],name:Ta.ConnectorNamesMap[i]||"Unknown",imageId:Ta.ConnectorImageIds[i],type:Ta.ConnectorTypesMap[i]??"EXTERNAL",info:o?void 0:{rdns:i},chain:this.namespace,chains:[],provider:(f=this.ethersConfig)==null?void 0:f[s]})})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async t=>{const r=this.connectors.find(s=>Jn.isLowerCaseMatch(s.id,t.connectorId));if(!r)throw new Error("Connector not found");return await this.disconnect({id:r.id}),t}))}}async syncConnections({connectToFirstConnector:e,getConnectorStorageInfo:t}){var r;await((r=this.connectionManager)==null?void 0:r.syncConnections({connectors:this.connectors,caipNetworks:this.getCaipNetworks(),universalProvider:this.universalProvider,onConnection:this.addConnection.bind(this),onListenProvider:this.listenProviderEvents.bind(this),getConnectionStatusInfo(s){return t(s)}})),e&&this.emitFirstAvailableConnection()}async setUniversalProvider(e){this.universalProvider=e;const t=oe.CONNECTOR_ID.WALLET_CONNECT;return ka.listenWcProvider({universalProvider:e,namespace:oe.CHAIN.EVM,onConnect:r=>this.onConnect(r,t),onDisconnect:()=>this.onDisconnect(t),onAccountsChanged:r=>this.onAccountsChanged(r,t,!1),onChainChanged:r=>this.onChainChanged(r,t)}),this.addConnector(new LS({provider:e,caipNetworks:this.getCaipNetworks(),namespace:oe.CHAIN.EVM})),Promise.resolve()}eip6963EventHandler(e){var t;if(e.detail){const{info:r,provider:s}=e.detail;if(!((t=this.connectors)==null?void 0:t.find(o=>o.name===(r==null?void 0:r.name)))){const o=Ta.ConnectorTypesMap[oe.CONNECTOR_ID.EIP6963],l=(r==null?void 0:r.rdns)||(r==null?void 0:r.name)||(r==null?void 0:r.uuid);this.namespace&&l&&this.addConnector({id:l,type:o,imageUrl:r==null?void 0:r.icon,name:(r==null?void 0:r.name)||"Unknown",provider:s,info:r,chain:this.namespace,chains:[]})}}}listenInjectedConnector(e){if(typeof window<"u"&&e){const t=this.eip6963EventHandler.bind(this);window.addEventListener(xt.EIP6963_ANNOUNCE_EVENT,t),window.dispatchEvent(new Event(xt.EIP6963_REQUEST_EVENT))}}async connect({id:e,address:t,type:r,chainId:s,socialUri:i}){var g;const o=this.connectors.find(y=>Jn.isLowerCaseMatch(y.id,e));if(!o)throw new Error("Connector not found");const l=(g=this.connectionManager)==null?void 0:g.getConnection({address:t,connectorId:e,connections:this.connections,connectors:this.connectors});if(l){const y=l.caipNetwork;if(!y)throw new Error("EthersAdapter:connect - could not find the caipNetwork to connect");if(l.account)return this.emit("accountChanged",{address:l.account.address,chainId:y.id,connector:o}),{address:l.account.address,chainId:y.id,provider:o.provider,type:o.type,id:e}}const f=o==null?void 0:o.provider;if(!f)throw new Error("Provider not found");let h=[],p;if(r===xt.CONNECTOR_TYPE_AUTH){const{address:y,accounts:b}=await Ls.authConnectorAuthenticate({authConnector:f,chainNamespace:oe.CHAIN.EVM,chainId:s,socialUri:i,preferredAccountType:Hs("eip155")}),v=this.getCaipNetworks().find(E=>E.id.toString()===(s==null?void 0:s.toString()));h=[y],this.addConnection({connectorId:e,accounts:b?b.map(E=>({address:E.address})):h.map(E=>({address:E})),caipNetwork:v,auth:{name:be.getConnectedSocialProvider(),username:be.getConnectedSocialUsername()}}),this.emit("accountChanged",{address:h[0],chainId:Number(s),connector:o})}else{h=await f.request({method:"eth_requestAccounts"}),p=await f.request({method:"eth_chainId"});const y=this.getCaipNetworks().find(b=>b.id.toString()===(s==null?void 0:s.toString()));if(p!==s){if(!y)throw new Error("EthersAdapter:connect - could not find the caipNetwork to switch");try{await this.switchNetwork({caipNetwork:y,provider:f,providerType:r})}catch{throw new Error("EthersAdapter:connect - Switch network failed")}}this.emit("accountChanged",{address:h[0],chainId:Number(s),connector:o}),this.addConnection({connectorId:e,accounts:h.map(b=>({address:b})),caipNetwork:y}),o.id!==oe.CONNECTOR_ID.WALLET_CONNECT&&this.listenProviderEvents(e,f)}return{address:h[0],chainId:Number(s),provider:f,type:r,id:e}}async reconnect(e){const{id:t,chainId:r}=e,s=this.connectors.find(i=>i.id===t);s&&s.type==="AUTH"&&r&&await Ls.authConnectorAuthenticate({authConnector:s.provider,chainNamespace:oe.CHAIN.EVM,chainId:r,preferredAccountType:Hs("eip155")})}async getAccounts(e){var o;const t=this.connectors.find(l=>l.id===e.id),r=t==null?void 0:t.provider;if(!r||!t)throw new Error("Provider not found");const s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});if(s)return{accounts:s.accounts.map(({address:l})=>Re.createAccount(oe.CHAIN.EVM,l,"eoa"))};if(e.id===oe.CONNECTOR_ID.AUTH){const l=t.provider;if(!l.user)return{accounts:[]};const{accounts:f,address:h}=l.user;return Promise.resolve({accounts:(f||[{address:h,type:"eoa"}]).map(p=>Re.createAccount(oe.CHAIN.EVM,p.address,p.type))})}return{accounts:(await r.request({method:"eth_requestAccounts"})).map(l=>Re.createAccount(oe.CHAIN.EVM,l,"eoa"))}}async disconnect(e){var t,r;if(e.id){const s=this.connectors.find(o=>Jn.isLowerCaseMatch(o.id,e.id));if(!s)throw new Error("Connector not found");const i=(t=this.connectionManager)==null?void 0:t.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});switch(s.type){case xt.CONNECTOR_TYPE_WALLET_CONNECT:s.provider.session&&s.provider.disconnect();break;case xt.CONNECTOR_TYPE_AUTH:await((r=s.provider)==null?void 0:r.disconnect());break;case xt.CONNECTOR_TYPE_ANNOUNCED:case xt.CONNECTOR_TYPE_EXTERNAL:await this.revokeProviderPermissions(s.provider);break;default:throw new Error("Unsupported provider type")}return s.id&&(this.removeProviderListeners(s.id),this.deleteConnection(s.id)),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:i?[i]:[]}}return this.disconnectAll()}async getBalance(e){const t=e.address,r=this.getCaipNetworks().find(s=>{var i;return s.id.toString()===((i=e.chainId)==null?void 0:i.toString())});if(!t)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&r.chainNamespace===oe.CHAIN.EVM){const s=`${r.caipNetworkId}:${t}`,i=this.balancePromises[s];if(i)return i;const o=be.getNativeBalanceCacheForCaipAddress(s);if(o)return{balance:o.balance,symbol:o.symbol};const l=new nfe(r.rpcUrls.default.http[0],{chainId:r.id,name:r.name});if(l)try{return this.balancePromises[s]=new Promise(async f=>{try{const h=await l.getBalance(t),p=u2(h);be.updateNativeBalanceCache({caipAddress:s,balance:p,symbol:r.nativeCurrency.symbol,timestamp:Date.now()}),f({balance:p,symbol:r.nativeCurrency.symbol})}catch{f({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"}}catch{return{balance:"0.00",symbol:"ETH"}}}return{balance:"0.00",symbol:"ETH"}}async switchNetwork(e){var i,o;const{caipNetwork:t,provider:r,providerType:s}=e;if(s==="AUTH"){await super.switchNetwork(e);return}try{await r.request({method:"wallet_switchEthereumChain",params:[{chainId:Wh.numberToHexString(t.id)}]})}catch(l){if(l.code===Ro.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||l.code===Ro.ERROR_INVALID_CHAIN_ID||l.code===Ro.ERROR_CODE_DEFAULT||((o=(i=l==null?void 0:l.data)==null?void 0:i.originalError)==null?void 0:o.code)===Ro.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)await Wh.addEthereumChain(r,t);else if(s==="ANNOUNCED"||s==="EXTERNAL"||s==="INJECTED")throw new Error("Chain is not supported")}}getWalletConnectProvider(){var e;return(e=this.connectors.find(t=>t.type==="WALLET_CONNECT"))==null?void 0:e.provider}async revokeProviderPermissions(e){try{(await e.request({method:"wallet_getPermissions"})).find(s=>s.parentCapability==="eth_accounts")&&await e.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch(t){console.info("Could not revoke permissions from wallet. Disconnecting...",t)}}async getCapabilities(e){var s,i;const t=At.getProvider(oe.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");const r=(i=(s=t.session)==null?void 0:s.sessionProperties)==null?void 0:i.capabilities;if(r){const l=Ql.parseWalletCapabilities(r)[e];if(l)return l}return await t.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){const t=At.getProvider(oe.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return await t.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){const t=At.getProvider(oe.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return await t.request({method:"wallet_revokePermissions",params:[e]})}async walletGetAssets(e){const t=At.getProvider(oe.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return await t.request({method:"wallet_getAssets",params:[e]})}}function fU(n,e=4){return!n||n.length<e*2+2?n:`${n.slice(0,e+2)}...${n.slice(-e)}`}function ife(){const{open:n}=bae(),{address:e,isConnected:t}=Jee();return Le.jsxs("header",{className:"flex-center-between py-4 border-b-2",children:[Le.jsxs("div",{className:"flex-center",children:[Le.jsx("h1",{className:"text-2xl font-bold",children:"Crowdfunding"}),t&&Le.jsxs("div",{className:"flex ml-3 relative hover:bg-gray-200 p-2 transition-all rounded-lg",children:[Le.jsx("a",{href:`https://sepolia.etherscan.io/address/${e}`,children:fU(e)}),Le.jsx("i",{className:"fa-solid fa-arrow-up-right-from-square"})]})]}),Le.jsx("button",{className:"bg-gray-500 hover:bg-black text-white font-bold py-2 px-4 rounded-xl transition-all",onClick:()=>n(),children:t?fU(e):"Connect Wallet"})]})}const WC="0x8D501c4b41F821E2AF7ddc9D7631f3fB72c8046B",hU=[{inputs:[],stateMutability:"payable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"funder",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Funded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"MINIMUM_USD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"funder",type:"address"}],name:"addressToAmountFunded",outputs:[{internalType:"uint256",name:"fundedAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"fund",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"funders",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getFunderLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"i_owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"funder",type:"address"}],name:"isFunder",outputs:[{internalType:"bool",name:"isFunded",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function afe({blockNumber:n,txHash:e,funder:t,amount:r}){return Le.jsx("div",{className:"hover:shadow-lg",children:Le.jsxs("div",{className:"bg-white shadow-md rounded-lg p-4 mb-4 mt-5",children:[Le.jsxs("p",{className:"text-gray-700",children:[Le.jsx("strong",{children:"Block Number:"})," ",n]}),Le.jsxs("p",{className:"text-gray-700",children:[Le.jsx("strong",{children:"Transaction Hash:"})," ",e]}),Le.jsxs("p",{className:"text-gray-700",children:[Le.jsx("strong",{children:"Funder:"})," ",t]}),Le.jsxs("p",{className:"text-gray-700",children:[Le.jsx("strong",{children:"Amount Funded:"})," ",r," ",Le.jsx("strong",{children:"ETH"})]})]})})}function YC({className:n}){return Le.jsxs("div",{role:"status",children:[Le.jsxs("svg",{"aria-hidden":"true",className:`w-8 h-8 text-gray-200 animate-spin dark:text-white fill-black ${n}`,viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Le.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),Le.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),Le.jsx("span",{className:"sr-only",children:"Loading..."})]})}function ofe(){const[n,e]=Wn.useState(!0),[t,r]=Wn.useState(!1),[s,i]=Wn.useState(!1),{walletProvider:o}=wae("eip155"),[l,f]=Wn.useState(null),[h,p]=Wn.useState(null),[g,y]=Wn.useState(0),[b,v]=Wn.useState(null),[E,A]=Wn.useState([]);function S(k,R=4){return!k||k.length<R*2+2?k:`${k.slice(0,R+2)}...${k.slice(-R)}`}const O=async()=>{e(!0);try{if(o){const k=new Gu(o),R=new hl(WC,hU,k),D=R.filters.Funded,F=await R.queryFilter(D,-1e3);console.log("Events:",F);const $=F.map(j=>({blockNumber:j.blockNumber,txHash:j.transactionHash,funder:j.args.funder,amount:u2(j.args.amount)}));A($.reverse()),console.log("Formatted Events:",E);const B=await k.getBalance(WC);f(u2(B));const q=await R.getFunderLength();p(Number(q))}}finally{e(!1)}},T=async k=>{if(k<=0||isNaN(k)){alert("Please enter a valid amount to fund.");return}r(!0),i(!1);try{if(o){const D=await new Gu(o).getSigner(),$=await new hl(WC,hU,D).fund({value:Vae(String(k))});console.log("Transaction sent:",$),v($.hash),await $.wait(),O()}}catch{alert("An error occurred while funding. Please try again.")}finally{r(!1),i(!0)}};return Wn.useEffect(()=>{O()},[o]),Le.jsxs(Le.Fragment,{children:[Le.jsx("main",{className:"border-b-2 py-5",children:Le.jsxs("div",{className:"grid grid-cols-3 grid-rows-2 gap-4",children:[Le.jsxs("div",{className:"shadow-lg p-5 flex flex-col justify-center rounded-lg border-1 border-gray-100",children:[Le.jsx("h2",{className:"text-lg font-bold mb-3 ",children:"Total Amount Funding"}),n&&Le.jsx(YC,{}),!n&&l&&Le.jsxs("p",{children:[Le.jsx("strong",{className:"font-bold text-black text-2xl",children:l})," ","ETH"]})]}),Le.jsxs("div",{className:"col-span-2 row-span-2 shadow-xl p-5 flex flex-col justify-center rounded-lg border-1 border-gray-100",children:[t?Le.jsxs(Le.Fragment,{children:[Le.jsxs("div",{className:"flex items-center gap-10",children:[Le.jsx(YC,{className:"h-15 w-15"}),Le.jsx("p",{className:"text-lg font-bold",children:"Funding in progress..."})]}),b&&Le.jsxs("div",{className:"mt-4 text-lg flex gap-2",children:["Transaction Hash:"," ",Le.jsx("a",{href:`https://sepolia.etherscan.io/tx/${b}`,children:Le.jsx("p",{className:"text-blue-500 hover:underline",children:S(b)})})]})]}):Le.jsxs("div",{className:"",children:[Le.jsx("h2",{className:"text-lg font-bold mb-3",children:"Donate your ETH"}),Le.jsx("input",{type:"text",placeholder:"Enter amount in ETH",className:"border-2 border-gray-500 p-2 rounded-lg mr-3",onChange:k=>y(Number(k.target.value))}),Le.jsx("button",{className:"bg-gray-500 hover:bg-black text-white font-bold py-2 px-4 cursor-pointer rounded-xl transition-all",onClick:()=>{T(g)},children:"Fund"})]}),s&&Le.jsx("div",{className:"bg-green-100 text-green-800 p-4 rounded-lg mb-4 mt-5",children:Le.jsxs("div",{className:"flex-center-between",children:[Le.jsxs("div",{className:"flex items-center gap-2",children:[Le.jsx("p",{className:"font-bold",children:"Funding successful!"}),Le.jsx("i",{class:"fa-regular fa-face-smile-beam"})]}),Le.jsx("i",{class:"fa-solid fa-xmark text-red-500 cursor-pointer hover:opacity-80",onClick:()=>i(!1)})]})})]}),Le.jsxs("div",{className:"shadow-xl p-5 flex flex-col justify-center rounded-lg border-1 border-gray-100",children:[Le.jsx("h2",{className:"text-lg font-bold mb-3",children:"Funder"}),n&&Le.jsx(YC,{}),!n&&h&&Le.jsx("p",{className:"text-black text-2xl font-bold",children:h})]})]})}),h>0&&Le.jsxs("div",{className:"mt-5",children:[Le.jsx("h1",{className:"text-xl font-bold mb-2 ",children:"Lastest Funding"}),E.map(k=>Le.jsx(afe,{...k},k.blockNumber))]})]})}const cfe="72404a238daa32ae2ccbebec83f33446",lfe=[iae,aae,oae],ufe={name:"Crowdfunding Dapp",description:"A decentralized crowdfunding application",url:"https://mywebsite.com",icons:["https://avatars.mywebsite.com/"]};vae({adapters:[new sfe],networks:lfe,metadata:ufe,projectId:cfe,features:{analytics:!0}});function ffe(){return Le.jsxs("div",{className:"container mx-auto",children:[Le.jsx(ife,{}),Le.jsx(ofe,{})]})}mL.createRoot(document.getElementById("root")).render(Le.jsx(ffe,{}));export{Ge as $,Ue as A,Fy as B,ve as C,Ia as D,sm as E,_he as F,$s as G,_e as H,dz as I,xt as J,Yre as K,_z as L,It as M,Un as N,pe as O,Tie as P,be as Q,Ze as R,Zfe as S,us as T,Lr as U,zL as V,Ln as W,Ut as X,TU as Y,zs as Z,nn as _,bz as a,v9 as a0,Z2 as a1,xU as a2,Ir as a3,tr as a4,t_ as a5,Fi as a6,Fr as a7,At as a8,KL as a9,pfe as aA,P9 as aB,H9 as aC,gfe as aD,hb as aa,Tb as ab,Jn as ac,She as ad,je as ae,s2 as af,xh as ag,r$ as ah,Ls as ai,vhe as aj,Zn as ak,rb as al,Ahe as am,k4 as an,i2 as ao,Zd as ap,Mr as aq,F9 as ar,dfe as as,PU as at,RU as au,mI as av,zd as aw,Ob as ax,bfe as ay,yfe as az,yz as b,Sz as c,g_ as d,A8 as e,z2 as f,gU as g,mfe as h,Cm as i,Gh as j,N8 as k,pb as l,Io as m,C8 as n,kt as o,fz as p,Che as q,l$ as r,h_ as s,vz as t,oe as u,Re as v,jt as w,Ehe as x,Hs as y,L as z};
